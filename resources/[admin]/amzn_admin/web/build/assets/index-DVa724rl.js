var tM=Object.defineProperty;var iM=(i,e,t)=>e in i?tM(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var De=(i,e,t)=>iM(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const Q_=!1;var ng=Array.isArray,nM=Array.prototype.indexOf,sg=Array.from,tx=Object.defineProperty,vl=Object.getOwnPropertyDescriptor,ix=Object.getOwnPropertyDescriptors,sM=Object.prototype,aM=Array.prototype,ag=Object.getPrototypeOf,eb=Object.isExtensible;function rM(i){return typeof i=="function"}const Ns=()=>{};function oM(i){return i()}function Zc(i){for(var e=0;e<i.length;e++)i[e]()}const ga=2,nx=4,mf=8,vf=16,kr=32,Wl=64,Su=128,Ks=256,Cu=512,$s=1024,Ga=2048,Uo=4096,vr=8192,gf=16384,sx=32768,Cd=65536,lM=1<<17,cM=1<<19,ax=1<<20,Sm=1<<21,gr=Symbol("$state"),dM=Symbol("legacy props"),hM=Symbol("");function rx(i){return i===this.v}function rg(i,e){return i!=i?e==e:i!==e||i!==null&&typeof i=="object"||typeof i=="function"}function og(i){return!rg(i,this.v)}function uM(i){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fM(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function pM(i){throw new Error("https://svelte.dev/e/effect_orphan")}function mM(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function vM(i){throw new Error("https://svelte.dev/e/props_invalid_value")}function gM(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _M(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function bM(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ql=!1,yM=!1;function xM(){ql=!0}const lg=1,cg=2,ox=4,wM=8,kM=16,SM=1,CM=2,MM=4,PM=8,AM=16,TM=1,LM=2,DM=4,EM=1,IM=2,Os=Symbol(),OM="http://www.w3.org/1999/xhtml";function lx(i){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let Sn=null;function tb(i){Sn=i}function Zt(i,e=!1,t){var n=Sn={p:Sn,c:null,d:!1,e:null,m:!1,s:i,x:null,l:null};ql&&!e&&(Sn.l={s:null,u:null,r1:[],r2:Kc(!1)}),xf(()=>{n.d=!0})}function Yt(i){const e=Sn;if(e!==null){const r=e.e;if(r!==null){var t=Xi,n=Ui;e.e=null;try{for(var s=0;s<r.length;s++){var a=r[s];Za(a.effect),oa(a.reaction),Fn(a.fn)}}finally{Za(t),oa(n)}}Sn=e.p,e.m=!0}return{}}function Md(){return!ql||Sn!==null&&Sn.l===null}function Gt(i){if(typeof i!="object"||i===null||gr in i)return i;const e=ag(i);if(e!==sM&&e!==aM)return i;var t=new Map,n=ng(i),s=ae(0),a=Ui,r=o=>{var l=Ui;oa(a);var d=o();return oa(l),d};return n&&t.set("length",ae(i.length)),new Proxy(i,{defineProperty(o,l,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&gM();var h=t.get(l);return h===void 0?(h=r(()=>ae(d.value)),t.set(l,h)):M(h,r(()=>Gt(d.value))),!0},deleteProperty(o,l){var d=t.get(l);if(d===void 0)l in o&&(t.set(l,r(()=>ae(Os))),vp(s));else{if(n&&typeof l=="string"){var h=t.get("length"),m=Number(l);Number.isInteger(m)&&m<h.v&&M(h,m)}M(d,Os),vp(s)}return!0},get(o,l,d){var b;if(l===gr)return i;var h=t.get(l),m=l in o;if(h===void 0&&(!m||(b=vl(o,l))!=null&&b.writable)&&(h=r(()=>ae(Gt(m?o[l]:Os))),t.set(l,h)),h!==void 0){var v=u(h);return v===Os?void 0:v}return Reflect.get(o,l,d)},getOwnPropertyDescriptor(o,l){var d=Reflect.getOwnPropertyDescriptor(o,l);if(d&&"value"in d){var h=t.get(l);h&&(d.value=u(h))}else if(d===void 0){var m=t.get(l),v=m==null?void 0:m.v;if(m!==void 0&&v!==Os)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(o,l){var v;if(l===gr)return!0;var d=t.get(l),h=d!==void 0&&d.v!==Os||Reflect.has(o,l);if(d!==void 0||Xi!==null&&(!h||(v=vl(o,l))!=null&&v.writable)){d===void 0&&(d=r(()=>ae(h?Gt(o[l]):Os)),t.set(l,d));var m=u(d);if(m===Os)return!1}return h},set(o,l,d,h){var A;var m=t.get(l),v=l in o;if(n&&l==="length")for(var b=d;b<m.v;b+=1){var y=t.get(b+"");y!==void 0?M(y,Os):b in o&&(y=r(()=>ae(Os)),t.set(b+"",y))}m===void 0?(!v||(A=vl(o,l))!=null&&A.writable)&&(m=r(()=>ae(void 0)),M(m,r(()=>Gt(d))),t.set(l,m)):(v=m.v!==Os,M(m,r(()=>Gt(d))));var x=Reflect.getOwnPropertyDescriptor(o,l);if(x!=null&&x.set&&x.set.call(h,d),!v){if(n&&typeof l=="string"){var k=t.get("length"),C=Number(l);Number.isInteger(C)&&C>=k.v&&M(k,C+1)}vp(s)}return!0},ownKeys(o){u(s);var l=Reflect.ownKeys(o).filter(m=>{var v=t.get(m);return v===void 0||v.v!==Os});for(var[d,h]of t)h.v!==Os&&!(d in o)&&l.push(d);return l},setPrototypeOf(){_M()}})}function vp(i,e=1){M(i,i.v+e)}function ib(i){try{if(i!==null&&typeof i=="object"&&gr in i)return i[gr]}catch{}return i}function cx(i,e){return Object.is(ib(i),ib(e))}function Sl(i){var e=ga|Ga,t=Ui!==null&&(Ui.f&ga)!==0?Ui:null;return Xi===null||t!==null&&(t.f&Ks)!==0?e|=Ks:Xi.f|=ax,{ctx:Sn,deps:null,effects:null,equals:rx,f:e,fn:i,reactions:null,rv:0,v:null,wv:0,parent:t??Xi}}function qi(i){const e=Sl(i);return Cx(e),e}function _f(i){const e=Sl(i);return e.equals=og,e}function dx(i){var e=i.effects;if(e!==null){i.effects=null;for(var t=0;t<e.length;t+=1)br(e[t])}}function BM(i){for(var e=i.parent;e!==null;){if((e.f&ga)===0)return e;e=e.parent}return null}function hx(i){var e,t=Xi;Za(BM(i));try{dx(i),e=Tx(i)}finally{Za(t)}return e}function ux(i){var e=hx(i),t=(Rr||(i.f&Ks)!==0)&&i.deps!==null?Uo:$s;_a(i,t),i.equals(e)||(i.v=e,i.wv=Px())}const Yc=new Map;function Kc(i,e){var t={f:0,v:i,reactions:null,equals:rx,rv:0,wv:0};return t}function ae(i,e){const t=Kc(i);return Cx(t),t}function Xc(i,e=!1){var n;const t=Kc(i);return e||(t.equals=og),ql&&Sn!==null&&Sn.l!==null&&((n=Sn.l).s??(n.s=[])).push(t),t}function M(i,e,t=!1){Ui!==null&&!Ra&&Md()&&(Ui.f&(ga|vf))!==0&&!(xs!=null&&xs.includes(i))&&bM();let n=t?Gt(e):e;return Cm(i,n)}function Cm(i,e){if(!i.equals(e)){var t=i.v;Pd?Yc.set(i,e):Yc.set(i,t),i.v=e,(i.f&ga)!==0&&((i.f&Ga)!==0&&hx(i),_a(i,(i.f&Ks)===0?$s:Uo)),i.wv=Px(),fx(i,Ga),Md()&&Xi!==null&&(Xi.f&$s)!==0&&(Xi.f&(kr|Wl))===0&&(ta===null?WM([i]):ta.push(i))}return e}function Yr(i,e=1){var t=u(i),n=e===1?t++:t--;return M(i,t),n}function fx(i,e){var t=i.reactions;if(t!==null)for(var n=Md(),s=t.length,a=0;a<s;a++){var r=t[a],o=r.f;(o&Ga)===0&&(!n&&r===Xi||(_a(r,e),(o&($s|Ks))!==0&&((o&ga)!==0?fx(r,Uo):Sf(r))))}}let RM=!1;var Mm,px,mx,vx;function zM(){if(Mm===void 0){Mm=window,px=/Firefox/.test(navigator.userAgent);var i=Element.prototype,e=Node.prototype,t=Text.prototype;mx=vl(e,"firstChild").get,vx=vl(e,"nextSibling").get,eb(i)&&(i.__click=void 0,i.__className=void 0,i.__attributes=null,i.__style=void 0,i.__e=void 0),eb(t)&&(t.__t=void 0)}}function bf(i=""){return document.createTextNode(i)}function $a(i){return mx.call(i)}function yf(i){return vx.call(i)}function p(i,e){return $a(i)}function yt(i,e){{var t=$a(i);return t instanceof Comment&&t.data===""?yf(t):t}}function g(i,e=1,t=!1){let n=i;for(;e--;)n=yf(n);return n}function NM(i){i.textContent=""}function gx(i){Xi===null&&Ui===null&&pM(),Ui!==null&&(Ui.f&Ks)!==0&&Xi===null&&fM(),Pd&&uM()}function FM(i,e){var t=e.last;t===null?e.last=e.first=i:(t.next=i,i.prev=t,e.last=i)}function Ul(i,e,t,n=!0){var s=Xi,a={ctx:Sn,deps:null,nodes_start:null,nodes_end:null,f:i|Ga,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(t)try{hg(a),a.f|=sx}catch(l){throw br(a),l}else e!==null&&Sf(a);var r=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(ax|Su))===0;if(!r&&n&&(s!==null&&FM(a,s),Ui!==null&&(Ui.f&ga)!==0)){var o=Ui;(o.effects??(o.effects=[])).push(a)}return a}function xf(i){const e=Ul(mf,null,!1);return _a(e,$s),e.teardown=i,e}function fn(i){gx();var e=Xi!==null&&(Xi.f&kr)!==0&&Sn!==null&&!Sn.m;if(e){var t=Sn;(t.e??(t.e=[])).push({fn:i,effect:Xi,reaction:Ui})}else{var n=Fn(i);return n}}function HM(i){return gx(),Gl(i)}function jM(i){const e=Ul(Wl,i,!0);return(t={})=>new Promise(n=>{t.outro?Mu(e,()=>{br(e),n(void 0)}):(br(e),n(void 0))})}function Fn(i){return Ul(nx,i,!1)}function Gl(i){return Ul(mf,i,!0)}function se(i,e=[],t=Sl){const n=e.map(t);return wf(()=>i(...n.map(u)))}function wf(i,e=0){return Ul(mf|vf|e,i,!0)}function Cl(i,e=!0){return Ul(mf|kr,i,!0,e)}function _x(i){var e=i.teardown;if(e!==null){const t=Pd,n=Ui;sb(!0),oa(null);try{e.call(null)}finally{sb(t),oa(n)}}}function bx(i,e=!1){var t=i.first;for(i.first=i.last=null;t!==null;){var n=t.next;(t.f&Wl)!==0?t.parent=null:br(t,e),t=n}}function $M(i){for(var e=i.first;e!==null;){var t=e.next;(e.f&kr)===0&&br(e),e=t}}function br(i,e=!0){var t=!1;(e||(i.f&cM)!==0)&&i.nodes_start!==null&&(yx(i.nodes_start,i.nodes_end),t=!0),bx(i,e&&!t),Du(i,0),_a(i,gf);var n=i.transitions;if(n!==null)for(const a of n)a.stop();_x(i);var s=i.parent;s!==null&&s.first!==null&&xx(i),i.next=i.prev=i.teardown=i.ctx=i.deps=i.fn=i.nodes_start=i.nodes_end=null}function yx(i,e){for(;i!==null;){var t=i===e?null:yf(i);i.remove(),i=t}}function xx(i){var e=i.parent,t=i.prev,n=i.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===i&&(e.first=n),e.last===i&&(e.last=t))}function Mu(i,e){var t=[];dg(i,t,!0),wx(t,()=>{br(i),e&&e()})}function wx(i,e){var t=i.length;if(t>0){var n=()=>--t||e();for(var s of i)s.out(n)}else e()}function dg(i,e,t){if((i.f&vr)===0){if(i.f^=vr,i.transitions!==null)for(const r of i.transitions)(r.is_global||t)&&e.push(r);for(var n=i.first;n!==null;){var s=n.next,a=(n.f&Cd)!==0||(n.f&kr)!==0;dg(n,e,a?t:!1),n=s}}}function Pu(i){kx(i,!0)}function kx(i,e){if((i.f&vr)!==0){i.f^=vr,(i.f&$s)===0&&(i.f^=$s),Ad(i)&&(_a(i,Ga),Sf(i));for(var t=i.first;t!==null;){var n=t.next,s=(t.f&Cd)!==0||(t.f&kr)!==0;kx(t,s?e:!1),t=n}if(i.transitions!==null)for(const a of i.transitions)(a.is_global||e)&&a.in()}}let Jc=[],Pm=[];function Sx(){var i=Jc;Jc=[],Zc(i)}function VM(){var i=Pm;Pm=[],Zc(i)}function Ml(i){Jc.length===0&&queueMicrotask(Sx),Jc.push(i)}function nb(){Jc.length>0&&Sx(),Pm.length>0&&VM()}let tu=!1,Au=!1,Tu=null,Do=!1,Pd=!1;function sb(i){Pd=i}let Oc=[];let Ui=null,Ra=!1;function oa(i){Ui=i}let Xi=null;function Za(i){Xi=i}let xs=null;function Cx(i){Ui!==null&&Ui.f&Sm&&(xs===null?xs=[i]:xs.push(i))}let bs=null,Us=0,ta=null;function WM(i){ta=i}let Mx=1,Lu=0,Rr=!1;function Px(){return++Mx}function Ad(i){var m;var e=i.f;if((e&Ga)!==0)return!0;if((e&Uo)!==0){var t=i.deps,n=(e&Ks)!==0;if(t!==null){var s,a,r=(e&Cu)!==0,o=n&&Xi!==null&&!Rr,l=t.length;if(r||o){var d=i,h=d.parent;for(s=0;s<l;s++)a=t[s],(r||!((m=a==null?void 0:a.reactions)!=null&&m.includes(d)))&&(a.reactions??(a.reactions=[])).push(d);r&&(d.f^=Cu),o&&h!==null&&(h.f&Ks)===0&&(d.f^=Ks)}for(s=0;s<l;s++)if(a=t[s],Ad(a)&&ux(a),a.wv>i.wv)return!0}(!n||Xi!==null&&!Rr)&&_a(i,$s)}return!1}function qM(i,e){for(var t=e;t!==null;){if((t.f&Su)!==0)try{t.fn(i);return}catch{t.f^=Su}t=t.parent}throw tu=!1,i}function ab(i){return(i.f&gf)===0&&(i.parent===null||(i.parent.f&Su)===0)}function kf(i,e,t,n){if(tu){if(t===null&&(tu=!1),ab(e))throw i;return}if(t!==null&&(tu=!0),qM(i,e),ab(e))throw i}function Ax(i,e,t=!0){var n=i.reactions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];xs!=null&&xs.includes(i)||((a.f&ga)!==0?Ax(a,e,!1):e===a&&(t?_a(a,Ga):(a.f&$s)!==0&&_a(a,Uo),Sf(a)))}}function Tx(i){var b;var e=bs,t=Us,n=ta,s=Ui,a=Rr,r=xs,o=Sn,l=Ra,d=i.f;bs=null,Us=0,ta=null,Rr=(d&Ks)!==0&&(Ra||!Do||Ui===null),Ui=(d&(kr|Wl))===0?i:null,xs=null,tb(i.ctx),Ra=!1,Lu++,i.f|=Sm;try{var h=(0,i.fn)(),m=i.deps;if(bs!==null){var v;if(Du(i,Us),m!==null&&Us>0)for(m.length=Us+bs.length,v=0;v<bs.length;v++)m[Us+v]=bs[v];else i.deps=m=bs;if(!Rr)for(v=Us;v<m.length;v++)((b=m[v]).reactions??(b.reactions=[])).push(i)}else m!==null&&Us<m.length&&(Du(i,Us),m.length=Us);if(Md()&&ta!==null&&!Ra&&m!==null&&(i.f&(ga|Uo|Ga))===0)for(v=0;v<ta.length;v++)Ax(ta[v],i);return s!==null&&s!==i&&(Lu++,ta!==null&&(n===null?n=ta:n.push(...ta))),h}finally{bs=e,Us=t,ta=n,Ui=s,Rr=a,xs=r,tb(o),Ra=l,i.f^=Sm}}function UM(i,e){let t=e.reactions;if(t!==null){var n=nM.call(t,i);if(n!==-1){var s=t.length-1;s===0?t=e.reactions=null:(t[n]=t[s],t.pop())}}t===null&&(e.f&ga)!==0&&(bs===null||!bs.includes(e))&&(_a(e,Uo),(e.f&(Ks|Cu))===0&&(e.f^=Cu),dx(e),Du(e,0))}function Du(i,e){var t=i.deps;if(t!==null)for(var n=e;n<t.length;n++)UM(i,t[n])}function hg(i){var e=i.f;if((e&gf)===0){_a(i,$s);var t=Xi,n=Sn,s=Do;Xi=i,Do=!0;try{(e&vf)!==0?$M(i):bx(i),_x(i);var a=Tx(i);i.teardown=typeof a=="function"?a:null,i.wv=Mx;var r=i.deps,o;Q_&&yM&&i.f&Ga}catch(l){kf(l,i,t,n||i.ctx)}finally{Do=s,Xi=t}}}function GM(){try{mM()}catch(i){if(Tu!==null)kf(i,Tu,null);else throw i}}function Lx(){var i=Do;try{var e=0;for(Do=!0;Oc.length>0;){e++>1e3&&GM();var t=Oc,n=t.length;Oc=[];for(var s=0;s<n;s++){var a=YM(t[s]);ZM(a)}Yc.clear()}}finally{Au=!1,Do=i,Tu=null}}function ZM(i){var e=i.length;if(e!==0)for(var t=0;t<e;t++){var n=i[t];if((n.f&(gf|vr))===0)try{Ad(n)&&(hg(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?xx(n):n.fn=null))}catch(s){kf(s,n,null,n.ctx)}}}function Sf(i){Au||(Au=!0,queueMicrotask(Lx));for(var e=Tu=i;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Wl|kr))!==0){if((t&$s)===0)return;e.f^=$s}}Oc.push(e)}function YM(i){for(var e=[],t=i;t!==null;){var n=t.f,s=(n&(kr|Wl))!==0,a=s&&(n&$s)!==0;if(!a&&(n&vr)===0){if((n&nx)!==0)e.push(t);else if(s)t.f^=$s;else{var r=Ui;try{Ui=t,Ad(t)&&hg(t)}catch(d){kf(d,t,null,t.ctx)}finally{Ui=r}}var o=t.first;if(o!==null){t=o;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function KM(i){var e;for(nb();Oc.length>0;)Au=!0,Lx(),nb();return e}async function Ro(){await Promise.resolve(),KM()}function u(i){var e=i.f,t=(e&ga)!==0;if(Ui!==null&&!Ra){if(!(xs!=null&&xs.includes(i))){var n=Ui.deps;i.rv<Lu&&(i.rv=Lu,bs===null&&n!==null&&n[Us]===i?Us++:bs===null?bs=[i]:(!Rr||!bs.includes(i))&&bs.push(i))}}else if(t&&i.deps===null&&i.effects===null){var s=i,a=s.parent;a!==null&&(a.f&Ks)===0&&(s.f^=Ks)}return t&&(s=i,Ad(s)&&ux(s)),Pd&&Yc.has(i)?Yc.get(i):i.v}function Hn(i){var e=Ra;try{return Ra=!0,i()}finally{Ra=e}}const XM=-7169;function _a(i,e){i.f=i.f&XM|e}function Dx(i){if(!(typeof i!="object"||!i||i instanceof EventTarget)){if(gr in i)Am(i);else if(!Array.isArray(i))for(let e in i){const t=i[e];typeof t=="object"&&t&&gr in t&&Am(t)}}}function Am(i,e=new Set){if(typeof i=="object"&&i!==null&&!(i instanceof EventTarget)&&!e.has(i)){e.add(i),i instanceof Date&&i.getTime();for(let n in i)try{Am(i[n],e)}catch{}const t=ag(i);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=ix(t);for(let s in n){const a=n[s].get;if(a)try{a.call(i)}catch{}}}}}const JM=["touchstart","touchmove"];function QM(i){return JM.includes(i)}let rb=!1;function eP(){rb||(rb=!0,document.addEventListener("reset",i=>{Promise.resolve().then(()=>{var e;if(!i.defaultPrevented)for(const t of i.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function ug(i){var e=Ui,t=Xi;oa(null),Za(null);try{return i()}finally{oa(e),Za(t)}}function Cf(i,e,t,n=t){i.addEventListener(e,()=>ug(t));const s=i.__on_r;s?i.__on_r=()=>{s(),n(!0)}:i.__on_r=()=>n(!0),eP()}const Ex=new Set,Tm=new Set;function tP(i,e,t,n={}){function s(a){if(n.capture||xc.call(e,a),!a.cancelBubble)return ug(()=>t==null?void 0:t.call(this,a))}return i.startsWith("pointer")||i.startsWith("touch")||i==="wheel"?Ml(()=>{e.addEventListener(i,s,n)}):e.addEventListener(i,s,n),s}function Mi(i,e,t,n,s){var a={capture:n,passive:s},r=tP(i,e,t,a);(e===document.body||e===window||e===document)&&xf(()=>{e.removeEventListener(i,r,a)})}function hi(i){for(var e=0;e<i.length;e++)Ex.add(i[e]);for(var t of Tm)t(i)}function xc(i){var A;var e=this,t=e.ownerDocument,n=i.type,s=((A=i.composedPath)==null?void 0:A.call(i))||[],a=s[0]||i.target,r=0,o=i.__root;if(o){var l=s.indexOf(o);if(l!==-1&&(e===document||e===window)){i.__root=e;return}var d=s.indexOf(e);if(d===-1)return;l<=d&&(r=l)}if(a=s[r]||i.target,a!==e){tx(i,"currentTarget",{configurable:!0,get(){return a||t}});var h=Ui,m=Xi;oa(null),Za(null);try{for(var v,b=[];a!==null;){var y=a.assignedSlot||a.parentNode||a.host||null;try{var x=a["__"+n];if(x!=null&&(!a.disabled||i.target===a))if(ng(x)){var[k,...C]=x;k.apply(a,[i,...C])}else x.call(a,i)}catch(T){v?b.push(T):v=T}if(i.cancelBubble||y===e||y===null)break;a=y}if(v){for(let T of b)queueMicrotask(()=>{throw T});throw v}}finally{i.__root=e,delete i.currentTarget,oa(h),Za(m)}}}function fg(i){var e=document.createElement("template");return e.innerHTML=i,e.content}function Pl(i,e){var t=Xi;t.nodes_start===null&&(t.nodes_start=i,t.nodes_end=e)}function B(i,e){var t=(e&EM)!==0,n=(e&IM)!==0,s,a=!i.startsWith("<!>");return()=>{s===void 0&&(s=fg(a?i:"<!>"+i),t||(s=$a(s)));var r=n||px?document.importNode(s,!0):s.cloneNode(!0);if(t){var o=$a(r),l=r.lastChild;Pl(o,l)}else Pl(r,r);return r}}function Zl(i,e,t="svg"){var n=!i.startsWith("<!>"),s=`<${t}>${n?i:"<!>"+i}</${t}>`,a;return()=>{if(!a){var r=fg(s),o=$a(r);a=$a(o)}var l=a.cloneNode(!0);return Pl(l,l),l}}function Al(i=""){{var e=bf(i+"");return Pl(e,e),e}}function Bi(){var i=document.createDocumentFragment(),e=document.createComment(""),t=bf();return i.append(e,t),Pl(e,t),i}function E(i,e){i!==null&&i.before(e)}let Lm=!0;function S(i,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(i.__t??(i.__t=i.nodeValue))&&(i.__t=t,i.nodeValue=t+"")}function iP(i,e){return nP(i,e)}const sl=new Map;function nP(i,{target:e,anchor:t,props:n={},events:s,context:a,intro:r=!0}){zM();var o=new Set,l=m=>{for(var v=0;v<m.length;v++){var b=m[v];if(!o.has(b)){o.add(b);var y=QM(b);e.addEventListener(b,xc,{passive:y});var x=sl.get(b);x===void 0?(document.addEventListener(b,xc,{passive:y}),sl.set(b,1)):sl.set(b,x+1)}}};l(sg(Ex)),Tm.add(l);var d=void 0,h=jM(()=>{var m=t??e.appendChild(bf());return Cl(()=>{if(a){Zt({});var v=Sn;v.c=a}s&&(n.$$events=s),Lm=r,d=i(m,n)||{},Lm=!0,a&&Yt()}),()=>{var y;for(var v of o){e.removeEventListener(v,xc);var b=sl.get(v);--b===0?(document.removeEventListener(v,xc),sl.delete(v)):sl.set(v,b)}Tm.delete(l),m!==t&&((y=m.parentNode)==null||y.removeChild(m))}});return sP.set(d,h),d}let sP=new WeakMap;function Q(i,e,[t,n]=[0,0]){var s=i,a=null,r=null,o=Os,l=t>0?Cd:0,d=!1;const h=(v,b=!0)=>{d=!0,m(b,v)},m=(v,b)=>{o!==(o=v)&&(o?(a?Pu(a):b&&(a=Cl(()=>b(s))),r&&Mu(r,()=>{r=null})):(r?Pu(r):b&&(r=Cl(()=>b(s,[t+1,n]))),a&&Mu(a,()=>{a=null})))};wf(()=>{d=!1,e(h),d||m(null,null)},l)}function Si(i,e){return e}function aP(i,e,t,n){for(var s=[],a=e.length,r=0;r<a;r++)dg(e[r].e,s,!0);var o=a>0&&s.length===0&&t!==null;if(o){var l=t.parentNode;NM(l),l.append(t),n.clear(),Er(i,e[0].prev,e[a-1].next)}wx(s,()=>{for(var d=0;d<a;d++){var h=e[d];o||(n.delete(h.k),Er(i,h.prev,h.next)),br(h.e,!o)}})}function Vt(i,e,t,n,s,a=null){var r=i,o={flags:e,items:new Map,first:null},l=(e&ox)!==0;if(l){var d=i;r=d.appendChild(bf())}var h=null,m=!1,v=_f(()=>{var b=t();return ng(b)?b:b==null?[]:sg(b)});wf(()=>{var b=u(v),y=b.length;m&&y===0||(m=y===0,rP(b,o,r,s,e,n,t),a!==null&&(y===0?h?Pu(h):h=Cl(()=>a(r)):h!==null&&Mu(h,()=>{h=null})),u(v))})}function rP(i,e,t,n,s,a,r){var ee,W,ne,ye;var o=(s&wM)!==0,l=(s&(lg|cg))!==0,d=i.length,h=e.items,m=e.first,v=m,b,y=null,x,k=[],C=[],A,T,I,D;if(o)for(D=0;D<d;D+=1)A=i[D],T=a(A,D),I=h.get(T),I!==void 0&&((ee=I.a)==null||ee.measure(),(x??(x=new Set)).add(I));for(D=0;D<d;D+=1){if(A=i[D],T=a(A,D),I=h.get(T),I===void 0){var N=v?v.e.nodes_start:t;y=lP(N,e,y,y===null?e.first:y.next,A,T,D,n,s,r),h.set(T,y),k=[],C=[],v=y.next;continue}if(l&&oP(I,A,D,s),(I.e.f&vr)!==0&&(Pu(I.e),o&&((W=I.a)==null||W.unfix(),(x??(x=new Set)).delete(I))),I!==v){if(b!==void 0&&b.has(I)){if(k.length<C.length){var z=C[0],H;y=z.prev;var j=k[0],re=k[k.length-1];for(H=0;H<k.length;H+=1)ob(k[H],z,t);for(H=0;H<C.length;H+=1)b.delete(C[H]);Er(e,j.prev,re.next),Er(e,y,j),Er(e,re,z),v=z,y=re,D-=1,k=[],C=[]}else b.delete(I),ob(I,v,t),Er(e,I.prev,I.next),Er(e,I,y===null?e.first:y.next),Er(e,y,I),y=I;continue}for(k=[],C=[];v!==null&&v.k!==T;)(v.e.f&vr)===0&&(b??(b=new Set)).add(v),C.push(v),v=v.next;if(v===null)continue;I=v}k.push(I),y=I,v=I.next}if(v!==null||b!==void 0){for(var V=b===void 0?[]:sg(b);v!==null;)(v.e.f&vr)===0&&V.push(v),v=v.next;var q=V.length;if(q>0){var le=(s&ox)!==0&&d===0?t:null;if(o){for(D=0;D<q;D+=1)(ne=V[D].a)==null||ne.measure();for(D=0;D<q;D+=1)(ye=V[D].a)==null||ye.fix()}aP(e,V,le,h)}}o&&Ml(()=>{var ie;if(x!==void 0)for(I of x)(ie=I.a)==null||ie.apply()}),Xi.first=e.first&&e.first.e,Xi.last=y&&y.e}function oP(i,e,t,n){(n&lg)!==0&&Cm(i.v,e),(n&cg)!==0?Cm(i.i,t):i.i=t}function lP(i,e,t,n,s,a,r,o,l,d){var h=(l&lg)!==0,m=(l&kM)===0,v=h?m?Xc(s):Kc(s):s,b=(l&cg)===0?r:Kc(r),y={i:b,v,k:a,a:null,e:null,prev:t,next:n};try{return y.e=Cl(()=>o(i,v,b,d),RM),y.e.prev=t&&t.e,y.e.next=n&&n.e,t===null?e.first=y:(t.next=y,t.e.next=y.e),n!==null&&(n.prev=y,n.e.prev=y.e),y}finally{}}function ob(i,e,t){for(var n=i.next?i.next.e.nodes_start:t,s=e?e.e.nodes_start:t,a=i.e.nodes_start;a!==n;){var r=yf(a);s.before(a),a=r}}function Er(i,e,t){e===null?i.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Po(i,e,t=!1,n=!1,s=!1){var a=i,r="";se(()=>{var o=Xi;if(r!==(r=e()??"")&&(o.nodes_start!==null&&(yx(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),r!=="")){var l=r+"";t?l=`<svg>${l}</svg>`:n&&(l=`<math>${l}</math>`);var d=fg(l);if((t||n)&&(d=$a(d)),Pl($a(d),d.lastChild),t||n)for(;$a(d);)a.before($a(d));else a.before(d)}})}function cP(i,e,...t){var n=i,s=Ns,a;wf(()=>{s!==(s=e())&&(a&&(br(a),a=null),a=Cl(()=>s(n,...t)))},Cd)}function Xs(i,e,t){Fn(()=>{var n=Hn(()=>e(i,t==null?void 0:t())||{});if(t&&(n!=null&&n.update)){var s=!1,a={};Gl(()=>{var r=t();Dx(r),s&&rg(a,r)&&(a=r,n.update(r))}),s=!0}if(n!=null&&n.destroy)return()=>n.destroy()})}function Ix(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(t=Ix(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function dP(){for(var i,e,t=0,n="",s=arguments.length;t<s;t++)(i=arguments[t])&&(e=Ix(i))&&(n&&(n+=" "),n+=e);return n}function zo(i){return typeof i=="object"?dP(i):i??""}const lb=[...` 	
\r\f \v\uFEFF`];function hP(i,e,t){var n=i==null?"":""+i;if(e&&(n=n?n+" "+e:e),t){for(var s in t)if(t[s])n=n?n+" "+s:s;else if(n.length)for(var a=s.length,r=0;(r=n.indexOf(s,r))>=0;){var o=r+a;(r===0||lb.includes(n[r-1]))&&(o===n.length||lb.includes(n[o]))?n=(r===0?"":n.substring(0,r))+n.substring(o+1):r=o}}return n===""?null:n}function cb(i,e=!1){var t=e?" !important;":";",n="";for(var s in i){var a=i[s];a!=null&&a!==""&&(n+=" "+s+": "+a+t)}return n}function gp(i){return i[0]!=="-"||i[1]!=="-"?i.toLowerCase():i}function uP(i,e){if(e){var t="",n,s;if(Array.isArray(e)?(n=e[0],s=e[1]):n=e,i){i=String(i).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var a=!1,r=0,o=!1,l=[];n&&l.push(...Object.keys(n).map(gp)),s&&l.push(...Object.keys(s).map(gp));var d=0,h=-1;const x=i.length;for(var m=0;m<x;m++){var v=i[m];if(o?v==="/"&&i[m-1]==="*"&&(o=!1):a?a===v&&(a=!1):v==="/"&&i[m+1]==="*"?o=!0:v==='"'||v==="'"?a=v:v==="("?r++:v===")"&&r--,!o&&a===!1&&r===0){if(v===":"&&h===-1)h=m;else if(v===";"||m===x-1){if(h!==-1){var b=gp(i.substring(d,h).trim());if(!l.includes(b)){v!==";"&&m++;var y=i.substring(d,m).trim();t+=" "+y+";"}}d=m+1,h=-1}}}}return n&&(t+=cb(n)),s&&(t+=cb(s,!0)),t=t.trim(),t===""?null:t}return i==null?null:String(i)}function G(i,e,t,n,s,a){var r=i.__className;if(r!==t||r===void 0){var o=hP(t,n,a);o==null?i.removeAttribute("class"):i.className=o,i.__className=t}else if(a&&s!==a)for(var l in a){var d=!!a[l];(s==null||d!==!!s[l])&&i.classList.toggle(l,d)}return a}function _p(i,e={},t,n){for(var s in t){var a=t[s];e[s]!==a&&(t[s]==null?i.style.removeProperty(s):i.style.setProperty(s,a,n))}}function es(i,e,t,n){var s=i.__style;if(s!==e){var a=uP(e,n);a==null?i.removeAttribute("style"):i.style.cssText=a,i.__style=e}else n&&(Array.isArray(n)?(_p(i,t==null?void 0:t[0],n[0]),_p(i,t==null?void 0:t[1],n[1],"important")):_p(i,t,n));return n}const fP=Symbol("is custom element"),pP=Symbol("is html");function Eu(i,e){var t=mg(i);t.value===(t.value=e??void 0)||i.value===e&&(e!==0||i.nodeName!=="PROGRESS")||(i.value=e??"")}function pg(i,e){var t=mg(i);t.checked!==(t.checked=e??void 0)&&(i.checked=e)}function Ot(i,e,t,n){var s=mg(i);s[e]!==(s[e]=t)&&(e==="loading"&&(i[hM]=t),t==null?i.removeAttribute(e):typeof t!="string"&&mP(i).includes(e)?i[e]=t:i.setAttribute(e,t))}function mg(i){return i.__attributes??(i.__attributes={[fP]:i.nodeName.includes("-"),[pP]:i.namespaceURI===OM})}var db=new Map;function mP(i){var e=db.get(i.nodeName);if(e)return e;db.set(i.nodeName,e=[]);for(var t,n=i,s=Element.prototype;s!==n;){t=ix(n);for(var a in t)t[a].set&&e.push(a);n=ag(n)}return e}const vP=()=>performance.now(),dr={tick:i=>requestAnimationFrame(i),now:()=>vP(),tasks:new Set};function Ox(){const i=dr.now();dr.tasks.forEach(e=>{e.c(i)||(dr.tasks.delete(e),e.f())}),dr.tasks.size!==0&&dr.tick(Ox)}function gP(i){let e;return dr.tasks.size===0&&dr.tick(Ox),{promise:new Promise(t=>{dr.tasks.add(e={c:i,f:t})}),abort(){dr.tasks.delete(e)}}}function hh(i,e){ug(()=>{i.dispatchEvent(new CustomEvent(e))})}function _P(i){if(i==="float")return"cssFloat";if(i==="offset")return"cssOffset";if(i.startsWith("--"))return i;const e=i.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function hb(i){const e={},t=i.split(";");for(const n of t){const[s,a]=n.split(":");if(!s||a===void 0)break;const r=_P(s.trim());e[r]=a.trim()}return e}const bP=i=>i;function gt(i,e,t,n){var s=(i&TM)!==0,a=(i&LM)!==0,r=s&&a,o=(i&DM)!==0,l=r?"both":s?"in":"out",d,h=e.inert,m=e.style.overflow,v,b;function y(){var T=Ui,I=Xi;oa(null),Za(null);try{return d??(d=t()(e,(n==null?void 0:n())??{},{direction:l}))}finally{oa(T),Za(I)}}var x={is_global:o,in(){var T;if(e.inert=h,!s){b==null||b.abort(),(T=b==null?void 0:b.reset)==null||T.call(b);return}a||v==null||v.abort(),hh(e,"introstart"),v=Dm(e,y(),b,1,()=>{hh(e,"introend"),v==null||v.abort(),v=d=void 0,e.style.overflow=m})},out(T){if(!a){T==null||T(),d=void 0;return}e.inert=!0,hh(e,"outrostart"),b=Dm(e,y(),v,0,()=>{hh(e,"outroend"),T==null||T()})},stop:()=>{v==null||v.abort(),b==null||b.abort()}},k=Xi;if((k.transitions??(k.transitions=[])).push(x),s&&Lm){var C=o;if(!C){for(var A=k.parent;A&&(A.f&Cd)!==0;)for(;(A=A.parent)&&(A.f&vf)===0;);C=!A||(A.f&sx)!==0}C&&Fn(()=>{Hn(()=>x.in())})}}function Dm(i,e,t,n,s){var a=n===1;if(rM(e)){var r,o=!1;return Ml(()=>{if(!o){var k=e({direction:a?"in":"out"});r=Dm(i,k,t,n,s)}}),{abort:()=>{o=!0,r==null||r.abort()},deactivate:()=>r.deactivate(),reset:()=>r.reset(),t:()=>r.t()}}if(t==null||t.deactivate(),!(e!=null&&e.duration))return s(),{abort:Ns,deactivate:Ns,reset:Ns,t:()=>n};const{delay:l=0,css:d,tick:h,easing:m=bP}=e;var v=[];if(a&&t===void 0&&(h&&h(0,1),d)){var b=hb(d(0,1));v.push(b,b)}var y=()=>1-n,x=i.animate(v,{duration:l});return x.onfinish=()=>{var k=(t==null?void 0:t.t())??1-n;t==null||t.abort();var C=n-k,A=e.duration*Math.abs(C),T=[];if(A>0){var I=!1;if(d)for(var D=Math.ceil(A/16.666666666666668),N=0;N<=D;N+=1){var z=k+C*m(N/D),H=hb(d(z,1-z));T.push(H),I||(I=H.overflow==="hidden")}I&&(i.style.overflow="hidden"),y=()=>{var j=x.currentTime;return k+C*m(j/A)},h&&gP(()=>{if(x.playState!=="running")return!1;var j=y();return h(j,1-j),!0})}x=i.animate(T,{duration:A,fill:"forwards"}),x.onfinish=()=>{y=()=>n,h==null||h(n,1-n),s()}},{abort:()=>{x&&(x.cancel(),x.effect=null,x.onfinish=Ns)},deactivate:()=>{s=Ns},reset:()=>{n===0&&(h==null||h(1,0))},t:()=>y()}}function st(i,e,t=e){var n=Md();Cf(i,"input",s=>{var a=s?i.defaultValue:i.value;if(a=yp(i)?xp(a):a,t(a),n&&a!==(a=e())){var r=i.selectionStart,o=i.selectionEnd;i.value=a??"",o!==null&&(i.selectionStart=r,i.selectionEnd=Math.min(o,i.value.length))}}),Hn(e)==null&&i.value&&t(yp(i)?xp(i.value):i.value),Gl(()=>{var s=e();yp(i)&&s===xp(i.value)||i.type==="date"&&!s&&!i.value||s!==i.value&&(i.value=s??"")})}const bp=new Set;function yP(i,e,t,n,s=n){var a=t.getAttribute("type")==="checkbox",r=i;if(e!==null)for(var o of e)r=r[o]??(r[o]=[]);r.push(t),Cf(t,"change",()=>{var l=t.__value;a&&(l=xP(r,l,t.checked)),s(l)},()=>s(a?[]:null)),Gl(()=>{var l=n();a?(l=l||[],t.checked=l.includes(t.__value)):t.checked=cx(t.__value,l)}),xf(()=>{var l=r.indexOf(t);l!==-1&&r.splice(l,1)}),bp.has(r)||(bp.add(r),Ml(()=>{r.sort((l,d)=>l.compareDocumentPosition(d)===4?-1:1),bp.delete(r)})),Ml(()=>{})}function ub(i,e,t=e){Cf(i,"change",n=>{var s=n?i.defaultChecked:i.checked;t(s)}),Hn(e)==null&&t(i.checked),Gl(()=>{var n=e();i.checked=!!n})}function xP(i,e,t){for(var n=new Set,s=0;s<i.length;s+=1)i[s].checked&&n.add(i[s].__value);return t||n.delete(e),Array.from(n)}function yp(i){var e=i.type;return e==="number"||e==="range"}function xp(i){return i===""?null:+i}function Ur(i,e,t){if(i.multiple)return wP(i,e);for(var n of i.options){var s=Bc(n);if(cx(s,e)){n.selected=!0;return}}(!t||e!==void 0)&&(i.selectedIndex=-1)}function gl(i,e){let t=!0;Fn(()=>{e&&Ur(i,Hn(e),t),t=!1;var n=new MutationObserver(()=>{var s=i.__value;Ur(i,s)});return n.observe(i,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{n.disconnect()}})}function ur(i,e,t=e){var n=!0;Cf(i,"change",s=>{var a=s?"[selected]":":checked",r;if(i.multiple)r=[].map.call(i.querySelectorAll(a),Bc);else{var o=i.querySelector(a)??i.querySelector("option:not([disabled])");r=o&&Bc(o)}t(r)}),Fn(()=>{var s=e();if(Ur(i,s,n),n&&s===void 0){var a=i.querySelector(":checked");a!==null&&(s=Bc(a),t(s))}i.__value=s,n=!1}),gl(i)}function wP(i,e){for(var t of i.options)t.selected=~e.indexOf(Bc(t))}function Bc(i){return"__value"in i?i.__value:i.value}function fb(i,e){return i===e||(i==null?void 0:i[gr])===e}function Kr(i={},e,t,n){return Fn(()=>{var s,a;return Gl(()=>{s=a,a=[],Hn(()=>{i!==t(...a)&&(e(i,...a),s&&fb(t(...s),i)&&e(null,...s))})}),()=>{Ml(()=>{a&&fb(t(...a),i)&&e(null,...a)})}}),i}function kP(i=!1){const e=Sn,t=e.l.u;if(!t)return;let n=()=>Dx(e.s);if(i){let s=0,a={};const r=Sl(()=>{let o=!1;const l=e.s;for(const d in l)l[d]!==a[d]&&(a[d]=l[d],o=!0);return o&&s++,s});n=()=>u(r)}t.b.length&&HM(()=>{pb(e,n),Zc(t.b)}),fn(()=>{const s=Hn(()=>t.m.map(oM));return()=>{for(const a of s)typeof a=="function"&&a()}}),t.a.length&&fn(()=>{pb(e,n),Zc(t.a)})}function pb(i,e){if(i.l.s)for(const t of i.l.s)u(t);e()}function vg(i,e,t){if(i==null)return e(void 0),t&&t(void 0),Ns;const n=Hn(()=>i.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const al=[];function SP(i,e){return{subscribe:Mn(i,e).subscribe}}function Mn(i,e=Ns){let t=null;const n=new Set;function s(o){if(rg(i,o)&&(i=o,t)){const l=!al.length;for(const d of n)d[1](),al.push(d,i);if(l){for(let d=0;d<al.length;d+=2)al[d][0](al[d+1]);al.length=0}}}function a(o){s(o(i))}function r(o,l=Ns){const d=[o,l];return n.add(d),n.size===1&&(t=e(s,a)||Ns),o(i),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:s,update:a,subscribe:r}}function _s(i,e,t){const n=!Array.isArray(i),s=n?[i]:i;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=e.length<2;return SP(t,(r,o)=>{let l=!1;const d=[];let h=0,m=Ns;const v=()=>{if(h)return;m();const y=e(n?d[0]:d,r,o);a?r(y):m=typeof y=="function"?y:Ns},b=s.map((y,x)=>vg(y,k=>{d[x]=k,h&=~(1<<x),l&&v()},()=>{h|=1<<x}));return l=!0,v(),function(){Zc(b),m(),l=!1}})}function gg(i){let e;return vg(i,t=>e=t)(),e}let uh=!1,Em=Symbol();function Xe(i,e,t){const n=t[e]??(t[e]={store:null,source:Xc(void 0),unsubscribe:Ns});if(n.store!==i&&!(Em in t))if(n.unsubscribe(),n.store=i??null,i==null)n.source.v=void 0,n.unsubscribe=Ns;else{var s=!0;n.unsubscribe=vg(i,a=>{s?n.source.v=a:M(n.source,a)}),s=!1}return i&&Em in t?gg(i):u(n.source)}function vo(i,e){return i.set(e),e}function pi(){const i={};function e(){xf(()=>{for(var t in i)i[t].unsubscribe();tx(i,Em,{enumerable:!1,value:!0})})}return[i,e]}function Mf(i,e,t){return i.set(t),e}function CP(i){var e=uh;try{return uh=!1,[i(),uh]}finally{uh=e}}function MP(i,e=1){const t=i();return i(t+e),t}function mb(i){var e;return((e=i.ctx)==null?void 0:e.d)??!1}function Yi(i,e,t,n){var N;var s=(t&SM)!==0,a=!ql||(t&CM)!==0,r=(t&PM)!==0,o=(t&AM)!==0,l=!1,d;r?[d,l]=CP(()=>i[e]):d=i[e];var h=gr in i||dM in i,m=r&&(((N=vl(i,e))==null?void 0:N.set)??(h&&e in i&&(z=>i[e]=z)))||void 0,v=n,b=!0,y=!1,x=()=>(y=!0,b&&(b=!1,o?v=Hn(n):v=n),v);d===void 0&&n!==void 0&&(m&&a&&vM(),d=x(),m&&m(d));var k;if(a)k=()=>{var z=i[e];return z===void 0?x():(b=!0,y=!1,z)};else{var C=(s?Sl:_f)(()=>i[e]);C.f|=lM,k=()=>{var z=u(C);return z!==void 0&&(v=void 0),z===void 0?v:z}}if((t&MM)===0)return k;if(m){var A=i.$$legacy;return function(z,H){return arguments.length>0?((!a||!H||A||l)&&m(H?k():z),z):k()}}var T=!1,I=Xc(d),D=Sl(()=>{var z=k(),H=u(I);return T?(T=!1,H):I.v=z});return r&&u(D),s||(D.equals=og),function(z,H){if(arguments.length>0){const j=H?u(D):a&&r?Gt(z):z;if(!D.equals(j)){if(T=!0,M(I,j),y&&v!==void 0&&(v=j),mb(D))return z;Hn(()=>u(D))}return z}return mb(D)?D.v:u(D)}}function pn(i){Sn===null&&lx(),ql&&Sn.l!==null?PP(Sn).m.push(i):fn(()=>{const e=Hn(i);if(typeof e=="function")return e})}function Td(i){Sn===null&&lx(),pn(()=>()=>Hn(i))}function PP(i){var e=i.l;return e.u??(e.u={a:[],b:[],m:[]})}const AP="5";var ex;typeof window<"u"&&((ex=window.__svelte??(window.__svelte={})).v??(ex.v=new Set)).add(AP);const Bx=Mn(!1);function Iu(i){Bx.set(i)}function la(i,e){const t=n=>{const{type:s,data:a}=n.data;s===i&&e(a)};return window.addEventListener("message",t),()=>window.removeEventListener("message",t)}function Ld(){return typeof window.invokeNative=="function"}const fh={getLocales:{en:{modals:{entervalue:"Enter value...",confirm:"Confirm",cancel:"Cancel",input:"Input",delete:"Delete",save:"Save",close:"Close",inventory:{title:"{player}'s Inventory",searchitems:"Search items...",additem:"Add Item",clearall:"Clear All",loading:"Loading inventory...",noitemsmatching:"No items match your search",emptyinventory:"This player's inventory is empty",removeitem:"Remove Item",additemtitle:"Add Item to Inventory",itemname:"Item Name",selectitem:"Enter item name...",amount:"Amount",removeitemtitle:"Remove Item from Inventory",removeitemdesc:"How many {item} would you like to remove?",confirmclear:"Are you sure you want to clear this player's entire inventory? This action cannot be undone."}},notifications:{adminchat:{failedtoloadchatmessages:"Failed to load chat messages",failedtosendmessage:"Failed to send message"},playerlist:{failedtoloadplayers:"Failed to load players",failedtoloaddetailedplayerinfo:"Failed to load detailed player info for {playerId}"},resources:{failedtoloadresources:"Failed to load resources",failedtostartresource:"Failed to start resource {resource}",failedtostopresource:"Failed to stop resource {resource}",failedtorestartresource:"Failed to restart resource {resource}",startedresource:"Started resource {resource}",stoppedresource:"Stopped resource {resource}",restartedresource:"Restarted resource {resource}",failedtorefreshresource:"Failed to refresh resource {resource}"},settings:{actiontypeenabled:"Action type labels {actionType}.",uisoundsenabled:"UI sounds {uiSounds}.",fontchanged:"Font changed to {font}.",backgroundtypechanged:"Background type changed to {type}.",backgroundpresetapplied:"Applied {name} background preset.",customimageapplied:"Custom background image applied."},vehicles:{spawnedvehicle:"Spawned {vehicle}.",failedtoaddvehicletogarage:"Failed to add vehicle to garage",addedvehicletogarage:"Added {vehicle} to garage for {target}"},adminusers:{failedtoloadadminusers:"Failed to load admin users",thislicenseisalreadyanadmin:"This license is already an admin",youcannotchangeyourowngroup:"You cannot change your own group",groupupdatedsuccessfully:"Group updated successfully",failedtoupdategroups:"Failed to update groups",youcannotdeleteyourownadminaccount:"You cannot delete your own admin account",adminuserdeletedsuccessfully:"Admin user deleted successfully",failedtodeleteadminuser:"Failed to delete admin user"},analytics:{failedtoloadservermetrics:"Failed to load server metrics",failedtoloadleaderboarddata:"Failed to load leaderboard data"},tebex:{failedtoloadstoreinfo:"Failed to load Tebex store information",failedtoloadstats:"Failed to load Tebex payment statistics"},characterlist:{failedtoloadcharacters:"Failed to load characters",actionexecutedsuccessfully:"Action {action} executed successfully",failedtoexecute:"Failed to execute action: {message}",failedtoloadcharacterdetails:"Failed to load character details"},items:{failedtoloaditems:"Failed to load items",itemspawned:"Spawned {amount}x {item}",failedtospawnitem:"Failed to spawn {item}",itemgave:"Gave {amount}x {item} to {target}",failedtogiveitem:"Failed to give {item}"},playermap:{failedtoloadplayerlocations:"Failed to load player locations",failedtoloadheatmapdata:"Failed to load heat map data"},placer:{failedtoloadplacements:"Failed to load placements",failedtocreateplacement:"Failed to create placement",placementcreatedsuccessfully:"Placement created successfully",failedtoadditem:"Failed to add item",itemaddedsuccessfully:"Item added successfully",failedtoupdateitem:"Failed to update item",itemupdatedsuccessfully:"Item updated successfully",failedtodeleteitem:"Failed to delete item",itemdeletedsuccessfully:"Item deleted successfully",startededitingitem:"Started editing item. Use the in-game gizmo to modify position/rotation.",failedtostartediting:"Failed to start editing",failedtogetplayerfrontposition:"Failed to get player front position",failedtoteleporttoitem:"Failed to teleport to item"},inventory:{failedtoload:"Failed to load player inventory",itemadded:"Item added to player's inventory",failedtoadditem:"Failed to add item to inventory",itemremoved:"Item removed from player's inventory",failedtoremoveitem:"Failed to remove item from inventory",inventorycleared:"Player's inventory has been cleared",failedtoclear:"Failed to clear player's inventory"}},common:{loading:"Loading..."},map:{controls:{title:"Map Controls",layer:"Layer",heatmapType:"Heat Map Type",timeFilter:"Time Filter",legend:"Legend"},layers:{markers:"Markers",heatmap:"Heat Map",both:"Both"},heatmap:{overall:"Overall Activity",recent:"Recent Activity",timeFiltered:"Time Filtered",overall_desc:"Shows all-time player activity density",recent_desc:"Shows activity from the last 15 minutes",timeFiltered_desc:"Shows activity for a specific time period"},legend:{low:"Low",high:"High"}},pages:{dashboard:{title:"Dashboard",gamebuild:"Gamebuild",playersonline:"Players Online",uptime:"Uptime",latency:"Latency",quickactions:"Quick Actions",loading:"Loading server info..."},settings:{title:"Settings",interface:"Interface Settings",language:"Language",languagedescription:"Select your preferred language for the admin panel",languageplaceholder:"Select language...",fontfamily:"Font Family",fontfamilydescription:"Choose the font family for the entire application",showactiontypelabels:"Show Action Type Labels",showactiontypelabelsdescription:"Toggle action type labels on or off if you would like a cleaner look",uisounds:"Enable UI Sounds",uisoundsdescription:"Toggle interface sound effects on or off",appearance:"Appearance & Themes",backgroundtype:"Background Type",backgroundtypedescription:"Choose the type of background for the admin panel",backgroundnone:"None",backgroundgradient:"Gradient",backgroundimage:"Image",gradientpresets:"Gradient Presets",gradientpresetsdescription:"Choose from beautiful pre-made gradient backgrounds",customimage:"Custom Image",customimagedescription:"Enter a URL for a custom background image",currentimage:"Current Image",apply:"Apply",backgroundopacity:"Background Opacity",backgroundopacitydescription:"Adjust the transparency of the background",transparent:"Transparent",opaque:"Opaque",adminusers:"Admin User Management",permissiongroups:"Permission Group Management"},adminusers:{title:"Admin Users",loading:"Loading...",adminlist:"Admin List",addadmin:"Add Admin",back:"Back to Settings",deleteadminusermessage:"Are you sure you want to delete this admin user?",deleteadminuserwarning:"This action cannot be undone.",group:"Group",deleteadminuser:"Delete Admin"},addadminuser:{addnewadmin:"Add New Admin",selectplayer:"Select Player",selectplayerplaceholder:"Select player...",permissiongroup:"Permission Group",addadmin:"Add Admin"},permissiongroups:{title:"Permission Groups",back:"Back to Settings",loading:"Loading...",grouplist:"Group List",deletegroup:"Delete Group",addpermissiongroup:"Add Permission Group",builtin:"Built-in",allpermissions:"All Permissions",nopermissionsassigned:"No permissions assigned.",edit:"Edit",delete:"Delete",deletepermissiongroup:"Delete Permission Group",deletepermissiongroupmessage:"Are you sure you want to delete this permission group?",deletepermissiongroupwarning:"This action cannot be undone, and all users with this group will be removed.",permissiongroup:"Permission Group",add:"Add"},adminchat:{loading:"Loading...",you:"You",title:"Admin Chat",typeamessage:"Type a message...",send:"Send"},playerlist:{loading:"Loading...",title:"Players",playerlist:"Player List",onlinecount:"{count} ONLINE",id:"ID: {id}",servername:"Server Name",citizenid:"Citizen ID",cash:"Cash",bank:"Bank",job:"Job",gang:"Gang",phone:"Phone",health:"Health",armor:"Armor",identifiers:"Identifiers",history:"History",bans:"Bans",kicks:"Kicks",warns:"Warns",hide:"Hide",show:"Show",playeractions:"Player Actions",searchplayers:"Search players...",backtolist:"Back to list"},analytics:{title:"Analytics",loading:"Loading...",servermetrics:"Server Metrics",totalcharacters:"Total Characters",uniqueplayers:"Unique Players",totalitems:"Total Items",totalwealth:"Total Wealth",totalvehicles:"Total Vehicles",totalbans:"Total Bans",wealthleaderboard:"Wealth Leaderboard",character:"Character",cash:"Cash",bank:"Bank",total:"Total",showing:"Showing {start} to {end} of {total} entries"},characterlist:{title:"Characters",characterlist:"Character List",searchcharacters:"Search characters...",backtolist:"Back to list",totalcharacters:"{count} TOTAL",loadingmore:"Loading more...",loadingdetails:"Loading details...",id:"ID: {id}",citizenid:"Citizen ID",lastseen:"Last Seen",cash:"Cash",bank:"Bank",job:"Job",gang:"Gang",phone:"Phone",health:"Health",armor:"Armor",identifiers:"Identifiers",history:"History",bans:"Bans",kicks:"Kicks",warns:"Warns",none:"None",characteractions:"Character Actions",wipe:"Wipe Character",reset_skin:"Reset Skin",delete:"Delete Character"},resources:{title:"Resources",loading:"Loading...",loadingmore:"Loading more...",resource:"Resource",status:"Status",actions:"Actions",searchresources:"Search resources...",resourcelist:"Resource List",totals:"{count} RUNNING · {count2} STOPPED",running:"RUNNING",stopped:"STOPPED",restart:"Restart",stop:"Stop",start:"Start"},reports:{title:"Reports",loading:"Loading...",reportlist:"Report List",reports:"Reports",searchreports:"Search reports...",unclaimed:"Unclaimed",claimedby:"Claimed by {name}",activereports:"Active Reports",claimedreports:"Claimed Reports",resolvedreports:"Resolved Reports",claim:"Claim",unclaim:"Unclaim",chat:"Chat",delete:"Delete",chatwith:"Chat with {name}",typeamessage:"Type a message...",deletereport:"Delete Report",deletereportmessage:"Are you sure you want to delete this report from {name}?",deletereportwarning:"This action cannot be undone.",staff:"Staff",reportchat:"Report Chat",send:"Send"},vehicles:{title:"Vehicles",loading:"Loading...",vehiclelist:"Vehicle List",totals:"{count} VEHICLES",searchvehicles:"Search vehicles...",backtolist:"Back to list",hint:"Double-Click to Spawn · Shift+Click to Give",loadingmore:"Loading more...",addtogarage:"Add {vehicle} to Garage",playerid:"Player ID"},playermap:{title:"Player Map",refresh:"Refresh",refreshing:"Refreshing...",playersOnline:"{count} players online",heatmapPoints:"{count} heat map points"},items:{loading:"Loading...",title:"Items",itemlist:"Item List",totals:"{count} ITEMS",searchitems:"Search items...",backtolist:"Back to list",hint:"Click to Spawn · Shift+Click to Give",loadingmore:"Loading more...",spawn:"Spawn {item}",give:"Give {item}",cancel:"Cancel",confirm:"Confirm",scrollhint:"Scroll while hovering to adjust amount",playerid:"Player ID",playeriderror:"Please enter a player ID"},addons:{title:"Addons",description:"These are premium addons that expand your admin capabilities.",statuslastupdated:"Status last updated",badges:{free:"FREE",paid:"PAID",comingsoon:"COMING SOON",installed:"INSTALLED",available:"AVAILABLE"},buttons:{backtoaddons:"Back to Addons",unknownstatus:"Unknown Status",comingsoon:"Coming Soon",openeditor:"Open Editor",opencustomizer:"Open Customizer",openplacer:"Open Placer",opentool:"Open Tool",purchaseaddon:"Purchase Addon"},messages:{addonnotavailable:"{addonName} addon is not available. It may be coming soon or not installed on this server."},builtintools:{luaexecutor:{name:"Lua Code Executor",description:"Execute Lua code directly on the client or server",button:"Open Executor"},raycasttool:{name:"3D Position Raycast",description:"Get 3D coordinates by looking at your target position in the world",button:"Open Raycast Tool"},entityinspector:{name:"Entity Inspector",description:"Inspect, modify, and delete entities in the world",button:"Open Inspector"}},vehicleeditor:{name:"Handling Editor",description:"Real-time vehicle handling and property editor for testing",title:"Vehicle Handling Editor",vehiclecontrols:"Vehicle Controls",buttons:{refresh:"Refresh",repair:"Repair",repairvehicle:"Repair Vehicle"}},carcustomizer:{name:"Car Customizer",description:"Full vehicle customization with mods, colors, and performance upgrades",title:"Car Customizer",tabs:{cosmetic:"Cosmetic",performance:"Performance",colors:"Colors"},buttons:{refresh:"Refresh",savechanges:"Save Changes",reset:"Reset",previewmode:"Preview Mode"},options:{stock:"Stock",level:"Level"}},placer:{name:"Object & Ped Placer",description:"Place, edit, and manage objects and peds in the game world"},entityinspector:{inspectorcontrols:"Inspector Controls",buttons:{startinspector:"Start Inspector",stopinspector:"Stop Inspector",refreshdata:"Refresh Data"}},raycasttool:{raycastcontrols:"Raycast Controls",buttons:{startraycast:"Start Raycast",stopraycast:"Stop Raycast"}},luaexecutor:{title:"Lua Code Executor",executiontarget:"Execution Target",client:"Client",server:"Server",luacode:"Lua Code",buttons:{cancel:"Cancel",clear:"Clear",executeon:"Execute on {target}"},notifications:{pleaseentercode:"Please enter Lua code to execute",executesuccess:"Lua code executed successfully on {target}",executefailed:"Failed to execute Lua code: {error}"}}},placer:{title:"Placer",loading:"Loading...",placerlist:"Placer List",totals:"{count} PLACERS",searchplacers:"Search placers...",backtolist:"Back to list",newplacement:"New Placement",additem:"Add Item",placeditems:"Placed Items",teleporttoitem:"Teleport to item",editingamepositionrotation:"Edit in-game position/rotation",editproperties:"Edit properties",deleteitem:"Delete item",noitemsplacedyet:"No items placed yet"},punishment:{show_amount:"Show:",title:"Punishment List",back:"Back to Settings",delete_confirm_title:"Are you sure you want to delete this punishment?",delete_confirm_player:"Player: <b>{player}</b> (ID: {id})",delete_confirm_reason:"Reason: <b>{reason}</b>",delete:"Delete",revoke:"Revoke",revoked:"Revoked",active:"Active",no_bans_found:"No bans found.",no_warns_found:"No warns found.",no_kicks_found:"No kicks found.",search_bans:"Search bans...",search_warns:"Search warns...",search_kicks:"Search kicks...",bans:"Bans",warns:"Warns",kicks:"Kicks",by:"By: {admin}",at:"At: {date}",reason:"Reason: {reason}",status:"Status: {status}",delete_success:"Punishment deleted successfully.",delete_error:"Failed to delete punishment.",revoke_success:"Ban revoked successfully.",revoke_error:"Failed to revoke ban.",revoke_confirm_title:"Are you sure you want to revoke this ban?",revoke_confirm_player:"Player: <b>{player}</b> (ID: {id})",revoke_confirm_reason:"Reason: <b>{reason}</b>"},installation:{title:"919ADMIN Install Wizard",stepindicator:"Step {current} of {total}",loading:"Loading...",processing:"Processing...",complete:"Complete!",copied:"✓ Copied!",next:"Next",finish:"Finish",welcometitle:"Welcome to 919ADMIN",welcomecontent:`Welcome to 919ADMIN! This wizard will help you install and configure your new admin menu.

Detected Framework: {framework}

Click Begin Installation to begin.`,begininstallation:"Begin Installation",serverconfigurationtitle:"Server Configuration",serverconfigurationcontent:"Please enter your server name below. This will be used throughout the admin menu.",servernamePlaceholder:"Enter your server name",continue:"Continue",databasesetuptitle:"Database Setup",databasesetupcontent:`This step will create the necessary database tables for the admin menu to function properly.

Click next to begin creating the required tables.`,createadminusertitle:"Create Admin User",createadminusercontent:`Now we'll create your master admin account with the built-in SuperAdmin group that has all permissions.

This will use your current FiveM license to identify you:`,installationcompletetitle:"Installation Complete",installationcompletecontent:`Thank you for purchasing 919ADMIN!

This product was made with ❤️ by 919DESIGN and marks the second edition of the 919ADMIN menu.

We couldn't have gotten here without the incredible support from our community: your feedback, suggestions, and belief in what we're building made this new version possible. Whether you've been with us since the first release or this is your first time using 919ADMIN, we're truly grateful to have you on board.

This edition is a fresh take built from the ground up using everything we've learned over the years — with a focus on performance, usability, and powerful new features designed to make server ownership and moderation easier than ever.

We hope you enjoy using the admin menu as much as we enjoyed creating it!

Join our community:`,clickfinish:"Click Finish to start using the admin menu.",language:"Language",languagedescription:"Choose your preferred language for the admin panel",tebexsecrettitle:"Tebex Integration (Optional)",tebexsecretcontent:`Connect your Tebex store to view sales analytics and payment data directly in the admin panel.

Enter your Tebex secret key below, or leave blank to skip this step. You can configure this later in the settings.`,tebexsecretplaceholder:"Enter your Tebex secret key (optional)",errors:{servernamerequired:"Please enter a server name",servernamesavefailed:"Failed to save server name. Please try again.",databasecreatefailed:"Failed to create database tables. Please check your database connection.",adminusercreatefailed:"Failed to create admin user. Please try again.",tebexsecretfailed:"Failed to save Tebex configuration. Please check your secret key format."}},tebex:{title:"Tebex",loading:"Loading Tebex data...",notconfigured:{title:"Tebex Not Configured",description:"Connect your Tebex store to view sales analytics and payment data.",instruction:"Configure your Tebex secret key in the Settings page to get started."},configuration:{title:"Configure Tebex Integration",description:"Enter your Tebex secret key to access sales data and analytics",secretkeylabel:"Tebex Secret Key",secretkeyplaceholder:"Enter your Tebex secret key...",securitynote:"Your Tebex secret key is securely stored in your server's database and is never transmitted externally or shared with third parties. Only your server has access to it.",savebutton:"Save Configuration",saving:"Saving...",helpheader:"How to get your secret key:",helpsteps:{step1:"Login to your Tebex Control Panel",step2:"Navigate to Game Servers",step3:"Select your FiveM server",step4:"Copy the Secret Key from the server details"},errors:{secretkeyrequired:"Please enter a secret key",savefailed:"Failed to save configuration",networkerror:"Network error occurred"}},storeinfo:"Store Information",storename:"Store Name",domain:"Domain",servername:"Server Name",paymentmetrics:"Payment Metrics",totalpayments:"Total Payments",totalrevenue:"Total Revenue",completepayments:"Complete Payments",refunds:"Refunds",toppackages:"Top Selling Packages",sales:"sales",recentpayments:"Recent Payments",paymentid:"Payment ID",date:"Date",amount:"Amount",status:"Status",customer:"Customer",packages:"Packages"}}},es:{modals:{entervalue:"Ingresar valor...",confirm:"Confirmar",cancel:"Cancelar",input:"Entrada",delete:"Eliminar",save:"Guardar",close:"Cerrar",inventory:{title:"Inventario de {player}",searchitems:"Buscar objetos...",additem:"Agregar Objeto",clearall:"Limpiar Todo",loading:"Cargando inventario...",noitemsmatching:"No hay objetos que coincidan con tu búsqueda",emptyinventory:"El inventario de este jugador está vacío",removeitem:"Quitar Objeto",additemtitle:"Agregar Objeto al Inventario",itemname:"Nombre del Objeto",selectitem:"Seleccionar un objeto...",amount:"Cantidad",removeitemtitle:"Quitar Objeto del Inventario",removeitemdesc:"¿Cuántos {item} te gustaría quitar?",confirmclear:"¿Estás seguro de que quieres limpiar todo el inventario de este jugador? Esta acción no se puede deshacer."}},notifications:{adminchat:{failedtoloadchatmessages:"Error al cargar mensajes del chat",failedtosendmessage:"Error al enviar mensaje"},playerlist:{failedtoloadplayers:"Error al cargar jugadores",failedtoloaddetailedplayerinfo:"Error al cargar información detallada del jugador {playerId}"},resources:{failedtoloadresources:"Error al cargar recursos",failedtostartresource:"Error al iniciar recurso {resource}",failedtostopresource:"Error al detener recurso {resource}",failedtorestartresource:"Error al reiniciar recurso {resource}",startedresource:"Recurso iniciado {resource}",stoppedresource:"Recurso detenido {resource}",restartedresource:"Recurso reiniciado {resource}",failedtorefreshresource:"Error al actualizar recurso {resource}"},settings:{actiontypeenabled:"Etiquetas de tipo de acción {actionType}.",uisoundsenabled:"Sonidos de interfaz {uiSounds}.",fontchanged:"Fuente cambiada a {font}.",backgroundtypechanged:"Tipo de fondo cambiado a {type}.",backgroundpresetapplied:"Preselección de fondo {name} aplicada.",customimageapplied:"Imagen de fondo personalizada aplicada."},vehicles:{spawnedvehicle:"Vehículo {vehicle} generado.",failedtoaddvehicletogarage:"Error al agregar vehículo al garaje",addedvehicletogarage:"Vehículo {vehicle} agregado al garaje de {target}"},adminusers:{failedtoloadadminusers:"Error al cargar usuarios administradores",thislicenseisalreadyanadmin:"Esta licencia ya es un administrador",youcannotchangeyourowngroup:"No puedes cambiar tu propio grupo",groupupdatedsuccessfully:"Grupo actualizado exitosamente",failedtoupdategroups:"Error al actualizar grupos",youcannotdeleteyourownadminaccount:"No puedes eliminar tu propia cuenta de administrador",adminuserdeletedsuccessfully:"Usuario administrador eliminado exitosamente",failedtodeleteadminuser:"Error al eliminar usuario administrador"},analytics:{failedtoloadservermetrics:"Error al cargar métricas del servidor",failedtoloadleaderboarddata:"Error al cargar datos de la tabla de clasificación"},tebex:{failedtoloadstoreinfo:"Error al cargar información de la tienda Tebex",failedtoloadstats:"Error al cargar estadísticas de pagos de Tebex"},characterlist:{failedtoloadcharacters:"Error al cargar personajes",actionexecutedsuccessfully:"Acción {action} ejecutada exitosamente",failedtoexecute:"Error al ejecutar acción: {message}",failedtoloadcharacterdetails:"Error al cargar detalles del personaje"},items:{failedtoloaditems:"Error al cargar objetos",itemspawned:"Generado {amount}x {item}",failedtospawnitem:"Error al generar {item}",itemgave:"Entregado {amount}x {item} a {target}",failedtogiveitem:"Error al entregar {item}"},playermap:{failedtoloadplayerlocations:"Error al cargar ubicaciones de jugadores"},placer:{failedtoloadplacements:"Error al cargar ubicaciones",failedtocreateplacement:"Error al crear ubicación",placementcreatedsuccessfully:"Ubicación creada exitosamente",failedtoadditem:"Error al agregar objeto",itemaddedsuccessfully:"Objeto agregado exitosamente",failedtoupdateitem:"Error al actualizar objeto",itemupdatedsuccessfully:"Objeto actualizado exitosamente",failedtodeleteitem:"Error al eliminar objeto",itemdeletedsuccessfully:"Objeto eliminado exitosamente",startededitingitem:"Comenzó la edición del objeto. Usa el gizmo en el juego para modificar posición/rotación.",failedtostartediting:"Error al comenzar la edición",failedtogetplayerfrontposition:"Error al obtener la posición frontal del jugador",failedtoteleporttoitem:"Error al teletransportarse al objeto"},inventory:{failedtoload:"Error al cargar el inventario del jugador",itemadded:"Objeto agregado al inventario del jugador",failedtoadditem:"Error al agregar objeto al inventario",itemremoved:"Objeto removido del inventario del jugador",failedtoremoveitem:"Error al remover objeto del inventario",inventorycleared:"El inventario del jugador ha sido limpiado",failedtoclear:"Error al limpiar el inventario del jugador"}},common:{loading:"Cargando..."},pages:{dashboard:{title:"Panel de Control",gamebuild:"Versión del Juego",playersonline:"Jugadores en Línea",uptime:"Tiempo Activo",latency:"Latencia",quickactions:"Acciones Rápidas",loading:"Cargando información del servidor..."},settings:{title:"Configuración",interface:"Configuración de Interfaz",language:"Idioma",languagedescription:"Selecciona tu idioma preferido para el panel de administración",languageplaceholder:"Seleccionar idioma...",fontfamily:"Familia de Fuente",fontfamilydescription:"Elige la familia de fuente para toda la aplicación",showactiontypelabels:"Mostrar Etiquetas de Tipo de Acción",showactiontypelabelsdescription:"Activa o desactiva las etiquetas de tipo de acción si deseas una apariencia más limpia",uisounds:"Activar Sonidos de Interfaz",uisoundsdescription:"Activa o desactiva los efectos de sonido de la interfaz",appearance:"Apariencia y Temas",backgroundtype:"Tipo de Fondo",backgroundtypedescription:"Elige el tipo de fondo para el panel de administración",backgroundnone:"Ninguno",backgroundgradient:"Degradado",backgroundimage:"Imagen",gradientpresets:"Preselecciones de Degradado",gradientpresetsdescription:"Elige entre hermosos fondos degradados prediseñados",customimage:"Imagen Personalizada",customimagedescription:"Introduce una URL para una imagen de fondo personalizada",currentimage:"Imagen Actual",apply:"Aplicar",backgroundopacity:"Opacidad del Fondo",backgroundopacitydescription:"Ajusta la transparencia del fondo",transparent:"Transparente",opaque:"Opaco",adminusers:"Gestión de Usuarios Administradores",permissiongroups:"Gestión de Grupos de Permisos"},adminusers:{title:"Usuarios Administradores",loading:"Cargando...",adminlist:"Lista de Administradores",addadmin:"Agregar Administrador",back:"Volver a Configuración",deleteadminusermessage:"¿Estás seguro de que deseas eliminar este usuario administrador?",deleteadminuserwarning:"Esta acción no se puede deshacer.",group:"Grupo",deleteadminuser:"Eliminar Administrador"},addadminuser:{addnewadmin:"Agregar Nuevo Administrador",selectplayer:"Seleccionar Jugador",selectplayerplaceholder:"Seleccionar jugador...",permissiongroup:"Grupo de Permisos",addadmin:"Agregar Administrador"},permissiongroups:{title:"Grupos de Permisos",back:"Volver a Configuración",loading:"Cargando...",grouplist:"Lista de Grupos",deletegroup:"Eliminar Grupo",addpermissiongroup:"Agregar Grupo de Permisos",builtin:"Incorporado",allpermissions:"Todos los Permisos",nopermissionsassigned:"Sin permisos asignados.",edit:"Editar",delete:"Eliminar",deletepermissiongroup:"Eliminar Grupo de Permisos",deletepermissiongroupmessage:"¿Estás seguro de que deseas eliminar este grupo de permisos?",deletepermissiongroupwarning:"Esta acción no se puede deshacer, y todos los usuarios con este grupo serán eliminados.",permissiongroup:"Grupo de Permisos",add:"Agregar"},adminchat:{loading:"Cargando...",you:"Tú",title:"Chat de Administración",typeamessage:"Escribe un mensaje...",send:"Enviar"},playerlist:{loading:"Cargando...",title:"Jugadores",playerlist:"Lista de Jugadores",onlinecount:"{count} EN LÍNEA",id:"ID: {id}",servername:"Nombre en Servidor",citizenid:"ID de Ciudadano",cash:"Efectivo",bank:"Banco",job:"Trabajo",gang:"Banda",phone:"Teléfono",health:"Salud",armor:"Armadura",identifiers:"Identificadores",history:"Historial",bans:"Baneos",kicks:"Expulsiones",warns:"Advertencias",hide:"Ocultar",show:"Mostrar",playeractions:"Acciones de Jugador",searchplayers:"Buscar jugadores...",backtolist:"Volver a la lista"},analytics:{title:"Analíticas",loading:"Cargando...",servermetrics:"Métricas del Servidor",totalcharacters:"Total de Personajes",uniqueplayers:"Jugadores Únicos",totalitems:"Total de Objetos",totalwealth:"Riqueza Total",totalvehicles:"Total de Vehículos",totalbans:"Total de Baneos",wealthleaderboard:"Tabla de Clasificación de Riqueza",character:"Personaje",cash:"Efectivo",bank:"Banco",total:"Total",showing:"Mostrando {start} a {end} de {total} entradas"},characterlist:{title:"Personajes",characterlist:"Lista de Personajes",searchcharacters:"Buscar personajes...",backtolist:"Volver a la lista",totalcharacters:"{count} TOTAL",loadingmore:"Cargando más...",loadingdetails:"Cargando detalles...",id:"ID: {id}",citizenid:"ID de Ciudadano",lastseen:"Última vez visto",cash:"Efectivo",bank:"Banco",job:"Trabajo",gang:"Banda",phone:"Teléfono",health:"Salud",armor:"Armadura",identifiers:"Identificadores",history:"Historial",bans:"Baneos",kicks:"Expulsiones",warns:"Advertencias",none:"Ninguno",characteractions:"Acciones de Personaje",wipe:"Borrar Personaje",reset_skin:"Restablecer Apariencia",delete:"Eliminar Personaje"},resources:{title:"Recursos",loading:"Cargando...",loadingmore:"Cargando más...",resource:"Recurso",status:"Estado",actions:"Acciones",searchresources:"Buscar recursos...",resourcelist:"Lista de Recursos",totals:"{count} EN EJECUCIÓN · {count2} DETENIDOS",running:"EN EJECUCIÓN",stopped:"DETENIDO",restart:"Reiniciar",stop:"Detener",start:"Iniciar"},reports:{title:"Reportes",loading:"Cargando...",reportlist:"Lista de Reportes",reports:"Reportes",searchreports:"Buscar reportes...",unclaimed:"Sin reclamar",claimedby:"Reclamado por {name}",activereports:"Reportes Activos",claimedreports:"Reportes Reclamados",resolvedreports:"Reportes Resueltos",claim:"Reclamar",unclaim:"Liberar",chat:"Chat",delete:"Eliminar",chatwith:"Chat con {name}",typeamessage:"Escribe un mensaje...",deletereport:"Eliminar Reporte",deletereportmessage:"¿Estás seguro de que deseas eliminar este reporte de {name}?",deletereportwarning:"Esta acción no se puede deshacer.",send:"Enviar",reportchat:"Chat de Reportes",staff:"Staff"},vehicles:{title:"Vehículos",loading:"Cargando...",vehiclelist:"Lista de Vehículos",totals:"{count} VEHÍCULOS",searchvehicles:"Buscar vehículos...",backtolist:"Volver a la lista",hint:"Doble clic para Generar · Shift+Clic para Dar",loadingmore:"Cargando más...",addtogarage:"Agregar {vehicle} al Garaje",playerid:"ID de Jugador"},playermap:{title:"Mapa de Jugadores",refresh:"Actualizar",refreshing:"Actualizando..."},items:{loading:"Cargando...",title:"Objetos",itemlist:"Lista de Objetos",totals:"{count} OBJETOS",searchitems:"Buscar objetos...",backtolist:"Volver a la lista",hint:"Clic para Generar · Shift+Clic para Dar",loadingmore:"Cargando más...",spawn:"Generar {item}",give:"Dar {item}",cancel:"Cancelar",confirm:"Confirmar",scrollhint:"Desplázate mientras pasas el cursor para ajustar la cantidad",playerid:"ID de Jugador",playeriderror:"Por favor ingresa un ID de jugador"},addons:{title:"Complementos",description:"Estos son complementos premium que amplían tus capacidades de administrador.",statuslastupdated:"Estado actualizado por última vez",badges:{free:"GRATIS",paid:"PAGO",comingsoon:"PRÓXIMAMENTE",installed:"INSTALADO",available:"DISPONIBLE"},buttons:{backtoaddons:"Volver a Complementos",unknownstatus:"Estado Desconocido",comingsoon:"Próximamente",openeditor:"Abrir Editor",opencustomizer:"Abrir Personalizador",openplacer:"Abrir Colocador",opentool:"Abrir Herramienta",purchaseaddon:"Comprar Complemento"},messages:{addonnotavailable:"El complemento {addonName} no está disponible. Puede que esté próximamente o no esté instalado en este servidor."},builtintools:{luaexecutor:{name:"Ejecutor de Código Lua",description:"Ejecuta código Lua directamente en el cliente o servidor",button:"Abrir Ejecutor"},raycasttool:{name:"Raycast de Posición 3D",description:"Obtén coordenadas 3D mirando tu posición objetivo en el mundo",button:"Abrir Herramienta de Raycast"},entityinspector:{name:"Inspector de Entidades",description:"Inspecciona, modifica y elimina entidades en el mundo",button:"Abrir Inspector"}},vehicleeditor:{name:"Editor de Manejo",description:"Editor de propiedades y manejo de vehículos en tiempo real para pruebas",title:"Editor de Manejo de Vehículos",vehiclecontrols:"Controles de Vehículo",buttons:{refresh:"Actualizar",repair:"Reparar",repairvehicle:"Reparar Vehículo"}},carcustomizer:{name:"Personalizador de Coches",description:"Personalización completa de vehículos con modificaciones, colores y mejoras de rendimiento",title:"Personalizador de Coches",tabs:{cosmetic:"Cosmético",performance:"Rendimiento",colors:"Colores"},buttons:{refresh:"Actualizar",savechanges:"Guardar Cambios",reset:"Restablecer",previewmode:"Modo Vista Previa"},options:{stock:"Original",level:"Nivel"}},placer:{name:"Colocador de Objetos y Peatones",description:"Coloca, edita y gestiona objetos y peatones en el mundo del juego"},entityinspector:{inspectorcontrols:"Controles del Inspector",buttons:{startinspector:"Iniciar Inspector",stopinspector:"Detener Inspector",refreshdata:"Actualizar Datos"}},raycasttool:{raycastcontrols:"Controles de Raycast",buttons:{startraycast:"Iniciar Raycast",stopraycast:"Detener Raycast"}},luaexecutor:{title:"Ejecutor de Código Lua",executiontarget:"Objetivo de Ejecución",client:"Cliente",server:"Servidor",luacode:"Código Lua",buttons:{cancel:"Cancelar",clear:"Limpiar",executeon:"Ejecutar en {target}"},notifications:{pleaseentercode:"Por favor ingresa código Lua para ejecutar",executesuccess:"Código Lua ejecutado exitosamente en {target}",executefailed:"Error al ejecutar código Lua: {error}"}}},placer:{title:"Colocador",loading:"Cargando...",placerlist:"Lista de Colocadores",totals:"{count} COLOCADORES",searchplacers:"Buscar colocadores...",backtolist:"Volver a la lista",newplacement:"Nueva Ubicación",additem:"Agregar Objeto",placeditems:"Objetos Colocados",teleporttoitem:"Teletransportarse al objeto",editingamepositionrotation:"Editar posición/rotación en el juego",editproperties:"Editar propiedades",deleteitem:"Eliminar objeto",noitemsplacedyet:"Aún no hay objetos colocados"},punishment:{show_amount:"Mostrar:",title:"Castigos",back:"Volver a Configuración",delete_confirm_title:"¿Estás seguro de que deseas eliminar este castigo?",delete_confirm_player:"Jugador: <b>{player}</b> (ID: {id})",delete_confirm_reason:"Razón: <b>{reason}</b>",delete:"Eliminar",revoke:"Revocar",revoked:"Revocado",active:"Activo",no_bans_found:"No se encontraron baneos.",no_warns_found:"No se encontraron advertencias.",no_kicks_found:"No se encontraron expulsiones.",search_bans:"Buscar baneos...",search_warns:"Buscar advertencias...",search_kicks:"Buscar expulsiones...",bans:"Baneos",warns:"Advertencias",kicks:"Expulsiones",by:"Por: {admin}",at:"En: {date}",reason:"Razón: {reason}",status:"Estado: {status}",delete_success:"Castigo eliminado exitosamente.",delete_error:"Error al eliminar el castigo.",revoke_success:"Baneo revocado exitosamente.",revoke_error:"Error al revocar el baneo.",revoke_confirm_title:"¿Estás seguro de que deseas revocar este baneo?",revoke_confirm_player:"Jugador: <b>{player}</b> (ID: {id})",revoke_confirm_reason:"Razón: <b>{reason}</b>"},installation:{title:"Asistente de Instalación 919ADMIN",stepindicator:"Paso {current} de {total}",loading:"Cargando...",processing:"Procesando...",complete:"¡Completado!",copied:"✓ ¡Copiado!",next:"Siguiente",finish:"Finalizar",welcometitle:"Bienvenido a 919ADMIN",welcomecontent:`¡Bienvenido a 919ADMIN! Este asistente te ayudará a instalar y configurar tu nuevo menú de administración.

Framework Detectado: {framework}

Haz clic en Comenzar Instalación para empezar.`,begininstallation:"Comenzar Instalación",serverconfigurationtitle:"Configuración del Servidor",serverconfigurationcontent:"Por favor ingresa el nombre de tu servidor a continuación. Esto se usará en todo el menú de administración.",servernamePlaceholder:"Ingresa el nombre de tu servidor",continue:"Continuar",databasesetuptitle:"Configuración de Base de Datos",databasesetupcontent:`Este paso creará las tablas de base de datos necesarias para que el menú de administración funcione correctamente.

Haz clic en siguiente para comenzar a crear las tablas requeridas.`,createadminusertitle:"Crear Usuario Administrador",createadminusercontent:`Ahora crearemos tu cuenta de administrador principal con el grupo SuperAdmin incorporado que tiene todos los permisos.

Esto usará tu licencia actual de FiveM para identificarte:`,installationcompletetitle:"Instalación Completa",installationcompletecontent:`¡Gracias por comprar 919ADMIN!

Este producto fue hecho con ❤️ por 919DESIGN y marca la segunda edición del menú 919ADMIN.

No podríamos haber llegado aquí sin el increíble apoyo de nuestra comunidad: sus comentarios, sugerencias y fe en lo que estamos construyendo hizo posible esta nueva versión. Ya sea que hayas estado con nosotros desde el primer lanzamiento o esta sea tu primera vez usando 919ADMIN, estamos verdaderamente agradecidos de tenerte a bordo.

Esta edición es una nueva perspectiva construida desde cero usando todo lo que hemos aprendido a lo largo de los años — con un enfoque en rendimiento, usabilidad y nuevas características poderosas diseñadas para hacer que la propiedad del servidor y la moderación sea más fácil que nunca.

¡Esperamos que disfrutes usar el menú de administración tanto como nosotros disfrutamos creándolo!

Únete a nuestra comunidad:`,clickfinish:"Haz clic en Finalizar para comenzar a usar el menú de administración.",language:"Idioma",languagedescription:"Elige tu idioma preferido para el panel de administración",tebexsecrettitle:"Integración Tebex (Opcional)",tebexsecretcontent:`Conecta tu tienda Tebex para ver análisis de ventas y datos de pagos directamente en el panel de administración.

Ingresa tu clave secreta de Tebex a continuación, o déjalo en blanco para omitir este paso. Puedes configurar esto más tarde en la configuración.`,tebexsecretplaceholder:"Ingresa tu clave secreta de Tebex (opcional)",errors:{servernamerequired:"Por favor ingresa un nombre de servidor",servernamesavefailed:"Error al guardar el nombre del servidor. Por favor inténtalo de nuevo.",databasecreatefailed:"Error al crear las tablas de la base de datos. Por favor verifica tu conexión a la base de datos.",adminusercreatefailed:"Error al crear el usuario administrador. Por favor inténtalo de nuevo.",tebexsecretfailed:"Error al guardar la configuración de Tebex. Por favor verifica el formato de tu clave secreta."}},tebex:{title:"Tebex",loading:"Cargando datos de Tebex...",notconfigured:{title:"Tebex No Configurado",description:"Conecta tu tienda Tebex para ver análisis de ventas y datos de pagos.",instruction:"Configura tu clave secreta de Tebex en la página de Configuración para comenzar."},configuration:{title:"Configurar Integración Tebex",description:"Ingresa tu clave secreta de Tebex para acceder a datos de ventas y analíticas",secretkeylabel:"Clave Secreta de Tebex",secretkeyplaceholder:"Ingresa tu clave secreta de Tebex...",securitynote:"Tu clave secreta de Tebex se almacena de forma segura en la base de datos de tu servidor y nunca se transmite externamente o se comparte con terceros. Solo tu servidor tiene acceso a ella.",savebutton:"Guardar Configuración",saving:"Guardando...",helpheader:"Cómo obtener tu clave secreta:",helpsteps:{step1:"Inicia sesión en tu Panel de Control de Tebex",step2:"Navega a Servidores de Juego",step3:"Selecciona tu servidor de FiveM",step4:"Copia la Clave Secreta de los detalles del servidor"},errors:{secretkeyrequired:"Por favor ingresa una clave secreta",savefailed:"Error al guardar la configuración",networkerror:"Ocurrió un error de red"}},storeinfo:"Información de la Tienda",storename:"Nombre de la Tienda",domain:"Dominio",servername:"Nombre del Servidor",paymentmetrics:"Métricas de Pagos",totalpayments:"Total de Pagos",totalrevenue:"Ingresos Totales",completepayments:"Pagos Completados",refunds:"Reembolsos",toppackages:"Paquetes Más Vendidos",sales:"ventas",recentpayments:"Pagos Recientes",paymentid:"ID de Pago",date:"Fecha",amount:"Cantidad",status:"Estado",customer:"Cliente",packages:"Paquetes"}}}},setAdminUserGroups:[],getAllCharacters:[{id:1,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:2,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:3,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:4,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:5,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:6,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:7,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:8,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:9,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:10,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:11,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:12,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:13,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:14,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:15,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:16,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:17,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:18,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:19,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"},{id:20,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536"},{id:21,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890"}],getCharacterInfo:{id:1,citizenId:"CID123456",characterName:"John Doe",lastSeen:"2024-03-15T14:30:00Z",job:{name:"police",label:"Police Officer",grade:3,grade_label:"Lieutenant"},gang:{name:"none",label:"None",grade:0,grade_label:"None"},cash:5e3,bank:5e4,phone:"555-0123",identifiers:["steam:1100001xxxxxx","license:abc123def456","discord:123456789"],history:{bans:0,kicks:1,warns:2}},executeCharacterAction:{status:"ok",message:"Action executed successfully"},getPermissionGroups:[{name:"SeniorAdmin",description:"This groups has access to senior admin features.",permissions:["page:AdminChat","page:PlayerList","page:Reports","page:Map","page:Tebex"]},{name:"Admin",description:"This groups has access to admin features.",permissions:["page:AdminChat","page:PlayerList","page:Reports","page:Map"]},{name:"Moderator",description:"This groups has access to moderator features.",permissions:["page:AdminChat","page:PlayerList","page:Reports","page:Map"]}],getCurrentUserPermissionGroup:"SuperAdmin",getAdminUsers:[{license:"license:345893ae9942959df31acd349200000a3",name:"John Doe",group:"SuperAdmin",type:"database"},{license:"license:345893ae9942959df31acd349200000a2",name:"John Dae",group:"SuperAdmin",type:"database"},{license:"license:345893ae9942959df31acd349200000a1",name:"John Doe",group:"SuperAdmin",type:"database"},{license:"license:345893ae9942959df31acd349200000a4",name:"John Doe",group:"SuperAdmin",type:"discord"},{license:"license:345893ae9942959df31acd349200000a5",name:"John Doe",group:"SuperAdmin",type:"database"}],deletePunishment:{status:"ok",message:"Punishment deleted successfully"},getVehicleData:{handle:12345,modelName:"Adder",plate:"ADMIN123",engineHealth:950.5,bodyHealth:875.2,petrolTankHealth:1e3,dirtLevel:3.5,primaryColor:{r:255,g:0,b:0},secondaryColor:{r:0,g:0,b:0},class:"Super",maxSpeed:85,acceleration:.85,handling:{mass:1500,initialDragCoeff:8.5,downforceModifier:2,centreOfMassOffset:{x:0,y:.1,z:-.15},inertiaMultiplier:{x:1.2,y:1.3,z:1.5},percentSubmerged:85,percentSubmergedRatio:1,driveInertia:1,clutchChangeRateScaleUpShift:2.9,clutchChangeRateScaleDownShift:2.3,initialDriveForce:.32,driveMaxFlatVel:165,initialDriveMaxFlatVel:165,brakeForce:1.2,brakeBiasFront:.52,brakeBiasRear:.48,handBrakeForce:.8,steeringLock:40,steeringLockRatio:1,tractionCurveMax:2.65,tractionCurveMaxRatio:1,tractionCurveMin:2.05,tractionCurveMinRatio:1,tractionCurveLateral:22.5,tractionCurveLateralRatio:1,tractionSpringDeltaMax:.15,tractionSpringDeltaMaxRatio:1,lowSpeedTractionLossMult:1.3,camberStiffnesss:0,tractionBiasFront:.48,tractionBiasRear:.52,tractionLossMult:1,suspensionForce:2.8,suspensionCompDamp:1.4,suspensionReboundDamp:2.5,suspensionUpperLimit:.08,suspensionLowerLimit:-.12,suspensionRaise:0,suspensionBiasFront:.5,suspensionBiasRear:.5,antiRollBarForce:.9,antiRollBarBiasFront:.6,antiRollBarBiasRear:.4,rollCentreHeightFront:.34,rollCentreHeightRear:.34,collisionDamageMult:1,weaponDamageMult:1,deformationDamageMult:.8,engineDamageMult:1.5,petrolTankVolume:65,oilVolume:5,seatOffsetDistX:0,seatOffsetDistY:0,seatOffsetDistZ:0,monetaryValue:24e4}},updateVehicleProperty:{},resetVehicleHandling:{},repairVehicle:{},cleanVehicle:{},isUserInVehicle:{inVehicle:!0},getDetailedPlayerInfo:{id:12,characterName:"Johnny Marshall",serverName:"johnnym",citizenId:"CID123456",ping:42,cash:250.5,bank:9432.75,health:85,armor:40,job:{name:"police",label:"Police Officer",grade_label:"Sergeant",grade_level:2},gang:{name:"vagos",label:"LS Vagos",grade_label:"Member",grade_level:1},identifiers:["steam:1234567890","discord:1234567890","license:1234567890","ip:127.0.0.1","xbl:1234567890","live:1234567890","fivem:1234567890","discord:1234567890"],punishments:[{id:1,type:"ban",reason:"Cheating",issuedBy:"Admin1",issuedAt:"2024-06-01T10:00:00Z",status:"active",expire:17199e5},{id:2,type:"warn",reason:"Spamming",issuedBy:"Admin2",issuedAt:"2024-05-15T14:30:00Z",status:"active",expire:null},{id:3,type:"kick",reason:"Toxic behavior",issuedBy:"Admin3",issuedAt:"2024-04-20T18:45:00Z",status:"inactive",expire:null},{id:4,type:"ban",reason:"Exploiting",issuedBy:"Admin1",issuedAt:"2024-03-10T09:15:00Z",status:"revoked",expire:171e7},{id:5,type:"warn",reason:"Rude language",issuedBy:"Admin2",issuedAt:"2024-02-05T16:20:00Z",status:"active",expire:null}]},getAllPlayers:[{id:12,characterName:"Johnny Marshall",serverName:"johnnym",citizenId:"CID123456",ping:42},{id:23,characterName:"Marianne Wells",serverName:"mwells",citizenId:"CID654321",ping:56},{id:24,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:25,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56},{id:26,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:27,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56},{id:28,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:29,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56},{id:30,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:31,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56},{id:32,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:33,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56},{id:34,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:35,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:102},{id:36,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:37,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:256},{id:38,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:300},{id:39,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:256},{id:40,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:41,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56},{id:42,characterName:"John Doe",serverName:"johnnym",citizenId:"CID123456",license:"license:1234567890",ping:42},{id:43,characterName:"Jane Doe",serverName:"janeyc",citizenId:"CID346412",license:"license:2354564536",ping:56}],getServerInfo:{name:"Overtime RP",playerCount:2,maxPlayers:128,uptime:"3h 27m",serverVersion:"FXServer Windows 16645",gameBuild:3258,framework:"QBCore",ping:0},getPanelVersion:{version:"DEV"},getAddonStates:{lastUpdated:"2025-01-21T15:30:00Z",addons:{vehicleEditor:{status:"coming_soon",installed:!0,tebexLink:"https://your-store.tebex.io/package/vehicle-editor"},carCustomizer:{status:"coming_soon",installed:!1,tebexLink:"https://your-store.tebex.io/package/car-customizer"},placer:{status:"coming_soon",installed:!1,tebexLink:"https://your-store.tebex.io/package/object-ped-placer"}}},getAllItems:[{name:"water",label:"Water Bottle",description:"A bottle of water.",image:"water.png",weight:.5},{name:"sandwich",label:"Sandwich",description:"A delicious sandwich.",image:"sandwich.png",weight:.2},{name:"phone",label:"Phone",description:"A smartphone.",image:"phone.png",weight:.1},{name:"keys",label:"Keys",description:"A set of keys.",image:"keys.png",weight:.05},{name:"wallet",label:"Wallet",description:"A leather wallet.",image:"wallet.png",weight:.3},{name:"flashlight",label:"Flashlight",description:"A bright flashlight.",image:"flashlight.png",weight:.4},{name:"firstaidkit",label:"First Aid Kit",description:"A kit for medical emergencies.",image:"firstaidkit.png",weight:1},{name:"bandage",label:"Bandage",description:"A bandage for minor injuries.",image:"bandage.png",weight:.1},{name:"painkillers",label:"Painkillers",description:"Medication for pain relief.",image:"painkillers.png",weight:.05},{name:"screwdriver",label:"Screwdriver",description:"A tool for driving screws.",image:"screwdriver.png",weight:.2},{name:"hammer",label:"Hammer",description:"A tool for hammering nails.",image:"hammer.png",weight:.5},{name:"wrench",label:"Wrench",description:"A tool for gripping and turning.",image:"wrench.png",weight:.3},{name:"pliers",label:"Pliers",description:"A tool for gripping and bending.",image:"pliers.png",weight:.4},{name:"tape",label:"Tape",description:"A roll of adhesive tape.",image:"tape.png",weight:.1},{name:"glue",label:"Glue",description:"A tube of adhesive glue.",image:"glue.png",weight:.2},{name:"scissors",label:"Scissors",description:"A pair of scissors.",image:"scissors.png",weight:.3},{name:"notebook",label:"Notebook",description:"A blank notebook.",image:"notebook.png",weight:.4},{name:"pen",label:"Pen",description:"A ballpoint pen.",image:"pen.png",weight:.05},{name:"pencil",label:"Pencil",description:"A wooden pencil.",image:"pencil.png",weight:.05},{name:"eraser",label:"Eraser",description:"An eraser for pencil marks.",image:"eraser.png",weight:.05},{name:"calculator",label:"Calculator",description:"A basic calculator.",image:"calculator.png",weight:.2},{name:"ruler",label:"Ruler",description:"A wooden ruler.",image:"ruler.png",weight:.1},{name:"stapler",label:"Stapler",description:"A stapler for binding papers.",image:"stapler.png",weight:.3},{name:"paperclip",label:"Paperclip",description:"A metal paperclip.",image:"paperclip.png",weight:.01},{name:"folder",label:"Folder",description:"A plastic folder.",image:"folder.png",weight:.2},{name:"sticky_notes",label:"Sticky Notes",description:"A pad of sticky notes.",image:"sticky_notes.png",weight:.1},{name:"highlighter",label:"Highlighter",description:"A yellow highlighter.",image:"highlighter.png",weight:.05},{name:"marker",label:"Marker",description:"A black marker.",image:"marker.png",weight:.05},{name:"tack",label:"Tack",description:"A push pin tack.",image:"tack.png",weight:.01},{name:"thumbtack",label:"Thumbtack",description:"A thumbtack for pinning notes.",image:"thumbtack.png",weight:.01},{name:"paper",label:"Paper",description:"A sheet of paper.",image:"paper.png",weight:.01},{name:"envelope",label:"Envelope",description:"A white envelope.",image:"envelope.png",weight:.02},{name:"sticker",label:"Sticker",description:"A colorful sticker.",image:"sticker.png",weight:.01},{name:"postcard",label:"Postcard",description:"A postcard from a faraway place.",image:"postcard.png",weight:.02},{name:"bookmark",label:"Bookmark",description:"A bookmark for your books.",image:"bookmark.png",weight:.01},{name:"paperweight",label:"Paperweight",description:"A decorative paperweight.",image:"paperweight.png",weight:.3}],getAllVehicles:[{name:"Bifta",brand:"BF",model:"bifta",price:74872,category:"offroad",type:"automobile",hash:"bifta"},{name:"Bison",brand:"Bravado",model:"bison",price:62297,category:"vans",type:"automobile",hash:"bison"},{name:"Bison (McGill-Olsen)",brand:"Bravado",model:"bison2",price:62297,category:"vans",type:"automobile",hash:"bison2"},{name:"Bison (The Mighty Bush)",brand:"Bravado",model:"bison3",price:62297,category:"vans",type:"automobile",hash:"bison3"},{name:"BeeJay XL",brand:"Karin",model:"bjxl",price:60692,category:"suvs",type:"automobile",hash:"bjxl"},{name:"Blade",brand:"Vapid",model:"blade",price:70520,category:"muscle",type:"automobile",hash:"blade"},{name:"Blazer Lifeguard",brand:"Nagasaki",model:"blazer2",price:15679,category:"offroad",type:"automobile",hash:"blazer2"},{name:"Blazer Hot Rod",brand:"Nagasaki",model:"blazer3",price:21457,category:"offroad",type:"automobile",hash:"blazer3"},{name:"Blazer",brand:"Nagasaki",model:"blazer",price:21457,category:"offroad",type:"automobile",hash:"blazer"},{name:"Brawler",brand:"Declasse",model:"brawler",price:105e3,category:"sportsclassics",type:"automobile",hash:"brawler"}],getChatMessages:[{id:1,sender:"Admin1",message:"Hey, anyone online?",time:"12:43",self:!1},{id:2,sender:"You",message:"Yeah, I'm here!",time:"12:43",self:!0},{id:3,sender:"Admin2",message:"Need help checking something?",time:"12:43",self:!1},{id:4,sender:"You",message:"Sure, what do you need?",time:"12:43",self:!0},{id:5,sender:"Admin1",message:"Just a quick check on the server status.",time:"12:43",self:!1},{id:6,sender:"You",message:"Got it!",time:"12:43",self:!0},{id:7,sender:"Admin2",message:"Thanks!",time:"12:43",self:!1},{id:8,sender:"You",message:"No problem!",time:"12:43",self:!0}],getAllResources:[{name:"resource1",status:"started",author:"Author1",description:"Description of resource1",version:"1.0.0"},{name:"resource2",status:"stopped",author:"Author2",description:"Description of resource2",version:"2.0.0"},{name:"resource3",status:"started",author:"Author3",description:"Description of resource3",version:"1.0.0"},{name:"resource4",status:"stopped",author:"Author4",description:"Description of resource4",version:"2.0.0"},{name:"resource5",status:"started",author:"Author5",description:"Description of resource5",version:"1.0.0"},{name:"resource6",status:"stopped",author:"Author6",description:"Description of resource6",version:"2.0.0"},{name:"resource7",status:"started",author:"Author7",description:"Description of resource7",version:"1.0.0"},{name:"resource8",status:"stopped",author:"Author8",description:"Description of resource8",version:"2.0.0"},{name:"resource9",status:"started",author:"Author9",description:"Description of resource9",version:"1.0.0"}],startResource:[{}],stopResource:[{}],restartResource:[{}],getAllPlayerLocations:[{name:"Player1",id:3,x:123.45,y:678.9},{name:"Player2",id:4,x:0,y:0},{name:"Player3",id:5,x:345.67,y:890.12},{name:"Player4",id:6,x:456.78,y:901.23}],getHeatMapData:[{x:123.45,y:678.9,intensity:.8},{x:0,y:0,intensity:1},{x:345.67,y:890.12,intensity:.6},{x:456.78,y:901.23,intensity:.9},{x:200,y:300,intensity:.7},{x:-100,y:150,intensity:.5},{x:500,y:-200,intensity:.4},{x:-300,y:600,intensity:.3},{x:800,y:100,intensity:.6},{x:-500,y:-400,intensity:.8},{x:600,y:700,intensity:.9},{x:-200,y:-300,intensity:.5},{x:150,y:450,intensity:.7},{x:750,y:-100,intensity:.4},{x:-600,y:200,intensity:.6},{x:120,y:680,intensity:.8},{x:125,y:675,intensity:.7},{x:130,y:685,intensity:.6},{x:340,y:885,intensity:.9},{x:350,y:895,intensity:.8},{x:355,y:888,intensity:.7},{x:428,y:-984,intensity:.9},{x:425,y:-980,intensity:.8},{x:430,y:-990,intensity:.7},{x:1960,y:3740,intensity:.6},{x:1965,y:3745,intensity:.5},{x:-275,y:6635,intensity:.4},{x:-280,y:6640,intensity:.3}],getReports:[{id:1,playerName:"Player1",playerId:123,subject:"Inappropriate behavior",message:"Player1 was using offensive language in chat.",claimedBy:"license:4534252462245632436236",createdAt:"2023-10-01T12:00:00Z"},{id:2,playerName:"Player2",playerId:456,subject:"Cheating suspected",message:"Player2 was seen using aimbot during a match.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-02T14:30:00Z"},{id:3,playerName:"Player3",playerId:789,subject:"Harassment reported",message:"Player3 was sending inappropriate messages to another player.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-03T16:45:00Z"},{id:4,playerName:"Player4",playerId:101,subject:"Exploiting reported",message:"Player4 was using glitches to gain an unfair advantage.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-04T18:20:00Z"},{id:5,playerName:"Player5",playerId:112,subject:"Inappropriate behavior",message:"Player5 was using offensive language in chat.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-05T20:15:00Z"},{id:6,playerName:"Player6",playerId:131,subject:"Cheating suspected",message:"Player6 was seen using aimbot during a match.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-06T22:30:00Z"},{id:7,playerName:"Player7",playerId:415,subject:"Harassment reported",message:"Player7 was sending inappropriate messages to another player.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-07T23:45:00Z"},{id:8,playerName:"Player8",playerId:161,subject:"Exploiting reported",message:"Player8 was using glitches to gain an unfair advantage.",claimedBy:"license:4534252462245632436236",claimedByName:"Admin1",createdAt:"2023-10-08T01:00:00Z"}],deleteReport:[{status:"ok"}],getReportChatMessages:[{from:"admin",adminName:"Admin1",message:"Hello, how can I help you?",reportId:1},{from:"player",playerName:"Player1",message:"I need assistance with my account.",reportId:1},{from:"admin",adminName:"Admin1",message:"Sure, what seems to be the problem?",reportId:1},{from:"player",playerName:"Player1",message:"I lost some items out of my pockets.",reportId:1},{from:"admin",adminName:"Admin1",message:"No problem, I can give them back.",reportId:1},{from:"player",playerName:"Player1",message:"Thank you!",reportId:1},{from:"admin",adminName:"Admin1",message:"You are welcome!",reportId:1},{from:"admin",adminName:"Admin1",message:"Is there anything else I can help you with?",reportId:1}],getReportChatMessagesPlayerSide:[{from:"player",playerName:"Player1",message:"Hello, how can I help you?",reportId:1},{from:"admin",adminName:"Admin1",message:"Sure, what seems to be the problem?",reportId:1},{from:"player",playerName:"Player1",message:"I lost some items out of my pockets.",reportId:1},{from:"admin",adminName:"Admin1",message:"No problem, I can give them back.",reportId:1},{from:"player",playerName:"Player1",message:"Thank you!",reportId:1},{from:"admin",adminName:"Admin1",message:"You are welcome!",reportId:1},{from:"admin",adminName:"Admin1",message:"Is there anything else I can help you with?",reportId:1}],getServerMetrics:{totalCharacters:1247,uniquePlayers:856,totalItems:24892,totalWealth:15782450,totalVehicles:1432,totalBans:89,newPlayersThisWeek:23,playerCountStats:{current:45,avgLast24h:38,peakLast24h:67,avgLastWeek:42}},getWealthLeaderboard:[{characterName:"John Smith",cash:245e3,bank:125e4,total:1495e3},{characterName:"Michael Johnson",cash:18e4,bank:98e4,total:116e4},{characterName:"Sarah Williams",cash:95e3,bank:875e3,total:97e4},{characterName:"David Brown",cash:15e4,bank:72e4,total:87e4},{characterName:"Emma Davis",cash:85e3,bank:68e4,total:765e3},{characterName:"James Wilson",cash:12e4,bank:58e4,total:7e5},{characterName:"Lisa Anderson",cash:75e3,bank:52e4,total:595e3},{characterName:"Robert Taylor",cash:9e4,bank:48e4,total:57e4},{characterName:"Jennifer Martinez",cash:65e3,bank:42e4,total:485e3},{characterName:"William Thomas",cash:55e3,bank:38e4,total:435e3}],getNewPlayersThisWeek:{count:23,players:[{license:"license:1234567890abcdef",citizenid:"ABC12345",characterName:"John Smith",phone:"555-0123",serverName:"Main Server",joinDate:"2024-01-15 14:30:22"},{license:"license:abcdef1234567890",citizenid:"DEF67890",characterName:"Sarah Johnson",phone:"555-0456",serverName:"Main Server",joinDate:"2024-01-14 16:22:15"},{license:"license:9876543210fedcba",citizenid:"GHI11111",characterName:"Mike Wilson",phone:"555-0789",serverName:"Main Server",joinDate:"2024-01-13 12:15:33"},{license:"license:fedcba0987654321",citizenid:"JKL22222",characterName:"Emma Davis",phone:"555-0123",serverName:"Main Server",joinDate:"2024-01-12 09:45:12"},{license:"license:1122334455667788",citizenid:"MNO33333",characterName:"David Brown",phone:"555-0456",serverName:"Main Server",joinDate:"2024-01-11 18:30:45"}]},getPlayerCountGraph:[{timestamp:1705248e3,player_count:32,readable_time:"2024-01-15 00:00"},{timestamp:1705251600,player_count:28,readable_time:"2024-01-15 01:00"},{timestamp:1705255200,player_count:25,readable_time:"2024-01-15 02:00"},{timestamp:1705258800,player_count:22,readable_time:"2024-01-15 03:00"},{timestamp:1705262400,player_count:18,readable_time:"2024-01-15 04:00"},{timestamp:1705266e3,player_count:15,readable_time:"2024-01-15 05:00"},{timestamp:1705269600,player_count:12,readable_time:"2024-01-15 06:00"},{timestamp:1705273200,player_count:18,readable_time:"2024-01-15 07:00"},{timestamp:1705276800,player_count:25,readable_time:"2024-01-15 08:00"},{timestamp:1705280400,player_count:35,readable_time:"2024-01-15 09:00"},{timestamp:1705284e3,player_count:42,readable_time:"2024-01-15 10:00"},{timestamp:1705287600,player_count:48,readable_time:"2024-01-15 11:00"},{timestamp:1705291200,player_count:55,readable_time:"2024-01-15 12:00"},{timestamp:1705294800,player_count:62,readable_time:"2024-01-15 13:00"},{timestamp:1705298400,player_count:67,readable_time:"2024-01-15 14:00"},{timestamp:1705302e3,player_count:58,readable_time:"2024-01-15 15:00"},{timestamp:1705305600,player_count:52,readable_time:"2024-01-15 16:00"},{timestamp:1705309200,player_count:45,readable_time:"2024-01-15 17:00"},{timestamp:1705312800,player_count:38,readable_time:"2024-01-15 18:00"},{timestamp:1705316400,player_count:32,readable_time:"2024-01-15 19:00"},{timestamp:170532e4,player_count:28,readable_time:"2024-01-15 20:00"},{timestamp:1705323600,player_count:25,readable_time:"2024-01-15 21:00"},{timestamp:1705327200,player_count:22,readable_time:"2024-01-15 22:00"},{timestamp:1705330800,player_count:18,readable_time:"2024-01-15 23:00"}],installationSetServerName:{status:"ok"},installationCreateTables:{status:"ok"},installationCreateUser:{status:"ok"},installationComplete:{status:"ok"},installationSetTebexSecret:{status:"ok"},isTebexConfigured:!0,getTebexStoreInfo:{account:{id:12345,name:"Example Gaming Store",domain:"examplegaming.tebex.io"},server:{id:67890,name:"Example FiveM Server"}},getTebexPaymentStats:{totalPayments:847,totalRevenue:15420.5,recentPayments:[{id:15782,amount:"19.99",currency:{iso_4217:"USD",symbol:"$"},status:"Complete",date:"2024-01-15T14:30:22+0000",email:"player1@example.com",player:{id:1,name:"PlayerOne",uuid:"365bfa21803249ee9b634fe890c9d43f"},gateway:{id:24,name:"PayPal"},packages:[{id:101,name:"VIP Package"}]},{id:15781,amount:"9.99",currency:{iso_4217:"USD",symbol:"$"},status:"Complete",date:"2024-01-15T13:22:15+0000",email:"player2@example.com",player:{id:2,name:"PlayerTwo",uuid:"ef01f2da1b284ad6ba8ba2aaf4432e22"},gateway:{id:21,name:"Stripe"},packages:[{id:102,name:"Weapon Pack"}]},{id:15780,amount:"49.99",currency:{iso_4217:"USD",symbol:"$"},status:"Complete",date:"2024-01-15T12:15:33+0000",email:"player3@example.com",player:{id:3,name:"PlayerThree",uuid:"123456789abcdef123456789abcdef12"},gateway:{id:24,name:"PayPal"},packages:[{id:103,name:"Ultimate Bundle"}]},{id:15779,amount:"29.99",currency:{iso_4217:"USD",symbol:"$"},status:"Refund",date:"2024-01-15T11:45:12+0000",email:"player4@example.com",gateway:{id:21,name:"Stripe"},packages:[{id:104,name:"Vehicle Pack"}]},{id:15778,amount:"14.99",currency:{iso_4217:"USD",symbol:"$"},status:"Complete",date:"2024-01-15T10:30:45+0000",email:"player5@example.com",player:{id:5,name:"PlayerFive",uuid:"abcdef123456789abcdef123456789ab"},gateway:{id:24,name:"PayPal"},packages:[{id:105,name:"Starter Pack"}]}],paymentsByStatus:{complete:798,refund:35,chargeback:8,pending:6},paymentsByGateway:{PayPal:542,Stripe:285,"Credit Card":20},topPackages:[{name:"VIP Package",sales:156},{name:"Ultimate Bundle",sales:89},{name:"Vehicle Pack",sales:78},{name:"Weapon Pack",sales:67},{name:"Starter Pack",sales:45},{name:"Premium Clothing",sales:34},{name:"Custom Houses",sales:28},{name:"Business Pack",sales:22},{name:"Gang Territory",sales:18},{name:"Special Items",sales:15}]},getPlacements:[{id:"placement1",name:"Downtown Plaza",objects:[{type:"object",model:"prop_atm_01",coords:{x:123.45,y:678.9,z:12.34},rotation:{x:0,y:0,z:90}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}},{type:"object",model:"prop_bench_01",coords:{x:124.45,y:679.9,z:12.34},rotation:{x:0,y:0,z:180}}],peds:[{type:"ped",model:"a_m_y_business_01",coords:{x:125.45,y:680.9,z:12.34},rotation:{x:0,y:0,z:270}}]},{id:"placement2",name:"Police Station",objects:[{type:"object",model:"prop_barrier_work01a",coords:{x:223.45,y:778.9,z:22.34},rotation:{x:0,y:0,z:45}}],peds:[{type:"ped",model:"s_m_y_cop_01",coords:{x:224.45,y:779.9,z:22.34},rotation:{x:0,y:0,z:90}},{type:"ped",model:"s_f_y_cop_01",coords:{x:225.45,y:780.9,z:22.34},rotation:{x:0,y:0,z:180}}]}],getPlayerFrontPosition:{status:"ok",coords:{x:123.45,y:678.9,z:12.34}},createPlacement:{id:"placement3",name:"New Placement",objects:[],peds:[]},updatePlacement:{status:"ok"},deletePlacement:{status:"ok"},addPlacementObject:{type:"object",model:"prop_bin_01",coords:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},addPlacementPed:{type:"ped",model:"a_m_y_business_01",coords:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},updatePlacementObject:{status:"ok"},updatePlacementPed:{status:"ok"},deletePlacementObject:{status:"ok"},deletePlacementPed:{status:"ok"},getQuickActions:[{key:"quickaction:ReviveSelf",title:"Revive Self",description:"Revive your character.",favorite:!1,type:"self"},{key:"quickaction:FeedSelf",title:"Feed Self",description:"Replenish hunger/thirst.",favorite:!1,type:"self"},{key:"quickaction:GoBack",title:"Go Back",description:"Teleport to your previous location.",favorite:!1,type:"self"},{key:"quickaction:TeleportToMarker",title:"Teleport to Marker",description:"Teleport to your map marker.",favorite:!1,type:"self"},{key:"quickaction:ClothingMenu",title:"Clothing Menu",description:"Open clothing customization.",favorite:!1,type:"self"},{key:"quickaction:ClearBlood",title:"Clear Blood",description:"Remove blood from character.",favorite:!1,type:"self"},{key:"quickaction:WetClothes",title:"Wet Clothes",description:"Make character appear wet.",favorite:!1,type:"self"},{key:"quickaction:DryClothes",title:"Dry Clothes",description:"Dry your character's outfit.",favorite:!1,type:"self"},{key:"quickaction:ToggleInvisibility",title:"Toggle Invisibility",description:"Become invisible or visible.",favorite:!1,type:"self",isToggle:!0},{key:"quickaction:ToggleFastRun",title:"Toggle Fast Run",description:"Enable or disable fast running.",favorite:!1,type:"self",isToggle:!0},{key:"quickaction:ToggleGodMode",title:"Toggle God Mode",description:"Invincibility toggle.",favorite:!1,type:"self",isToggle:!0},{key:"quickaction:ToggleSuperJump",title:"Toggle Super Jump",description:"Jump higher than normal.",favorite:!1,type:"self",isToggle:!0},{key:"quickaction:ToggleNoRagdoll",title:"Toggle No Ragdoll",description:"Prevent falling over from damage.",favorite:!1,type:"self",isToggle:!0},{key:"quickaction:ToggleInfiniteStamina",title:"Toggle Infinite Stamina",description:"Run forever without tiring.",favorite:!1,type:"self",isToggle:!0},{key:"quickaction:ReviveAll",title:"Revive All",description:"Revive every player on the server.",favorite:!1,type:"server"},{key:"quickaction:MessageAll",title:"Message All",description:"Send a message to all players.",favorite:!1,type:"server",requiresPrompt:!0,promptPlaceholder:"Enter message"},{key:"quickaction:SetWeather",title:"Set Weather",description:"Change the current weather.",favorite:!1,type:"server",requiresPrompt:!0,promptPlaceholder:"Enter weather type"},{key:"quickaction:SetTime",title:"Set Time",description:"Change the current server time.",favorite:!1,type:"server",requiresPrompt:!0,promptPlaceholder:"Enter time (HH:MM)"},{key:"quickaction:RepairVehicle",title:"Repair Vehicle",description:"Fix the current vehicle.",favorite:!1,type:"vehicle"},{key:"quickaction:FillGasTank",title:"Fill Gas Tank",description:"Refuel the current vehicle.",favorite:!1,type:"vehicle"},{key:"quickaction:WashVehicle",title:"Wash Vehicle",description:"Clean the current vehicle.",favorite:!1,type:"vehicle"},{key:"quickaction:SetMeDriver",title:"Set Me Driver",description:"Teleport into driver's seat.",favorite:!1,type:"vehicle"},{key:"quickaction:SetMePassenger",title:"Set Me Passenger",description:"Teleport into passenger seat.",favorite:!1,type:"vehicle"},{key:"quickaction:UnlockVehicle",title:"Unlock Vehicle",description:"Unlock a nearby vehicle.",favorite:!1,type:"vehicle"},{key:"quickaction:LockVehicle",title:"Lock Vehicle",description:"Lock a nearby vehicle.",favorite:!1,type:"vehicle"},{key:"quickaction:GetVec3",title:"Get Vec3",description:"Print vector3 coordinates.",favorite:!1,type:"dev"},{key:"quickaction:GetVec4",title:"Get Vec4",description:"Print vector4 coordinates (with heading).",favorite:!1,type:"dev"},{key:"quickaction:GetHeading",title:"Get Heading",description:"Print player heading/direction.",favorite:!1,type:"dev"},{key:"quickaction:LoadIPL",title:"Load IPL",description:"Load an interior prop library.",favorite:!1,type:"dev",requiresPrompt:!0,promptPlaceholder:"Enter IPL name"},{key:"quickaction:UnloadIPL",title:"Unload IPL",description:"Unload an interior prop library.",favorite:!1,type:"dev",requiresPrompt:!0,promptPlaceholder:"Enter IPL name"},{key:"quickaction:SpawnCar",title:"Spawn Car",description:"Spawn a vehicle of your choice.",favorite:!1,type:"entity",requiresPrompt:!0,promptPlaceholder:"Enter vehicle name"},{key:"quickaction:DeleteClosestVehicle",title:"Delete Closest Vehicle",description:"Remove the nearest vehicle.",favorite:!1,type:"entity"},{key:"quickaction:DeleteClosestPed",title:"Delete Closest Ped",description:"Remove the nearest ped/NPC.",favorite:!1,type:"entity"},{key:"quickaction:DeleteClosestObject",title:"Delete Closest Object",description:"Remove the nearest object.",favorite:!1,type:"entity"},{key:"quickaction:MassDeleteVehicles",title:"Mass Delete Vehicles",description:"Clear all vehicles in the server.",favorite:!1,type:"entity"},{key:"quickaction:MassDeletePeds",title:"Mass Delete Peds",description:"Clear all peds in the server.",favorite:!1,type:"entity"}],getPlayerActions:[{key:"playeraction:Revive",title:"Revive",description:"Revive the selected player.",favorite:!1,type:"general"},{key:"playeraction:MaxFoodWater",title:"Max Food/Water",description:"Restore food and water needs.",favorite:!1,type:"general"},{key:"playeraction:RelieveStress",title:"Relieve Stress",description:"Remove stress from the player.",favorite:!1,type:"general"},{key:"playeraction:RepairVehicle",title:"Repair Vehicle",description:"Repair the player's vehicle.",favorite:!1,type:"general"},{key:"playeraction:SetPedModel",title:"Set Ped Model",description:"Set the player's ped model.",favorite:!1,type:"general",requiresPrompt:!0,promptPlaceholders:["Enter model name"]},{key:"playeraction:ClothingMenu",title:"Clothing Menu",description:"Open the clothing menu for the player.",favorite:!1,type:"general"},{key:"playeraction:SetCharacterName",title:"Set Character Name",description:"Change the player's first and last name.",favorite:!1,type:"general",requiresPrompt:!0,promptPlaceholders:["Enter first name","Enter last name"]},{key:"playeraction:SetDrunk",title:"Make Drunk",description:"Makes the player appear drunk with visual effects.",favorite:!1,type:"fun"},{key:"playeraction:Ragdoll",title:"Ragdoll",description:"Makes the player lose control and fall over.",favorite:!1,type:"fun"},{key:"playeraction:SetFire",title:"Set on Fire",description:"Sets the player on fire briefly (non-lethal).",favorite:!1,type:"fun"},{key:"playeraction:LaunchPlayer",title:"Launch Player",description:"Launches the player into the air.",favorite:!1,type:"fun"},{key:"playeraction:ClownAttack",title:"Clown Attack",description:"Spawns hostile clowns to chase the player.",favorite:!1,type:"fun"},{key:"playeraction:WildAttack",title:"Wild Animal Attack",description:"Spawns a mountain lion to chase the player.",favorite:!1,type:"fun"},{key:"playeraction:MakeCompanion",title:"Give Pet Companion",description:"Gives the player a pet that follows them.",favorite:!1,type:"fun",requiresPrompt:!0,promptPlaceholders:["Enter pet type (dog/cat)"]},{key:"playeraction:UFOAttack",title:"UFO Attack",description:"Spawns a UFO above the player for an abduction effect.",favorite:!1,type:"fun"},{key:"playeraction:Goto",title:"Goto",description:"Teleport to the player.",favorite:!1,type:"teleport"},{key:"playeraction:Bring",title:"Bring",description:"Teleport the player to you.",favorite:!1,type:"teleport"},{key:"playeraction:SendBack",title:"Send Back",description:"Send the player back to their previous position.",favorite:!1,type:"teleport"},{key:"playeraction:SendToLocation",title:"Send to Location",description:"Send the player to a selected map location.",favorite:!1,type:"teleport"},{key:"playeraction:Screenshot",title:"Screenshot",description:"View a screenshot of the player's game view.",favorite:!1,type:"surveillance"},{key:"playeraction:Spectate",title:"Spectate",description:"Begin spectating the player.",favorite:!1,type:"surveillance"},{key:"playeraction:GiveCash",title:"Give Cash",description:"Give the player cash.",favorite:!1,type:"monetary",requiresPrompt:!0,promptPlaceholders:["Enter amount to give"]},{key:"playeraction:RemoveCash",title:"Remove Cash",description:"Remove cash from the player.",favorite:!1,type:"monetary",requiresPrompt:!0,promptPlaceholders:["Enter amount to take"]},{key:"playeraction:GiveBankMoney",title:"Give Bank Money",description:"Deposit money into the player's bank account.",favorite:!1,type:"monetary",requiresPrompt:!0,promptPlaceholders:["Enter amount to give"]},{key:"playeraction:RemoveBankMoney",title:"Remove Bank Money",description:"Withdraw money from the player's bank account.",favorite:!1,type:"monetary",requiresPrompt:!0,promptPlaceholders:["Enter amount to take"]},{key:"playeraction:SetJob",title:"Set Job",description:"Assign a job to the player.",favorite:!1,type:"groups",requiresPrompt:!0,promptPlaceholders:["Enter job name","Enter job grade"]},{key:"playeraction:RemoveFromJob",title:"Remove from Job",description:"Remove the player's current job.",favorite:!1,type:"groups"},{key:"playeraction:SetGang",title:"Set Gang",description:"Add the player to a gang.",favorite:!1,type:"groups",requiresPrompt:!0,promptPlaceholders:["Enter gang name","Enter gang grade"]},{key:"playeraction:RemoveFromGang",title:"Remove from Gang",description:"Remove the player from their gang.",favorite:!1,type:"groups"},{key:"playeraction:ViewInventory",title:"View Inventory",description:"View and manage the player's inventory.",favorite:!1,type:"inventory"},{key:"playeraction:GiveItem",title:"Give Item",description:"Give an item to the player.",favorite:!1,type:"inventory",requiresPrompt:!0,promptPlaceholders:["Enter item name","Enter the amount to give"]},{key:"playeraction:RemoveItem",title:"Remove Item",description:"Remove an item from the player.",favorite:!1,type:"inventory",requiresPrompt:!0,promptPlaceholders:["Enter item name","Enter the amount to take"]},{key:"playeraction:ClearInventory",title:"Clear Inventory",description:"Clear all items from the player's inventory.",favorite:!1,type:"inventory"},{key:"playeraction:Cuff",title:"Cuff",description:"Toggle handcuffs on the player.",favorite:!1,type:"punishment"},{key:"playeraction:Freeze",title:"Freeze",description:"Toggle frozen state on the player.",favorite:!1,type:"punishment"},{key:"playeraction:Kill",title:"Kill",description:"Kill the player.",favorite:!1,type:"punishment"},{key:"playeraction:Kick",title:"Kick",description:"Kick the player from the server.",favorite:!1,type:"punishment",requiresPrompt:!0,promptPlaceholders:["Enter reason"]},{key:"playeraction:Ban",title:"Ban",description:"Ban the player from the server.",favorite:!1,type:"punishment",requiresPrompt:!0,promptPlaceholders:["Enter time in hours","Enter reason"]}],revokePunishment:{status:"ok",message:""},playerSubmitReport:[],getPunishmentList:{bans:Array.from({length:60},(i,e)=>({id:e+1,playerName:`Player${e%30+1}`,playerId:1e3+e,reason:["Cheating","Toxic behavior","Exploiting","Botting","Abusive language","Ban evasion","Griefing","Spamming"][e%8],issuedBy:`Admin${e%5+1}`,issuedAt:`2024-06-${String(e%28+1).padStart(2,"0")}T${String(8+e%12).padStart(2,"0")}:00:00Z`,status:e%7===0?"revoked":"active",type:"ban"})),warns:Array.from({length:65},(i,e)=>({id:e+1,playerName:`Player${e%40+1}`,playerId:2e3+e,reason:["Spamming","Rude language","AFK farming","Harassment","Minor exploit","Trolling","Advertising"][e%7],issuedBy:`Admin${e%6+1}`,issuedAt:`2024-05-${String(e%28+1).padStart(2,"0")}T${String(10+e%10).padStart(2,"0")}:30:00Z`,status:e%8===0?"revoked":"active",type:"warn"})),kicks:[{id:201,playerName:"TestKicked1",playerId:12,reason:"AFK in public area",issuedBy:"AdminA",issuedAt:new Date(Date.now()-1e3*60*60*2).toISOString(),status:"active",type:"kick"},{id:202,playerName:"TestKicked2",playerId:34,reason:"Toxic behavior",issuedBy:"AdminB",issuedAt:new Date(Date.now()-1e3*60*60*5).toISOString(),status:"active",type:"kick"}]},checkCarCustomizerVehicle:{inVehicle:!0},getVehicleCustomizationData:{handle:12345,modelName:"Adder",plate:"ADMIN123",mods:{spoiler:2,frontBumper:1,rearBumper:0,sideSkirt:-1,exhaust:3,frame:-1,grille:1,hood:0,fender:-1,rightFender:-1,roof:-1,engine:2,brakes:1,transmission:2,horns:0,suspension:1,armor:-1,turbo:!0,xenonHeadlights:!0,frontWheels:5,backWheels:5,plateHolder:-1,vanityPlates:-1,trimA:-1,trimB:-1,trunkItems:-1,speakers:-1,plaques:-1,shifterLeavers:-1,steeringWheels:-1,seats:-1,speedometer:-1,doorSpeakers:-1,carEmblem:-1,frontLeftWindow:-1,frontRightWindow:-1,rearLeftWindow:-1,rearRightWindow:-1,rearWindow:-1,livery:2,windowTint:3},colors:{primary:{r:255,g:20,b:20},secondary:{r:10,g:10,b:10},pearlescent:5,wheel:156,interior:0,dashboard:0,neonEnabled:[!0,!0,!0,!0],neonColor:{r:0,g:255,b:255},tyreSmokeColor:{r:255,g:255,b:255}},extras:{1:!0,2:!1,3:!0,4:!1,5:!0,6:!1,7:!0,8:!1,9:!1,10:!0,11:!1,12:!0}},getVehicleModLimits:{0:{name:"Spoilers",max:15},1:{name:"Front Bumper",max:12},2:{name:"Rear Bumper",max:10},3:{name:"Side Skirt",max:8},4:{name:"Exhaust",max:18},5:{name:"Frame",max:6},6:{name:"Grille",max:5},7:{name:"Hood",max:14},8:{name:"Fender",max:3},9:{name:"Right Fender",max:3},10:{name:"Roof",max:7},11:{name:"Engine",max:4},12:{name:"Brakes",max:3},13:{name:"Transmission",max:3},14:{name:"Horns",max:35},15:{name:"Suspension",max:4},16:{name:"Armor",max:5},23:{name:"Front Wheels",max:25},24:{name:"Back Wheels",max:25}},applyVehicleMod:{status:"ok",message:"Modification applied successfully"},applyVehicleColor:{status:"ok",message:"Color applied successfully"},toggleVehicleExtra:{status:"ok",message:"Extra toggled successfully"},toggleVehicleTurbo:{status:"ok",message:"Turbo toggled successfully"},resetVehicleToOriginal:{status:"ok",message:"Vehicle reset to original state"},saveVehicleCustomization:{status:"ok",message:"Vehicle customization saved successfully"},executePlayerAction:i=>{const{actionKey:e,playerId:t,inputs:n}=i;switch(e){case"playeraction:ViewInventory":return{status:"ok",message:"Inventory loaded successfully",data:{inventory:[{slot:1,name:"bread",label:"Bread",amount:3,weight:.5,type:"item",image:"bread.png",description:"A loaf of fresh bread"},{slot:2,name:"water",label:"Water Bottle",amount:5,weight:.3,type:"item",image:"water.png",description:"Clean drinking water"},{slot:3,name:"phone",label:"Smartphone",amount:1,weight:.2,type:"item",image:"phone.png",description:"A modern smartphone"},{slot:4,name:"bandage",label:"Bandage",amount:10,weight:.1,type:"item",image:"bandage.png",description:"Medical bandage for wounds"},{slot:5,name:"lockpick",label:"Lockpick",amount:2,weight:.05,type:"item",image:"lockpick.png",description:"Tool for picking locks"},{slot:6,name:"cash",label:"Cash",amount:2500,weight:.001,type:"item",image:"cash.png",description:"Cold hard cash"},{slot:7,name:"id_card",label:"ID Card",amount:1,weight:.05,type:"item",image:"id_card.png",description:"Government issued identification"},{slot:8,name:"pistol",label:"Pistol",amount:1,weight:1.2,type:"weapon",image:"pistol.png",description:"Standard sidearm"},{slot:9,name:"pistol_ammo",label:"Pistol Ammo",amount:50,weight:.02,type:"item",image:"pistol_ammo.png",description:"9mm ammunition"},{slot:10,name:"sandwich",label:"Sandwich",amount:2,weight:.4,type:"item",image:"sandwich.png",description:"A delicious sandwich"}],availableItems:[{name:"bread",label:"Bread"},{name:"water",label:"Water Bottle"},{name:"phone",label:"Smartphone"},{name:"bandage",label:"Bandage"},{name:"lockpick",label:"Lockpick"},{name:"cash",label:"Cash"},{name:"id_card",label:"ID Card"},{name:"pistol",label:"Pistol"},{name:"pistol_ammo",label:"Pistol Ammo"},{name:"sandwich",label:"Sandwich"},{name:"energy_drink",label:"Energy Drink"},{name:"cigarettes",label:"Cigarettes"},{name:"lighter",label:"Lighter"},{name:"laptop",label:"Laptop"},{name:"usb_drive",label:"USB Drive"},{name:"flashlight",label:"Flashlight"},{name:"rope",label:"Rope"},{name:"duct_tape",label:"Duct Tape"},{name:"toolbox",label:"Toolbox"},{name:"wrench",label:"Wrench"},{name:"screwdriver",label:"Screwdriver"},{name:"hammer",label:"Hammer"},{name:"knife",label:"Knife"},{name:"baseball_bat",label:"Baseball Bat"},{name:"radio",label:"Radio"},{name:"gps",label:"GPS Device"},{name:"binoculars",label:"Binoculars"},{name:"camera",label:"Camera"},{name:"painkillers",label:"Painkillers"},{name:"first_aid_kit",label:"First Aid Kit"}]}};case"playeraction:GiveItem":const[s,a]=n||[];return{status:"ok",message:`Added ${a}x ${s} to player's inventory`};case"playeraction:RemoveItem":const[r,o]=n||[];return{status:"ok",message:`Removed ${o}x ${r} from player's inventory`};case"playeraction:ClearInventory":return{status:"ok",message:"Player's inventory has been cleared"};case"playeraction:Screenshot":return{status:"ok",message:"Screenshot grabbed",extraData:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg=="};default:return{status:"ok",message:`Executed ${e} successfully`}}}};async function Ve(i,e={}){var n;const t=(n=window.GetParentResourceName)==null?void 0:n.call(window);if(!t){if(console.log(`Mocking NUI event: ${i}`,e),i=="refreshResource")return{status:"ok",data:{name:e.resource,status:Math.random()>.5?"started":"stopped",author:"Author1",description:"Description of resource",version:"1.0.0"}};if(i==="getPunishmentList")return{status:"ok",data:{bans:fh.getPunishmentList.bans,warns:fh.getPunishmentList.warns,kicks:fh.getPunishmentList.kicks}};const s=fh[i];if(s!==void 0){if(typeof s=="function"){const a=s(e);return{status:a.status||"ok",data:a.data||a}}return{status:"ok",data:s}}return{status:"ok",data:e}}try{return{status:"ok",data:await(await fetch(`https://${t}/${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).json()}}catch(s){return console.error("NUI fetch failed:",s),{status:"error",data:null}}}const TP=i=>i;function _g(i){const e=i-1;return e*e*e+1}function vb(i){const e=typeof i=="string"&&i.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[i,"px"]}function Fi(i,{delay:e=0,duration:t=400,easing:n=TP}={}){const s=+getComputedStyle(i).opacity;return{delay:e,duration:t,easing:n,css:a=>`opacity: ${a*s}`}}function Xr(i,{delay:e=0,duration:t=400,easing:n=_g,x:s=0,y:a=0,opacity:r=0}={}){const o=getComputedStyle(i),l=+o.opacity,d=o.transform==="none"?"":o.transform,h=l*(1-r),[m,v]=vb(s),[b,y]=vb(a);return{delay:e,duration:t,easing:n,css:(x,k)=>`
			transform: ${d} translate(${(1-x)*m}${v}, ${(1-x)*b}${y});
			opacity: ${l-h*k}`}}function Im(i,{delay:e=0,duration:t=400,easing:n=_g,axis:s="y"}={}){const a=getComputedStyle(i),r=+a.opacity,o=s==="y"?"height":"width",l=parseFloat(a[o]),d=s==="y"?["top","bottom"]:["left","right"],h=d.map(C=>`${C[0].toUpperCase()}${C.slice(1)}`),m=parseFloat(a[`padding${h[0]}`]),v=parseFloat(a[`padding${h[1]}`]),b=parseFloat(a[`margin${h[0]}`]),y=parseFloat(a[`margin${h[1]}`]),x=parseFloat(a[`border${h[0]}Width`]),k=parseFloat(a[`border${h[1]}Width`]);return{delay:e,duration:t,easing:n,css:C=>`overflow: hidden;opacity: ${Math.min(C*20,1)*r};${o}: ${C*l}px;padding-${d[0]}: ${C*m}px;padding-${d[1]}: ${C*v}px;margin-${d[0]}: ${C*b}px;margin-${d[1]}: ${C*y}px;border-${d[0]}-width: ${C*x}px;border-${d[1]}-width: ${C*k}px;min-${o}: 0`}}function Ki(i,{delay:e=0,duration:t=400,easing:n=_g,start:s=0,opacity:a=0}={}){const r=getComputedStyle(i),o=+r.opacity,l=r.transform==="none"?"":r.transform,d=1-s,h=o*(1-a);return{delay:e,duration:t,easing:n,css:(m,v)=>`
			transform: ${l} scale(${1-d*v});
			opacity: ${o-h*v}
		`}}function LP(){if(typeof localStorage<"u"){const i=localStorage.getItem("919admin_darkMode");if(i!==null)return i==="true"}return!0}function DP(){if(typeof localStorage<"u"){const i=localStorage.getItem("919admin_language");if(i!==null)return i}return"en"}const EP={darkMode:LP(),showActionTypeLabels:!0,panelFormFactor:typeof localStorage<"u"&&localStorage.getItem("919admin_panelFormFactor")||"right",floatingBounds:typeof localStorage<"u"&&(()=>{try{const i=localStorage.getItem("919admin_panelFloatingBounds");return i?JSON.parse(i):void 0}catch{return}})()||void 0,seeThroughMode:typeof localStorage<"u"&&localStorage.getItem("919admin_seeThroughMode")==="true"||!1,currentUserLicense:"",currentUserPermissions:[],currentUserPermissionGroup:"",quickActions:[],playerActions:[],permissionGroups:[{name:"SuperAdmin",description:"Full access to all permissions and actions.",permissions:[]}],adminUsers:[],toggleStates:{},currentLanguage:DP(),disabledPages:{}},Jt=Mn(EP);async function IP(){try{const[i,e]=await Promise.all([Ve("getQuickActions"),Ve("getPlayerActions")]);i.status==="ok"&&Array.isArray(i.data)&&Jt.update(t=>({...t,quickActions:i.data})),e.status==="ok"&&Array.isArray(e.data)&&Jt.update(t=>({...t,playerActions:e.data}))}catch(i){console.error("Failed to load actions:",i)}}function OP(i,e){Jt.update(t=>({...t,toggleStates:{...t.toggleStates,[i]:e}}))}function BP(i){Jt.update(e=>(typeof localStorage<"u"&&localStorage.setItem("919admin_darkMode",i.toString()),{...e,darkMode:i}))}function Rx(i){const e=gg(Jt).permissionGroups.find(t=>t.name===i);e&&Jt.update(t=>({...t,currentUserPermissions:[...t.currentUserPermissions,...e.permissions]})),Jt.update(t=>({...t,currentUserPermissionGroup:i}))}function zx(i){Jt.update(e=>({...e,currentUserLicense:i}))}function Pf(i){Jt.update(e=>{const t=["page:AdminChat","page:PlayerList","page:Reports","page:Map","page:Items","page:Vehicles","page:Resources","page:AdminUsers","page:PermissionGroups","page:PunishmentList","page:Characters","page:Analytics","page:Addons","page:Tebex","otheraction:ToggleNoClip","otheraction:TogglePlayerNames",...e.quickActions.map(l=>l.key),...e.playerActions.map(l=>l.key)],n=e.disabledPages||{},s=l=>l.filter(d=>{if(!d.startsWith("page:"))return!0;const h=d.substring(5),v={AdminUsers:"AdminUsers",PermissionGroups:"AdminUsers",PunishmentList:"PunishmentList",PlayerList:"PlayerList",AdminChat:"AdminChat",Reports:"Reports",Map:"Map",Items:"Items",Vehicles:"Vehicles",Resources:"Resources",Analytics:"Analytics",Addons:"Addons",Tebex:"Tebex",Characters:"Characters"}[h]||h;return n[v]!==!0}),r={name:"SuperAdmin",description:"Full access to all permissions and actions.",permissions:s(t)},o=i.filter(l=>l.name!=="SuperAdmin").map(l=>({...l,permissions:s(l.permissions)}));return{...e,permissionGroups:[r,...o]}})}function RP(i){Jt.update(e=>({...e,disabledPages:i}))}function zP(i){Jt.update(e=>(typeof localStorage<"u"&&localStorage.setItem("919admin_language",i),{...e,currentLanguage:i}))}function NP(i){Jt.update(e=>(typeof localStorage<"u"&&localStorage.setItem("919admin_panelFormFactor",i),{...e,panelFormFactor:i}))}function ph(i){Jt.update(e=>{if(typeof localStorage<"u")try{localStorage.setItem("919admin_panelFloatingBounds",JSON.stringify(i))}catch{}return{...e,floatingBounds:i}})}function FP(i){Jt.update(e=>(typeof localStorage<"u"&&localStorage.setItem("919admin_seeThroughMode",i.toString()),{...e,seeThroughMode:i}))}const wp=[{id:"default",name:"Default",type:"gradient",value:"none"},{id:"ocean",name:"Ocean Breeze",type:"gradient",value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:"sunset",name:"Sunset Glow",type:"gradient",value:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{id:"forest",name:"Forest Green",type:"gradient",value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{id:"purple",name:"Purple Haze",type:"gradient",value:"linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)"},{id:"fire",name:"Fire Orange",type:"gradient",value:"linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)"},{id:"night",name:"Night Sky",type:"gradient",value:"linear-gradient(135deg, #232526 0%, #414345 100%)"},{id:"emerald",name:"Emerald Flow",type:"gradient",value:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},{id:"royal",name:"Royal Blue",type:"gradient",value:"linear-gradient(135deg, #667db6 0%, #0082c8 0%, #0082c8 0%, #667db6 100%)"},{id:"cherry",name:"Cherry Blossom",type:"gradient",value:"linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)"},{id:"arctic",name:"Arctic Blue",type:"gradient",value:"linear-gradient(135deg, #74b9ff 0%, #0984e3 100%)"},{id:"cosmic",name:"Cosmic Purple",type:"gradient",value:"linear-gradient(135deg, #8B5CF6 0%, #3B0764 50%, #1E1B4B 100%)"}],gb={type:"none",value:""};function Nx(){if(typeof localStorage<"u"){const i=localStorage.getItem("919admin_backgroundSettings");if(i)try{return{...gb,...JSON.parse(i)}}catch(e){console.error("Failed to parse background settings:",e)}}return gb}function bg(i){typeof localStorage<"u"&&localStorage.setItem("919admin_backgroundSettings",JSON.stringify(i))}const Dd=Mn(Nx());function HP(i){Dd.update(e=>{const t={...e,type:i};return i==="none"?t.value="":i==="gradient"?(e.type!=="gradient"||!e.value||e.value.startsWith("http"))&&(t.value="linear-gradient(135deg, #667eea 0%, #764ba2 100%)"):i==="image"&&(e.type!=="image"||!e.value||!e.value.startsWith("http"))&&(t.value=""),bg(t),Af(t),t})}function jP(i){Dd.update(e=>{const t={...e,type:i.type,value:i.value==="none"?"":i.value};return bg(t),Af(t),t})}function $P(i){Dd.update(e=>{const t={...e,type:"image",value:i};return bg(t),Af(t),t})}function VP(i){return i.type==="none"||!i.value||i.type==="image"?!0:i.type==="gradient"?!WP(i.value):!0}function WP(i){const e=/#[0-9a-fA-F]{6}/g,t=i.match(e);if(!t||t.length===0)return!0;let n=0,s=0;for(const r of t){const o=qP(r);n+=o,s++}return n/s>128}function qP(i){const e=i.replace("#",""),t=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16);return(t*299+n*587+s*114)/1e3}function Af(i){var r;const e=document.getElementById("pre-bg-style");e&&((r=e.parentElement)==null||r.removeChild(e),window.__PRE_BG_APPLIED__=!1);const t=document.querySelector(".app-card"),n=document.querySelector(".app-navbar"),s=VP(i);if(BP(s),i.type==="none"||!i.value){t&&(t.style.background="",t.style.backgroundImage=""),n&&(n.style.background="",n.style.backgroundImage="");return}const a=i.type==="gradient"?`${i.value}`:`linear-gradient(rgba(0,0,0,${1-.6}), rgba(0,0,0,${1-.6})), url('${i.value}')`;t&&(i.type==="gradient"?t.style.background=a:(t.style.background=a,t.style.backgroundSize="cover",t.style.backgroundPosition="center",t.style.backgroundRepeat="no-repeat")),n&&(n.style.setProperty("background",a,"important"),i.type!=="gradient"?(n.style.setProperty("background-size","cover","important"),n.style.setProperty("background-position","center","important"),n.style.setProperty("background-repeat","no-repeat","important")):(n.style.removeProperty("background-size"),n.style.removeProperty("background-position"),n.style.removeProperty("background-repeat")))}function Fx(){const i=Nx();Dd.set(i);const e=()=>{const t=document.querySelector(".app-card"),n=document.querySelector(".app-navbar");t&&n?Af(i):setTimeout(e,10)};e()}var UP=B("<div><!></div>");function GP(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Bx,"$visibility",t);let a=ae(!1),r=ae(!1);la("setVisible",m=>{m.disabledPages&&RP(m.disabledPages),Pf(m.groups),zx(m.myLicense),Rx(m.groupName),Iu(m.visible)}),la("setPlacerEditing",m=>{M(r,m.editing,!0)}),fn(()=>{s()&&!u(r)?(M(a,!0),setTimeout(()=>{Fx()},50)):(M(a,!1),u(r)||Ve("close"))});const o=m=>{m.key==="Escape"&&s()&&!u(r)&&Iu(!1)};window.addEventListener("keydown",o),Td(()=>{window.removeEventListener("keydown",o)});var l=Bi(),d=yt(l);{var h=m=>{var v=UP(),b=p(v);cP(b,()=>e.children),E(m,v)};Q(d,m=>{u(a)&&m(h)})}E(i,l),Yt(),n()}function ZP(i){return--i*i*i*i*i+1}function Hx(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var kp,_b;function YP(){if(_b)return kp;_b=1;var i=function(A){return e(A)&&!t(A)};function e(C){return!!C&&typeof C=="object"}function t(C){var A=Object.prototype.toString.call(C);return A==="[object RegExp]"||A==="[object Date]"||a(C)}var n=typeof Symbol=="function"&&Symbol.for,s=n?Symbol.for("react.element"):60103;function a(C){return C.$$typeof===s}function r(C){return Array.isArray(C)?[]:{}}function o(C,A){return A.clone!==!1&&A.isMergeableObject(C)?x(r(C),C,A):C}function l(C,A,T){return C.concat(A).map(function(I){return o(I,T)})}function d(C,A){if(!A.customMerge)return x;var T=A.customMerge(C);return typeof T=="function"?T:x}function h(C){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(C).filter(function(A){return Object.propertyIsEnumerable.call(C,A)}):[]}function m(C){return Object.keys(C).concat(h(C))}function v(C,A){try{return A in C}catch{return!1}}function b(C,A){return v(C,A)&&!(Object.hasOwnProperty.call(C,A)&&Object.propertyIsEnumerable.call(C,A))}function y(C,A,T){var I={};return T.isMergeableObject(C)&&m(C).forEach(function(D){I[D]=o(C[D],T)}),m(A).forEach(function(D){b(C,D)||(v(C,D)&&T.isMergeableObject(A[D])?I[D]=d(D,T)(C[D],A[D],T):I[D]=o(A[D],T))}),I}function x(C,A,T){T=T||{},T.arrayMerge=T.arrayMerge||l,T.isMergeableObject=T.isMergeableObject||i,T.cloneUnlessOtherwiseSpecified=o;var I=Array.isArray(A),D=Array.isArray(C),N=I===D;return N?I?T.arrayMerge(C,A,T):y(C,A,T):o(A,T)}x.all=function(A,T){if(!Array.isArray(A))throw new Error("first argument should be an array");return A.reduce(function(I,D){return x(I,D,T)},{})};var k=x;return kp=k,kp}var KP=YP();const XP=Hx(KP);var Om=function(i,e){return Om=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])},Om(i,e)};function Tf(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Om(i,e);function t(){this.constructor=i}i.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var Hi=function(){return Hi=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Hi.apply(this,arguments)};function JP(i,e){var t={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(t[n[s]]=i[n[s]]);return t}function Sp(i,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return i.concat(a||Array.prototype.slice.call(e))}function Cp(i,e){var t=e&&e.cache?e.cache:aA,n=e&&e.serializer?e.serializer:nA,s=e&&e.strategy?e.strategy:tA;return s(i,{cache:t,serializer:n})}function QP(i){return i==null||typeof i=="number"||typeof i=="boolean"}function eA(i,e,t,n){var s=QP(n)?n:t(n),a=e.get(s);return typeof a>"u"&&(a=i.call(this,n),e.set(s,a)),a}function jx(i,e,t){var n=Array.prototype.slice.call(arguments,3),s=t(n),a=e.get(s);return typeof a>"u"&&(a=i.apply(this,n),e.set(s,a)),a}function $x(i,e,t,n,s){return t.bind(e,i,n,s)}function tA(i,e){var t=i.length===1?eA:jx;return $x(i,this,t,e.cache.create(),e.serializer)}function iA(i,e){return $x(i,this,jx,e.cache.create(),e.serializer)}var nA=function(){return JSON.stringify(arguments)},sA=function(){function i(){this.cache=Object.create(null)}return i.prototype.get=function(e){return this.cache[e]},i.prototype.set=function(e,t){this.cache[e]=t},i}(),aA={create:function(){return new sA}},Mp={variadic:iA},Oi;(function(i){i[i.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",i[i.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",i[i.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",i[i.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",i[i.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",i[i.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",i[i.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",i[i.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",i[i.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",i[i.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",i[i.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",i[i.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",i[i.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",i[i.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",i[i.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",i[i.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",i[i.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",i[i.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",i[i.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",i[i.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",i[i.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",i[i.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",i[i.INVALID_TAG=23]="INVALID_TAG",i[i.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",i[i.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",i[i.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Oi||(Oi={}));var yn;(function(i){i[i.literal=0]="literal",i[i.argument=1]="argument",i[i.number=2]="number",i[i.date=3]="date",i[i.time=4]="time",i[i.select=5]="select",i[i.plural=6]="plural",i[i.pound=7]="pound",i[i.tag=8]="tag"})(yn||(yn={}));var Tl;(function(i){i[i.number=0]="number",i[i.dateTime=1]="dateTime"})(Tl||(Tl={}));function bb(i){return i.type===yn.literal}function rA(i){return i.type===yn.argument}function Vx(i){return i.type===yn.number}function Wx(i){return i.type===yn.date}function qx(i){return i.type===yn.time}function Ux(i){return i.type===yn.select}function Gx(i){return i.type===yn.plural}function oA(i){return i.type===yn.pound}function Zx(i){return i.type===yn.tag}function Yx(i){return!!(i&&typeof i=="object"&&i.type===Tl.number)}function Bm(i){return!!(i&&typeof i=="object"&&i.type===Tl.dateTime)}var Kx=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,lA=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function cA(i){var e={};return i.replace(lA,function(t){var n=t.length;switch(t[0]){case"G":e.era=n===4?"long":n===5?"narrow":"short";break;case"y":e.year=n===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=n===4?"long":n===5?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var dA=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function hA(i){if(i.length===0)throw new Error("Number skeleton cannot be empty");for(var e=i.split(dA).filter(function(v){return v.length>0}),t=[],n=0,s=e;n<s.length;n++){var a=s[n],r=a.split("/");if(r.length===0)throw new Error("Invalid number skeleton");for(var o=r[0],l=r.slice(1),d=0,h=l;d<h.length;d++){var m=h[d];if(m.length===0)throw new Error("Invalid number skeleton")}t.push({stem:o,options:l})}return t}function uA(i){return i.replace(/^(.*?)-/,"")}var yb=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Xx=/^(@+)?(\+|#+)?[rs]?$/g,fA=/(\*)(0+)|(#+)(0+)|(0+)/g,Jx=/^(0+)$/;function xb(i){var e={};return i[i.length-1]==="r"?e.roundingPriority="morePrecision":i[i.length-1]==="s"&&(e.roundingPriority="lessPrecision"),i.replace(Xx,function(t,n,s){return typeof s!="string"?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):s==="+"?e.minimumSignificantDigits=n.length:n[0]==="#"?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+(typeof s=="string"?s.length:0)),""}),e}function Qx(i){switch(i){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function pA(i){var e;if(i[0]==="E"&&i[1]==="E"?(e={notation:"engineering"},i=i.slice(2)):i[0]==="E"&&(e={notation:"scientific"},i=i.slice(1)),e){var t=i.slice(0,2);if(t==="+!"?(e.signDisplay="always",i=i.slice(2)):t==="+?"&&(e.signDisplay="exceptZero",i=i.slice(2)),!Jx.test(i))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=i.length}return e}function wb(i){var e={},t=Qx(i);return t||e}function mA(i){for(var e={},t=0,n=i;t<n.length;t++){var s=n[t];switch(s.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=s.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=uA(s.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Hi(Hi(Hi({},e),{notation:"scientific"}),s.options.reduce(function(l,d){return Hi(Hi({},l),wb(d))},{}));continue;case"engineering":e=Hi(Hi(Hi({},e),{notation:"engineering"}),s.options.reduce(function(l,d){return Hi(Hi({},l),wb(d))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(s.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(s.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");s.options[0].replace(fA,function(l,d,h,m,v,b){if(d)e.minimumIntegerDigits=h.length;else{if(m&&v)throw new Error("We currently do not support maximum integer digits");if(b)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Jx.test(s.stem)){e.minimumIntegerDigits=s.stem.length;continue}if(yb.test(s.stem)){if(s.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");s.stem.replace(yb,function(l,d,h,m,v,b){return h==="*"?e.minimumFractionDigits=d.length:m&&m[0]==="#"?e.maximumFractionDigits=m.length:v&&b?(e.minimumFractionDigits=v.length,e.maximumFractionDigits=v.length+b.length):(e.minimumFractionDigits=d.length,e.maximumFractionDigits=d.length),""});var a=s.options[0];a==="w"?e=Hi(Hi({},e),{trailingZeroDisplay:"stripIfInteger"}):a&&(e=Hi(Hi({},e),xb(a)));continue}if(Xx.test(s.stem)){e=Hi(Hi({},e),xb(s.stem));continue}var r=Qx(s.stem);r&&(e=Hi(Hi({},e),r));var o=pA(s.stem);o&&(e=Hi(Hi({},e),o))}return e}var mh={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function vA(i,e){for(var t="",n=0;n<i.length;n++){var s=i.charAt(n);if(s==="j"){for(var a=0;n+1<i.length&&i.charAt(n+1)===s;)a++,n++;var r=1+(a&1),o=a<2?1:3+(a>>1),l="a",d=gA(e);for((d=="H"||d=="k")&&(o=0);o-- >0;)t+=l;for(;r-- >0;)t=d+t}else s==="J"?t+="H":t+=s}return t}function gA(i){var e=i.hourCycle;if(e===void 0&&i.hourCycles&&i.hourCycles.length&&(e=i.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var t=i.language,n;t!=="root"&&(n=i.maximize().region);var s=mh[n||""]||mh[t||""]||mh["".concat(t,"-001")]||mh["001"];return s[0]}var Pp,_A=new RegExp("^".concat(Kx.source,"*")),bA=new RegExp("".concat(Kx.source,"*$"));function zi(i,e){return{start:i,end:e}}var yA=!!String.prototype.startsWith&&"_a".startsWith("a",1),xA=!!String.fromCodePoint,wA=!!Object.fromEntries,kA=!!String.prototype.codePointAt,SA=!!String.prototype.trimStart,CA=!!String.prototype.trimEnd,MA=!!Number.isSafeInteger,PA=MA?Number.isSafeInteger:function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i&&Math.abs(i)<=9007199254740991},Rm=!0;try{var AA=tw("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Rm=((Pp=AA.exec("a"))===null||Pp===void 0?void 0:Pp[0])==="a"}catch{Rm=!1}var kb=yA?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},zm=xA?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",s=e.length,a=0,r;s>a;){if(r=e[a++],r>1114111)throw RangeError(r+" is not a valid code point");n+=r<65536?String.fromCharCode(r):String.fromCharCode(((r-=65536)>>10)+55296,r%1024+56320)}return n},Sb=wA?Object.fromEntries:function(e){for(var t={},n=0,s=e;n<s.length;n++){var a=s[n],r=a[0],o=a[1];t[r]=o}return t},ew=kA?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var s=e.charCodeAt(t),a;return s<55296||s>56319||t+1===n||(a=e.charCodeAt(t+1))<56320||a>57343?s:(s-55296<<10)+(a-56320)+65536}},TA=SA?function(e){return e.trimStart()}:function(e){return e.replace(_A,"")},LA=CA?function(e){return e.trimEnd()}:function(e){return e.replace(bA,"")};function tw(i,e){return new RegExp(i,e)}var Nm;if(Rm){var Cb=tw("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Nm=function(e,t){var n;Cb.lastIndex=t;var s=Cb.exec(e);return(n=s[1])!==null&&n!==void 0?n:""}}else Nm=function(e,t){for(var n=[];;){var s=ew(e,t);if(s===void 0||iw(s)||OA(s))break;n.push(s),t+=s>=65536?2:1}return zm.apply(void 0,n)};var DA=function(){function i(e,t){t===void 0&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return i.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},i.prototype.parseMessage=function(e,t,n){for(var s=[];!this.isEOF();){var a=this.char();if(a===123){var r=this.parseArgument(e,n);if(r.err)return r;s.push(r.val)}else{if(a===125&&e>0)break;if(a===35&&(t==="plural"||t==="selectordinal")){var o=this.clonePosition();this.bump(),s.push({type:yn.pound,location:zi(o,this.clonePosition())})}else if(a===60&&!this.ignoreTag&&this.peek()===47){if(n)break;return this.error(Oi.UNMATCHED_CLOSING_TAG,zi(this.clonePosition(),this.clonePosition()))}else if(a===60&&!this.ignoreTag&&Fm(this.peek()||0)){var r=this.parseTag(e,t);if(r.err)return r;s.push(r.val)}else{var r=this.parseLiteral(e,t);if(r.err)return r;s.push(r.val)}}}return{val:s,err:null}},i.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var s=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:yn.literal,value:"<".concat(s,"/>"),location:zi(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var a=this.parseMessage(e+1,t,!0);if(a.err)return a;var r=a.val,o=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!Fm(this.char()))return this.error(Oi.INVALID_TAG,zi(o,this.clonePosition()));var l=this.clonePosition(),d=this.parseTagName();return s!==d?this.error(Oi.UNMATCHED_CLOSING_TAG,zi(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:yn.tag,value:s,children:r,location:zi(n,this.clonePosition())},err:null}:this.error(Oi.INVALID_TAG,zi(o,this.clonePosition())))}else return this.error(Oi.UNCLOSED_TAG,zi(n,this.clonePosition()))}else return this.error(Oi.INVALID_TAG,zi(n,this.clonePosition()))},i.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&IA(this.char());)this.bump();return this.message.slice(e,this.offset())},i.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),s="";;){var a=this.tryParseQuote(t);if(a){s+=a;continue}var r=this.tryParseUnquoted(e,t);if(r){s+=r;continue}var o=this.tryParseLeftAngleBracket();if(o){s+=o;continue}break}var l=zi(n,this.clonePosition());return{val:{type:yn.literal,value:s,location:l},err:null}},i.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!EA(this.peek()||0))?(this.bump(),"<"):null},i.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(n===39)if(this.peek()===39)t.push(39),this.bump();else{this.bump();break}else t.push(n);this.bump()}return zm.apply(void 0,t)},i.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return n===60||n===123||n===35&&(t==="plural"||t==="selectordinal")||n===125&&e>0?null:(this.bump(),zm(n))},i.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Oi.EXPECT_ARGUMENT_CLOSING_BRACE,zi(n,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Oi.EMPTY_ARGUMENT,zi(n,this.clonePosition()));var s=this.parseIdentifierIfPossible().value;if(!s)return this.error(Oi.MALFORMED_ARGUMENT,zi(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Oi.EXPECT_ARGUMENT_CLOSING_BRACE,zi(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:yn.argument,value:s,location:zi(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Oi.EXPECT_ARGUMENT_CLOSING_BRACE,zi(n,this.clonePosition())):this.parseArgumentOptions(e,t,s,n);default:return this.error(Oi.MALFORMED_ARGUMENT,zi(n,this.clonePosition()))}},i.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=Nm(this.message,t),s=t+n.length;this.bumpTo(s);var a=this.clonePosition(),r=zi(e,a);return{value:n,location:r}},i.prototype.parseArgumentOptions=function(e,t,n,s){var a,r=this.clonePosition(),o=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(o){case"":return this.error(Oi.EXPECT_ARGUMENT_TYPE,zi(r,l));case"number":case"date":case"time":{this.bumpSpace();var d=null;if(this.bumpIf(",")){this.bumpSpace();var h=this.clonePosition(),m=this.parseSimpleArgStyleIfPossible();if(m.err)return m;var v=LA(m.val);if(v.length===0)return this.error(Oi.EXPECT_ARGUMENT_STYLE,zi(this.clonePosition(),this.clonePosition()));var b=zi(h,this.clonePosition());d={style:v,styleLocation:b}}var y=this.tryParseArgumentClose(s);if(y.err)return y;var x=zi(s,this.clonePosition());if(d&&kb(d==null?void 0:d.style,"::",0)){var k=TA(d.style.slice(2));if(o==="number"){var m=this.parseNumberSkeletonFromString(k,d.styleLocation);return m.err?m:{val:{type:yn.number,value:n,location:x,style:m.val},err:null}}else{if(k.length===0)return this.error(Oi.EXPECT_DATE_TIME_SKELETON,x);var C=k;this.locale&&(C=vA(k,this.locale));var v={type:Tl.dateTime,pattern:C,location:d.styleLocation,parsedOptions:this.shouldParseSkeletons?cA(C):{}},A=o==="date"?yn.date:yn.time;return{val:{type:A,value:n,location:x,style:v},err:null}}}return{val:{type:o==="number"?yn.number:o==="date"?yn.date:yn.time,value:n,location:x,style:(a=d==null?void 0:d.style)!==null&&a!==void 0?a:null},err:null}}case"plural":case"selectordinal":case"select":{var T=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Oi.EXPECT_SELECT_ARGUMENT_OPTIONS,zi(T,Hi({},T)));this.bumpSpace();var I=this.parseIdentifierIfPossible(),D=0;if(o!=="select"&&I.value==="offset"){if(!this.bumpIf(":"))return this.error(Oi.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,zi(this.clonePosition(),this.clonePosition()));this.bumpSpace();var m=this.tryParseDecimalInteger(Oi.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Oi.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(m.err)return m;this.bumpSpace(),I=this.parseIdentifierIfPossible(),D=m.val}var N=this.tryParsePluralOrSelectOptions(e,o,t,I);if(N.err)return N;var y=this.tryParseArgumentClose(s);if(y.err)return y;var z=zi(s,this.clonePosition());return o==="select"?{val:{type:yn.select,value:n,options:Sb(N.val),location:z},err:null}:{val:{type:yn.plural,value:n,options:Sb(N.val),offset:D,pluralType:o==="plural"?"cardinal":"ordinal",location:z},err:null}}default:return this.error(Oi.INVALID_ARGUMENT_TYPE,zi(r,l))}},i.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(Oi.EXPECT_ARGUMENT_CLOSING_BRACE,zi(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},i.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();){var n=this.char();switch(n){case 39:{this.bump();var s=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Oi.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,zi(s,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(t.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(t.offset,this.offset()),err:null}},i.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=hA(e)}catch{return this.error(Oi.INVALID_NUMBER_SKELETON,t)}return{val:{type:Tl.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?mA(n):{}},err:null}},i.prototype.tryParsePluralOrSelectOptions=function(e,t,n,s){for(var a,r=!1,o=[],l=new Set,d=s.value,h=s.location;;){if(d.length===0){var m=this.clonePosition();if(t!=="select"&&this.bumpIf("=")){var v=this.tryParseDecimalInteger(Oi.EXPECT_PLURAL_ARGUMENT_SELECTOR,Oi.INVALID_PLURAL_ARGUMENT_SELECTOR);if(v.err)return v;h=zi(m,this.clonePosition()),d=this.message.slice(m.offset,this.offset())}else break}if(l.has(d))return this.error(t==="select"?Oi.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Oi.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,h);d==="other"&&(r=!0),this.bumpSpace();var b=this.clonePosition();if(!this.bumpIf("{"))return this.error(t==="select"?Oi.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Oi.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,zi(this.clonePosition(),this.clonePosition()));var y=this.parseMessage(e+1,t,n);if(y.err)return y;var x=this.tryParseArgumentClose(b);if(x.err)return x;o.push([d,{value:y.val,location:zi(b,this.clonePosition())}]),l.add(d),this.bumpSpace(),a=this.parseIdentifierIfPossible(),d=a.value,h=a.location}return o.length===0?this.error(t==="select"?Oi.EXPECT_SELECT_ARGUMENT_SELECTOR:Oi.EXPECT_PLURAL_ARGUMENT_SELECTOR,zi(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!r?this.error(Oi.MISSING_OTHER_CLAUSE,zi(this.clonePosition(),this.clonePosition())):{val:o,err:null}},i.prototype.tryParseDecimalInteger=function(e,t){var n=1,s=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var a=!1,r=0;!this.isEOF();){var o=this.char();if(o>=48&&o<=57)a=!0,r=r*10+(o-48),this.bump();else break}var l=zi(s,this.clonePosition());return a?(r*=n,PA(r)?{val:r,err:null}:this.error(t,l)):this.error(e,l)},i.prototype.offset=function(){return this.position.offset},i.prototype.isEOF=function(){return this.offset()===this.message.length},i.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},i.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=ew(this.message,e);if(t===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},i.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},i.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},i.prototype.bumpIf=function(e){if(kb(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},i.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},i.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},i.prototype.bumpSpace=function(){for(;!this.isEOF()&&iw(this.char());)this.bump()},i.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return n??null},i}();function Fm(i){return i>=97&&i<=122||i>=65&&i<=90}function EA(i){return Fm(i)||i===47}function IA(i){return i===45||i===46||i>=48&&i<=57||i===95||i>=97&&i<=122||i>=65&&i<=90||i==183||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8255&&i<=8256||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}function iw(i){return i>=9&&i<=13||i===32||i===133||i>=8206&&i<=8207||i===8232||i===8233}function OA(i){return i>=33&&i<=35||i===36||i>=37&&i<=39||i===40||i===41||i===42||i===43||i===44||i===45||i>=46&&i<=47||i>=58&&i<=59||i>=60&&i<=62||i>=63&&i<=64||i===91||i===92||i===93||i===94||i===96||i===123||i===124||i===125||i===126||i===161||i>=162&&i<=165||i===166||i===167||i===169||i===171||i===172||i===174||i===176||i===177||i===182||i===187||i===191||i===215||i===247||i>=8208&&i<=8213||i>=8214&&i<=8215||i===8216||i===8217||i===8218||i>=8219&&i<=8220||i===8221||i===8222||i===8223||i>=8224&&i<=8231||i>=8240&&i<=8248||i===8249||i===8250||i>=8251&&i<=8254||i>=8257&&i<=8259||i===8260||i===8261||i===8262||i>=8263&&i<=8273||i===8274||i===8275||i>=8277&&i<=8286||i>=8592&&i<=8596||i>=8597&&i<=8601||i>=8602&&i<=8603||i>=8604&&i<=8607||i===8608||i>=8609&&i<=8610||i===8611||i>=8612&&i<=8613||i===8614||i>=8615&&i<=8621||i===8622||i>=8623&&i<=8653||i>=8654&&i<=8655||i>=8656&&i<=8657||i===8658||i===8659||i===8660||i>=8661&&i<=8691||i>=8692&&i<=8959||i>=8960&&i<=8967||i===8968||i===8969||i===8970||i===8971||i>=8972&&i<=8991||i>=8992&&i<=8993||i>=8994&&i<=9e3||i===9001||i===9002||i>=9003&&i<=9083||i===9084||i>=9085&&i<=9114||i>=9115&&i<=9139||i>=9140&&i<=9179||i>=9180&&i<=9185||i>=9186&&i<=9254||i>=9255&&i<=9279||i>=9280&&i<=9290||i>=9291&&i<=9311||i>=9472&&i<=9654||i===9655||i>=9656&&i<=9664||i===9665||i>=9666&&i<=9719||i>=9720&&i<=9727||i>=9728&&i<=9838||i===9839||i>=9840&&i<=10087||i===10088||i===10089||i===10090||i===10091||i===10092||i===10093||i===10094||i===10095||i===10096||i===10097||i===10098||i===10099||i===10100||i===10101||i>=10132&&i<=10175||i>=10176&&i<=10180||i===10181||i===10182||i>=10183&&i<=10213||i===10214||i===10215||i===10216||i===10217||i===10218||i===10219||i===10220||i===10221||i===10222||i===10223||i>=10224&&i<=10239||i>=10240&&i<=10495||i>=10496&&i<=10626||i===10627||i===10628||i===10629||i===10630||i===10631||i===10632||i===10633||i===10634||i===10635||i===10636||i===10637||i===10638||i===10639||i===10640||i===10641||i===10642||i===10643||i===10644||i===10645||i===10646||i===10647||i===10648||i>=10649&&i<=10711||i===10712||i===10713||i===10714||i===10715||i>=10716&&i<=10747||i===10748||i===10749||i>=10750&&i<=11007||i>=11008&&i<=11055||i>=11056&&i<=11076||i>=11077&&i<=11078||i>=11079&&i<=11084||i>=11085&&i<=11123||i>=11124&&i<=11125||i>=11126&&i<=11157||i===11158||i>=11159&&i<=11263||i>=11776&&i<=11777||i===11778||i===11779||i===11780||i===11781||i>=11782&&i<=11784||i===11785||i===11786||i===11787||i===11788||i===11789||i>=11790&&i<=11798||i===11799||i>=11800&&i<=11801||i===11802||i===11803||i===11804||i===11805||i>=11806&&i<=11807||i===11808||i===11809||i===11810||i===11811||i===11812||i===11813||i===11814||i===11815||i===11816||i===11817||i>=11818&&i<=11822||i===11823||i>=11824&&i<=11833||i>=11834&&i<=11835||i>=11836&&i<=11839||i===11840||i===11841||i===11842||i>=11843&&i<=11855||i>=11856&&i<=11857||i===11858||i>=11859&&i<=11903||i>=12289&&i<=12291||i===12296||i===12297||i===12298||i===12299||i===12300||i===12301||i===12302||i===12303||i===12304||i===12305||i>=12306&&i<=12307||i===12308||i===12309||i===12310||i===12311||i===12312||i===12313||i===12314||i===12315||i===12316||i===12317||i>=12318&&i<=12319||i===12320||i===12336||i===64830||i===64831||i>=65093&&i<=65094}function Hm(i){i.forEach(function(e){if(delete e.location,Ux(e)||Gx(e))for(var t in e.options)delete e.options[t].location,Hm(e.options[t].value);else Vx(e)&&Yx(e.style)||(Wx(e)||qx(e))&&Bm(e.style)?delete e.style.location:Zx(e)&&Hm(e.children)})}function BA(i,e){e===void 0&&(e={}),e=Hi({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var t=new DA(i,e).parse();if(t.err){var n=SyntaxError(Oi[t.err.kind]);throw n.location=t.err.location,n.originalMessage=t.err.message,n}return e!=null&&e.captureLocation||Hm(t.val),t.val}var Ll;(function(i){i.MISSING_VALUE="MISSING_VALUE",i.INVALID_VALUE="INVALID_VALUE",i.MISSING_INTL_API="MISSING_INTL_API"})(Ll||(Ll={}));var Lf=function(i){Tf(e,i);function e(t,n,s){var a=i.call(this,t)||this;return a.code=n,a.originalMessage=s,a}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),Mb=function(i){Tf(e,i);function e(t,n,s,a){return i.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(s).join('", "'),'"'),Ll.INVALID_VALUE,a)||this}return e}(Lf),RA=function(i){Tf(e,i);function e(t,n,s){return i.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),Ll.INVALID_VALUE,s)||this}return e}(Lf),zA=function(i){Tf(e,i);function e(t,n){return i.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),Ll.MISSING_VALUE,n)||this}return e}(Lf),gs;(function(i){i[i.literal=0]="literal",i[i.object=1]="object"})(gs||(gs={}));function NA(i){return i.length<2?i:i.reduce(function(e,t){var n=e[e.length-1];return!n||n.type!==gs.literal||t.type!==gs.literal?e.push(t):n.value+=t.value,e},[])}function FA(i){return typeof i=="function"}function iu(i,e,t,n,s,a,r){if(i.length===1&&bb(i[0]))return[{type:gs.literal,value:i[0].value}];for(var o=[],l=0,d=i;l<d.length;l++){var h=d[l];if(bb(h)){o.push({type:gs.literal,value:h.value});continue}if(oA(h)){typeof a=="number"&&o.push({type:gs.literal,value:t.getNumberFormat(e).format(a)});continue}var m=h.value;if(!(s&&m in s))throw new zA(m,r);var v=s[m];if(rA(h)){(!v||typeof v=="string"||typeof v=="number")&&(v=typeof v=="string"||typeof v=="number"?String(v):""),o.push({type:typeof v=="string"?gs.literal:gs.object,value:v});continue}if(Wx(h)){var b=typeof h.style=="string"?n.date[h.style]:Bm(h.style)?h.style.parsedOptions:void 0;o.push({type:gs.literal,value:t.getDateTimeFormat(e,b).format(v)});continue}if(qx(h)){var b=typeof h.style=="string"?n.time[h.style]:Bm(h.style)?h.style.parsedOptions:n.time.medium;o.push({type:gs.literal,value:t.getDateTimeFormat(e,b).format(v)});continue}if(Vx(h)){var b=typeof h.style=="string"?n.number[h.style]:Yx(h.style)?h.style.parsedOptions:void 0;b&&b.scale&&(v=v*(b.scale||1)),o.push({type:gs.literal,value:t.getNumberFormat(e,b).format(v)});continue}if(Zx(h)){var y=h.children,x=h.value,k=s[x];if(!FA(k))throw new RA(x,"function",r);var C=iu(y,e,t,n,s,a),A=k(C.map(function(D){return D.value}));Array.isArray(A)||(A=[A]),o.push.apply(o,A.map(function(D){return{type:typeof D=="string"?gs.literal:gs.object,value:D}}))}if(Ux(h)){var T=h.options[v]||h.options.other;if(!T)throw new Mb(h.value,v,Object.keys(h.options),r);o.push.apply(o,iu(T.value,e,t,n,s));continue}if(Gx(h)){var T=h.options["=".concat(v)];if(!T){if(!Intl.PluralRules)throw new Lf(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,Ll.MISSING_INTL_API,r);var I=t.getPluralRules(e,{type:h.pluralType}).select(v-(h.offset||0));T=h.options[I]||h.options.other}if(!T)throw new Mb(h.value,v,Object.keys(h.options),r);o.push.apply(o,iu(T.value,e,t,n,s,v-(h.offset||0)));continue}}return NA(o)}function HA(i,e){return e?Hi(Hi(Hi({},i||{}),e||{}),Object.keys(i).reduce(function(t,n){return t[n]=Hi(Hi({},i[n]),e[n]||{}),t},{})):i}function jA(i,e){return e?Object.keys(i).reduce(function(t,n){return t[n]=HA(i[n],e[n]),t},Hi({},i)):i}function Ap(i){return{create:function(){return{get:function(e){return i[e]},set:function(e,t){i[e]=t}}}}}function $A(i){return i===void 0&&(i={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Cp(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,Sp([void 0],t,!1)))},{cache:Ap(i.number),strategy:Mp.variadic}),getDateTimeFormat:Cp(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,Sp([void 0],t,!1)))},{cache:Ap(i.dateTime),strategy:Mp.variadic}),getPluralRules:Cp(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,Sp([void 0],t,!1)))},{cache:Ap(i.pluralRules),strategy:Mp.variadic})}}var nw=function(){function i(e,t,n,s){t===void 0&&(t=i.defaultLocale);var a=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var d=a.formatToParts(l);if(d.length===1)return d[0].value;var h=d.reduce(function(m,v){return!m.length||v.type!==gs.literal||typeof m[m.length-1]!="string"?m.push(v.value):m[m.length-1]+=v.value,m},[]);return h.length<=1?h[0]||"":h},this.formatToParts=function(l){return iu(a.ast,a.locales,a.formatters,a.formats,l,void 0,a.message)},this.resolvedOptions=function(){var l;return{locale:((l=a.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=t,this.resolvedLocale=i.resolveLocale(t),typeof e=="string"){if(this.message=e,!i.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var r=s||{};r.formatters;var o=JP(r,["formatters"]);this.ast=i.__parse(e,Hi(Hi({},o),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=jA(i.formats,n),this.formatters=s&&s.formatters||$A(this.formatterCache)}return Object.defineProperty(i,"defaultLocale",{get:function(){return i.memoizedDefaultLocale||(i.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),i.memoizedDefaultLocale},enumerable:!1,configurable:!0}),i.memoizedDefaultLocale=null,i.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},i.__parse=BA,i.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},i}();function VA(i,e){if(e==null)return;if(e in i)return i[e];const t=e.split(".");let n=i;for(let s=0;s<t.length;s++)if(typeof n=="object"){if(s>0){const a=t.slice(s,t.length).join(".");if(a in n){n=n[a];break}}n=n[t[s]]}else n=void 0;return n}const zr={},WA=(i,e,t)=>t&&(e in zr||(zr[e]={}),i in zr[e]||(zr[e][i]=t),t),sw=(i,e)=>{if(e==null)return;if(e in zr&&i in zr[e])return zr[e][i];const t=Id(e);for(let n=0;n<t.length;n++){const s=t[n],a=UA(s,i);if(a)return WA(i,e,a)}};let yg;const Ed=Mn({});function qA(i){return yg[i]||null}function aw(i){return i in yg}function UA(i,e){if(!aw(i))return null;const t=qA(i);return VA(t,e)}function GA(i){if(i==null)return;const e=Id(i);for(let t=0;t<e.length;t++){const n=e[t];if(aw(n))return n}}function rw(i,...e){delete zr[i],Ed.update(t=>(t[i]=XP.all([t[i]||{},...e]),t))}_s([Ed],([i])=>Object.keys(i));Ed.subscribe(i=>yg=i);const nu={};function ZA(i,e){nu[i].delete(e),nu[i].size===0&&delete nu[i]}function ow(i){return nu[i]}function YA(i){return Id(i).map(e=>{const t=ow(e);return[e,t?[...t]:[]]}).filter(([,e])=>e.length>0)}function Ou(i){return i==null?!1:Id(i).some(e=>{var t;return(t=ow(e))==null?void 0:t.size})}function KA(i,e){return Promise.all(e.map(n=>(ZA(i,n),n().then(s=>s.default||s)))).then(n=>rw(i,...n))}const ac={};function lw(i){if(!Ou(i))return i in ac?ac[i]:Promise.resolve();const e=YA(i);return ac[i]=Promise.all(e.map(([t,n])=>KA(t,n))).then(()=>{if(Ou(i))return lw(i);delete ac[i]}),ac[i]}var Pb=Object.getOwnPropertySymbols,XA=Object.prototype.hasOwnProperty,JA=Object.prototype.propertyIsEnumerable,QA=(i,e)=>{var t={};for(var n in i)XA.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&Pb)for(var n of Pb(i))e.indexOf(n)<0&&JA.call(i,n)&&(t[n]=i[n]);return t};const eT={number:{scientific:{notation:"scientific"},engineering:{notation:"engineering"},compactLong:{notation:"compact",compactDisplay:"long"},compactShort:{notation:"compact",compactDisplay:"short"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}};function tT({locale:i,id:e}){console.warn(`[svelte-i18n] The message "${e}" was not found in "${Id(i).join('", "')}".${Ou(ao())?`

Note: there are at least one loader still registered to this locale that wasn't executed.`:""}`)}const iT={fallbackLocale:null,loadingDelay:200,formats:eT,warnOnMissingMessages:!0,handleMissingMessage:void 0,ignoreTag:!0},wc=iT;function Dl(){return wc}function Ab(i){const e=i,{formats:t}=e,n=QA(e,["formats"]);let s=i.fallbackLocale;if(i.initialLocale)try{nw.resolveLocale(i.initialLocale)&&(s=i.initialLocale)}catch{console.warn(`[svelte-i18n] The initial locale "${i.initialLocale}" is not a valid locale.`)}return n.warnOnMissingMessages&&(delete n.warnOnMissingMessages,n.handleMissingMessage==null?n.handleMissingMessage=tT:console.warn('[svelte-i18n] The "warnOnMissingMessages" option is deprecated. Please use the "handleMissingMessage" option instead.')),Object.assign(wc,n,{initialLocale:s}),t&&("number"in t&&Object.assign(wc.formats.number,t.number),"date"in t&&Object.assign(wc.formats.date,t.date),"time"in t&&Object.assign(wc.formats.time,t.time)),Go.set(s)}const Tp=Mn(!1);var nT=Object.defineProperty,sT=Object.defineProperties,aT=Object.getOwnPropertyDescriptors,Tb=Object.getOwnPropertySymbols,rT=Object.prototype.hasOwnProperty,oT=Object.prototype.propertyIsEnumerable,Lb=(i,e,t)=>e in i?nT(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,lT=(i,e)=>{for(var t in e||(e={}))rT.call(e,t)&&Lb(i,t,e[t]);if(Tb)for(var t of Tb(e))oT.call(e,t)&&Lb(i,t,e[t]);return i},cT=(i,e)=>sT(i,aT(e));let jm;const Bu=Mn(null);function Db(i){return i.split("-").map((e,t,n)=>n.slice(0,t+1).join("-")).reverse()}function Id(i,e=Dl().fallbackLocale){const t=Db(i);return e?[...new Set([...t,...Db(e)])]:t}function ao(){return jm??void 0}Bu.subscribe(i=>{jm=i??void 0,typeof window<"u"&&i!=null&&document.documentElement.setAttribute("lang",i)});const dT=i=>{if(i&&GA(i)&&Ou(i)){const{loadingDelay:e}=Dl();let t;return typeof window<"u"&&ao()!=null&&e?t=window.setTimeout(()=>Tp.set(!0),e):Tp.set(!0),lw(i).then(()=>{Bu.set(i)}).finally(()=>{clearTimeout(t),Tp.set(!1)})}return Bu.set(i)},Go=cT(lT({},Bu),{set:dT}),hT=()=>typeof window>"u"?null:window.navigator.language||window.navigator.languages[0],Df=i=>{const e=Object.create(null);return n=>{const s=JSON.stringify(n);return s in e?e[s]:e[s]=i(n)}};var uT=Object.defineProperty,Ru=Object.getOwnPropertySymbols,cw=Object.prototype.hasOwnProperty,dw=Object.prototype.propertyIsEnumerable,Eb=(i,e,t)=>e in i?uT(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,xg=(i,e)=>{for(var t in e||(e={}))cw.call(e,t)&&Eb(i,t,e[t]);if(Ru)for(var t of Ru(e))dw.call(e,t)&&Eb(i,t,e[t]);return i},Yl=(i,e)=>{var t={};for(var n in i)cw.call(i,n)&&e.indexOf(n)<0&&(t[n]=i[n]);if(i!=null&&Ru)for(var n of Ru(i))e.indexOf(n)<0&&dw.call(i,n)&&(t[n]=i[n]);return t};const Qc=(i,e)=>{const{formats:t}=Dl();if(i in t&&e in t[i])return t[i][e];throw new Error(`[svelte-i18n] Unknown "${e}" ${i} format.`)},fT=Df(i=>{var e=i,{locale:t,format:n}=e,s=Yl(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format numbers');return n&&(s=Qc("number",n)),new Intl.NumberFormat(t,s)}),pT=Df(i=>{var e=i,{locale:t,format:n}=e,s=Yl(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format dates');return n?s=Qc("date",n):Object.keys(s).length===0&&(s=Qc("date","short")),new Intl.DateTimeFormat(t,s)}),mT=Df(i=>{var e=i,{locale:t,format:n}=e,s=Yl(e,["locale","format"]);if(t==null)throw new Error('[svelte-i18n] A "locale" must be set to format time values');return n?s=Qc("time",n):Object.keys(s).length===0&&(s=Qc("time","short")),new Intl.DateTimeFormat(t,s)}),vT=(i={})=>{var e=i,{locale:t=ao()}=e,n=Yl(e,["locale"]);return fT(xg({locale:t},n))},gT=(i={})=>{var e=i,{locale:t=ao()}=e,n=Yl(e,["locale"]);return pT(xg({locale:t},n))},_T=(i={})=>{var e=i,{locale:t=ao()}=e,n=Yl(e,["locale"]);return mT(xg({locale:t},n))},bT=Df((i,e=ao())=>new nw(i,e,Dl().formats,{ignoreTag:Dl().ignoreTag})),yT=(i,e={})=>{var t,n,s,a;let r=e;typeof i=="object"&&(r=i,i=r.id);const{values:o,locale:l=ao(),default:d}=r;if(l==null)throw new Error("[svelte-i18n] Cannot format a message without first setting the initial locale.");let h=sw(i,l);if(!h)h=(a=(s=(n=(t=Dl()).handleMissingMessage)==null?void 0:n.call(t,{locale:l,id:i,defaultValue:d}))!=null?s:d)!=null?a:i;else if(typeof h!="string")return console.warn(`[svelte-i18n] Message with id "${i}" must be of type "string", found: "${typeof h}". Gettin its value through the "$format" method is deprecated; use the "json" method instead.`),h;if(!o)return h;let m=h;try{m=bT(h,l).format(o)}catch(v){v instanceof Error&&console.warn(`[svelte-i18n] Message "${i}" has syntax error:`,v.message)}return m},xT=(i,e)=>_T(e).format(i),wT=(i,e)=>gT(e).format(i),kT=(i,e)=>vT(e).format(i),ST=(i,e=ao())=>sw(i,e),xi=_s([Go,Ed],()=>yT);_s([Go],()=>xT);_s([Go],()=>wT);_s([Go],()=>kT);_s([Go,Ed],()=>ST);const CT={en:"English",es:"Español",fr:"Français",de:"Deutsch",it:"Italiano",pt:"Português",nl:"Nederlands",ru:"Русский",tr:"Türkçe",ar:"العربية",zh:"中文",ja:"日本語",ko:"한국어",hi:"हिन्दी",bn:"বাংলা",pa:"ਪੰਜਾਬੀ",sv:"Svenska",no:"Norsk",da:"Dansk",fi:"Suomi",pl:"Polski",cs:"Čeština",sk:"Slovenčina",hu:"Magyar",ro:"Română",bg:"Български",hr:"Hrvatski",sr:"Српски",sl:"Slovenščina",et:"Eesti",lv:"Latviešu",lt:"Lietuvių",el:"Ελληνικά",he:"עברית",fa:"فارسی",ur:"اردو",th:"ไทย",vi:"Tiếng Việt",id:"Bahasa Indonesia",ms:"Bahasa Melayu",tl:"Filipino",uk:"Українська",be:"Беларуская",ka:"ქართული",hy:"Հայերեն",az:"Azərbaycan",kk:"Қазақ",ky:"Кыргызча",uz:"Oʻzbek",tg:"Тоҷикӣ",mn:"Монгол",my:"မြန်မာ",km:"ខ្មែរ",lo:"ລາວ",si:"සිංහල",ne:"नेपाली",ta:"தமிழ்",te:"తెలుగు",kn:"ಕನ್ನಡ",ml:"മലയാളം",gu:"ગુજરાતી",mr:"मराठी",or:"ଓଡ଼ିଆ",as:"অসমীয়া",sa:"संस्कृतम्",sw:"Kiswahili",am:"አማርኛ",yo:"Yorùbá",ig:"Igbo",ha:"Hausa",zu:"IsiZulu",xh:"IsiXhosa",af:"Afrikaans",eu:"Euskera",ca:"Català",gl:"Galego",cy:"Cymraeg",ga:"Gaeilge",is:"Íslenska",mt:"Malti",sq:"Shqip",mk:"Македонски",me:"Crnogorski",bs:"Bosanski",lb:"Lëtzebuergesch",rm:"Rumantsch",fo:"Føroyskt",kl:"Kalaallisut",se:"Davvisámegiella",sm:"Gagana Samoa",to:"Lea fakatonga",fj:"Na Vosa Vakaviti",haw:"ʻŌlelo Hawaiʻi",mi:"Te Reo Māori",ty:"Reo Tahiti",mg:"Malagasy",rw:"Ikinyarwanda",rn:"Kirundi",so:"Soomaali",om:"Afaan Oromoo",ti:"ትግርኛ",ss:"SiSwati",st:"Sesotho",tn:"Setswana",ve:"Tshivenḓa",ts:"Xitsonga",nr:"IsiNdebele",nso:"Sesotho sa Leboa"};function MT(i){return CT[i]||i.toUpperCase()}function PT(i){const t=i.target.value;zP(t),Go.set(t)}var AT=B('<option class="svelte-hzp6k1">Loading languages...</option>'),TT=B('<option class="svelte-hzp6k1"> </option>'),LT=B("<div><select><!></select></div>");function hw(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t);let a=ae(Gt([])),r=ae(!0);async function o(){try{const k=await Ve("getLocales");k.status==="ok"&&k.data?M(a,Object.keys(k.data),!0):M(a,["en","es"],!0)}catch(k){console.error("Failed to load available locales:",k),M(a,["en","es"],!0)}finally{M(r,!1)}}pn(()=>{o()});var l=LT();let d;var h=p(l);gl(h,()=>s().currentLanguage);var m;h.__change=[PT];let v;var b=p(h);{var y=k=>{var C=AT();C.value=C.__value="",E(k,C)},x=k=>{var C=Bi(),A=yt(C);Vt(A,17,()=>u(a),Si,(T,I)=>{var D=TT(),N={},z=p(D);se(H=>{N!==(N=u(I))&&(D.value=(D.__value=u(I))??""),S(z,H)},[()=>MT(u(I))]),E(T,D)}),E(k,C)};Q(b,k=>{u(r)?k(y):k(x,!1)})}se((k,C)=>{d=G(l,1,"language-switcher select-wrap svelte-hzp6k1",null,d,k),m!==(m=s().currentLanguage)&&(h.value=(h.__value=s().currentLanguage)??"",Ur(h,s().currentLanguage)),v=G(h,1,"form-select font-select svelte-hzp6k1",null,v,C),h.disabled=u(r)},[()=>({light:!s().darkMode}),()=>({"font-select-light":!s().darkMode})]),E(i,l),Yt(),n()}hi(["change"]);function DT(i,e){M(e,!0)}function ET(i,e){M(e,!1)}function IT(i,e,t,n,s){M(e,5),M(t,!1),M(n,!1),M(s,"")}async function OT(i,e,t,n,s,a,r,o,l,d,h){if(M(e,!0),M(t,!1),M(n,""),M(s,!1),u(a)===1)M(t,!0);else if(u(a)===2){if(!u(r).trim()){M(n,o()("pages.installation.errors.servernamerequired"),!0),M(e,!1);return}const{status:m,data:v}=await Ve("installationSetServerName",{serverName:u(r).trim()});if(await new Promise(b=>setTimeout(b,l)),v.status!=="ok"||!v){M(n,o()("pages.installation.errors.servernamesavefailed"),!0),M(e,!1);return}M(t,!0),await new Promise(b=>setTimeout(b,750))}else if(u(a)===3){const{status:m,data:v}=await Ve("installationCreateTables");if(await new Promise(b=>setTimeout(b,l)),v.status!=="ok"||!v){M(n,o()("pages.installation.errors.databasecreatefailed"),!0),M(e,!1);return}M(t,!0),await new Promise(b=>setTimeout(b,750))}else if(u(a)===4){const{status:m,data:v}=await Ve("installationCreateUser");if(await new Promise(b=>setTimeout(b,l)),v.status!=="ok"||!v){M(n,o()("pages.installation.errors.adminusercreatefailed"),!0),M(e,!1),M(s,!0);return}M(t,!0),await new Promise(b=>setTimeout(b,750))}else if(u(a)===5){const{status:m,data:v}=await Ve("installationSetTebexSecret",{tebexSecret:u(d).trim()});if(await new Promise(b=>setTimeout(b,l)),v.status!=="ok"||!v){M(n,o()("pages.installation.errors.tebexsecretfailed"),!0),M(e,!1);return}M(t,!0),await new Promise(b=>setTimeout(b,750))}else u(a)===6&&(Ve("installationComplete"),Ld()||window.location.reload());M(e,!1),M(t,!1),u(a)<h&&Yr(a)}var BT=B(' <button class="text-link-button svelte-ouz5d1"> </button>).',1),RT=B('<div class="alert alert-danger svelte-ouz5d1" role="alert"><!></div>'),zT=B('<div class="language-selector-container svelte-ouz5d1"><div class="language-selector-wrapper svelte-ouz5d1"><div class="language-info svelte-ouz5d1"><label class="language-label svelte-ouz5d1"> </label> <p class="language-description svelte-ouz5d1"> </p></div> <div class="language-switcher svelte-ouz5d1"><!></div></div></div>'),NT=B('<div class="input-container svelte-ouz5d1"><input type="text" class="form-control svelte-ouz5d1" maxlength="64"></div>'),FT=B('<div class="input-container svelte-ouz5d1"><input type="text" class="form-control svelte-ouz5d1" maxlength="64"></div>'),HT=B('<div class="license-container svelte-ouz5d1"><div class="license-box svelte-ouz5d1"><code class="svelte-ouz5d1"> </code></div></div>'),jT=B('<span class="discord-link svelte-ouz5d1"><i class="fab fa-discord svelte-ouz5d1"></i> https://discord.gg/Xv7faqUXUf</span> <p class="step-description svelte-ouz5d1"><br class="svelte-ouz5d1"> </p>',1),$T=B('<div class="spinner-container svelte-ouz5d1"><div class="spinner-border text-primary svelte-ouz5d1" role="status"><span class="visually-hidden svelte-ouz5d1"> </span></div> <span class="loading-text svelte-ouz5d1"> </span></div>'),VT=B('<div class="check-container svelte-ouz5d1"><i class="fas fa-check-circle svelte-ouz5d1"></i> <span class="success-text svelte-ouz5d1"> </span></div>'),WT=B('<div class="loading-overlay svelte-ouz5d1"><!></div>'),qT=B('<span class="spinner-border spinner-border-sm me-2 svelte-ouz5d1" role="status" aria-hidden="true"></span>'),UT=B('<button class="btn btn-primary svelte-ouz5d1"><!> </button>'),GT=B('<div class="overlay-backdrop svelte-ouz5d1"><div class="modal-box svelte-ouz5d1"><p class="mb-3 svelte-ouz5d1" style="white-space: pre-line; color:red"> </p> <div class="d-flex justify-content-end gap-2 svelte-ouz5d1"><button class="btn btn-secondary svelte-ouz5d1"> </button> <button class="btn btn-primary svelte-ouz5d1"> </button></div></div></div>'),ZT=B('<div class="installation-container svelte-ouz5d1"><div class="installation-window svelte-ouz5d1"><div class="header svelte-ouz5d1"><h2 class="svelte-ouz5d1"> </h2> <div class="step-indicator svelte-ouz5d1"> </div></div> <div class="content-area svelte-ouz5d1"><!> <div class="step-content svelte-ouz5d1"><h3 class="svelte-ouz5d1"> </h3> <p class="step-description svelte-ouz5d1" style="white-space: pre-line"> </p> <!> <!> <!> <!> <!></div> <!></div> <div class="footer svelte-ouz5d1"><div class="progress svelte-ouz5d1"><div class="progress-bar svelte-ouz5d1" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div></div> <!></div></div></div> <!>',1);function YT(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t);let a=ae(1),r=ae(!1),o=ae(""),l=ae(!1),d=ae(""),h=ae(""),m=ae(!1),v=ae(!1);const b=6,y=1e3;function x(){try{const oe=document.createElement("textarea");oe.value="https://discord.gg/Xv7faqUXUf",oe.style.position="fixed",oe.style.opacity="0",oe.style.pointerEvents="none",document.body.appendChild(oe),oe.select(),oe.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(oe)}catch{console.error("Failed to copy Discord link")}const ue=document.querySelector(".discord-link");ue&&(ue.textContent=s()("pages.installation.copied"),setTimeout(()=>{ue.innerHTML='<i class="fab fa-discord"></i> https://discord.gg/Xv7faqUXUf'},2e3))}function k(ue){switch(ue){case 1:return{title:s()("pages.installation.welcometitle"),content:s()("pages.installation.welcomecontent",{values:{framework:e.frameworkName}}),showNext:!0,nextLabel:s()("pages.installation.begininstallation"),showLanguageSelector:!0};case 2:return{title:s()("pages.installation.serverconfigurationtitle"),content:s()("pages.installation.serverconfigurationcontent"),showServerNameInput:!0,showNext:!0,nextLabel:s()("pages.installation.continue")};case 3:return{title:s()("pages.installation.databasesetuptitle"),content:s()("pages.installation.databasesetupcontent"),showNext:!0};case 4:return{title:s()("pages.installation.createadminusertitle"),content:s()("pages.installation.createadminusercontent"),showLicenseBox:!0,showNext:!0};case 5:return{title:s()("pages.installation.tebexsecrettitle"),content:s()("pages.installation.tebexsecretcontent"),showTebexSecretInput:!0,showNext:!0,nextLabel:s()("pages.installation.continue")};case 6:return{title:s()("pages.installation.installationcompletetitle"),content:s()("pages.installation.installationcompletecontent"),showDiscordLink:!0,showNext:!0,nextLabel:s()("pages.installation.finish")};default:return{title:"",content:"",showNext:!1}}}var C=ZT(),A=yt(C),T=p(A),I=p(T),D=p(I),N=p(D),z=g(D,2),H=p(z),j=g(I,2),re=p(j);{var V=ue=>{var oe=RT(),me=p(oe);{var Le=_e=>{var be=BT(),Te=yt(be),pe=g(Te);pe.__click=[DT,v];var de=p(pe);se((ge,xe,we)=>{S(Te,`${ge??""} (`),S(de,`${xe??""} ${we??""}`)},[()=>s()("pages.installation.errors.adminusercreatefailed").replace(/\.$/,""),()=>s()("pages.installation.orword"),()=>s()("pages.installation.continueanyway")]),E(_e,be)},Oe=_e=>{var be=Al();se(()=>S(be,u(o))),E(_e,be)};Q(me,_e=>{u(m)&&u(a)===4?_e(Le):_e(Oe,!1)})}gt(1,oe,()=>Im),E(ue,oe)};Q(re,ue=>{u(o)&&ue(V)})}var q=g(re,2),le=p(q),ee=p(le),W=g(le,2),ne=p(W),ye=g(W,2);{var ie=ue=>{var oe=zT(),me=p(oe),Le=p(me),Oe=p(Le),_e=p(Oe),be=g(Oe,2),Te=p(be),pe=g(Le,2),de=p(pe);hw(de,{}),se((ge,xe)=>{S(_e,ge),S(Te,xe)},[()=>s()("pages.installation.language"),()=>s()("pages.installation.languagedescription")]),E(ue,oe)};Q(ye,ue=>{k(u(a)).showLanguageSelector&&ue(ie)})}var Z=g(ye,2);{var $=ue=>{var oe=NT(),me=p(oe);se(Le=>Ot(me,"placeholder",Le),[()=>s()("pages.installation.servernamePlaceholder")]),st(me,()=>u(d),Le=>M(d,Le)),E(ue,oe)};Q(Z,ue=>{k(u(a)).showServerNameInput&&ue($)})}var X=g(Z,2);{var Y=ue=>{var oe=FT(),me=p(oe);se(Le=>Ot(me,"placeholder",Le),[()=>s()("pages.installation.tebexsecretplaceholder")]),st(me,()=>u(h),Le=>M(h,Le)),E(ue,oe)};Q(X,ue=>{k(u(a)).showTebexSecretInput&&ue(Y)})}var te=g(X,2);{var K=ue=>{var oe=HT(),me=p(oe),Le=p(me),Oe=p(Le);se(()=>S(Oe,e.license)),E(ue,oe)};Q(te,ue=>{k(u(a)).showLicenseBox&&ue(K)})}var F=g(te,2);{var R=ue=>{var oe=jT(),me=yt(oe);me.__click=x;var Le=g(me,2),Oe=g(p(Le),1,!0);se(_e=>S(Oe,_e),[()=>s()("pages.installation.clickfinish")]),E(ue,oe)};Q(F,ue=>{k(u(a)).showDiscordLink&&ue(R)})}var J=g(q,2);{var U=ue=>{var oe=WT(),me=p(oe);{var Le=_e=>{var be=$T(),Te=p(be),pe=p(Te),de=p(pe),ge=g(Te,2),xe=p(ge);se((we,Re)=>{S(de,we),S(xe,Re)},[()=>s()("pages.installation.loading"),()=>s()("pages.installation.processing")]),E(_e,be)},Oe=_e=>{var be=VT(),Te=g(p(be),2),pe=p(Te);se(de=>S(pe,de),[()=>s()("pages.installation.complete")]),gt(1,be,()=>Ki,()=>({duration:200})),E(_e,be)};Q(me,_e=>{u(l)?_e(Oe,!1):_e(Le)})}gt(1,oe,()=>Fi,()=>({duration:200})),E(ue,oe)};Q(J,ue=>{u(r)&&ue(U)})}var ce=g(j,2),fe=p(ce),ve=p(fe),Me=g(fe,2);{var Se=ue=>{var oe=UT();oe.__click=[OT,r,l,o,m,a,d,s,y,h,b];var me=p(oe);{var Le=_e=>{var be=qT();E(_e,be)};Q(me,_e=>{u(r)&&!u(l)&&_e(Le)})}var Oe=g(me);se(_e=>{oe.disabled=u(r),S(Oe,` ${_e??""}`)},[()=>k(u(a)).nextLabel||s()("pages.installation.next")]),E(ue,oe)};Q(Me,ue=>{k(u(a)).showNext&&ue(Se)})}var Pe=g(A,2);{var Be=ue=>{var oe=GT(),me=p(oe),Le=p(me),Oe=p(Le),_e=g(Le,2),be=p(_e);be.__click=[ET,v];var Te=p(be),pe=g(be,2);pe.__click=[IT,a,m,v,o];var de=p(pe);se((ge,xe,we)=>{S(Oe,ge),S(Te,xe),S(de,we)},[()=>s()("pages.installation.continueanyway_confirm"),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),gt(3,me,()=>Ki,()=>({duration:200,start:.9})),gt(3,oe,()=>Fi,()=>({duration:200})),E(ue,oe)};Q(Pe,ue=>{u(v)&&ue(Be)})}se((ue,oe,me,Le)=>{S(N,ue),S(H,oe),S(ee,me),S(ne,Le),es(ve,`width: ${u(a)===1?0:(u(a)-1)/(b-1)*100}%`),Ot(ve,"aria-valuenow",u(a)===1?0:(u(a)-1)/(b-1)*100)},[()=>s()("pages.installation.title"),()=>s()("pages.installation.stepindicator",{values:{current:u(a),total:b}}),()=>k(u(a)).title,()=>k(u(a)).content]),gt(1,q,()=>Xr,()=>({y:20,duration:300})),gt(1,T,()=>Im,()=>({duration:200})),gt(1,A,()=>Fi,()=>({duration:200})),E(i,C),Yt(),n()}hi(["click"]);function KT(i,e){Zt(e,!0);let t=ae(!1),n=ae(""),s=ae("");la("setInstallationVisible",d=>{M(t,d.visible,!0),M(n,d.license,!0),M(s,d.frameworkName,!0)});const a=d=>{d.key==="Escape"&&d.preventDefault()};window.addEventListener("keydown",a),Td(()=>{window.removeEventListener("keydown",a)});var r=Bi(),o=yt(r);{var l=d=>{YT(d,{get license(){return u(n)},get frameworkName(){return u(s)}})};Q(o,d=>{u(t)&&d(l)})}E(i,r),Yt()}const $m=Mn([]);let XT=0;function ze(i,e="info",t=3e3){const n=++XT;$m.update(s=>[...s,{id:n,message:i,type:e,duration:t}]),setTimeout(()=>{$m.update(s=>s.filter(a=>a.id!==n))},t)}function JT(i,e){e.onClose(),Ve("closePlayerReportChat")}function QT(i,e,t,n){M(e,!!u(t).trim()),i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),n(),M(e,!1))}var e3=B('<div class="admin-name svelte-121247g"> </div>'),t3=B('<div class="message-time svelte-121247g"> </div>'),i3=B('<div><!> <div class="message-content svelte-121247g"> </div> <!></div>'),n3=B('<div class="chat-message player typing-indicator svelte-121247g"><div class="message-content svelte-121247g"><span class="typing-dot svelte-121247g"></span> <span class="typing-dot svelte-121247g"></span> <span class="typing-dot svelte-121247g"></span></div></div>'),s3=B('<div class="chat-backdrop svelte-121247g"><div class="chat-window svelte-121247g"><div class="chat-header svelte-121247g"><strong class="svelte-121247g"> </strong> <button class="btn btn-sm btn-danger ms-auto svelte-121247g"><i class="fas fa-times svelte-121247g"></i></button></div> <div class="chat-messages svelte-121247g"><!> <!></div> <div class="chat-input svelte-121247g"><input type="text" class="form-control svelte-121247g"> <button class="btn btn-primary svelte-121247g"><i class="fas fa-paper-plane svelte-121247g"></i></button></div></div></div>');function a3(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t);let a=Yi(e,"reportId",3,0),r=ae(Gt([])),o=ae(""),l=null,d=null,h=ae(!1);function m(V){M(r,[...u(r),V],!0)}async function v(){!u(o).trim()||!a()||(m({from:"player",message:u(o).trim(),timestamp:Date.now()/1e3}),await Ve("sendPlayerReportMessage",{reportId:a(),message:u(o).trim()}),M(o,""))}async function b(){if(a()){const V=u(r),q=V.length>0?`${V[V.length-1].message}_${V[V.length-1].from}_${V[V.length-1].timestamp}`:null,le=await Ve("getReportChatMessagesPlayerSide",{reportId:a()});if(le.status==="ok"){const ee=Array.isArray(le.data.data)?le.data.data:[],W=ee.length>0?`${ee[ee.length-1].message}_${ee[ee.length-1].from}_${ee[ee.length-1].timestamp}`:null;ee.length!==V.length||W!==q?(M(r,ee,!0),await Ro(),d&&(d.scrollTop=d.scrollHeight)):M(r,ee,!0)}else M(r,[],!0),le.data.status==="error"?ze(le.data.message,"error"):ze("Failed to fetch chat messages","error")}}pn(()=>(b(),l=setInterval(()=>{a()&&b()},1e3),()=>{l&&clearInterval(l)})),Td(()=>{l&&clearInterval(l)}),fn(()=>{M(h,!!u(o).trim())});var y=s3(),x=p(y),k=p(x),C=p(k),A=p(C),T=g(C,2);T.__click=[JT,e];var I=g(k,2),D=p(I);Vt(D,17,()=>u(r),Si,(V,q)=>{var le=i3(),ee=p(le);{var W=$=>{var X=e3(),Y=p(X);se(te=>S(Y,`${u(q).adminName??""} (${te??""})`),[()=>s()("pages.reports.staff")]),E($,X)};Q(ee,$=>{u(q).from==="admin"&&$(W)})}var ne=g(ee,2),ye=p(ne),ie=g(ne,2);{var Z=$=>{var X=t3(),Y=p(X);se(te=>S(Y,te),[()=>new Date(u(q).timestamp*1e3).toLocaleTimeString()]),E($,X)};Q(ie,$=>{u(q).timestamp&&$(Z)})}se(()=>{G(le,1,`chat-message ${u(q).from??""}`,"svelte-121247g"),S(ye,u(q).message)}),E(V,le)});var N=g(D,2);{var z=V=>{var q=n3();E(V,q)};Q(N,V=>{u(h)&&V(z)})}Kr(I,V=>d=V,()=>d);var H=g(I,2),j=p(H);j.__keydown=[QT,h,o,v];var re=g(j,2);re.__click=v,se((V,q)=>{S(A,V),Ot(j,"placeholder",q)},[()=>s()("pages.reports.reportchat"),()=>s()("pages.reports.typeamessage")]),st(j,()=>u(o),V=>M(o,V)),gt(3,x,()=>Xr,()=>({duration:200,y:20})),E(i,y),Yt(),n()}hi(["click","keydown"]);function r3(i,e){Zt(e,!0);let t=ae(!1),n=ae(0);la("setPlayerReportChatVisible",o=>{M(n,o.reportId,!0),M(t,!0)});var s=Bi(),a=yt(s);{var r=o=>{a3(o,{onClose:()=>{M(t,!1)},get reportId(){return u(n)}})};Q(a,o=>{u(t)&&o(r)})}E(i,s),Yt()}xM();const o3={enabled:!1,logs:[]},Od=Mn(o3);function ro(i){Od.update(e=>(e.logs.push(`[${new Date().toLocaleTimeString()}] ${i}`),e))}function l3(){Od.update(i=>{const e=!i.enabled;return{...i,enabled:e}})}function c3(i,e){Mf(Od,Hn(e).logs=[],Hn(e)),ro("Debug logs cleared")}function d3(){ze("This is a success notification!","success"),setTimeout(()=>ze("This is an error notification!","error"),1e3),setTimeout(()=>ze("This is a warning notification!","warning"),2e3),setTimeout(()=>ze("This is an info notification!","info"),3e3),ro("Triggered test notifications")}function h3(){window.dispatchEvent(new MessageEvent("message",{data:{type:"setPlayerReportChatVisible",data:{adminName:"Debug Admin",message:"This is a test message from the debug panel!",reportId:1}}})),ro("Triggered test player chat message")}function u3(){window.dispatchEvent(new MessageEvent("message",{data:{type:"setInstallationVisible",data:{visible:!0,license:"license:14850abc4923def4949500001",frameworkName:"QBox"}}})),ro("Triggered installation wizard")}function f3(){window.dispatchEvent(new MessageEvent("message",{data:{type:"setPlayerSubmitReportVisible",data:{visible:!0}}})),ro("Triggered player submit report panel")}function p3(){window.dispatchEvent(new MessageEvent("message",{data:{type:"showWarningScreen",data:{reason:"This is a test warning from the debug panel!"}}})),ro("Triggered test warning screen")}var m3=(i,e)=>M(e,!u(e)),v3=B('<div class="section-content svelte-86lda5"><button class="debug-btn success svelte-86lda5"><span class="btn-icon svelte-86lda5">🔔</span> Test Notifications</button> <button class="debug-btn warning svelte-86lda5"><span class="btn-icon svelte-86lda5">⚙️</span> Test Installation</button> <button class="debug-btn info svelte-86lda5"><span class="btn-icon svelte-86lda5">💬</span> Test Player Chat</button> <button class="debug-btn secondary svelte-86lda5"><span class="btn-icon svelte-86lda5">📝</span> Test Submit Report</button> <button class="debug-btn danger svelte-86lda5"><span class="btn-icon svelte-86lda5">⚠️</span> Test Warning Screen</button></div>'),g3=(i,e)=>M(e,!u(e)),_3=B('<div class="no-logs svelte-86lda5">No debug logs yet...</div>'),b3=B('<div><span class="log-timestamp svelte-86lda5"> </span> <span class="log-message svelte-86lda5"> </span></div>'),y3=B('<div class="logs-container svelte-86lda5"><div class="logs-header svelte-86lda5"><button class="debug-btn small primary svelte-86lda5"><span class="btn-icon svelte-86lda5">💾</span> Export</button> <button class="debug-btn small danger svelte-86lda5"><span class="btn-icon svelte-86lda5">🗑️</span> Clear</button></div> <div class="logs-content svelte-86lda5"><!></div></div>'),x3=B('<div class="debug-panel svelte-86lda5"><div class="debug-header svelte-86lda5"><h2 class="debug-title svelte-86lda5"><span class="debug-icon svelte-86lda5">🔧</span> 919ADMIN PRO</h2></div> <div class="debug-content svelte-86lda5"><div class="debug-section svelte-86lda5"><button class="section-header svelte-86lda5"><span>▼</span> Debug Triggers</button> <!></div> <div class="debug-section logs-section svelte-86lda5"><button class="section-header svelte-86lda5"><span>▼</span> Debug Logs <span class="log-count svelte-86lda5"> </span></button> <!></div></div></div>');function w3(i,e){Zt(e,!1);const[t,n]=pi(),s=()=>Xe(Od,"$debugStore",t);let a=Xc(!0),r=Xc(!0);function o(){const N=s().logs.join(`
`),z=new Blob([N],{type:"text/plain"}),H=URL.createObjectURL(z),j=document.createElement("a");j.href=H,j.download="debug_logs.txt",j.click(),URL.revokeObjectURL(H),ro("Exported debug logs to file")}kP();var l=x3(),d=g(p(l),2),h=p(d),m=p(h);m.__click=[m3,a];var v=p(m),b=g(m,2);{var y=N=>{var z=v3(),H=p(z);H.__click=[d3];var j=g(H,2);j.__click=[u3];var re=g(j,2);re.__click=[h3];var V=g(re,2);V.__click=[f3];var q=g(V,2);q.__click=[p3],E(N,z)};Q(b,N=>{u(a)&&N(y)})}var x=g(h,2),k=p(x);k.__click=[g3,r];var C=p(k),A=g(C,2),T=p(A),I=g(k,2);{var D=N=>{var z=y3(),H=p(z),j=p(H);j.__click=o;var re=g(j,2);re.__click=[c3,s];var V=g(H,2),q=p(V);{var le=W=>{var ne=_3();E(W,ne)},ee=W=>{var ne=Bi(),ye=yt(ne);Vt(ye,1,()=>s().logs.slice().reverse(),Si,(ie,Z,$)=>{var X=b3();G(X,1,"log-entry svelte-86lda5",null,{},{recent:$<3});var Y=p(X),te=p(Y),K=g(Y,2),F=p(K);se(R=>{S(te,R),S(F,u(Z))},[()=>new Date().toLocaleTimeString()],_f),E(ie,X)}),E(W,ne)};Q(q,W=>{s().logs.length===0?W(le):W(ee,!1)})}E(N,z)};Q(I,N=>{u(r)&&N(D)})}se(()=>{Ot(m,"aria-expanded",u(a)),G(v,1,`section-icon ${u(a)?"expanded":""}`,"svelte-86lda5"),Ot(k,"aria-expanded",u(r)),G(C,1,`section-icon ${u(r)?"expanded":""}`,"svelte-86lda5"),S(T,`(${s().logs.length??""})`)}),E(i,l),Yt(),n()}hi(["click"]);function ri(i,e=.4){if(localStorage.getItem("uiSoundsEnabled")==="false")return;const n=new Audio(i);n.volume=e,n.play()}let Lp=null;function wg(){if(!Lp){const i=window.AudioContext||window.webkitAudioContext;Lp=new i}return Lp}let Dp=null;function k3(){const i=wg();if(!Dp){const e=i.createGain();e.gain.value=5.5;const t=i.createDynamicsCompressor();t.threshold.value=-16,t.knee.value=20,t.ratio.value=8,t.attack.value=.005,t.release.value=.2,e.connect(t),t.connect(i.destination),Dp={masterGain:e,compressor:t}}return Dp}const Ep=new Map;async function S3(i){if(Ep.has(i))return Ep.get(i);const e=wg(),n=await(await fetch(i)).arrayBuffer(),s=await e.decodeAudioData(n);return Ep.set(i,s),s}function C3(i){return Math.pow(2,i/12)}function M3(i,e=[0,4,7,12,7,4,0,-5],t=140,n=1){localStorage.getItem("uiSoundsEnabled")!=="false"&&(async()=>{const a=wg();if(a.state!=="running")try{await a.resume()}catch{}const r=await S3(i),o=a.currentTime+.01,l=Math.max(.05,t/1e3),d=.02,{masterGain:h}=k3();let m=o;for(const v of e){const b=a.createBufferSource();b.buffer=r,b.playbackRate.value=C3(v);const y=a.createGain(),x=Math.max(1e-4,Math.min(3,n));y.gain.setValueAtTime(1e-4,m),y.gain.exponentialRampToValueAtTime(Math.max(.001,x),m+.01),y.gain.exponentialRampToValueAtTime(1e-4,m+l),b.connect(y),y.connect(h),b.start(m),b.stop(m+l+.02),m+=l+d}})()}const P3={page:"dashboard",params:{}},kg=Mn(P3);function fa(i,e){kg.set({page:i,params:e})}function Ip(){fa("players")}function Sg(i){fa("players",{playerId:String(i)})}function A3(i,e,t,n){Yr(e),u(e)===5?t():u(e)<5&&(M(n,!0),setTimeout(()=>{M(n,!1)},300)),setTimeout(()=>{M(e,0)},1e4)}function T3(i,e){ri("sounds/click.mp3"),M(e,!u(e)),localStorage.setItem("uiSoundsEnabled",String(u(e)))}function L3(i,e){const t=!u(e);M(e,t),FP(t)}var D3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("dashboard")},E3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("adminchat")},I3=B('<button aria-label="Admin Chat"><i class="fas fa-comments svelte-rznufk"></i> <span> </span></button>'),O3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("players")},B3=B('<button aria-label="Players"><i class="fas fa-users svelte-rznufk"></i> <span> </span></button>'),R3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("characters")},z3=B('<button aria-label="Characters"><i class="fas fa-address-card svelte-rznufk"></i> <span> </span></button>'),N3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("reports")},F3=B('<button aria-label="Reports"><i class="fas fa-clipboard svelte-rznufk"></i> <span> </span></button>'),H3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("map")},j3=B('<button aria-label="Map"><i class="fas fa-map svelte-rznufk"></i> <span> </span></button>'),$3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("items")},V3=B('<button aria-label="Items"><i class="fas fa-box svelte-rznufk"></i> <span> </span></button>'),W3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("vehicles")},q3=B('<button aria-label="Vehicles"><i class="fas fa-car svelte-rznufk"></i> <span> </span></button>'),U3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("resources")},G3=B('<button aria-label="Resources"><i class="fas fa-server svelte-rznufk"></i> <span> </span></button>'),Z3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("analytics")},Y3=B('<button aria-label="Analytics"><i class="fas fa-chart-line svelte-rznufk"></i> <span> </span></button>'),K3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("tebex")},X3=B('<button aria-label="Tebex"><i class="fas fa-store svelte-rznufk"></i> <span> </span></button>'),J3=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("addons")},Q3=B('<button aria-label="Addons"><i class="fas fa-puzzle-piece svelte-rznufk"></i> <span> </span></button>'),eL=(i,e)=>{ri("sounds/click.mp3"),e.setCurrentPage("settings")},tL=B('<div><div class="logo-container svelte-rznufk"><img src="logo.png" alt="Logo"></div> <div class="nav-buttons svelte-rznufk"><button aria-label="Dashboard"><i class="fas fa-tachometer-alt svelte-rznufk"></i> <span> </span></button> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <button aria-label="Settings"><i class="fas fa-cog svelte-rznufk"></i> <span> </span></button></div> <div class="version-container svelte-rznufk"><span class="version-text svelte-rznufk"> </span> <div class="quick-settings svelte-rznufk" role="group" aria-label="Quick settings"><button><i></i></button> <button><i></i></button></div></div></div>');function iL(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae("v1.0.0"),o=ae(""),l=ae(0),d=ae(!1),h=ae(null),m=ae(!1),v=ae(localStorage.getItem("uiSoundsEnabled")!=="false"),b=ae(Gt(s().seeThroughMode||localStorage.getItem("919admin_seeThroughMode")==="true")),y=ae(null),x=ae(!1);pn(()=>{Ve("getPanelVersion").then(({status:pe,data:de})=>{M(r,de.version,!0)})}),pn(()=>{const pe=()=>{u(y)&&M(x,u(y).scrollHeight>u(y).clientHeight)};pe(),window.addEventListener("resize",pe);const de=new ResizeObserver(pe);return u(y)&&de.observe(u(y)),()=>{window.removeEventListener("resize",pe),de.disconnect()}});function k(){M(d,!0),M3("sounds/action.mp3",[0,4,7,12,7,4,0,-5],140,1),setTimeout(()=>{M(d,!1),M(l,0)},1750)}var C=tL();let A;var T=p(C),I=p(T);I.__click=[A3,l,k,m],Kr(I,pe=>M(h,pe),()=>u(h));var D=g(T,2),N=p(D);N.__click=[D3,e];var z=g(p(N),2),H=p(z),j=g(N,2);{var re=pe=>{var de=I3();de.__click=[E3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} ${e.currentPage=="adminchat"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="adminchat"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.adminchat.title")]),Mi("mouseenter",de,()=>M(o,"adminchat")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(j,pe=>{s().currentUserPermissions.includes("page:AdminChat")&&pe(re)})}var V=g(j,2);{var q=pe=>{var de=B3();de.__click=[O3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="players"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="players"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.playerlist.title")]),Mi("mouseenter",de,()=>M(o,"players")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(V,pe=>{s().currentUserPermissions.includes("page:PlayerList")&&pe(q)})}var le=g(V,2);{var ee=pe=>{var de=z3();de.__click=[R3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="characters"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="characters"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.characterlist.title")]),Mi("mouseenter",de,()=>M(o,"characters")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(le,pe=>{s().currentUserPermissions.includes("page:Characters")&&pe(ee)})}var W=g(le,2);{var ne=pe=>{var de=F3();de.__click=[N3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="reports"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="reports"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.reports.title")]),Mi("mouseenter",de,()=>M(o,"reports")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(W,pe=>{s().currentUserPermissions.includes("page:Reports")&&pe(ne)})}var ye=g(W,2);{var ie=pe=>{var de=j3();de.__click=[H3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="map"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="map"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.playermap.title")]),Mi("mouseenter",de,()=>M(o,"map")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(ye,pe=>{s().currentUserPermissions.includes("page:Map")&&pe(ie)})}var Z=g(ye,2);{var $=pe=>{var de=V3();de.__click=[$3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="items"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="items"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.items.title")]),Mi("mouseenter",de,()=>M(o,"items")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(Z,pe=>{s().currentUserPermissions.includes("page:Items")&&pe($)})}var X=g(Z,2);{var Y=pe=>{var de=q3();de.__click=[W3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="vehicles"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="vehicles"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.vehicles.title")]),Mi("mouseenter",de,()=>M(o,"vehicles")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(X,pe=>{s().currentUserPermissions.includes("page:Vehicles")&&pe(Y)})}var te=g(X,2);{var K=pe=>{var de=G3();de.__click=[U3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="resources"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="resources"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.resources.title")]),Mi("mouseenter",de,()=>M(o,"resources")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(te,pe=>{s().currentUserPermissions.includes("page:Resources")&&pe(K)})}var F=g(te,2);{var R=pe=>{var de=Y3();de.__click=[Z3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="analytics"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="analytics"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.analytics.title")]),Mi("mouseenter",de,()=>M(o,"analytics")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(F,pe=>{s().currentUserPermissions.includes("page:Analytics")&&pe(R)})}var J=g(F,2);{var U=pe=>{var de=X3();de.__click=[K3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="tebex"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="tebex"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.tebex.title")]),Mi("mouseenter",de,()=>M(o,"tebex")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(J,pe=>{s().currentUserPermissions.includes("page:Tebex")&&pe(U)})}var ce=g(J,2);{var fe=pe=>{var de=Q3();de.__click=[J3,e];var ge=g(p(de),2),xe=p(ge);se(we=>{G(de,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage=="addons"?"btn-nav-active":""}`,"svelte-rznufk"),G(ge,1,`tooltip ${u(o)==="addons"?"tooltip-visible":""}`,"svelte-rznufk"),S(xe,we)},[()=>a()("pages.addons.title")]),Mi("mouseenter",de,()=>M(o,"addons")),Mi("mouseleave",de,()=>M(o,"")),E(pe,de)};Q(ce,pe=>{s().currentUserPermissions.includes("page:Addons")&&pe(fe)})}var ve=g(ce,2);ve.__click=[eL,e];var Me=g(p(ve),2),Se=p(Me);Kr(D,pe=>M(y,pe),()=>u(y));var Pe=g(D,2),Be=p(Pe),ue=p(Be),oe=g(Be,2),me=p(oe);let Le;me.__click=[T3,v];var Oe=p(me),_e=g(me,2);let be;_e.__click=[L3,b];var Te=p(_e);se((pe,de,ge,xe,we,Re,qe)=>{A=G(C,1,`app-navbar ${s().darkMode?"":"app-navbar-light"}`,"svelte-rznufk",A,pe),G(I,1,`logo-img ${u(d)?"easter-egg-active":""} ${u(m)?"click-feedback":""}`,"svelte-rznufk"),G(N,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} ${e.currentPage=="dashboard"?"btn-nav-active":""}`,"svelte-rznufk"),G(z,1,`tooltip ${u(o)==="dashboard"?"tooltip-visible":""}`,"svelte-rznufk"),S(H,de),G(ve,1,`btn btn-nav ${s().darkMode?"":"btn-nav-light"} w-100 ${e.currentPage==="settings"||e.currentPage==="adminusers"||e.currentPage==="permissiongroups"?"btn-nav-active":""}`,"svelte-rznufk"),G(Me,1,`tooltip ${u(o)==="settings"?"tooltip-visible":""}`,"svelte-rznufk"),S(Se,ge),S(ue,u(r)),Le=G(me,1,`qs-btn ${u(v)?"active":""}`,"svelte-rznufk",Le,xe),Ot(me,"title",we),G(Oe,1,zo(u(v)?"fas fa-volume-up":"fas fa-volume-mute"),"svelte-rznufk"),be=G(_e,1,`qs-btn ${u(b)?"active":""}`,"svelte-rznufk",be,Re),Ot(_e,"title",qe),G(Te,1,zo(u(b)?"fas fa-eye":"fas fa-eye-slash"),"svelte-rznufk")},[()=>({"compact-nav":u(x)}),()=>a()("pages.dashboard.title"),()=>a()("pages.settings.title"),()=>({"qs-btn-light":!s().darkMode}),()=>a()("pages.settings.uisounds"),()=>({"qs-btn-light":!s().darkMode}),()=>a()("pages.settings.seethrough")||"See-Through Mode"]),gt(3,I,()=>Fi),Mi("mouseenter",N,()=>M(o,"dashboard")),Mi("mouseleave",N,()=>M(o,"")),Mi("mouseenter",ve,()=>M(o,"settings")),Mi("mouseleave",ve,()=>M(o,"")),E(i,C),Yt(),n()}hi(["click"]);var nL=B('<div class="server-identity skeleton-compact svelte-10jm15a"><div class="server-name svelte-10jm15a" style="min-height: 28px; align-items: center;"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 200px; height: 22px;"></div> <div class="skeleton skeleton-circle svelte-10jm15a" style="width: 10px; height: 10px; border-radius: 50%;"></div></div> <div class="server-details svelte-10jm15a" style="min-height: 18px;"><div class="detail-item svelte-10jm15a"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 120px; height: 12px;"></div></div> <div class="detail-item svelte-10jm15a"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 140px; height: 12px;"></div></div> <div class="detail-item svelte-10jm15a"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 100px; height: 12px;"></div></div></div></div>'),sL=B('<div class="server-identity svelte-10jm15a"><div class="server-name svelte-10jm15a"><h2 class="svelte-10jm15a"> </h2> <div class="status-indicator svelte-10jm15a"></div></div> <div class="server-details svelte-10jm15a"><div class="detail-item svelte-10jm15a"><i class="fas fa-code-branch svelte-10jm15a"></i> <span class="svelte-10jm15a"> </span></div> <div class="detail-item svelte-10jm15a"><i class="fas fa-cube svelte-10jm15a"></i> <span class="svelte-10jm15a"> </span></div> <div class="detail-item svelte-10jm15a"><i class="fas fa-code svelte-10jm15a"></i> <span class="svelte-10jm15a"> </span></div></div></div>'),aL=B("<div></div>"),rL=B('<div class="card-body skeleton-metrics svelte-10jm15a"><div class="metrics-grid svelte-10jm15a"><div class="metric-card svelte-10jm15a"><div class="metric-icon skeleton svelte-10jm15a"></div> <div class="metric-content svelte-10jm15a" style="width: 100%;"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 60%; height: 12px; margin-bottom: 10px;"></div> <div class="skeleton skeleton-line svelte-10jm15a" style="width: 40%; height: 18px; margin-bottom: 10px;"></div> <div class="skeleton skeleton-line svelte-10jm15a" style="width: 90%; height: 6px;"></div></div></div> <div class="metric-card svelte-10jm15a"><div class="metric-icon skeleton svelte-10jm15a"></div> <div class="metric-content svelte-10jm15a" style="width: 100%;"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 45%; height: 12px; margin-bottom: 10px;"></div> <div class="skeleton skeleton-line svelte-10jm15a" style="width: 35%; height: 18px; margin-bottom: 10px;"></div> <div class="skeleton skeleton-line svelte-10jm15a" style="width: 65%; height: 6px;"></div></div></div> <div class="metric-card svelte-10jm15a"><div class="metric-icon skeleton svelte-10jm15a"></div> <div class="metric-content svelte-10jm15a" style="width: 100%;"><div class="skeleton skeleton-line svelte-10jm15a" style="width: 50%; height: 12px; margin-bottom: 10px;"></div> <div class="skeleton skeleton-line svelte-10jm15a" style="width: 30%; height: 18px; margin-bottom: 10px;"></div> <div class="skeleton skeleton-line svelte-10jm15a" style="width: 80%; height: 6px;"></div></div></div></div></div>'),oL=B('<div><div class="server-info-card svelte-10jm15a"><div class="card-header svelte-10jm15a"><div class="header-content svelte-10jm15a"><!></div></div> <div><div class="metrics-grid svelte-10jm15a"><div class="metric-card players-card svelte-10jm15a"><div class="metric-icon svelte-10jm15a"><i class="fas fa-users svelte-10jm15a"></i></div> <div class="metric-content svelte-10jm15a"><div class="metric-label svelte-10jm15a"> </div> <div class="metric-value svelte-10jm15a"><span class="primary-value svelte-10jm15a"> </span> <span class="secondary-value svelte-10jm15a"> </span></div> <div class="metric-progress svelte-10jm15a"><div class="progress-fill svelte-10jm15a"></div></div></div></div> <div class="metric-card uptime-card svelte-10jm15a"><div class="metric-icon svelte-10jm15a"><i class="fas fa-clock svelte-10jm15a"></i></div> <div class="metric-content svelte-10jm15a"><div class="metric-label svelte-10jm15a"> </div> <div class="metric-value svelte-10jm15a"><span class="primary-value svelte-10jm15a"> </span></div></div></div> <div class="metric-card ping-card svelte-10jm15a"><div class="metric-icon ping-icon svelte-10jm15a"><div class="ping-bars icon-bars svelte-10jm15a"></div></div> <div class="metric-content svelte-10jm15a"><div class="metric-label svelte-10jm15a"> </div> <div class="metric-value svelte-10jm15a"><span class="primary-value svelte-10jm15a"> </span></div></div></div></div></div> <!></div></div>');function lL(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(!0),o=ae(Gt({name:"",framework:"",serverVersion:"",gameBuild:0,playerCount:0,maxPlayers:0,uptime:"",ping:0})),l=ae(4);function d(){M(r,!0),Ve("getServerInfo").then(({status:oe,data:me})=>{M(o,me,!0),Ld()||(u(o).playerCount=Math.floor(Math.random()*u(o).maxPlayers+1),u(o).ping=Math.floor(Math.random()*200+1)),u(o).ping<50?M(l,4):u(o).ping<100?M(l,3):u(o).ping<150?M(l,2):u(o).ping<200?M(l,1):M(l,0),M(r,!1)})}pn(()=>{d();const oe=setInterval(d,1e4);return()=>clearInterval(oe)});function h(oe,me){const Le=oe/me;return Le<.5?"var(--success-color)":Le<.8?"var(--warning-color)":"var(--danger-color)"}function m(oe){return oe<50?"var(--success-color)":oe<100?"var(--warning-color)":oe<150?"var(--orange-color)":"var(--danger-color)"}function v(oe,me){return oe<50?`rgba(16, 185, 129, ${me})`:oe<100?`rgba(245, 158, 11, ${me})`:oe<150?`rgba(234, 88, 12, ${me})`:`rgba(239, 68, 68, ${me})`}var b=oL();let y;var x=p(b),k=p(x),C=p(k),A=p(C);{var T=oe=>{var me=nL();E(oe,me)},I=oe=>{var me=sL(),Le=p(me),Oe=p(Le),_e=p(Oe),be=g(Le,2),Te=p(be),pe=g(p(Te),2),de=p(pe),ge=g(Te,2),xe=g(p(ge),2),we=p(xe),Re=g(ge,2),qe=g(p(Re),2),Ge=p(qe);se(tt=>{S(_e,u(o).name),S(de,u(o).framework),S(we,`${tt??""} ${u(o).gameBuild??""}`),S(Ge,u(o).serverVersion)},[()=>a()("pages.dashboard.gamebuild")]),E(oe,me)};Q(A,oe=>{u(r)?oe(T):oe(I,!1)})}var D=g(k,2);let N;var z=p(D),H=p(z),j=g(p(H),2),re=p(j),V=p(re),q=g(re,2),le=p(q),ee=p(le),W=g(le,2),ne=p(W),ye=g(q,2),ie=p(ye),Z=g(H,2),$=g(p(Z),2),X=p($),Y=p(X),te=g(X,2),K=p(te),F=p(K),R=g(Z,2),J=p(R),U=p(J);Vt(U,20,()=>Array(4),Si,(oe,me,Le,Oe)=>{var _e=aL();se(be=>{G(_e,1,`ping-bar ${Le<u(l)?"active":""}`,"svelte-10jm15a"),es(_e,`background-color: ${be??""}`)},[()=>Le<u(l)?m(u(o).ping):"var(--inactive-color)"]),E(oe,_e)});var ce=g(J,2),fe=p(ce),ve=p(fe),Me=g(fe,2),Se=p(Me),Pe=p(Se),Be=g(D,2);{var ue=oe=>{var me=rL();E(oe,me)};Q(Be,oe=>{u(r)&&oe(ue)})}se((oe,me,Le,Oe,_e,be,Te,pe,de,ge)=>{y=G(b,1,"server-info-container svelte-10jm15a",null,y,oe),N=G(D,1,"card-body svelte-10jm15a",null,N,me),S(V,Le),S(ee,u(o).playerCount),S(ne,`/${u(o).maxPlayers??""}`),es(ie,`width: ${Oe??""}%; 
                                       background: ${_e??""}`),S(Y,be),S(F,u(o).uptime),es(J,`background: linear-gradient(135deg, ${Te??""}, ${pe??""});`),S(ve,de),es(Se,`color: ${ge??""}`),S(Pe,`${u(o).ping??""}ms`)},[()=>({light:!s().darkMode}),()=>({hidden:u(r)}),()=>a()("pages.dashboard.playersonline"),()=>Math.min(u(o).playerCount/u(o).maxPlayers*100,100),()=>h(u(o).playerCount,u(o).maxPlayers),()=>a()("pages.dashboard.uptime"),()=>v(u(o).ping,.2),()=>v(u(o).ping,.1),()=>a()("pages.dashboard.latency"),()=>m(u(o).ping)]),E(i,b),Yt(),n()}var cL=(i,e)=>e(i.target.value),dL=B('<input type="color" class="form-control form-control-color mb-3">'),hL=(i,e)=>i.key==="Enter"&&e.confirmPrompt(),uL=B('<input type="text" class="form-control mb-3">'),fL=B('<div class="overlay-backdrop svelte-ym1oqh"><div><h5 class="mb-3"> </h5> <!> <div class="d-flex justify-content-end gap-2"><button class="btn btn-secondary"> </button> <button class="btn btn-success"> </button></div></div></div>');function pL(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t);let a=Yi(e,"promptInput",15);function r(h){e.show&&h.focus()}var o=Bi(),l=yt(o);{var d=h=>{var m=fL(),v=p(m);let b;var y=p(v),x=p(y),k=g(y,2);{var C=H=>{var j=dL();j.__input=[cL,a],Fn(()=>st(j,a)),Xs(j,re=>r==null?void 0:r(re)),E(H,j)},A=H=>{var j=uL();j.__keydown=[hL,e],Fn(()=>st(j,a)),Xs(j,re=>r==null?void 0:r(re)),se(re=>Ot(j,"placeholder",re),[()=>e.pendingAction.promptPlaceholder??s()("modals.entervalue")]),E(H,j)};Q(k,H=>{e.pendingAction.promptType==="color"?H(C):H(A,!1)})}var T=g(k,2),I=p(T);I.__click=function(...H){var j;(j=e.cancelPrompt)==null||j.apply(this,H)};var D=p(I),N=g(I,2);N.__click=function(...H){var j;(j=e.confirmPrompt)==null||j.apply(this,H)};var z=p(N);se((H,j,re)=>{b=G(v,1,"overlay-modal card p-4 svelte-ym1oqh",null,b,H),S(x,e.pendingAction.title),S(D,j),S(z,re)},[()=>({light:!e.darkMode}),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),gt(3,v,()=>Ki,()=>({duration:200,start:.9})),gt(3,m,()=>Fi,()=>({duration:200})),E(h,m)};Q(l,h=>{e.show&&e.pendingAction&&h(d)})}E(i,o),Yt(),n()}hi(["input","keydown","click"]);var mL=(i,e)=>M(e,""),vL=B('<button class="btn btn-danger clear-btn svelte-wusy16" type="button" aria-label="Clear search"><i class="fas fa-times svelte-wusy16"></i></button>'),gL=B("<option> </option>"),_L=(i,e,t)=>e(u(t)),bL=B('<i class="fas fa-check-circle text-success ms-2 svelte-wusy16"></i>'),yL=B('<div class="action-type svelte-wusy16"><i class="fas fa-tag me-2 svelte-wusy16"></i> <span> </span></div>'),xL=(i,e,t)=>{i.stopPropagation(),e(u(t).key)},wL=B('<div><div class="action-grid svelte-wusy16"><div class="action-title svelte-wusy16"><i class="fas fa-bolt me-2 svelte-wusy16"></i> <!></div> <!> <div class="action-description svelte-wusy16"><i class="fas fa-info-circle me-2 svelte-wusy16"></i> </div></div> <button class="btn btn-link text-warning p-0 ms-3 svelte-wusy16"><i></i></button></div>'),kL=B('<div class="page-container svelte-wusy16"><div class="view svelte-wusy16"><h2 class="card-title text-center mb-2 svelte-wusy16"> </h2> <!> <div class="d-flex justify-content-between align-items-center mb-2 svelte-wusy16"><h4 class="mb-0 svelte-wusy16"> </h4> <div class="d-flex align-items-center gap-2 svelte-wusy16"><div><span class="input-group-text svelte-wusy16"><i class="fas fa-search svelte-wusy16"></i></span> <input type="text" class="form-control svelte-wusy16" placeholder="Search actions"> <!></div> <select></select></div></div> <div class="quick-actions-list list-group svelte-wusy16"></div></div></div> <!>',1);function SL(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r;const o=JSON.parse(localStorage.getItem("favoriteQuickActions")??"[]");let l=qi(()=>s().quickActions.filter(J=>s().currentUserPermissions.includes(J.key)).map(J=>({...J,favorite:o.includes(J.key),toggled:s().toggleStates[J.key]??!1}))),d=ae("all"),h=ae(""),m=qi(()=>["all",...new Set(u(l).map(J=>J.type))]);function v(J){M(l,u(l).map(U=>U.key===J?{...U,favorite:!U.favorite}:U),!0),b()}function b(){const J=u(l).filter(U=>U.favorite).map(U=>U.key);localStorage.setItem("favoriteQuickActions",JSON.stringify(J))}let y=qi(()=>[...u(l)].filter(J=>(u(d)==="all"||J.type===u(d))&&(u(h).trim()===""||J.title.toLowerCase().includes(u(h).toLowerCase())||J.description.toLowerCase().includes(u(h).toLowerCase()))).sort((J,U)=>Number(U.favorite)-Number(J.favorite)));function x(J){J.preventDefault();const U=u(m).indexOf(u(d));let ce=U+(J.deltaY>0?1:-1);ce=Math.max(0,Math.min(u(m).length-1,ce)),ce!==U&&M(d,u(m)[ce],!0)}let k=ae(!1),C=ae(""),A=ae(null);function T(J){J.requiresPrompt?(M(A,J,!0),M(k,!0),M(C,"")):D(J)}function I(J){const U=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(J);return U?{r:parseInt(U[1],16),g:parseInt(U[2],16),b:parseInt(U[3],16)}:null}function D(J){Ve("executeQuickAction",{actionKey:J.key,input:(()=>{if(J.key==="quickaction:SetVehicleColor"&&u(C)){const U=I(u(C));if(U)return`${U.r},${U.g},${U.b}`}return u(C)||null})()}).then(({status:U,data:ce})=>{if(U==="ok"){if(ri("sounds/action.mp3"),J.isToggle){const fe=!s().toggleStates[J.key];OP(J.key,fe)}}else console.error(`Failed to execute action: ${ce}`)})}function N(){!u(C).trim()||!u(A)||(D(u(A)),z())}function z(){M(k,!1),M(A,null),M(C,"")}function H(J){switch(J){case"self":return"text-bg-info";case"server":return"text-bg-primary";case"vehicle":return"text-bg-warning";case"dev":return"text-bg-success";case"entity":return"text-bg-danger";default:return s().darkMode?"bg-dark":"bg-light"}}var j=kL(),re=yt(j),V=p(re),q=p(V),le=p(q),ee=g(q,2);lL(ee,{});var W=g(ee,2),ne=p(W),ye=p(ne),ie=g(ne,2),Z=p(ie);let $;var X=g(p(Z),2),Y=g(X,2);{var te=J=>{var U=vL();U.__click=[mL,h],E(J,U)};Q(Y,J=>{u(h)&&J(te)})}var K=g(Z,2);Vt(K,21,()=>u(m),Si,(J,U)=>{var ce=gL(),fe={},ve=p(ce);se(Me=>{fe!==(fe=u(U))&&(ce.value=(ce.__value=u(U))??""),G(ce,1,Me,"svelte-wusy16"),S(ve,u(U))},[()=>zo(H(u(U)))]),E(J,ce)}),Kr(K,J=>r=J,()=>r);var F=g(W,2);Vt(F,21,()=>u(y),J=>J.key,(J,U)=>{var ce=wL();let fe;ce.__click=[_L,T,U];var ve=p(ce),Me=p(ve),Se=g(p(Me)),Pe=g(Se);{var Be=be=>{var Te=bL();E(be,Te)};Q(Pe,be=>{u(U).toggled&&be(Be)})}var ue=g(Me,2);{var oe=be=>{var Te=yL(),pe=g(p(Te),2),de=p(pe);se(ge=>{G(pe,1,`badge ${ge??""}`,"svelte-wusy16"),S(de,u(U).type)},[()=>H(u(U).type)]),E(be,Te)};Q(ue,be=>{s().showActionTypeLabels&&be(oe)})}var me=g(ue,2),Le=g(p(me)),Oe=g(ve,2);Oe.__click=[xL,v,U];var _e=p(Oe);se(be=>{fe=G(ce,1,"list-group-item list-group-item-action d-flex justify-content-between align-items-center action-item svelte-wusy16",null,fe,be),Ot(ce,"data-favorite",u(U).favorite),S(Se,` ${u(U).title??""} `),S(Le,` ${u(U).description??""}`),G(_e,1,zo(u(U).favorite?"fas fa-star":"far fa-star"),"svelte-wusy16")},[()=>({light:!s().darkMode,toggled:u(U).toggled})]),E(J,ce)});var R=g(re,2);pL(R,{get pendingAction(){return u(A)},confirmPrompt:N,cancelPrompt:z,get darkMode(){return s().darkMode},get show(){return u(k)},get promptInput(){return u(C)},set promptInput(J){M(C,J,!0)}}),se((J,U,ce,fe)=>{S(le,J),S(ye,U),$=G(Z,1,"input-group input-group-sm action-search svelte-wusy16",null,$,ce),G(K,1,`form-select w-auto ${fe??""}`,"svelte-wusy16")},[()=>a()("pages.dashboard.title"),()=>a()("pages.dashboard.quickactions"),()=>({light:!s().darkMode}),()=>H(u(d))]),st(X,()=>u(h),J=>M(h,J)),Mi("wheel",K,x),ur(K,()=>u(d),J=>M(d,J)),E(i,j),Yt(),n()}hi(["click"]);var CL=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),ML=(i,e)=>M(e,""),PL=B('<button class="btn btn-danger clear-btn" type="button" aria-label="Clear search"><i class="fas fa-times"></i></button>'),AL=(i,e,t)=>e(String(u(t).id)),TL=B("<div></div>"),LL=B('<button type="button"><div class="player-grid svelte-1gujv04"><div class="player-name svelte-1gujv04"><i class="fas fa-user me-2 svelte-1gujv04"></i> <span class="text-muted ms-1 svelte-1gujv04"> </span></div> <div class="player-id svelte-1gujv04"><i class="fas fa-id-card me-2 svelte-1gujv04"></i> </div> <div class="server-name svelte-1gujv04"><i class="fas fa-server me-2 svelte-1gujv04"></i> </div></div> <div class="d-flex align-items-center gap-2"><div class="ping-bars svelte-1gujv04"></div> <i class="fas fa-chevron-right chevron svelte-1gujv04"></i></div></button>'),DL=B('<div class="view svelte-1gujv04"><h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <small class="text-muted"> </small></div> <div><span class="input-group-text svelte-1gujv04"><i class="fas fa-search"></i></span> <input type="text" class="form-control svelte-1gujv04"> <!></div> <ul class="list-group player-list svelte-1gujv04"></ul></div>'),EL=B('<div class="page-container svelte-1gujv04"><!></div>');function IL(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=qi(()=>u(r).length),l=ae(""),d=qi(()=>u(r).filter(A=>A.characterName.toLowerCase().includes(u(l).toLowerCase())||A.serverName.toLowerCase().includes(u(l).toLowerCase())||A.citizenId.toLowerCase().includes(u(l).toLowerCase())||String(A.id).includes(u(l).trim())).sort((A,T)=>A.id-T.id));function h(A){Sg(Number(A))}function m(A){return A<50?4:A<100?3:A<200?2:A<300?1:0}let v=ae(!0);pn(()=>{b()});async function b(){M(v,!0);const{status:A,data:T}=await Ve("getAllPlayers");A==="ok"?M(r,T,!0):ze(s()("notifications.playerlist.failedtoloadplayers"),"error"),M(v,!1)}var y=EL(),x=p(y);{var k=A=>{var T=CL(),I=p(T),D=p(I),N=p(D);se(z=>S(N,z),[()=>s()("pages.playerlist.loading")]),E(A,T)},C=A=>{var T=Bi(),I=yt(T);{var D=N=>{var z=DL(),H=p(z),j=p(H),re=g(H,2),V=p(re),q=p(V),le=g(V,2),ee=p(le),W=g(re,2);let ne;var ye=g(p(W),2),ie=g(ye,2);{var Z=X=>{var Y=PL();Y.__click=[ML,l],E(X,Y)};Q(ie,X=>{u(l)&&X(Z)})}var $=g(W,2);Vt($,21,()=>u(d),X=>X.id,(X,Y)=>{var te=LL();let K;te.__click=[AL,h,Y];var F=p(te),R=p(F),J=g(p(R)),U=g(J),ce=p(U),fe=g(R,2),ve=g(p(fe)),Me=g(fe,2),Se=g(p(Me)),Pe=g(F,2),Be=p(Pe);Vt(Be,20,()=>Array(4),Si,(ue,oe,me,Le)=>{var Oe=TL();let _e;se(be=>_e=G(Oe,1,"svelte-1gujv04",null,_e,be),[()=>({active:m(u(Y).ping)>me})]),E(ue,Oe)}),se(ue=>{K=G(te,1,"list-group-item list-group-item-action player-item d-flex justify-content-between align-items-center svelte-1gujv04",null,K,ue),Ot(te,"aria-label",`Select player ${u(Y).characterName} (${u(Y).id})`),S(J,` ${u(Y).characterName??""} `),S(ce,`(${u(Y).id??""})`),S(ve,` ${u(Y).citizenId??""}`),S(Se,` ${u(Y).serverName??""}`)},[()=>({light:!a().darkMode,"highlight-superadmin":u(Y).group==="SuperAdmin","highlight-privileged":u(Y).group&&u(Y).group!=="User"&&u(Y).group!=="SuperAdmin"})]),E(X,te)}),se((X,Y,te,K,F)=>{S(j,X),S(q,Y),S(ee,te),ne=G(W,1,"input-group position-relative mb-2 svelte-1gujv04",null,ne,K),Ot(ye,"placeholder",F)},[()=>s()("pages.playerlist.title"),()=>s()("pages.playerlist.playerlist"),()=>s()("pages.playerlist.onlinecount",{values:{count:u(o)}}),()=>({light:!a().darkMode}),()=>s()("pages.playerlist.searchplayers")]),st(ye,()=>u(l),X=>M(l,X)),gt(1,z,()=>Xr,()=>({x:300,duration:300})),gt(2,z,()=>Xr,()=>({x:-300,duration:300})),E(N,z)};Q(I,N=>{N(D)})}E(A,T)};Q(x,A=>{u(v)?A(k):A(C,!1)})}E(i,y),Yt(),n()}hi(["click"]);var OL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:SetCharacterName"),BL=B('<button class="edit-btn svelte-1afm2c5" title="Edit Name"><i class="fas fa-edit"></i></button>'),RL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:ViewInventory"),zL=B('<button class="edit-btn svelte-1afm2c5" title="View Inventory"><i class="fas fa-box-open"></i></button>'),NL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:GiveCash"),FL=B('<button class="edit-btn svelte-1afm2c5" title="Add Cash"><i class="fas fa-plus"></i></button>'),HL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:RemoveCash"),jL=B('<button class="edit-btn svelte-1afm2c5" title="Remove Cash"><i class="fas fa-minus"></i></button>'),$L=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:GiveBankMoney"),VL=B('<button class="edit-btn svelte-1afm2c5" title="Add Bank"><i class="fas fa-plus"></i></button>'),WL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:RemoveBankMoney"),qL=B('<button class="edit-btn svelte-1afm2c5" title="Remove Bank"><i class="fas fa-minus"></i></button>'),UL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:SetJob"),GL=B('<button class="edit-btn svelte-1afm2c5" title="Edit Job"><i class="fas fa-edit"></i></button>'),ZL=B('<div><span class="label svelte-1afm2c5"> </span> <div class="value d-flex align-items-center gap-2 svelte-1afm2c5"><span> </span> <!></div></div>'),YL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:SetJob"),KL=B('<button class="edit-btn svelte-1afm2c5" title="Set Job"><i class="fas fa-edit"></i></button>'),XL=B('<div><span class="label svelte-1afm2c5"> </span> <div class="value d-flex align-items-center gap-2 svelte-1afm2c5"><span>None</span> <!></div></div>'),JL=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:SetGang"),QL=B('<button class="edit-btn svelte-1afm2c5" title="Edit Gang"><i class="fas fa-edit"></i></button>'),eD=B('<div><span class="label svelte-1afm2c5"> </span> <div class="value d-flex align-items-center gap-2 svelte-1afm2c5"><span> </span> <!></div></div>'),tD=(i,e)=>e.onStartAction&&e.onStartAction("playeraction:SetGang"),iD=B('<button class="edit-btn svelte-1afm2c5" title="Set Gang"><i class="fas fa-edit"></i></button>'),nD=B('<div><span class="label svelte-1afm2c5"> </span> <div class="value d-flex align-items-center gap-2 svelte-1afm2c5"><span>None</span> <!></div></div>'),sD=B('<div><span class="label svelte-1afm2c5"> </span> <div class="value svelte-1afm2c5"> </div></div>'),aD=B('<div><span class="label svelte-1afm2c5"> </span> <div class="value svelte-1afm2c5">None</div></div>'),rD=(i,e)=>M(e,!u(e)),oD=(i,e)=>{try{const t=document.createElement("textarea");t.value=u(e),t.style.position="fixed",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999);const n=document.execCommand("copy");document.body.removeChild(t),n?ze("Copied!","success"):ze("Failed to copy","error")}catch{ze("Failed to copy","error")}},lD=B('<div class="identifier svelte-1afm2c5"><span> </span> <button class="copy-btn svelte-1afm2c5" title="Copy"><svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M10 1.5A1.5 1.5 0 0 1 11.5 3v1H13a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-1.5H4A1.5 1.5 0 0 1 2.5 10V3A1.5 1.5 0 0 1 4 1.5h6zm1.5 3V3A.5.5 0 0 0 11 2.5H4A.5.5 0 0 0 3.5 3v7A.5.5 0 0 0 4 10.5h.5V6a2 2 0 0 1 2-2h5zM6 5a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1H6z"></path></svg></button></div>'),cD=(i,e)=>M(e,!u(e)),dD=B('<i class="fas fa-gavel text-danger" title="Ban"></i>'),hD=B('<i class="fas fa-exclamation-triangle text-warning" title="Warn"></i>'),uD=B('<i class="fas fa-sign-out-alt text-info" title="Kick"></i>'),fD=B('<span class="status-badge active svelte-1afm2c5"><i class="fas fa-check-circle"></i> Active</span>'),pD=B('<span class="status-badge revoked svelte-1afm2c5"><i class="fas fa-times-circle"></i> Revoked</span>'),mD=B('<span class="status-badge inactive svelte-1afm2c5"><i class="fas fa-minus-circle"></i> Inactive</span>'),vD=B("<!> <!> <!>",1),gD=B('<div><span class="type-col svelte-1afm2c5"><!> <!> <!> <span class="type-label svelte-1afm2c5"> </span></span> <span class="reason-col"> </span> <span class="issuedby-col"> </span> <span class="issuedat-col small-date svelte-1afm2c5"> </span> <span class="status-col"><!></span> <span class="expire-col small-date svelte-1afm2c5"> </span></div>'),_D=B('<div class="punishments-card svelte-1afm2c5"><div class="punishments-table-header svelte-1afm2c5"><span class="type-col svelte-1afm2c5">Type</span> <span class="reason-col">Reason</span> <span class="issuedby-col">Issued By</span> <span class="issuedat-col">Issued At</span> <span class="status-col">Status</span> <span class="expire-col">Expire</span></div> <!></div>'),bD=B('<div class="empty-list svelte-1afm2c5">No punishments found.</div>'),yD=B('<div style="user-select:text;"><div class="header mb-2 svelte-1afm2c5"><div class="d-flex align-items-center gap-2"><h3 class="character-name svelte-1afm2c5"> </h3> <!> <!></div> <small class="server-id svelte-1afm2c5"> </small></div> <div class="info-grid mb-2 svelte-1afm2c5"><div><span class="label svelte-1afm2c5"> </span> <div class="value svelte-1afm2c5"> </div></div> <div><span class="label svelte-1afm2c5"> </span> <div class="value svelte-1afm2c5"> </div></div> <div><span class="label svelte-1afm2c5"> </span> <div class="value text-success d-flex align-items-center gap-2 svelte-1afm2c5"><span> </span> <!> <!></div></div> <div><span class="label svelte-1afm2c5"> </span> <div class="value text-success d-flex align-items-center gap-2 svelte-1afm2c5"><span> </span> <!> <!></div></div></div> <div class="info-grid mb-2 svelte-1afm2c5"><!> <!> <!></div> <div class="info-grid mb-2 svelte-1afm2c5"><div class="stat-block svelte-1afm2c5"><span class="label svelte-1afm2c5"> </span> <div class="stat-bar svelte-1afm2c5"><div class="fill health svelte-1afm2c5"></div></div></div> <div class="stat-block svelte-1afm2c5"><span class="label svelte-1afm2c5"> </span> <div class="stat-bar svelte-1afm2c5"><div class="fill armor svelte-1afm2c5"></div></div></div></div> <div class="identifiers-section svelte-1afm2c5"><div class="identifiers-header svelte-1afm2c5"><span class="label svelte-1afm2c5"> </span> <small class="toggle-text svelte-1afm2c5"> </small></div> <div></div></div> <div class="history-section svelte-1afm2c5"><div class="history-header svelte-1afm2c5"><span class="label svelte-1afm2c5"> </span> <small class="toggle-text svelte-1afm2c5"> </small></div> <div><!></div></div></div>');function xD(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(!1),o=ae(!1);function l(Ce){return`$${Ce.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}var d=yD(),h=p(d),m=p(h),v=p(m),b=p(v),y=g(v,2);{var x=Ce=>{var Ae=BL();Ae.__click=[OL,e],E(Ce,Ae)};Q(y,Ce=>{s().currentUserPermissions.includes("playeraction:SetCharacterName")&&Ce(x)})}var k=g(y,2);{var C=Ce=>{var Ae=zL();Ae.__click=[RL,e],E(Ce,Ae)};Q(k,Ce=>{s().currentUserPermissions.includes("playeraction:ViewInventory")&&Ce(C)})}var A=g(m,2),T=p(A),I=g(h,2),D=p(I),N=p(D),z=p(N),H=g(N,2),j=p(H),re=g(D,2),V=p(re),q=p(V),le=g(V,2),ee=p(le),W=g(re,2),ne=p(W),ye=p(ne),ie=g(ne,2),Z=p(ie),$=p(Z),X=g(Z,2);{var Y=Ce=>{var Ae=FL();Ae.__click=[NL,e],E(Ce,Ae)};Q(X,Ce=>{s().currentUserPermissions.includes("playeraction:GiveCash")&&Ce(Y)})}var te=g(X,2);{var K=Ce=>{var Ae=jL();Ae.__click=[HL,e],E(Ce,Ae)};Q(te,Ce=>{s().currentUserPermissions.includes("playeraction:RemoveCash")&&Ce(K)})}var F=g(W,2),R=p(F),J=p(R),U=g(R,2),ce=p(U),fe=p(ce),ve=g(ce,2);{var Me=Ce=>{var Ae=VL();Ae.__click=[$L,e],E(Ce,Ae)};Q(ve,Ce=>{s().currentUserPermissions.includes("playeraction:GiveBankMoney")&&Ce(Me)})}var Se=g(ve,2);{var Pe=Ce=>{var Ae=qL();Ae.__click=[WL,e],E(Ce,Ae)};Q(Se,Ce=>{s().currentUserPermissions.includes("playeraction:RemoveBankMoney")&&Ce(Pe)})}var Be=g(I,2),ue=p(Be);{var oe=Ce=>{var Ae=ZL(),xt=p(Ae),_t=p(xt),bt=g(xt,2),Pt=p(bt),Ht=p(Pt),Nt=g(Pt,2);{var rt=dt=>{var Qt=GL();Qt.__click=[UL,e],E(dt,Qt)};Q(Nt,dt=>{s().currentUserPermissions.includes("playeraction:SetJob")&&dt(rt)})}se(dt=>{var Qt,mi;S(_t,dt),S(Ht,`${((Qt=e.selectedPlayer.job)==null?void 0:Qt.label)??""} (${((mi=e.selectedPlayer.job)==null?void 0:mi.grade_label)??""})`)},[()=>a()("pages.playerlist.job")]),E(Ce,Ae)},me=Ce=>{var Ae=XL(),xt=p(Ae),_t=p(xt),bt=g(xt,2),Pt=g(p(bt),2);{var Ht=Nt=>{var rt=KL();rt.__click=[YL,e],E(Nt,rt)};Q(Pt,Nt=>{s().currentUserPermissions.includes("playeraction:SetJob")&&Nt(Ht)})}se(Nt=>S(_t,Nt),[()=>a()("pages.playerlist.job")]),E(Ce,Ae)};Q(ue,Ce=>{e.selectedPlayer.job?Ce(oe):Ce(me,!1)})}var Le=g(ue,2);{var Oe=Ce=>{var Ae=eD(),xt=p(Ae),_t=p(xt),bt=g(xt,2),Pt=p(bt),Ht=p(Pt),Nt=g(Pt,2);{var rt=dt=>{var Qt=QL();Qt.__click=[JL,e],E(dt,Qt)};Q(Nt,dt=>{s().currentUserPermissions.includes("playeraction:SetGang")&&dt(rt)})}se(dt=>{var Qt,mi;S(_t,dt),S(Ht,`${((Qt=e.selectedPlayer.gang)==null?void 0:Qt.label)??""} (${((mi=e.selectedPlayer.gang)==null?void 0:mi.grade_label)??""})`)},[()=>a()("pages.playerlist.gang")]),E(Ce,Ae)},_e=Ce=>{var Ae=nD(),xt=p(Ae),_t=p(xt),bt=g(xt,2),Pt=g(p(bt),2);{var Ht=Nt=>{var rt=iD();rt.__click=[tD,e],E(Nt,rt)};Q(Pt,Nt=>{s().currentUserPermissions.includes("playeraction:SetGang")&&Nt(Ht)})}se(Nt=>S(_t,Nt),[()=>a()("pages.playerlist.gang")]),E(Ce,Ae)};Q(Le,Ce=>{e.selectedPlayer.gang?Ce(Oe):Ce(_e,!1)})}var be=g(Le,2);{var Te=Ce=>{var Ae=sD(),xt=p(Ae),_t=p(xt),bt=g(xt,2),Pt=p(bt);se(Ht=>{S(_t,Ht),S(Pt,e.selectedPlayer.phone)},[()=>a()("pages.playerlist.phone")]),E(Ce,Ae)},pe=Ce=>{var Ae=aD(),xt=p(Ae),_t=p(xt);se(bt=>S(_t,bt),[()=>a()("pages.playerlist.phone")]),E(Ce,Ae)};Q(be,Ce=>{e.selectedPlayer.phone?Ce(Te):Ce(pe,!1)})}var de=g(Be,2),ge=p(de),xe=p(ge),we=p(xe),Re=g(xe,2),qe=p(Re),Ge=g(ge,2),tt=p(Ge),Ye=p(tt),Je=g(tt,2),Ue=p(Je),at=g(de,2),Ee=p(at);Ee.__click=[rD,r];var He=p(Ee),Ke=p(He),it=g(He,2),pt=p(it),Tt=g(Ee,2);let mt;Vt(Tt,21,()=>e.selectedPlayer.identifiers??[],Si,(Ce,Ae)=>{var xt=lD(),_t=p(xt),bt=p(_t),Pt=g(_t,2);Pt.__click=[oD,Ae],se(()=>S(bt,u(Ae))),E(Ce,xt)});var zt=g(at,2),oi=p(zt);oi.__click=[cD,o];var Ai=p(oi),Kt=p(Ai),Wt=g(Ai,2),Rt=p(Wt),di=g(oi,2);let Ci;var Ti=p(di);{var Qe=Ce=>{var Ae=Bi(),xt=yt(Ae);{var _t=Pt=>{var Ht=_D(),Nt=g(p(Ht),2);Vt(Nt,17,()=>e.selectedPlayer.punishments,Si,(rt,dt,Qt)=>{var mi=gD();G(mi,1,`punishments-row ${Qt%2===0?"even":"odd"}`,"svelte-1afm2c5");var Ii=p(mi),Ji=p(Ii);{var bn=$e=>{var kt=dD();E($e,kt)};Q(Ji,$e=>{u(dt).type==="ban"&&$e(bn)})}var Ri=g(Ji,2);{var Fe=$e=>{var kt=hD();E($e,kt)};Q(Ri,$e=>{u(dt).type==="warn"&&$e(Fe)})}var et=g(Ri,2);{var nt=$e=>{var kt=uD();E($e,kt)};Q(et,$e=>{u(dt).type==="kick"&&$e(nt)})}var lt=g(et,2),wt=p(lt),Xt=g(Ii,2),Ut=p(Xt),ut=g(Xt,2),Bt=p(ut),jt=g(ut,2),Ft=p(jt),ct=g(jt,2),vt=p(ct);{var qt=$e=>{var kt=vD(),si=yt(kt);{var li=ft=>{var ai=fD();E(ft,ai)};Q(si,ft=>{u(dt).status==="active"&&ft(li)})}var ei=g(si,2);{var Li=ft=>{var ai=pD();E(ft,ai)};Q(ei,ft=>{u(dt).status==="revoked"&&ft(Li)})}var wi=g(ei,2);{var Et=ft=>{var ai=mD();E(ft,ai)};Q(wi,ft=>{u(dt).status==="inactive"&&ft(Et)})}E($e,kt)},ot=$e=>{var kt=Al("-");E($e,kt)};Q(vt,$e=>{u(dt).type==="ban"?$e(qt):$e(ot,!1)})}var Lt=g(ct,2),Dt=p(Lt);se(($e,kt,si)=>{S(wt,$e),S(Ut,u(dt).reason),S(Bt,u(dt).issuedBy),S(Ft,kt),S(Dt,si)},[()=>u(dt).type.charAt(0).toUpperCase()+u(dt).type.slice(1),()=>new Date(u(dt).issuedAt).toLocaleString(),()=>u(dt).expire?new Date(u(dt).expire*1e3).toLocaleString():"-"]),E(rt,mi)}),E(Pt,Ht)},bt=Pt=>{var Ht=bD();E(Pt,Ht)};Q(xt,Pt=>{e.selectedPlayer.punishments&&e.selectedPlayer.punishments.length>0?Pt(_t):Pt(bt,!1)})}E(Ce,Ae)};Q(Ti,Ce=>{u(o)&&Ce(Qe)})}se((Ce,Ae,xt,_t,bt,Pt,Ht,Nt,rt,dt,Qt,mi,Ii,Ji)=>{G(d,1,`player-card ${s().darkMode?"dark":"light"} card shadow-sm p-3`,"svelte-1afm2c5"),S(b,e.selectedPlayer.characterName),S(T,`ID: ${e.selectedPlayer.id??""}`),S(z,Ce),S(j,e.selectedPlayer.serverName),S(q,Ae),S(ee,e.selectedPlayer.citizenId),S(ye,xt),S($,_t),S(J,bt),S(fe,Pt),S(we,Ht),es(qe,`width: ${e.selectedPlayer.health??0??""}%`),S(Ye,Nt),es(Ue,`width: ${e.selectedPlayer.armor??0??""}%`),S(Ke,rt),S(pt,dt),mt=G(Tt,1,"identifiers-list svelte-1afm2c5",null,mt,Qt),S(Kt,mi),S(Rt,Ii),Ci=G(di,1,"punishments-list svelte-1afm2c5",null,Ci,Ji)},[()=>a()("pages.playerlist.servername"),()=>a()("pages.playerlist.citizenid"),()=>a()("pages.playerlist.cash"),()=>l(e.selectedPlayer.cash??0),()=>a()("pages.playerlist.bank"),()=>l(e.selectedPlayer.bank??0),()=>a()("pages.playerlist.health"),()=>a()("pages.playerlist.armor"),()=>a()("pages.playerlist.identifiers"),()=>u(r)?a()("pages.playerlist.hide"):a()("pages.playerlist.show"),()=>({expanded:u(r)}),()=>a()("pages.playerlist.history"),()=>u(o)?a()("pages.playerlist.hide"):a()("pages.playerlist.show"),()=>({expanded:u(o)})]),E(i,d),Yt(),n()}hi(["click"]);var wD=(i,e)=>i.key==="Enter"&&e.confirmPrompt(),kD=B('<div class="col"><input type="text" class="form-control"></div>'),SD=B('<div class="row g-2 mb-3"></div>'),CD=(i,e)=>i.key==="Enter"&&e.confirmPrompt(),MD=B('<input type="text" class="form-control mb-3">'),PD=B('<div class="overlay-backdrop svelte-16vkgn1"><div><h5 class="mb-3"> </h5> <!> <div class="d-flex justify-content-end gap-2"><button class="btn btn-secondary"> </button> <button class="btn btn-success"> </button></div></div></div>');function AD(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=Yi(e,"promptInputs",15);function r(h,m){m&&h.focus()}var o=Bi(),l=yt(o);{var d=h=>{var m=PD(),v=p(m);let b;var y=p(v),x=p(y),k=g(y,2);{var C=H=>{var j=SD();Vt(j,21,a,Si,(re,V,q)=>{var le=kD(),ee=p(le);ee.__keydown=[wD,e],Fn(()=>st(ee,()=>a()[q],W=>a(a()[q]=W,!0))),Xs(ee,(W,ne)=>r==null?void 0:r(W,ne),()=>q===0),se(W=>Ot(ee,"placeholder",W),[()=>{var W,ne;return((ne=(W=e.pendingAction)==null?void 0:W.promptPlaceholders)==null?void 0:ne[q])??s()("modals.input")}]),E(re,le)}),E(H,j)},A=H=>{var j=Bi(),re=yt(j);Vt(re,17,a,Si,(V,q,le)=>{var ee=MD();ee.__keydown=[CD,e],Fn(()=>st(ee,()=>a()[le],W=>a(a()[le]=W,!0))),Xs(ee,(W,ne)=>r==null?void 0:r(W,ne),()=>le===0),se(W=>Ot(ee,"placeholder",W),[()=>{var W,ne;return((ne=(W=e.pendingAction)==null?void 0:W.promptPlaceholders)==null?void 0:ne[le])??s()("modals.input")}]),E(V,ee)}),E(H,j)};Q(k,H=>{a().length===2?H(C):H(A,!1)})}var T=g(k,2),I=p(T);I.__click=function(...H){var j;(j=e.cancelPrompt)==null||j.apply(this,H)};var D=p(I),N=g(I,2);N.__click=function(...H){var j;(j=e.confirmPrompt)==null||j.apply(this,H)};var z=p(N);se((H,j,re)=>{b=G(v,1,"overlay-modal card p-4 svelte-16vkgn1",null,b,H),S(x,e.pendingAction.title),S(D,j),S(z,re)},[()=>({light:!e.darkMode}),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),gt(3,v,()=>Ki,()=>({duration:200,start:.9})),gt(3,m,()=>Fi,()=>({duration:200})),E(h,m)};Q(l,h=>{e.pendingAction&&h(d)})}E(i,o),Yt(),n()}hi(["keydown","click"]);function TD(i,e,t,n){M(e,""),M(t,1),M(n,!0)}function LD(i,e){M(e,!0)}function DD(i,e){M(e,!1)}async function ED(i,e,t){await e(),M(t,!1)}function ID(i,e,t,n){M(e,!1),M(t,""),M(n,1)}function OD(i,e,t,n){M(e,!1),M(t,null),M(n,1)}var BD=B('<div class="loading-state svelte-1j89azx"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div> <p class="svelte-1j89azx"> </p></div>'),RD=B('<div class="empty-state svelte-1j89azx"><i class="fas fa-box-open"></i> <p class="svelte-1j89azx"> </p></div>'),zD=(i,e,t)=>e(u(t)),ND=B('<div class="inventory-item svelte-1j89azx"><div class="item-image-container svelte-1j89azx"><img class="item-image svelte-1j89azx"> <div class="item-amount svelte-1j89azx"> </div></div> <div class="item-details svelte-1j89azx"><div class="item-name svelte-1j89azx"> </div> <div class="item-meta svelte-1j89azx"> </div></div> <button class="remove-btn svelte-1j89azx"><i class="fas fa-minus svelte-1j89azx"></i></button></div>'),FD=B('<div class="inventory-grid svelte-1j89azx"></div>'),HD=B('<div class="modal-overlay svelte-1j89azx"><div><div class="modal-header svelte-1j89azx"><h3 class="svelte-1j89azx"><i class="fas fa-boxes me-2"></i> </h3> <button class="close-btn svelte-1j89azx"><i class="fas fa-times"></i></button></div> <div class="modal-toolbar svelte-1j89azx"><div class="search-section svelte-1j89azx"><div class="search-box svelte-1j89azx"><i class="fas fa-search svelte-1j89azx"></i> <input type="text" class="search-input svelte-1j89azx"></div></div> <div class="action-buttons svelte-1j89azx"><button class="btn btn-success svelte-1j89azx"><i class="fas fa-plus me-2"></i> </button> <button class="btn btn-danger svelte-1j89azx"><i class="fas fa-trash me-2"></i> </button></div></div> <div class="modal-body svelte-1j89azx"><!></div></div></div>'),jD=(i,e)=>i.key==="Enter"&&e(),$D=(i,e)=>i.key==="Enter"&&e(),VD=B('<div class="sub-modal-overlay svelte-1j89azx"><div><h5 class="svelte-1j89azx"> </h5> <div class="form-group svelte-1j89azx"><label class="svelte-1j89azx"> </label> <input type="text" class="form-control svelte-1j89azx"></div> <div class="form-group svelte-1j89azx"><label class="svelte-1j89azx"> </label> <input type="number" min="1" class="form-control svelte-1j89azx"></div> <div class="modal-actions svelte-1j89azx"><button class="btn btn-secondary svelte-1j89azx"> </button> <button class="btn btn-success svelte-1j89azx"> </button></div></div></div>'),WD=(i,e)=>i.key==="Enter"&&e(),qD=(i,e,t,n)=>{u(e)&&(M(t,u(e).amount,!0),n())},UD=B('<div class="sub-modal-overlay svelte-1j89azx"><div><h5 class="svelte-1j89azx"> </h5> <p> </p> <div class="form-group svelte-1j89azx"><label class="svelte-1j89azx"> </label> <input type="number" min="1" class="form-control svelte-1j89azx"></div> <div class="modal-actions svelte-1j89azx"><button class="btn btn-secondary svelte-1j89azx"> </button> <button class="btn btn-warning svelte-1j89azx"><i class="fas fa-trash-alt me-1"></i> Remove All</button> <button class="btn btn-danger svelte-1j89azx"> </button></div></div></div>'),GD=B('<div class="sub-modal-overlay svelte-1j89azx"><div><h5 class="svelte-1j89azx"> </h5> <p> </p> <div class="modal-actions svelte-1j89azx"><button class="btn btn-secondary svelte-1j89azx"> </button> <button class="btn btn-danger svelte-1j89azx"><i class="fas fa-trash-alt me-1"></i> </button></div></div></div>'),ZD=B("<!> <!> <!> <!>",1);function YD(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=Yi(e,"show",3,!1),r=Yi(e,"playerId",3,null),o=Yi(e,"playerName",3,""),l=Yi(e,"darkMode",3,!0),d=Yi(e,"onClose",3,()=>{});let h=ae(Gt([])),m=ae(!1),v=ae(""),b=ae(""),y=ae(1),x=ae(!1),k=ae(!1),C=ae(!1),A=ae(null),T=qi(()=>u(h).filter($=>$.name.toLowerCase().includes(u(v).toLowerCase())||$.label.toLowerCase().includes(u(v).toLowerCase())));async function I(){var $;if(r()){M(m,!0);try{const{status:X,data:Y}=await Ve("getPlayerInventory",{playerId:r()});X==="ok"&&(($=Y==null?void 0:Y.data)!=null&&$.inventory)?M(h,Y.data.inventory,!0):ze(s()("notifications.inventory.failedtoload"),"error")}catch(X){console.error("Failed to load inventory:",X),ze(s()("notifications.inventory.failedtoload"),"error")}finally{M(m,!1)}}}fn(()=>{a()&&r()&&I()});function D($){return Ld()?`${$}`:"placeholder_item.png"}function N($){M(A,$,!0),M(y,1),M(k,!0)}async function z(){if(!(!u(b)||u(y)<=0)){try{const{status:$,data:X}=await Ve("executePlayerAction",{actionKey:"playeraction:GiveItem",playerId:r(),inputs:[u(b),u(y).toString()]});$==="ok"?(ri("sounds/action.mp3"),await I()):ze(s()("notifications.inventory.failedtoadditem"),"error")}catch($){console.error("Failed to add item:",$),ze(s()("notifications.inventory.failedtoadditem"),"error")}M(x,!1)}}async function H(){if(!(!u(A)||u(y)<=0)){try{const{status:$,data:X}=await Ve("executePlayerAction",{actionKey:"playeraction:RemoveItem",playerId:r(),inputs:[u(A).name,u(y).toString()]});$==="ok"?(ri("sounds/action.mp3"),await I()):ze(s()("notifications.inventory.failedtoremoveitem"),"error")}catch($){console.error("Failed to remove item:",$),ze(s()("notifications.inventory.failedtoremoveitem"),"error")}M(k,!1),M(A,null)}}async function j(){try{const{status:$,data:X}=await Ve("executePlayerAction",{actionKey:"playeraction:ClearInventory",playerId:r(),inputs:null});$==="ok"?(ri("sounds/action.mp3"),await I()):ze(s()("notifications.inventory.failedtoclear"),"error")}catch($){console.error("Failed to clear inventory:",$),ze(s()("notifications.inventory.failedtoclear"),"error")}}function re($){$.key==="Escape"&&d()()}var V=ZD();Mi("keydown",Mm,re);var q=yt(V);{var le=$=>{var X=HD(),Y=p(X);let te;var K=p(Y),F=p(K),R=g(p(F)),J=g(F,2);J.__click=function(..._e){var be;(be=d())==null||be.apply(this,_e)};var U=g(K,2),ce=p(U),fe=p(ce),ve=g(p(fe),2),Me=g(ce,2),Se=p(Me);Se.__click=[TD,b,y,x];var Pe=g(p(Se)),Be=g(Se,2);Be.__click=[LD,C];var ue=g(p(Be)),oe=g(U,2),me=p(oe);{var Le=_e=>{var be=BD(),Te=p(be),pe=p(Te),de=p(pe),ge=g(Te,2),xe=p(ge);se((we,Re)=>{S(de,we),S(xe,Re)},[()=>s()("common.loading"),()=>s()("modals.inventory.loading")]),E(_e,be)},Oe=(_e,be)=>{{var Te=de=>{var ge=RD(),xe=g(p(ge),2),we=p(xe);se(Re=>S(we,Re),[()=>u(v)?s()("modals.inventory.noitemsmatching"):s()("modals.inventory.emptyinventory")]),E(de,ge)},pe=de=>{var ge=FD();Vt(ge,21,()=>u(T),xe=>xe.slot,(xe,we)=>{var Re=ND(),qe=p(Re),Ge=p(qe),tt=g(Ge,2),Ye=p(tt),Je=g(qe,2),Ue=p(Je),at=p(Ue),Ee=g(Ue,2),He=p(Ee),Ke=g(Je,2);Ke.__click=[zD,N,we],se((it,pt)=>{Ot(Re,"title",u(we).description),Ot(Ge,"src",it),Ot(Ge,"alt",u(we).label),S(Ye,u(we).amount),S(at,u(we).label),S(He,u(we).name),Ot(Ke,"title",pt)},[()=>D(u(we).image),()=>s()("modals.inventory.removeitem")]),Mi("error",Ge,it=>{const pt=it.target;pt&&(pt.src="placeholder_item.png")}),E(xe,Re)}),E(de,ge)};Q(_e,de=>{u(T).length===0?de(Te):de(pe,!1)},be)}};Q(me,_e=>{u(m)?_e(Le):_e(Oe,!1)})}se((_e,be,Te,pe,de)=>{te=G(Y,1,"inventory-modal svelte-1j89azx",null,te,_e),S(R,` ${be??""}`),Ot(ve,"placeholder",Te),S(Pe,` ${pe??""}`),S(ue,` ${de??""}`)},[()=>({light:!l()}),()=>s()("modals.inventory.title",{values:{player:o()}}),()=>s()("modals.inventory.searchitems"),()=>s()("modals.inventory.additem"),()=>s()("modals.inventory.clearall")]),st(ve,()=>u(v),_e=>M(v,_e)),gt(3,Y,()=>Ki,()=>({duration:200,start:.9})),gt(3,X,()=>Fi,()=>({duration:200})),E($,X)};Q(q,$=>{a()&&$(le)})}var ee=g(q,2);{var W=$=>{var X=VD(),Y=p(X);let te;var K=p(Y),F=p(K),R=g(K,2),J=p(R),U=p(J),ce=g(J,2);ce.__keydown=[jD,z];var fe=g(R,2),ve=p(fe),Me=p(ve),Se=g(ve,2);Se.__keydown=[$D,z];var Pe=g(fe,2),Be=p(Pe);Be.__click=[ID,x,b,y];var ue=p(Be),oe=g(Be,2);oe.__click=z;var me=p(oe);se((Le,Oe,_e,be,Te,pe,de)=>{te=G(Y,1,"sub-modal svelte-1j89azx",null,te,Le),S(F,Oe),S(U,_e),Ot(ce,"placeholder",be),S(Me,Te),S(ue,pe),oe.disabled=!u(b)||u(y)<=0,S(me,de)},[()=>({light:!l()}),()=>s()("modals.inventory.additemtitle"),()=>s()("modals.inventory.itemname"),()=>s()("modals.inventory.selectitem"),()=>s()("modals.inventory.amount"),()=>s()("modals.cancel"),()=>s()("modals.inventory.additem")]),st(ce,()=>u(b),Le=>M(b,Le)),st(Se,()=>u(y),Le=>M(y,Le)),gt(3,Y,()=>Ki,()=>({duration:150,start:.9})),gt(3,X,()=>Fi,()=>({duration:150})),E($,X)};Q(ee,$=>{u(x)&&$(W)})}var ne=g(ee,2);{var ye=$=>{var X=UD(),Y=p(X);let te;var K=p(Y),F=p(K),R=g(K,2),J=p(R),U=g(R,2),ce=p(U),fe=p(ce),ve=g(ce,2);ve.__keydown=[WD,H];var Me=g(U,2),Se=p(Me);Se.__click=[OD,k,A,y];var Pe=p(Se),Be=g(Se,2);Be.__click=[qD,A,y,H];var ue=g(Be,2);ue.__click=H;var oe=p(ue);se((me,Le,Oe,_e,be,Te)=>{te=G(Y,1,"sub-modal svelte-1j89azx",null,te,me),S(F,Le),S(J,Oe),S(fe,`${_e??""} (Max: ${u(A).amount??""})`),Ot(ve,"max",u(A).amount),S(Pe,be),ue.disabled=u(y)<=0||u(y)>u(A).amount,S(oe,Te)},[()=>({light:!l()}),()=>s()("modals.inventory.removeitemtitle"),()=>s()("modals.inventory.removeitemdesc",{values:{item:u(A).label}}),()=>s()("modals.inventory.amount"),()=>s()("modals.cancel"),()=>s()("modals.inventory.removeitem")]),st(ve,()=>u(y),me=>M(y,me)),gt(3,Y,()=>Ki,()=>({duration:150,start:.9})),gt(3,X,()=>Fi,()=>({duration:150})),E($,X)};Q(ne,$=>{u(k)&&u(A)&&$(ye)})}var ie=g(ne,2);{var Z=$=>{var X=GD(),Y=p(X);let te;var K=p(Y),F=p(K),R=g(K,2),J=p(R),U=g(R,2),ce=p(U);ce.__click=[DD,C];var fe=p(ce),ve=g(ce,2);ve.__click=[ED,j,C];var Me=g(p(ve));se((Se,Pe,Be,ue,oe)=>{te=G(Y,1,"sub-modal svelte-1j89azx",null,te,Se),S(F,Pe),S(J,Be),S(fe,ue),S(Me,` ${oe??""}`)},[()=>({light:!l()}),()=>s()("modals.inventory.clearall"),()=>s()("modals.inventory.confirmclear"),()=>s()("modals.cancel"),()=>s()("modals.inventory.clearall")]),gt(3,Y,()=>Ki,()=>({duration:150,start:.9})),gt(3,X,()=>Fi,()=>({duration:150})),E($,X)};Q(ie,$=>{u(C)&&$(Z)})}E(i,V),Yt(),n()}hi(["click","keydown"]);var KD=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),XD=(i,e)=>M(e,""),JD=B('<button class="btn btn-danger clear-btn" type="button" aria-label="Clear search"><i class="fas fa-times"></i></button>'),QD=B("<option> </option>"),eE=(i,e,t)=>e(u(t)),tE=B('<i class="fas fa-check-circle text-success ms-2 svelte-1htkmby"></i>'),iE=B('<div class="action-type svelte-1htkmby"><i class="fas fa-tag me-2 svelte-1htkmby"></i> <span> </span></div>'),nE=(i,e,t)=>{i.stopPropagation(),e(u(t).key)},sE=B('<div><div class="action-grid svelte-1htkmby"><div class="action-title svelte-1htkmby"><i class="fas fa-bolt me-2 svelte-1htkmby"></i> <!></div> <!> <div class="action-description svelte-1htkmby"><i class="fas fa-info-circle me-2"></i> </div></div> <button class="btn btn-link text-warning p-0 ms-3"><i></i></button></div>'),aE=B('<div class="view svelte-1htkmby"><div class="player-details svelte-1htkmby"><button class="btn btn-sm btn-outline-secondary mb-3"> </button> <!><br> <div class="d-flex justify-content-between align-items-center mb-2 mt-1"><h4 class="mb-0"> </h4> <div class="d-flex align-items-center gap-2"><div><span class="input-group-text"><i class="fas fa-search"></i></span> <input type="text" class="form-control" placeholder="Search actions"> <!></div> <select></select></div></div> <div class="player-actions-list list-group svelte-1htkmby"></div></div></div>'),rE=(i,e,t,n)=>{M(e,!1),M(t,null),M(n,!1)},oE=i=>i.stopPropagation(),lE=(i,e,t,n)=>{M(e,!1),M(t,null),M(n,!1)},cE=(i,e)=>M(e,!u(e)),dE=B('<div class="screenshot-modal-overlay svelte-1htkmby"><div class="screenshot-modal-content svelte-1htkmby"><div class="screenshot-header svelte-1htkmby"><h5 class="svelte-1htkmby"> </h5> <span class="zoom-hint svelte-1htkmby"> </span> <button class="btn-close svelte-1htkmby"></button></div> <div class="screenshot-body svelte-1htkmby"><img alt="Player Screenshot"></div></div></div>'),hE=B('<div class="page-container svelte-1htkmby"><!></div> <!> <!> <!>',1);function uE(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t),r=()=>Xe(kg,"$routeStore",t);let o=ae(null),l=ae(!0);const d=JSON.parse(localStorage.getItem("favoritePlayerActions")??"[]");let h=ae(Gt(s().playerActions.filter(R=>s().currentUserPermissions.includes(R.key)).map(R=>({...R,favorite:d.includes(R.key)})))),m=ae("all"),v=ae(""),b=ae(!1),y=ae(!1),x=ae(Gt([])),k=ae(null),C=ae(null),A=ae(!1),T=ae(null),I=ae(!1),D=qi(()=>["all",...new Set(u(h).map(R=>R.type))]),N=qi(()=>[...u(h)].filter(R=>(u(m)==="all"||R.type===u(m))&&(u(v).trim()===""||R.title.toLowerCase().includes(u(v).toLowerCase())||R.description.toLowerCase().includes(u(v).toLowerCase()))).sort((R,J)=>Number(J.favorite)-Number(R.favorite)));function z(R){M(h,u(h).map(U=>U.key===R?{...U,favorite:!U.favorite}:U),!0);const J=u(h).filter(U=>U.favorite).map(U=>U.key);localStorage.setItem("favoritePlayerActions",JSON.stringify(J))}function H(R){switch(R){case"general":return"text-bg-info";case"teleport":return"text-bg-primary";case"surveillance":return"text-bg-warning";case"monetary":return"text-bg-success";case"groups":return"text-bg-purple";case"inventory":return"text-bg-secondary";case"punishment":return"text-bg-danger";case"fun":return"text-bg-pink";default:return s().darkMode?"bg-dark":"bg-light"}}function j(R){R.preventDefault();const J=u(D).indexOf(u(m));let U=J+(R.deltaY>0?1:-1);U=Math.max(0,Math.min(u(D).length-1,U)),U!==J&&M(m,u(D)[U],!0)}function re(R){var J;R.key==="playeraction:ViewInventory"?M(b,!0):R.requiresPrompt?(M(k,R,!0),M(y,!0),M(x,((J=R.promptPlaceholders)==null?void 0:J.map(()=>""))||[],!0)):q(R,null)}function V(...R){const J=R.map(U=>u(h).find(ce=>ce.key===U)).find(Boolean);J&&re(J)}function q(R,J){var U;Ve("executePlayerAction",{actionKey:R.key,playerId:(U=u(o))==null?void 0:U.id,inputs:J}).then(({status:ce,data:fe})=>{ce==="ok"?(ri("sounds/action.mp3"),R.key==="playeraction:Screenshot"&&fe&&fe.extraData&&(M(T,fe.extraData,!0),M(I,!1),M(A,!0)),["playeraction:SetJob","playeraction:RemoveFromJob","playeraction:SetGang","playeraction:RemoveFromGang","playeraction:GiveCash","playeraction:RemoveCash","playeraction:GiveBankMoney","playeraction:RemoveBank","playeraction:SetCharacterName"].includes(R.key)&&u(o)&&ee(u(o).id)):console.error(`Failed to execute action: ${fe}`)})}function le(){if(!u(k))return;const R=u(x).map(J=>J.trim());R.some(J=>J==="")||(q(u(k),R),M(y,!1),M(k,null))}async function ee(R){M(l,!0);const{status:J,data:U}=await Ve("getDetailedPlayerInfo",{playerId:R});J==="ok"?M(o,U,!0):ze(a()("notifications.playerlist.failedtoloaddetailedplayerinfo",{values:{playerId:R}}),"error"),M(l,!1)}fn(()=>{var J;const R=(J=r().params)==null?void 0:J.playerId;if(R){const U=Number(R);Number.isNaN(U)||ee(U)}});var W=hE(),ne=yt(W),ye=p(ne);{var ie=R=>{var J=KD(),U=p(J),ce=p(U),fe=p(ce);se(ve=>S(fe,ve),[()=>a()("pages.playerlist.loading")]),E(R,J)},Z=R=>{var J=aE(),U=p(J),ce=p(U);ce.__click=function(...Te){Ip==null||Ip.apply(this,Te)};var fe=p(ce),ve=g(ce,2);xD(ve,{get selectedPlayer(){return u(o)},onStartAction:V});var Me=g(ve,3),Se=p(Me),Pe=p(Se),Be=g(Se,2),ue=p(Be);let oe;var me=g(p(ue),2),Le=g(me,2);{var Oe=Te=>{var pe=JD();pe.__click=[XD,v],E(Te,pe)};Q(Le,Te=>{u(v)&&Te(Oe)})}var _e=g(ue,2);Vt(_e,21,()=>u(D),Si,(Te,pe)=>{var de=QD(),ge={},xe=p(de);se(we=>{ge!==(ge=u(pe))&&(de.value=(de.__value=u(pe))??""),G(de,1,we,"svelte-1htkmby"),S(xe,u(pe))},[()=>zo(H(u(pe)))]),E(Te,de)}),Kr(_e,Te=>M(C,Te),()=>u(C));var be=g(Me,2);Vt(be,21,()=>u(N),Te=>Te.key,(Te,pe)=>{var de=sE();let ge;de.__click=[eE,re,pe];var xe=p(de),we=p(xe),Re=g(p(we)),qe=g(Re);{var Ge=He=>{var Ke=tE();E(He,Ke)};Q(qe,He=>{u(pe).toggled&&He(Ge)})}var tt=g(we,2);{var Ye=He=>{var Ke=iE(),it=g(p(Ke),2),pt=p(it);se(Tt=>{G(it,1,`badge ${Tt??""}`,"svelte-1htkmby"),S(pt,u(pe).type)},[()=>H(u(pe).type)]),E(He,Ke)};Q(tt,He=>{s().showActionTypeLabels&&He(Ye)})}var Je=g(tt,2),Ue=g(p(Je)),at=g(xe,2);at.__click=[nE,z,pe];var Ee=p(at);se(He=>{ge=G(de,1,"list-group-item list-group-item-action d-flex justify-content-between align-items-center action-item svelte-1htkmby",null,ge,He),Ot(de,"data-favorite",u(pe).favorite),S(Re,` ${u(pe).title??""} `),S(Ue,` ${u(pe).description??""}`),Ot(at,"aria-label",u(pe).favorite?"Unfavorite":"Favorite"),G(Ee,1,zo(u(pe).favorite?"fas fa-star":"far fa-star"))},[()=>({light:!s().darkMode})]),E(Te,de)}),se((Te,pe,de,ge)=>{S(fe,`← ${Te??""}`),S(Pe,pe),oe=G(ue,1,"input-group input-group-sm action-search",null,oe,de),G(_e,1,`form-select w-auto ${ge??""}`,"svelte-1htkmby")},[()=>a()("pages.playerlist.backtolist"),()=>a()("pages.playerlist.playeractions"),()=>({light:!s().darkMode}),()=>H(u(m))]),st(me,()=>u(v),Te=>M(v,Te)),Mi("wheel",_e,j),ur(_e,()=>u(m),Te=>M(m,Te)),E(R,J)};Q(ye,R=>{u(l)||!u(o)?R(ie):R(Z,!1)})}var $=g(ne,2);AD($,{get pendingAction(){return u(k)},confirmPrompt:le,cancelPrompt:()=>M(k,null),get darkMode(){return s().darkMode},get promptInputs(){return u(x)},set promptInputs(R){M(x,R,!0)}});var X=g($,2);const Y=qi(()=>{var R;return((R=u(o))==null?void 0:R.id)||null}),te=qi(()=>{var R;return((R=u(o))==null?void 0:R.characterName)||""});YD(X,{get show(){return u(b)},get playerId(){return u(Y)},get playerName(){return u(te)},get darkMode(){return s().darkMode},onClose:()=>M(b,!1)});var K=g(X,2);{var F=R=>{var J=dE();J.__click=[rE,A,T,I];var U=p(J);U.__click=[oE];var ce=p(U),fe=p(ce),ve=p(fe),Me=g(fe,2),Se=p(Me),Pe=g(Me,2);Pe.__click=[lE,A,T,I];var Be=g(ce,2),ue=p(Be);ue.__click=[cE,I];let oe;se((me,Le)=>{S(ve,me),S(Se,u(I)?"Click to zoom out":"Click to zoom in"),Ot(ue,"src",u(T)),oe=G(ue,1,"svelte-1htkmby",null,oe,Le)},[()=>a()("pages.playerlist.playerscreenshot"),()=>({zoomed:u(I)})]),E(R,J)};Q(K,R=>{u(A)&&u(T)&&R(F)})}E(i,W),Yt(),n()}hi(["click"]);function fE(i,e,t){const s=i.target.value;HP(s),s==="image"?M(e,!0):M(e,!1),ze(t()("notifications.settings.backgroundtypechanged",{values:{type:s}}),"info")}function pE(i,e){i.key==="Enter"&&e()}var mE=(i,e)=>M(e,!u(e)),vE=B('<div style="margin-right:0;"><div class="gradient-preview svelte-19v6bnh"></div> <span class="preset-name svelte-19v6bnh"> </span></div>'),gE=(i,e,t)=>e(u(t)),_E=B('<span class="none-text svelte-19v6bnh">None</span>'),bE=B('<button><div class="gradient-preview svelte-19v6bnh"><!></div> <span class="preset-name svelte-19v6bnh"> </span></button>'),yE=B('<div class="gradient-presets-grid svelte-19v6bnh"></div>'),xE=B('<div><div class="setting-header" style="cursor:pointer;"><div class="setting-info"><div class="setting-icon">🌈</div> <div class="setting-content"><span> </span> <span> </span></div></div> <div style="display:flex;align-items:center;gap:0.5rem;"><!> <i style="color:#6ea8fe;font-size:1.1rem;"></i></div></div> <!></div>'),wE=B('<div class="current-image-preview svelte-19v6bnh"><span class="preview-label svelte-19v6bnh"> </span> <span class="preview-url svelte-19v6bnh"> </span></div>'),kE=B('<div><div class="setting-header"><div class="setting-info"><div class="setting-icon">🖼️</div> <div class="setting-content"><span> </span> <span> </span></div></div></div> <div class="custom-image-input svelte-19v6bnh"><div class="input-group svelte-19v6bnh"><input type="url" placeholder="https://example.com/image.jpg"> <button class="btn btn-primary svelte-19v6bnh"> </button></div> <!></div></div>'),SE=B('<div class="background-settings svelte-19v6bnh"><div><div class="setting-header"><div class="setting-info"><div class="setting-icon">🎨</div> <div class="setting-content"><span> </span> <span> </span></div></div> <div><select><option class="svelte-19v6bnh"> </option><option class="svelte-19v6bnh"> </option><option class="svelte-19v6bnh"> </option></select></div></div></div> <!> <!></div>');function CE(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Dd,"$backgroundStore",t),a=()=>Xe(xi,"$_",t),r=()=>Xe(Jt,"$appStore",t);let o=ae(Gt(s())),l=ae(""),d=ae(!1),h=ae(!0);fn(()=>{M(o,s(),!0)});function m(R){jP(R),ze(a()("notifications.settings.backgroundpresetapplied",{values:{name:R.name}}),"info")}function v(){u(l).trim()&&($P(u(l).trim()),ze(a()("notifications.settings.customimageapplied"),"info"))}function b(R){return R.value==="none"?"background: #f8f9fa; border: 2px dashed #dee2e6;":`background: ${R.value};`}function y(R){return u(o).type===R.type&&(R.value==="none"?u(o).value==="":u(o).value===R.value)}var x=SE(),k=p(x);let C;var A=p(k),T=p(A),I=g(p(T),2),D=p(I);let N;var z=p(D),H=g(D,2);let j;var re=p(H),V=g(T,2);let q;var le=p(V);let ee;gl(le,()=>u(o).type);var W;le.__change=[fE,d,a];var ne=p(le);ne.value=ne.__value="none";var ye=p(ne),ie=g(ne);ie.value=ie.__value="gradient";var Z=p(ie),$=g(ie);$.value=$.__value="image";var X=p($),Y=g(k,2);{var te=R=>{var J=xE();let U;var ce=p(J);ce.__click=[mE,h];var fe=p(ce),ve=g(p(fe),2),Me=p(ve);let Se;var Pe=p(Me),Be=g(Me,2);let ue;var oe=p(Be),me=g(fe,2),Le=p(me);{var Oe=pe=>{var de=Bi(),ge=yt(de);{var xe=we=>{var Re=Bi(),qe=yt(Re);Vt(qe,17,()=>wp,Si,(Ge,tt)=>{var Ye=Bi(),Je=yt(Ye);{var Ue=at=>{var Ee=vE();let He;var Ke=p(Ee),it=g(Ke,2),pt=p(it);se((Tt,mt,zt)=>{He=G(Ee,1,`gradient-preset-summary gradient-preset-btn ${Tt??""}`,"svelte-19v6bnh",He,mt),Ot(Ee,"title",u(tt).name),es(Ke,zt),S(pt,u(tt).name)},[()=>y(u(tt))?"active":"",()=>({"gradient-preset-btn-light":!r().darkMode}),()=>b(u(tt))]),E(at,Ee)};Q(Je,at=>{y(u(tt))&&at(Ue)})}E(Ge,Ye)}),E(we,Re)};Q(ge,we=>{wp.length>0&&we(xe)})}E(pe,de)};Q(Le,pe=>{u(h)&&pe(Oe)})}var _e=g(Le,2),be=g(ce,2);{var Te=pe=>{var de=yE();Vt(de,21,()=>wp,Si,(ge,xe)=>{var we=bE();let Re;we.__click=[gE,m,xe];var qe=p(we),Ge=p(qe);{var tt=Ue=>{var at=_E();E(Ue,at)};Q(Ge,Ue=>{u(xe).value==="none"&&Ue(tt)})}var Ye=g(qe,2),Je=p(Ye);se((Ue,at,Ee)=>{Re=G(we,1,`gradient-preset-btn ${Ue??""}`,"svelte-19v6bnh",Re,at),Ot(we,"title",u(xe).name),es(qe,Ee),S(Je,u(xe).name)},[()=>y(u(xe))?"active":"",()=>({"gradient-preset-btn-light":!r().darkMode}),()=>b(u(xe))]),E(ge,we)}),gt(3,de,()=>Im,()=>({duration:180})),E(pe,de)};Q(be,pe=>{u(h)||pe(Te)})}se((pe,de,ge,xe,we)=>{U=G(J,1,"setting-card",null,U,pe),Se=G(Me,1,"setting-label",null,Se,de),S(Pe,ge),ue=G(Be,1,"setting-description",null,ue,xe),S(oe,we),G(_e,1,`fas ${u(h)?"fa-chevron-down":"fa-chevron-up"}`)},[()=>({"setting-card-light":!r().darkMode}),()=>({"setting-label-light":!r().darkMode}),()=>a()("pages.settings.gradientpresets"),()=>({"setting-description-light":!r().darkMode}),()=>a()("pages.settings.gradientpresetsdescription")]),E(R,J)};Q(Y,R=>{u(o).type==="gradient"&&R(te)})}var K=g(Y,2);{var F=R=>{var J=kE();let U;var ce=p(J),fe=p(ce),ve=g(p(fe),2),Me=p(ve);let Se;var Pe=p(Me),Be=g(Me,2);let ue;var oe=p(Be),me=g(ce,2),Le=p(me),Oe=p(Le);let _e;Oe.__keydown=[pE,v];var be=g(Oe,2);be.__click=v;var Te=p(be),pe=g(Le,2);{var de=ge=>{var xe=wE(),we=p(xe),Re=p(we),qe=g(we,2),Ge=p(qe);se(tt=>{S(Re,`${tt??""}:`),S(Ge,u(o).value)},[()=>a()("pages.settings.currentimage")]),E(ge,xe)};Q(pe,ge=>{u(o).value&&ge(de)})}se((ge,xe,we,Re,qe,Ge,tt,Ye)=>{U=G(J,1,"setting-card",null,U,ge),Se=G(Me,1,"setting-label",null,Se,xe),S(Pe,we),ue=G(Be,1,"setting-description",null,ue,Re),S(oe,qe),_e=G(Oe,1,"form-control svelte-19v6bnh",null,_e,Ge),be.disabled=tt,S(Te,Ye)},[()=>({"setting-card-light":!r().darkMode}),()=>({"setting-label-light":!r().darkMode}),()=>a()("pages.settings.customimage"),()=>({"setting-description-light":!r().darkMode}),()=>a()("pages.settings.customimagedescription"),()=>({"form-control-light":!r().darkMode}),()=>!u(l).trim(),()=>a()("pages.settings.apply")]),st(Oe,()=>u(l),ge=>M(l,ge)),E(R,J)};Q(K,R=>{u(o).type==="image"&&R(F)})}se((R,J,U,ce,fe,ve,Me,Se,Pe,Be)=>{C=G(k,1,"setting-card",null,C,R),N=G(D,1,"setting-label",null,N,J),S(z,U),j=G(H,1,"setting-description",null,j,ce),S(re,fe),q=G(V,1,"background-type-selector select-wrap svelte-19v6bnh",null,q,ve),ee=G(le,1,"form-select font-select svelte-19v6bnh",null,ee,Me),W!==(W=u(o).type)&&(le.value=(le.__value=u(o).type)??"",Ur(le,u(o).type)),S(ye,Se),S(Z,Pe),S(X,Be)},[()=>({"setting-card-light":!r().darkMode}),()=>({"setting-label-light":!r().darkMode}),()=>a()("pages.settings.backgroundtype"),()=>({"setting-description-light":!r().darkMode}),()=>a()("pages.settings.backgroundtypedescription"),()=>({light:!r().darkMode}),()=>({"font-select-light":!r().darkMode}),()=>a()("pages.settings.backgroundnone"),()=>a()("pages.settings.backgroundgradient"),()=>a()("pages.settings.backgroundimage")]),E(i,x),Yt(),n()}hi(["change","click","keydown"]);function ME(i,e,t,n){u(e)&&(t(u(e)),M(n,!1),M(e,null))}function PE(i,e,t){M(e,!1),M(t,null)}function AE(i,e,t){M(e,!1),M(t,null)}var TE=(i,e)=>e.setCurrentPage("settings"),LE=(i,e)=>M(e,"bans"),DE=(i,e)=>M(e,"warns"),EE=(i,e)=>M(e,"kicks"),IE=(i,e)=>i.key==="Enter"&&e(),OE=B('<div class="d-flex justify-content-center align-items-center" style="height: 60px;"><div class="spinner-border text-primary" role="status" style="width: 1.5rem; height: 1.5rem;"><span class="visually-hidden">Loading...</span></div></div>'),BE=B('<div class="empty-list svelte-1bie0yp"> </div>'),RE=(i,e,t)=>e(u(t)),zE=B('<button class="btn btn-sm btn-warning revoke-btn svelte-1bie0yp"> </button>'),NE=(i,e,t)=>e(u(t)),FE=B('<button class="btn btn-sm btn-outline-danger ms-2"><i class="fas fa-trash"></i></button>'),HE=B('<li><span class="punishment-type-icon svelte-1bie0yp"><i class="fas fa-gavel"></i></span> <div class="punishment-main svelte-1bie0yp"><span class="player-name svelte-1bie0yp"> </span> <div class="admin-info svelte-1bie0yp"><span class="issued-by svelte-1bie0yp"> </span> <span class="issued-at svelte-1bie0yp"> </span></div> <span class="reason svelte-1bie0yp"> </span></div> <span> </span> <!></li>'),jE=B('<div class="punishment-list-scroll svelte-1bie0yp"><ul class="punishment-list svelte-1bie0yp"></ul></div> <div class="pagination-controls mt-2 svelte-1bie0yp"><button class="btn btn-sm btn-outline-secondary me-2">Prev</button> <span> </span> <button class="btn btn-sm btn-outline-secondary ms-2">Next</button></div> <div class="page-size-controls mt-2 d-flex align-items-center gap-2"><label for="bansPageSize" class="mb-0"> </label> <select id="bansPageSize" class="form-select form-select-sm w-auto"><option>5</option><option>10</option><option>15</option><option>20</option></select></div>',1),$E=B('<div class="punishment-container svelte-1bie0yp"><div class="search-bar mb-2 svelte-1bie0yp"><select class="form-select form-select-sm w-auto me-2"><option> </option><option> </option><option> </option></select> <input class="form-control form-control-sm" type="text"></div> <!></div>'),VE=(i,e)=>i.key==="Enter"&&e(),WE=B('<div class="d-flex justify-content-center align-items-center" style="height: 60px;"><div class="spinner-border text-primary" role="status" style="width: 1.5rem; height: 1.5rem;"><span class="visually-hidden">Loading...</span></div></div>'),qE=B('<div class="empty-list svelte-1bie0yp"> </div>'),UE=(i,e,t)=>e(u(t)),GE=B('<li class="punishment-item warn svelte-1bie0yp"><span class="punishment-type-icon svelte-1bie0yp"><i class="fas fa-exclamation-triangle"></i></span> <div class="punishment-main svelte-1bie0yp"><span class="player-name svelte-1bie0yp"> </span> <div class="admin-info svelte-1bie0yp"><span class="issued-by svelte-1bie0yp"> </span> <span class="issued-at svelte-1bie0yp"> </span></div> <span class="reason svelte-1bie0yp"> </span></div> <button class="btn btn-sm btn-outline-danger ms-2"><i class="fas fa-trash"></i></button></li>'),ZE=B('<div class="punishment-list-scroll svelte-1bie0yp"><ul class="punishment-list svelte-1bie0yp"></ul></div> <div class="pagination-controls mt-2 svelte-1bie0yp"><button class="btn btn-sm btn-outline-secondary me-2">Prev</button> <span> </span> <button class="btn btn-sm btn-outline-secondary ms-2">Next</button></div> <div class="page-size-controls mt-2 d-flex align-items-center gap-2"><label for="warnsPageSize" class="mb-0"> </label> <select id="warnsPageSize" class="form-select form-select-sm w-auto"><option>5</option><option>10</option><option>15</option><option>20</option></select></div>',1),YE=B('<div class="punishment-container svelte-1bie0yp"><div class="search-bar mb-2 svelte-1bie0yp"><input class="form-control form-control-sm" type="text"></div> <!></div>'),KE=(i,e)=>i.key==="Enter"&&e(),XE=B('<div class="d-flex justify-content-center align-items-center" style="height: 60px;"><div class="spinner-border text-primary" role="status" style="width: 1.5rem; height: 1.5rem;"><span class="visually-hidden">Loading...</span></div></div>'),JE=B('<div class="empty-list svelte-1bie0yp"> </div>'),QE=(i,e,t)=>e(u(t)),e5=B('<li class="punishment-item kick svelte-1bie0yp"><span class="punishment-type-icon svelte-1bie0yp"><i class="fas fa-running"></i></span> <div class="punishment-main svelte-1bie0yp"><span class="player-name svelte-1bie0yp"> </span> <div class="admin-info svelte-1bie0yp"><span class="issued-by svelte-1bie0yp"> </span> <span class="issued-at svelte-1bie0yp"> </span></div> <span class="reason svelte-1bie0yp"> </span></div> <button class="btn btn-sm btn-outline-danger ms-2"><i class="fas fa-trash"></i></button></li>'),t5=B('<div class="punishment-list-scroll svelte-1bie0yp"><ul class="punishment-list svelte-1bie0yp"></ul></div> <div class="pagination-controls mt-2 svelte-1bie0yp"><button class="btn btn-sm btn-outline-secondary me-2">Prev</button> <span> </span> <button class="btn btn-sm btn-outline-secondary ms-2">Next</button></div> <div class="page-size-controls mt-2 d-flex align-items-center gap-2"><label for="kicksPageSize" class="mb-0"> </label> <select id="kicksPageSize" class="form-select form-select-sm w-auto"><option>5</option><option>10</option><option>15</option><option>20</option></select></div>',1),i5=B('<div class="punishment-container svelte-1bie0yp"><div class="search-bar mb-2 svelte-1bie0yp"><input class="form-control form-control-sm" type="text"></div> <!></div>'),n5=B('<div class="modal-backdrop svelte-1bie0yp"><div class="modal-box svelte-1bie0yp"><h5 class="svelte-1bie0yp"> </h5> <p class="svelte-1bie0yp"><!></p> <p class="svelte-1bie0yp"><!></p> <div class="d-flex gap-2 justify-content-end mt-3"><button class="btn btn-secondary svelte-1bie0yp"> </button> <button class="btn btn-danger svelte-1bie0yp"> </button></div></div></div>'),s5=B('<div class="modal-backdrop svelte-1bie0yp"><div class="modal-box svelte-1bie0yp"><h5 class="svelte-1bie0yp"> </h5> <p class="svelte-1bie0yp"><!></p> <p class="svelte-1bie0yp"><!></p> <div class="d-flex gap-2 justify-content-end mt-3"><button class="btn btn-secondary svelte-1bie0yp"> </button> <button class="btn btn-danger svelte-1bie0yp"> </button></div></div></div>'),a5=B('<div><button class="btn btn-sm btn-outline-secondary mb-3 w-100"> </button> <h2 class="card-title text-center mb-4"> </h2> <div class="punishment-tabs-container svelte-1bie0yp"><div class="punishment-tabs svelte-1bie0yp"><button><i class="fas fa-gavel svelte-1bie0yp"></i> <span> </span> <span class="tab-count svelte-1bie0yp"> </span></button> <button><i class="fas fa-exclamation-triangle svelte-1bie0yp"></i> <span> </span> <span class="tab-count svelte-1bie0yp"> </span></button> <button><i class="fas fa-sign-out-alt svelte-1bie0yp"></i> <span> </span> <span class="tab-count svelte-1bie0yp"> </span></button></div></div> <div class="punishment-sections svelte-1bie0yp"><!> <!> <!></div></div> <!> <!>',1);function r5(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(q,"$bansPage",t),a=()=>Xe(R,"$bansTotal",t),r=()=>Xe(le,"$bansPageSize",t),o=()=>Xe(ne,"$warnsPage",t),l=()=>Xe(ce,"$warnsTotal",t),d=()=>Xe(ye,"$warnsPageSize",t),h=()=>Xe($,"$kicksPage",t),m=()=>Xe(ue,"$kicksTotal",t),v=()=>Xe(X,"$kicksPageSize",t),b=()=>Xe(K,"$bansStatusFilter",t),y=()=>Xe(Jt,"$appStore",t),x=()=>Xe(xi,"$_",t),k=()=>Xe(j,"$allBans",t),C=()=>Xe(re,"$allWarns",t),A=()=>Xe(V,"$allKicks",t),T=()=>Xe(ee,"$bansSearch",t),I=()=>Xe(J,"$pagedBans",t),D=()=>Xe(ie,"$warnsSearch",t),N=()=>Xe(fe,"$pagedWarns",t),z=()=>Xe(Y,"$kicksSearch",t),H=()=>Xe(oe,"$pagedKicks",t),j=Mn([]),re=Mn([]),V=Mn([]),q=Mn(1),le=Mn(5),ee=Mn("");let W=ae(!0);const ne=Mn(1),ye=Mn(6),ie=Mn("");let Z=ae(!0);const $=Mn(1),X=Mn(5),Y=Mn("");let te=ae(!0);const K=Mn("all"),F=_s([j,ee,K],([Fe,et,nt])=>Fe.filter(lt=>(nt==="all"||lt.status===nt)&&(lt.playerName.toLowerCase().includes(et.toLowerCase())||String(lt.playerId).includes(et)||lt.reason.toLowerCase().includes(et.toLowerCase()))).sort((lt,wt)=>new Date(wt.issuedAt).getTime()-new Date(lt.issuedAt).getTime())),R=_s(F,Fe=>Fe.length,0),J=_s([F,q,le],([Fe,et,nt])=>Fe.slice((et-1)*nt,et*nt)),U=_s([re,ie],([Fe,et])=>Fe.filter(nt=>nt.playerName.toLowerCase().includes(et.toLowerCase())||String(nt.playerId).includes(et)||nt.reason.toLowerCase().includes(et.toLowerCase())).sort((nt,lt)=>new Date(lt.issuedAt).getTime()-new Date(nt.issuedAt).getTime())),ce=_s(U,Fe=>Fe.length,0),fe=_s([U,ne,ye],([Fe,et,nt])=>Fe.slice((et-1)*nt,et*nt));let ve=ae(null),Me=ae(!1),Se=ae(null),Pe=ae(!1);const Be=_s([V,Y],([Fe,et])=>Fe.filter(nt=>nt.playerName.toLowerCase().includes(et.toLowerCase())||String(nt.playerId).includes(et)||nt.reason.toLowerCase().includes(et.toLowerCase())).sort((nt,lt)=>new Date(lt.issuedAt).getTime()-new Date(nt.issuedAt).getTime())),ue=_s(Be,Fe=>Fe.length,0),oe=_s([Be,$,X],([Fe,et,nt])=>Fe.slice((et-1)*nt,et*nt));let me=ae("bans");pn(()=>{M(W,!0),M(Z,!0),M(te,!0),Ve("getPunishmentList").then(({status:Fe,data:et})=>{Fe==="ok"?(j.set(et.data.bans),re.set(et.data.warns),V.set(et.data.kicks)):ze("Failed to load punishment list","error"),M(W,!1),M(Z,!1),M(te,!1)})});function Le(){q.set(1)}function Oe(){ne.set(1)}function _e(){$.set(1)}function be(){s()<Math.ceil(a()/r())&&q.set(s()+1)}function Te(){s()>1&&q.set(s()-1)}function pe(){o()<Math.ceil(l()/d())&&ne.set(o()+1)}function de(){o()>1&&ne.set(o()-1)}function ge(){h()<Math.ceil(m()/v())&&$.set(h()+1)}function xe(){h()>1&&$.set(h()-1)}function we(Fe){Ve("revokePunishment",{id:Fe.id}).then(({status:et,data:nt})=>{et==="ok"&&nt.status==="ok"?(ze(`Ban revoked for ${Fe.playerName}`,"success"),j.update(lt=>lt.map(wt=>wt.id===Fe.id?{...wt,status:"revoked"}:wt))):ze(`Failed to revoke punishment: ${nt.message}`,"error")})}function Re(Fe){M(ve,Fe,!0),M(Me,!0)}function qe(Fe){M(Se,Fe,!0),M(Pe,!0)}function Ge(){var Fe,et;u(Se)&&(u(Se).type==="ban"?j.update(nt=>nt.filter(lt=>{var wt;return lt.id!==((wt=u(Se))==null?void 0:wt.id)})):u(Se).type==="warn"?re.update(nt=>nt.filter(lt=>{var wt;return lt.id!==((wt=u(Se))==null?void 0:wt.id)})):u(Se).type==="kick"&&V.update(nt=>nt.filter(lt=>{var wt;return lt.id!==((wt=u(Se))==null?void 0:wt.id)})),Ve("deletePunishment",{id:(Fe=u(Se))==null?void 0:Fe.id,type:(et=u(Se))==null?void 0:et.type}).then(({status:nt,data:lt})=>{var wt;nt==="ok"&&lt.status==="ok"?ze(`Punishment deleted for ${(wt=u(Se))==null?void 0:wt.playerName}`,"success"):ze(`Failed to delete punishment: ${lt.message}`,"error")}),M(Pe,!1),M(Se,null))}b(),a(),s(),fn(()=>{const Fe=Math.max(1,Math.ceil(a()/r()));s()>Fe&&q.set(Fe)});var tt=a5(),Ye=yt(tt);let Je;var Ue=p(Ye);Ue.__click=[TE,e];var at=p(Ue),Ee=g(Ue,2),He=p(Ee),Ke=g(Ee,2),it=p(Ke),pt=p(it);let Tt;pt.__click=[LE,me];var mt=g(p(pt),2),zt=p(mt),oi=g(mt,2),Ai=p(oi),Kt=g(pt,2);let Wt;Kt.__click=[DE,me];var Rt=g(p(Kt),2),di=p(Rt),Ci=g(Rt,2),Ti=p(Ci),Qe=g(Kt,2);let Ce;Qe.__click=[EE,me];var Ae=g(p(Qe),2),xt=p(Ae),_t=g(Ae,2),bt=p(_t),Pt=g(Ke,2),Ht=p(Pt);{var Nt=Fe=>{var et=$E(),nt=p(et),lt=p(nt);lt.__change=ot=>K.set(ot.target.value);var wt=p(lt);wt.value=wt.__value="all";var Xt=p(wt),Ut=g(wt);Ut.value=Ut.__value="active";var ut=p(Ut),Bt=g(Ut);Bt.value=Bt.__value="revoked";var jt=p(Bt),Ft=g(lt,2);Ft.__input=ot=>ee.set(ot.target.value),Ft.__keydown=[IE,Le];var ct=g(nt,2);{var vt=ot=>{var Lt=OE();E(ot,Lt)},qt=ot=>{var Lt=Bi(),Dt=yt(Lt);{var $e=si=>{var li=BE(),ei=p(li);se(Li=>S(ei,Li),[()=>x()("pages.punishment.no_bans_found")]),E(si,li)},kt=si=>{var li=jE(),ei=yt(li),Li=p(ei);Vt(Li,5,I,Qi=>Qi.id,(Qi,sn)=>{var En=HE();let ps;var $t=g(p(En),2),hn=p($t),vi=p(hn),Ss=g(hn,2),ms=p(Ss),Cs=p(ms),Ms=g(ms,2),Ps=p(Ms),wa=g(Ss,2),As=p(wa),an=g($t,2),Ts=p(an),ka=g(an,2);{var Qa=ns=>{var Gn=zE();Gn.__click=[RE,Re,sn];var Js=p(Gn);se(gi=>S(Js,gi),[()=>x()("pages.punishment.revoke")]),E(ns,Gn)},ho=ns=>{var Gn=FE();Gn.__click=[NE,qe,sn],se(Js=>Ot(Gn,"title",Js),[()=>x()("pages.punishment.delete")]),E(ns,Gn)};Q(ka,ns=>{u(sn).status==="active"?ns(Qa):ns(ho,!1)})}se((ns,Gn,Js,gi,It)=>{ps=G(En,1,"punishment-item ban svelte-1bie0yp",null,ps,ns),S(vi,`${u(sn).playerName??""} (ID: ${u(sn).playerId??""})`),S(Cs,Gn),S(Ps,Js),S(As,gi),G(an,1,`status-badge ${u(sn).status??""}`,"svelte-1bie0yp"),S(Ts,It)},[()=>({revoked:u(sn).status==="revoked"}),()=>x()("pages.punishment.by",{values:{admin:u(sn).issuedBy}}),()=>x()("pages.punishment.at",{values:{date:new Date(u(sn).issuedAt).toLocaleString()}}),()=>x()("pages.punishment.reason",{values:{reason:u(sn).reason}}),()=>u(sn).status==="active"?x()("pages.punishment.active"):x()("pages.punishment.revoked")]),E(Qi,En)});var wi=g(ei,2),Et=p(wi);Et.__click=Te;var ft=g(Et,2),ai=p(ft),ci=g(ft,2);ci.__click=be;var bi=g(wi,2),yi=p(bi),ti=p(yi),Zi=g(yi,2);Zi.__change=()=>q.set(1);var nn=p(Zi);nn.value=nn.__value="5";var cn=g(nn);cn.value=cn.__value="10";var dn=g(cn);dn.value=dn.__value="15";var Cn=g(dn);Cn.value=Cn.__value="20",se((Qi,sn,En)=>{Et.disabled=s()===1,S(ai,`Page ${s()??""} of ${Qi??""}`),ci.disabled=sn,S(ti,En)},[()=>Math.max(1,Math.ceil(a()/r())),()=>s()>=Math.ceil(a()/r()),()=>x()("pages.punishment.show_amount")||"Show:"]),ur(Zi,r,Qi=>vo(le,Qi)),E(si,li)};Q(Dt,si=>{I().length===0?si($e):si(kt,!1)})}E(ot,Lt)};Q(ct,ot=>{u(W)?ot(vt):ot(qt,!1)})}se((ot,Lt,Dt,$e)=>{S(Xt,ot),S(ut,Lt),S(jt,Dt),Ot(Ft,"placeholder",$e)},[()=>x()("pages.punishment.bans"),()=>x()("pages.punishment.active"),()=>x()("pages.punishment.revoked"),()=>x()("pages.punishment.search_bans")]),ur(lt,b,ot=>vo(K,ot)),st(Ft,T,ot=>vo(ee,ot)),E(Fe,et)};Q(Ht,Fe=>{u(me)==="bans"&&Fe(Nt)})}var rt=g(Ht,2);{var dt=Fe=>{var et=YE(),nt=p(et),lt=p(nt);lt.__input=ut=>ie.set(ut.target.value),lt.__keydown=[VE,Oe];var wt=g(nt,2);{var Xt=ut=>{var Bt=WE();E(ut,Bt)},Ut=ut=>{var Bt=Bi(),jt=yt(Bt);{var Ft=vt=>{var qt=qE(),ot=p(qt);se(Lt=>S(ot,Lt),[()=>x()("pages.punishment.no_warns_found")]),E(vt,qt)},ct=vt=>{var qt=ZE(),ot=yt(qt),Lt=p(ot);Vt(Lt,5,N,yi=>yi.id,(yi,ti)=>{var Zi=GE(),nn=g(p(Zi),2),cn=p(nn),dn=p(cn),Cn=g(cn,2),Qi=p(Cn),sn=p(Qi),En=g(Qi,2),ps=p(En),$t=g(Cn,2),hn=p($t),vi=g(nn,2);vi.__click=[UE,qe,ti],se((Ss,ms,Cs,Ms)=>{S(dn,`${u(ti).playerName??""} (ID: ${u(ti).playerId??""})`),S(sn,Ss),S(ps,ms),S(hn,Cs),Ot(vi,"title",Ms)},[()=>x()("pages.punishment.by",{values:{admin:u(ti).issuedBy}}),()=>x()("pages.punishment.at",{values:{date:new Date(u(ti).issuedAt).toLocaleString()}}),()=>x()("pages.punishment.reason",{values:{reason:u(ti).reason}}),()=>x()("pages.punishment.delete")]),E(yi,Zi)});var Dt=g(ot,2),$e=p(Dt);$e.__click=de;var kt=g($e,2),si=p(kt),li=g(kt,2);li.__click=pe;var ei=g(Dt,2),Li=p(ei),wi=p(Li),Et=g(Li,2);Et.__change=()=>ne.set(1);var ft=p(Et);ft.value=ft.__value="5";var ai=g(ft);ai.value=ai.__value="10";var ci=g(ai);ci.value=ci.__value="15";var bi=g(ci);bi.value=bi.__value="20",se((yi,ti,Zi)=>{$e.disabled=o()===1,S(si,`Page ${o()??""} of ${yi??""}`),li.disabled=ti,S(wi,Zi)},[()=>Math.max(1,Math.ceil(l()/d())),()=>o()>=Math.ceil(l()/d()),()=>x()("pages.punishment.show_amount")||"Show:"]),ur(Et,d,yi=>vo(ye,yi)),E(vt,qt)};Q(jt,vt=>{N().length===0?vt(Ft):vt(ct,!1)})}E(ut,Bt)};Q(wt,ut=>{u(Z)?ut(Xt):ut(Ut,!1)})}se(ut=>Ot(lt,"placeholder",ut),[()=>x()("pages.punishment.search_warns")]),st(lt,D,ut=>vo(ie,ut)),E(Fe,et)};Q(rt,Fe=>{u(me)==="warns"&&Fe(dt)})}var Qt=g(rt,2);{var mi=Fe=>{var et=i5(),nt=p(et),lt=p(nt);lt.__input=ut=>Y.set(ut.target.value),lt.__keydown=[KE,_e];var wt=g(nt,2);{var Xt=ut=>{var Bt=XE();E(ut,Bt)},Ut=ut=>{var Bt=Bi(),jt=yt(Bt);{var Ft=vt=>{var qt=JE(),ot=p(qt);se(Lt=>S(ot,Lt),[()=>x()("pages.punishment.no_kicks_found")]),E(vt,qt)},ct=vt=>{var qt=t5(),ot=yt(qt),Lt=p(ot);Vt(Lt,5,H,yi=>yi.id,(yi,ti)=>{var Zi=e5(),nn=g(p(Zi),2),cn=p(nn),dn=p(cn),Cn=g(cn,2),Qi=p(Cn),sn=p(Qi),En=g(Qi,2),ps=p(En),$t=g(Cn,2),hn=p($t),vi=g(nn,2);vi.__click=[QE,qe,ti],se((Ss,ms,Cs,Ms)=>{S(dn,`${u(ti).playerName??""} (ID: ${u(ti).playerId??""})`),S(sn,Ss),S(ps,ms),S(hn,Cs),Ot(vi,"title",Ms)},[()=>x()("pages.punishment.by",{values:{admin:u(ti).issuedBy}}),()=>x()("pages.punishment.at",{values:{date:new Date(u(ti).issuedAt).toLocaleString()}}),()=>x()("pages.punishment.reason",{values:{reason:u(ti).reason}}),()=>x()("pages.punishment.delete")]),E(yi,Zi)});var Dt=g(ot,2),$e=p(Dt);$e.__click=xe;var kt=g($e,2),si=p(kt),li=g(kt,2);li.__click=ge;var ei=g(Dt,2),Li=p(ei),wi=p(Li),Et=g(Li,2);Et.__change=()=>$.set(1);var ft=p(Et);ft.value=ft.__value="5";var ai=g(ft);ai.value=ai.__value="10";var ci=g(ai);ci.value=ci.__value="15";var bi=g(ci);bi.value=bi.__value="20",se((yi,ti,Zi)=>{$e.disabled=h()===1,S(si,`Page ${h()??""} of ${yi??""}`),li.disabled=ti,S(wi,Zi)},[()=>Math.max(1,Math.ceil(m()/v())),()=>h()>=Math.ceil(m()/v()),()=>x()("pages.punishment.show_amount")||"Show:"]),ur(Et,v,yi=>vo(X,yi)),E(vt,qt)};Q(jt,vt=>{H().length===0?vt(Ft):vt(ct,!1)})}E(ut,Bt)};Q(wt,ut=>{u(te)?ut(Xt):ut(Ut,!1)})}se(ut=>Ot(lt,"placeholder",ut),[()=>x()("pages.punishment.search_kicks")]),st(lt,z,ut=>vo(Y,ut)),E(Fe,et)};Q(Qt,Fe=>{u(me)==="kicks"&&Fe(mi)})}var Ii=g(Ye,2);{var Ji=Fe=>{var et=n5(),nt=p(et),lt=p(nt),wt=p(lt),Xt=g(lt,2),Ut=p(Xt);Po(Ut,()=>{var ot,Lt;return x()("pages.punishment.revoke_confirm_player",{values:{player:(ot=u(ve))==null?void 0:ot.playerName,id:(Lt=u(ve))==null?void 0:Lt.playerId}})});var ut=g(Xt,2),Bt=p(ut);Po(Bt,()=>{var ot;return x()("pages.punishment.revoke_confirm_reason",{values:{reason:(ot=u(ve))==null?void 0:ot.reason}})});var jt=g(ut,2),Ft=p(jt);Ft.__click=[PE,Me,ve];var ct=p(Ft),vt=g(Ft,2);vt.__click=[ME,ve,we,Me];var qt=p(vt);se((ot,Lt,Dt)=>{S(wt,ot),S(ct,Lt),S(qt,Dt)},[()=>x()("pages.punishment.revoke_confirm_title")||"Are you sure you want to revoke this ban?",()=>x()("modals.cancel"),()=>x()("pages.punishment.revoke")]),gt(3,nt,()=>Ki,()=>({duration:200,start:.9})),gt(3,et,()=>Fi,()=>({duration:200})),E(Fe,et)};Q(Ii,Fe=>{u(Me)&&Fe(Ji)})}var bn=g(Ii,2);{var Ri=Fe=>{var et=s5(),nt=p(et),lt=p(nt),wt=p(lt),Xt=g(lt,2),Ut=p(Xt);Po(Ut,()=>{var ot,Lt;return x()("pages.punishment.delete_confirm_player",{values:{player:(ot=u(Se))==null?void 0:ot.playerName,id:(Lt=u(Se))==null?void 0:Lt.playerId}})});var ut=g(Xt,2),Bt=p(ut);Po(Bt,()=>{var ot;return x()("pages.punishment.delete_confirm_reason",{values:{reason:(ot=u(Se))==null?void 0:ot.reason}})});var jt=g(ut,2),Ft=p(jt);Ft.__click=[AE,Pe,Se];var ct=p(Ft),vt=g(Ft,2);vt.__click=Ge;var qt=p(vt);se((ot,Lt,Dt)=>{S(wt,ot),S(ct,Lt),S(qt,Dt)},[()=>x()("pages.punishment.delete_confirm_title"),()=>x()("modals.cancel"),()=>x()("pages.punishment.delete")]),gt(3,nt,()=>Ki,()=>({duration:200,start:.9})),gt(3,et,()=>Fi,()=>({duration:200})),E(Fe,et)};Q(bn,Fe=>{u(Pe)&&Fe(Ri)})}se((Fe,et,nt,lt,wt,Xt,Ut,ut,Bt)=>{Je=G(Ye,1,"page-container svelte-1bie0yp",null,Je,Fe),S(at,`← ${et??""}`),S(He,nt),Tt=G(pt,1,"punishment-tab svelte-1bie0yp",null,Tt,lt),S(zt,wt),S(Ai,k().length),Wt=G(Kt,1,"punishment-tab svelte-1bie0yp",null,Wt,Xt),S(di,Ut),S(Ti,C().length),Ce=G(Qe,1,"punishment-tab svelte-1bie0yp",null,Ce,ut),S(xt,Bt),S(bt,A().length)},[()=>({light:!y().darkMode}),()=>x()("pages.punishment.back")||"Back to Settings",()=>x()("pages.punishment.title")||"Punishment List",()=>({active:u(me)==="bans"}),()=>x()("pages.punishment.bans"),()=>({active:u(me)==="warns"}),()=>x()("pages.punishment.warns"),()=>({active:u(me)==="kicks"}),()=>x()("pages.punishment.kicks")]),E(i,tt),Yt(),n()}hi(["click","change","input","keydown"]);function o5(i,e,t,n){M(e,!u(e)),Mf(Jt,Hn(t).showActionTypeLabels=u(e),Hn(t)),localStorage.setItem("showActionTypeLabels",String(u(e))),ze(n()("notifications.settings.actiontypeenabled",{values:{actionType:u(e)?"enabled":"disabled"}}),"info")}function l5(i,e,t){M(e,!u(e)),localStorage.setItem("uiSoundsEnabled",String(u(e))),ze(t()("notifications.settings.uisoundsenabled",{values:{uiSounds:u(e)?"enabled":"disabled"}}),"info")}function c5(i,e,t,n){M(e,!u(e)),localStorage.setItem("919admin_seeThroughMode",String(u(e))),Mf(Jt,Hn(t).seeThroughMode=u(e),Hn(t)),ze(n()("notifications.settings.seethroughenabled",{values:{state:u(e)?"enabled":"disabled"}}),"info")}function d5(i,e,t,n){const s=i.target;M(e,s.value,!0),localStorage.setItem("selectedFont",u(e)),t(u(e)),ze(n()("notifications.settings.fontchanged",{values:{font:u(e)}}),"info")}function h5(i,e){const t=i.target;M(e,t.value,!0),localStorage.setItem("textSize",u(e));const n={default:"100%",smaller:"92%",smallest:"85%"};document.documentElement.style.setProperty("--app-font-size-root",n[u(e)]||"100%"),ze(`Text size set to ${u(e)}`,"info")}function u5(i,e){const t=i.target;M(e,t.value,!0),NP(u(e)),ze(`Interface layout changed to ${u(e)}`,"info")}var f5=B('<option class="svelte-o01gts"> </option>'),p5=B('<option class="svelte-o01gts"> </option>'),m5=Zl('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 13l3 3 7-7" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),v5=Zl('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),g5=Zl('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><polygon points="11,5 6,9 2,9 2,15 6,15 11,19" fill="currentColor"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),_5=Zl('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><polygon points="11,5 6,9 2,9 2,15 6,15 11,19" fill="currentColor"></polygon><path d="M23 9l-6 6M17 9l6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>'),b5=Zl('<svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 13l3 3 7-7" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),y5=Zl('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>'),x5=(i,e)=>e.setCurrentPage("adminusers"),w5=B('<button><div class="admin-button-icon svelte-o01gts"><i class="fas fa-user-shield"></i></div> <div class="admin-button-content svelte-o01gts"><span class="admin-button-title svelte-o01gts"> </span> <span class="admin-button-desc svelte-o01gts">Manage admin users and permissions</span></div> <div class="admin-button-arrow svelte-o01gts"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></button>'),k5=(i,e)=>e.setCurrentPage("permissiongroups"),S5=B('<button><div class="admin-button-icon svelte-o01gts"><i class="fas fa-users-cog"></i></div> <div class="admin-button-content svelte-o01gts"><span class="admin-button-title svelte-o01gts"> </span> <span class="admin-button-desc svelte-o01gts">Configure permission groups</span></div> <div class="admin-button-arrow svelte-o01gts"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></button>'),C5=(i,e)=>e.setCurrentPage("punishmentlist"),M5=B('<button><div class="admin-button-icon svelte-o01gts"><i class="fas fa-gavel"></i></div> <div class="admin-button-content svelte-o01gts"><span class="admin-button-title svelte-o01gts"> </span> <span class="admin-button-desc svelte-o01gts">View and manage punishments</span></div> <div class="admin-button-arrow svelte-o01gts"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg></div></button>'),P5=B('<div><div class="section-header svelte-o01gts"><h4>Administration</h4></div> <div class="admin-buttons svelte-o01gts"><!> <!> <!></div></div>'),A5=B('<div class="settings-container svelte-o01gts"><div class="settings-panel svelte-o01gts"><div class="settings-header svelte-o01gts"><h2 class="card-title"> </h2></div> <div><div class="section-header svelte-o01gts"><h4> </h4></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts">🌐</div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div class="language-switcher-inline svelte-o01gts"><!></div></div></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts">🔤</div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div><select></select></div></div></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts">🅰️</div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div><select></select></div></div></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts">🗔</div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div><select><option class="svelte-o01gts"> </option><option class="svelte-o01gts"> </option><option class="svelte-o01gts"> </option></select></div></div></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts">🏷️</div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div class="custom-toggle-container svelte-o01gts"><button aria-label="Toggle action type labels"><div class="toggle-track svelte-o01gts"><div class="toggle-thumb svelte-o01gts"><div class="thumb-icon svelte-o01gts"><!></div></div></div></button></div></div></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts"> </div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div class="custom-toggle-container svelte-o01gts"><button aria-label="Toggle UI sounds"><div class="toggle-track svelte-o01gts"><div class="toggle-thumb svelte-o01gts"><div class="thumb-icon svelte-o01gts"><!></div></div></div></button></div></div></div> <div><div class="setting-header svelte-o01gts"><div class="setting-info svelte-o01gts"><div class="setting-icon svelte-o01gts">🫥</div> <div class="setting-content svelte-o01gts"><span> </span> <span> </span></div></div> <div class="custom-toggle-container svelte-o01gts"><button aria-label="Toggle see-through mode"><div class="toggle-track svelte-o01gts"><div class="toggle-thumb svelte-o01gts"><div class="thumb-icon svelte-o01gts"><!></div></div></div></button></div></div></div></div> <div><div class="section-header svelte-o01gts"><h4> </h4></div> <!></div> <!></div></div>');function T5(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(Gt(localStorage.getItem("showActionTypeLabels")==="true"||!1)),o=ae(localStorage.getItem("uiSoundsEnabled")!=="false"),l=ae(localStorage.getItem("919admin_seeThroughMode")==="true"),d=ae(Gt(localStorage.getItem("selectedFont")||"Poppins")),h=ae(Gt(localStorage.getItem("textSize")||"default"));const m=[{value:"Poppins",label:"Poppins (Default)"},{value:"Inter",label:"Inter"},{value:"Roboto",label:"Roboto"},{value:"Open Sans",label:"Open Sans"},{value:"Lato",label:"Lato"},{value:"Montserrat",label:"Montserrat"},{value:"Nunito",label:"Nunito"},{value:"Source Sans Pro",label:"Source Sans Pro"},{value:"Ubuntu",label:"Ubuntu"},{value:"system-ui",label:"System Font"}],v=[{value:"default",label:"Default"},{value:"smaller",label:"Smaller"},{value:"smallest",label:"Smallest"}];function b(gi){document.documentElement.style.setProperty("--app-font-family",gi)}fn(()=>{b(u(d))});let y=ae(Gt(s().panelFormFactor||"right"));var x=A5(),k=p(x),C=p(k),A=p(C),T=p(A),I=g(C,2);let D;var N=p(I),z=p(N);let H;var j=p(z),re=g(N,2);let V;var q=p(re),le=p(q),ee=g(p(le),2),W=p(ee);let ne;var ye=p(W),ie=g(W,2);let Z;var $=p(ie),X=g(le,2),Y=p(X);hw(Y,{});var te=g(re,2);let K;var F=p(te),R=p(F),J=g(p(R),2),U=p(J);let ce;var fe=p(U),ve=g(U,2);let Me;var Se=p(ve),Pe=g(R,2);let Be;var ue=p(Pe);let oe;gl(ue,()=>u(d));var me;ue.__change=[d5,d,b,a],Vt(ue,21,()=>m,Si,(gi,It)=>{var $n=f5(),mn={},ss=p($n);se(()=>{mn!==(mn=u(It).value)&&($n.value=($n.__value=u(It).value)??""),S(ss,u(It).label)}),E(gi,$n)});var Le=g(te,2);let Oe;var _e=p(Le),be=p(_e),Te=g(p(be),2),pe=p(Te);let de;var ge=p(pe),xe=g(pe,2);let we;var Re=p(xe),qe=g(be,2);let Ge;var tt=p(qe);let Ye;gl(tt,()=>u(h));var Je;tt.__change=[h5,h],Vt(tt,21,()=>v,Si,(gi,It)=>{var $n=p5(),mn={},ss=p($n);se(()=>{mn!==(mn=u(It).value)&&($n.value=($n.__value=u(It).value)??""),S(ss,u(It).label)}),E(gi,$n)});var Ue=g(Le,2);let at;var Ee=p(Ue),He=p(Ee),Ke=g(p(He),2),it=p(Ke);let pt;var Tt=p(it),mt=g(it,2);let zt;var oi=p(mt),Ai=g(He,2);let Kt;var Wt=p(Ai);let Rt;gl(Wt,()=>u(y));var di;Wt.__change=[u5,y];var Ci=p(Wt);Ci.value=Ci.__value="right";var Ti=p(Ci),Qe=g(Ci);Qe.value=Qe.__value="left";var Ce=p(Qe),Ae=g(Qe);Ae.value=Ae.__value="floating";var xt=p(Ae),_t=g(Ue,2);let bt;var Pt=p(_t),Ht=p(Pt),Nt=g(p(Ht),2),rt=p(Nt);let dt;var Qt=p(rt),mi=g(rt,2);let Ii;var Ji=p(mi),bn=g(Ht,2),Ri=p(bn);let Fe;Ri.__click=[o5,r,s,a];var et=p(Ri),nt=p(et),lt=p(nt),wt=p(lt);{var Xt=gi=>{var It=m5();E(gi,It)},Ut=gi=>{var It=v5();E(gi,It)};Q(wt,gi=>{u(r)?gi(Xt):gi(Ut,!1)})}var ut=g(_t,2);let Bt;var jt=p(ut),Ft=p(jt),ct=p(Ft),vt=p(ct),qt=g(ct,2),ot=p(qt);let Lt;var Dt=p(ot),$e=g(ot,2);let kt;var si=p($e),li=g(Ft,2),ei=p(li);let Li;ei.__click=[l5,o,a];var wi=p(ei),Et=p(wi),ft=p(Et),ai=p(ft);{var ci=gi=>{var It=g5();E(gi,It)},bi=gi=>{var It=_5();E(gi,It)};Q(ai,gi=>{u(o)?gi(ci):gi(bi,!1)})}var yi=g(ut,2);let ti;var Zi=p(yi),nn=p(Zi),cn=g(p(nn),2),dn=p(cn);let Cn;var Qi=p(dn),sn=g(dn,2);let En;var ps=p(sn),$t=g(nn,2),hn=p($t);let vi;hn.__click=[c5,l,s,a];var Ss=p(hn),ms=p(Ss),Cs=p(ms),Ms=p(Cs);{var Ps=gi=>{var It=b5();E(gi,It)},wa=gi=>{var It=y5();E(gi,It)};Q(Ms,gi=>{u(l)?gi(Ps):gi(wa,!1)})}var As=g(I,2);let an;var Ts=p(As),ka=p(Ts);let Qa;var ho=p(ka),ns=g(Ts,2);CE(ns,{});var Gn=g(As,2);{var Js=gi=>{var It=P5();let $n;var mn=p(It),ss=p(mn);let Sa;var Mr=g(mn,2),Ca=p(Mr);{var Pr=Vn=>{var Vi=w5();let Ls;Vi.__click=[x5,e];var Ma=g(p(Vi),2),as=p(Ma),Pa=p(as);se((Aa,ha)=>{Ls=G(Vi,1,"admin-button svelte-o01gts",null,Ls,Aa),S(Pa,ha)},[()=>({"admin-button-light":!s().darkMode}),()=>a()("pages.settings.adminusers")]),E(Vn,Vi)};Q(Ca,Vn=>{s().currentUserPermissions.includes("page:AdminUsers")&&Vn(Pr)})}var Ze=g(Ca,2);{var uo=Vn=>{var Vi=S5();let Ls;Vi.__click=[k5,e];var Ma=g(p(Vi),2),as=p(Ma),Pa=p(as);se((Aa,ha)=>{Ls=G(Vi,1,"admin-button svelte-o01gts",null,Ls,Aa),S(Pa,ha)},[()=>({"admin-button-light":!s().darkMode}),()=>a()("pages.settings.permissiongroups")]),E(Vn,Vi)};Q(Ze,Vn=>{s().currentUserPermissions.includes("page:PermissionGroups")&&Vn(uo)})}var fo=g(Ze,2);{var er=Vn=>{var Vi=M5();let Ls;Vi.__click=[C5,e];var Ma=g(p(Vi),2),as=p(Ma),Pa=p(as);se((Aa,ha)=>{Ls=G(Vi,1,"admin-button punishment-list-btn svelte-o01gts",null,Ls,Aa),S(Pa,ha)},[()=>({"admin-button-light":!s().darkMode}),()=>a()("pages.punishment.title")||"Punishment List"]),E(Vn,Vi)};Q(fo,Vn=>{s().currentUserPermissions.includes("page:PunishmentList")&&Vn(er)})}se((Vn,Vi)=>{$n=G(It,1,"settings-section svelte-o01gts",null,$n,Vn),Sa=G(ss,1,"section-title svelte-o01gts",null,Sa,Vi)},[()=>({"settings-section-light":!s().darkMode}),()=>({"section-title-light":!s().darkMode})]),E(gi,It)};Q(Gn,gi=>{(s().currentUserPermissions.includes("page:AdminUsers")||s().currentUserPermissions.includes("page:PermissionGroups")||s().currentUserPermissions.includes("page:PunishmentList"))&&gi(Js)})}se((gi,It,$n,mn,ss,Sa,Mr,Ca,Pr,Ze,uo,fo,er,Vn,Vi,Ls,Ma,as,Pa,Aa,ha,Qf,Gd,Zd,ep,tp,Ql,ip,Yd,Kd,Jo,tr,np,po,Ds,Xd,Jd,sp,ec,tc,ap,rp,Qd,op,Ws,Ar,lp,ua,cp,Tr,dp,mo,eh,Qo)=>{S(T,gi),D=G(I,1,"settings-section svelte-o01gts",null,D,It),H=G(z,1,"section-title svelte-o01gts",null,H,$n),S(j,mn),V=G(re,1,"setting-card svelte-o01gts",null,V,ss),ne=G(W,1,"setting-label svelte-o01gts",null,ne,Sa),S(ye,Mr),Z=G(ie,1,"setting-description svelte-o01gts",null,Z,Ca),S($,Pr),K=G(te,1,"setting-card svelte-o01gts",null,K,Ze),ce=G(U,1,"setting-label svelte-o01gts",null,ce,uo),S(fe,fo),Me=G(ve,1,"setting-description svelte-o01gts",null,Me,er),S(Se,Vn),Be=G(Pe,1,"font-selector-inline select-wrap svelte-o01gts",null,Be,Vi),oe=G(ue,1,"form-select font-select svelte-o01gts",null,oe,Ls),me!==(me=u(d))&&(ue.value=(ue.__value=u(d))??"",Ur(ue,u(d))),Oe=G(Le,1,"setting-card svelte-o01gts",null,Oe,Ma),de=G(pe,1,"setting-label svelte-o01gts",null,de,as),S(ge,Pa),we=G(xe,1,"setting-description svelte-o01gts",null,we,Aa),S(Re,ha),Ge=G(qe,1,"font-selector-inline select-wrap svelte-o01gts",null,Ge,Qf),Ye=G(tt,1,"form-select font-select svelte-o01gts",null,Ye,Gd),Je!==(Je=u(h))&&(tt.value=(tt.__value=u(h))??"",Ur(tt,u(h))),at=G(Ue,1,"setting-card svelte-o01gts",null,at,Zd),pt=G(it,1,"setting-label svelte-o01gts",null,pt,ep),S(Tt,tp),zt=G(mt,1,"setting-description svelte-o01gts",null,zt,Ql),S(oi,ip),Kt=G(Ai,1,"font-selector-inline select-wrap svelte-o01gts",null,Kt,Yd),Rt=G(Wt,1,"form-select font-select svelte-o01gts",null,Rt,Kd),di!==(di=u(y))&&(Wt.value=(Wt.__value=u(y))??"",Ur(Wt,u(y))),S(Ti,Jo),S(Ce,tr),S(xt,np),bt=G(_t,1,"setting-card svelte-o01gts",null,bt,po),dt=G(rt,1,"setting-label svelte-o01gts",null,dt,Ds),S(Qt,Xd),Ii=G(mi,1,"setting-description svelte-o01gts",null,Ii,Jd),S(Ji,sp),Fe=G(Ri,1,`custom-toggle ${u(r)?"active":""}`,"svelte-o01gts",Fe,ec),Bt=G(ut,1,"setting-card svelte-o01gts",null,Bt,tc),S(vt,u(o)?"🔊":"🔇"),Lt=G(ot,1,"setting-label svelte-o01gts",null,Lt,ap),S(Dt,rp),kt=G($e,1,"setting-description svelte-o01gts",null,kt,Qd),S(si,op),Li=G(ei,1,`custom-toggle ${u(o)?"active":""}`,"svelte-o01gts",Li,Ws),ti=G(yi,1,"setting-card svelte-o01gts",null,ti,Ar),Cn=G(dn,1,"setting-label svelte-o01gts",null,Cn,lp),S(Qi,ua),En=G(sn,1,"setting-description svelte-o01gts",null,En,cp),S(ps,Tr),vi=G(hn,1,`custom-toggle ${u(l)?"active":""}`,"svelte-o01gts",vi,dp),an=G(As,1,"settings-section svelte-o01gts",null,an,mo),Qa=G(ka,1,"section-title svelte-o01gts",null,Qa,eh),S(ho,Qo)},[()=>a()("pages.settings.title"),()=>({"settings-section-light":!s().darkMode}),()=>({"section-title-light":!s().darkMode}),()=>a()("pages.settings.interface"),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.language"),()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.languagedescription"),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.fontfamily"),()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.fontfamilydescription"),()=>({light:!s().darkMode}),()=>({"font-select-light":!s().darkMode}),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.textsize")||"Text Size",()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.textsizedescription")||"Make text smaller if you prefer a denser interface",()=>({light:!s().darkMode}),()=>({"font-select-light":!s().darkMode}),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.interfacelayout"),()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.interfacelayoutdescription"),()=>({light:!s().darkMode}),()=>({"font-select-light":!s().darkMode}),()=>a()("pages.settings.layout_right_default"),()=>a()("pages.settings.layout_left"),()=>a()("pages.settings.layout_floating"),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.showactiontypelabels"),()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.showactiontypelabelsdescription"),()=>({"custom-toggle-light":!s().darkMode}),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.uisounds"),()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.uisoundsdescription"),()=>({"custom-toggle-light":!s().darkMode}),()=>({"setting-card-light":!s().darkMode}),()=>({"setting-label-light":!s().darkMode}),()=>a()("pages.settings.seethrough")||"See-Through Mode",()=>({"setting-description-light":!s().darkMode}),()=>a()("pages.settings.seethroughdescription")||"Reduce panel opacity so you can see the game through it",()=>({"custom-toggle-light":!s().darkMode}),()=>({"settings-section-light":!s().darkMode}),()=>({"section-title-light":!s().darkMode}),()=>a()("pages.settings.appearance")]),E(i,x),Yt(),n()}hi(["change","click"]);function L5(i,e,t,n){if(!e().trim()){M(t,!0);return}M(t,!1),n.onConfirmGive()}var D5=B('<div class="overlay-backdrop svelte-1ib0iv3"><div><h5> </h5> <input type="text" class="form-control big-input mb-1 svelte-1ib0iv3" min="1"> <small class="text-muted mb-3 d-block text-center"> </small> <div class="d-flex gap-2 justify-content-end"><button class="btn btn-secondary"> </button> <button class="btn btn-success"> </button></div></div></div>'),E5=(i,e)=>M(e,!1),I5=B('<div class="invalid-feedback svelte-1ib0iv3"> </div>'),O5=B('<div class="overlay-backdrop svelte-1ib0iv3"><div><h5> </h5> <input type="text" class="form-control big-input mb-1 svelte-1ib0iv3" min="1"> <small class="text-muted mb-3 d-block text-center"> </small> <div class="player-id-input svelte-1ib0iv3"><input type="text"> <!></div> <div class="d-flex gap-2 justify-content-end mt-3"><button class="btn btn-secondary"> </button> <button class="btn btn-success"> </button></div></div></div>'),B5=B("<!> <!>",1);function R5(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t);let a=Yi(e,"amount",15),r=Yi(e,"targetPlayerId",15),o=ae(!1);function l(x){x.preventDefault(),x.deltaY<0?MP(a):a(Math.max(1,a()-1))}function d(x){x.focus()}var h=B5(),m=yt(h);{var v=x=>{var k=D5(),C=p(k);let A;var T=p(C),I=p(T),D=g(T,2);Fn(()=>st(D,a)),Xs(D,le=>d==null?void 0:d(le));var N=g(D,2),z=p(N),H=g(N,2),j=p(H);j.__click=function(...le){var ee;(ee=e.onCancelSpawn)==null||ee.apply(this,le)};var re=p(j),V=g(j,2);V.__click=function(...le){var ee;(ee=e.onConfirmSpawn)==null||ee.apply(this,le)};var q=p(V);se((le,ee,W,ne,ye)=>{A=G(C,1,"modal-box svelte-1ib0iv3",null,A,le),S(I,ee),S(z,W),S(re,ne),S(q,ye)},[()=>({light:!e.darkMode}),()=>s()("pages.items.spawn",{values:{item:e.selectedItem.label}}),()=>s()("pages.items.scrollhint"),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),Mi("wheel",D,l),gt(3,C,()=>Ki,()=>({duration:200,start:.9})),gt(3,k,()=>Fi,()=>({duration:200})),E(x,k)};Q(m,x=>{e.showSpawn&&e.selectedItem&&x(v)})}var b=g(m,2);{var y=x=>{var k=O5(),C=p(k);let A;var T=p(C),I=p(T),D=g(T,2);Fn(()=>st(D,a)),Xs(D,ye=>d==null?void 0:d(ye));var N=g(D,2),z=p(N),H=g(N,2),j=p(H);j.__input=[E5,o];var re=g(j,2);{var V=ye=>{var ie=I5(),Z=p(ie);se($=>S(Z,$),[()=>s()("pages.items.playeriderror")]),E(ye,ie)};Q(re,ye=>{u(o)&&ye(V)})}var q=g(H,2),le=p(q);le.__click=function(...ye){var ie;(ie=e.onCancelGive)==null||ie.apply(this,ye)};var ee=p(le),W=g(le,2);W.__click=[L5,r,o,e];var ne=p(W);se((ye,ie,Z,$,X,Y)=>{A=G(C,1,"modal-box svelte-1ib0iv3",null,A,ye),S(I,ie),S(z,Z),G(j,1,`form-control big-input ${u(o)?"is-invalid":""}`,"svelte-1ib0iv3"),Ot(j,"placeholder",$),S(ee,X),S(ne,Y)},[()=>({light:!e.darkMode}),()=>s()("pages.items.give",{values:{item:e.selectedItem.label}}),()=>s()("pages.items.scrollhint"),()=>s()("pages.items.playerid"),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),Mi("wheel",D,l),st(j,r),gt(3,C,()=>Ki,()=>({duration:200,start:.9})),gt(3,k,()=>Fi,()=>({duration:200})),E(x,k)};Q(b,x=>{e.showGive&&e.selectedItem&&x(y)})}E(i,h),Yt(),n()}hi(["click","input"]);var z5=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),N5=(i,e)=>M(e,""),F5=B('<button class="btn btn-danger clear-btn" type="button" aria-label="Clear search"><i class="fas fa-times"></i></button>'),H5=(i,e,t)=>e(i,u(t)),j5=B('<div><img class="item-image svelte-13najka"> <div><div class="overlay-label svelte-13najka"> </div> <div class="overlay-name svelte-13najka"> </div> <div class="overlay-weight svelte-13najka"><i class="fas fa-weight-hanging svelte-13najka"></i> </div></div></div>'),$5=B('<div class="loading-more svelte-13najka"><div class="spinner-border spinner-border-sm text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),V5=B('<div class="view svelte-13najka"><div class="header svelte-13najka"><h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <small class="text-muted"> </small></div> <div><span class="input-group-text svelte-13najka"><i class="fas fa-search"></i></span> <input type="text" class="form-control svelte-13najka"> <!></div> <small class="hint-text text-muted svelte-13najka"> </small></div> <div class="item-grid svelte-13najka"><!> <!></div></div>'),W5=B('<div class="page-container svelte-13najka"><!></div> <!>',1);function q5(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=ae(!0),l=ae(""),d=qi(()=>u(r).filter(Z=>{const $=typeof(Z==null?void 0:Z.name)=="string"?Z.name:String((Z==null?void 0:Z.name)??"").trim(),X=typeof(Z==null?void 0:Z.label)=="string"?Z.label:String((Z==null?void 0:Z.label)??"").trim();return $.toLowerCase().includes(u(l).toLowerCase())||X.toLowerCase().includes(u(l).toLowerCase())}));const h=70;let m=ae(1),v=ae(!1),b=ae(!1),y=ae(!1),x=ae(null),k=ae(1),C=ae(""),A=qi(()=>u(d).slice(0,u(m)*h));pn(()=>{T()});async function T(){M(o,!0);const{status:Z,data:$}=await Ve("getAllItems");if(Z==="ok"){const X=Array.isArray($)?$:[];let Y=0;const te=X.map((K,F)=>{const R=K,J=typeof(R==null?void 0:R.name)=="string",U=typeof(R==null?void 0:R.label)=="string";(!J||!U)&&Y++;const ce=J?String(R.name):U?String(R.label).replace(/\s+/g,"_").toLowerCase():"",fe=U?String(R.label):J?String(R.name):"Unknown Item",ve=typeof(R==null?void 0:R.description)=="string"?R.description:"",Me=typeof(R==null?void 0:R.image)=="string"?R.image:"placeholder_item.png",Se=typeof(R==null?void 0:R.weight)=="number"?R.weight:Number(R==null?void 0:R.weight),Pe=Number.isFinite(Se)?Se:0;return{name:ce,label:fe,description:ve,image:Me,weight:Pe}});M(r,te,!0),Y>0&&console.warn(`[Items] Sanitized ${Y} item(s) with invalid name/label.`)}else ze(s()("notifications.items.failedtoloaditems"),"error");M(o,!1)}function I(Z){return Ld()?`${Z}`:"placeholder_item.png"}function D(Z){try{const $=document.createElement("input");$.value=Z,$.setAttribute("readonly",""),$.style.position="fixed",$.style.opacity="0",$.style.pointerEvents="none",document.body.appendChild($),$.select(),document.execCommand("copy"),document.body.removeChild($)}catch($){console.error("Copy failed",$)}}function N(Z,$){if(Z.ctrlKey||Z.metaKey){D($.name),ze(s()("pages.installation.copied"),"success");return}Z.shiftKey?H($):z($)}function z(Z){M(x,Z,!0),M(k,1),M(b,!0)}function H(Z){M(x,Z,!0),M(k,1),M(C,""),M(y,!0)}async function j(){if(u(x)){const{status:Z,data:$}=await Ve("spawnItem",{item:u(x).name,amount:u(k)});Z==="ok"&&($.status==="ok"?(ze(s()("notifications.items.itemspawned",{values:{amount:u(k),item:u(x).label}}),"success"),ri("sounds/action.mp3")):ze(s()("notifications.items.failedtospawnitem",{values:{item:u(x).label}}),"error")),M(b,!1)}}async function re(){if(u(x)&&u(C).trim()){const{status:Z,data:$}=await Ve("giveItem",{item:u(x).name,amount:u(k),targetPlayerId:u(C)});Z==="ok"&&($.status==="ok"?(ze(s()("notifications.items.itemgave",{values:{amount:u(k),item:u(x).label,target:u(C)}}),"success"),ri("sounds/action.mp3")):ze(s()("notifications.items.failedtogiveitem",{values:{item:u(x).label}}),"error")),M(y,!1)}}function V(Z){const $=Z.target;$.scrollHeight-$.scrollTop-$.clientHeight<100&&!u(v)&&u(A).length<u(d).length&&q()}async function q(){M(v,!0),await new Promise(Z=>setTimeout(Z,200)),Yr(m),M(v,!1)}var le=W5(),ee=yt(le),W=p(ee);{var ne=Z=>{var $=z5(),X=p($),Y=p(X),te=p(Y);se(K=>S(te,K),[()=>s()("pages.items.loading")]),E(Z,$)},ye=Z=>{var $=V5(),X=p($),Y=p(X),te=p(Y),K=g(Y,2),F=p(K),R=p(F),J=g(F,2),U=p(J),ce=g(K,2);let fe;var ve=g(p(ce),2),Me=g(ve,2);{var Se=Oe=>{var _e=F5();_e.__click=[N5,l],E(Oe,_e)};Q(Me,Oe=>{u(l)&&Oe(Se)})}var Pe=g(ce,2),Be=p(Pe),ue=g(X,2),oe=p(ue);Vt(oe,17,()=>u(A),Si,(Oe,_e)=>{var be=j5();be.__click=[H5,N,_e];var Te=p(be),pe=g(Te,2),de=p(pe),ge=p(de),xe=g(de,2),we=p(xe),Re=g(xe,2),qe=g(p(Re));se(Ge=>{G(be,1,`item-card ${a().darkMode?"":"item-card-light"}`,"svelte-13najka"),Ot(be,"title",u(_e).label),Ot(Te,"src",Ge),Ot(Te,"alt",u(_e).label),G(pe,1,`item-name ${a().darkMode?"":"item-name-light"}`,"svelte-13najka"),S(ge,u(_e).label),S(we,u(_e).name),S(qe,` ${u(_e).weight??""}`)},[()=>I(u(_e).image)]),Mi("error",Te,Ge=>{const tt=Ge.target;tt&&(tt.src="placeholder_item.png")}),E(Oe,be)});var me=g(oe,2);{var Le=Oe=>{var _e=$5(),be=p(_e),Te=p(be),pe=p(Te);se(de=>S(pe,de),[()=>s()("pages.items.loadingmore")]),E(Oe,_e)};Q(me,Oe=>{u(v)&&Oe(Le)})}se((Oe,_e,be,Te,pe,de)=>{S(te,Oe),S(R,_e),S(U,be),fe=G(ce,1,"input-group position-relative mb-2 svelte-13najka",null,fe,Te),Ot(ve,"placeholder",pe),S(Be,de)},[()=>s()("pages.items.title"),()=>s()("pages.items.itemlist"),()=>s()("pages.items.totals",{values:{count:u(r).length}}),()=>({light:!a().darkMode}),()=>s()("pages.items.searchitems"),()=>s()("pages.items.hint")]),st(ve,()=>u(l),Oe=>M(l,Oe)),Mi("scroll",ue,V),E(Z,$)};Q(W,Z=>{u(o)?Z(ne):Z(ye,!1)})}var ie=g(ee,2);R5(ie,{get selectedItem(){return u(x)},onCancelSpawn:()=>M(b,!1),onCancelGive:()=>M(y,!1),onConfirmSpawn:j,onConfirmGive:re,get darkMode(){return a().darkMode},get showSpawn(){return u(b)},get showGive(){return u(y)},get amount(){return u(k)},set amount(Z){M(k,Z,!0)},get targetPlayerId(){return u(C)},set targetPlayerId(Z){M(C,Z,!0)}}),E(i,le),Yt(),n()}hi(["click"]);var U5=(i,e)=>i.key==="Enter"&&e.onConfirmGarage(),G5=B('<div class="overlay-backdrop svelte-1um2n5h"><div><h5> </h5> <input type="text" class="form-control big-input mb-3 svelte-1um2n5h"> <div class="d-flex gap-2 justify-content-end"><button class="btn btn-secondary"> </button> <button class="btn btn-success"> </button></div></div></div>');function Z5(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t);let a=Yi(e,"targetPlayerId",15);function r(h){e.showGarage&&h.focus()}var o=Bi(),l=yt(o);{var d=h=>{var m=G5(),v=p(m);let b;var y=p(v),x=p(y),k=g(y,2);k.__keydown=[U5,e],Fn(()=>st(k,a)),Xs(k,N=>r==null?void 0:r(N));var C=g(k,2),A=p(C);A.__click=function(...N){var z;(z=e.onCancelGarage)==null||z.apply(this,N)};var T=p(A),I=g(A,2);I.__click=function(...N){var z;(z=e.onConfirmGarage)==null||z.apply(this,N)};var D=p(I);se((N,z,H,j,re)=>{b=G(v,1,"modal-box svelte-1um2n5h",null,b,N),S(x,z),Ot(k,"placeholder",H),S(T,j),S(D,re)},[()=>({light:!e.darkMode}),()=>s()("pages.vehicles.addtogarage",{values:{vehicle:e.selectedVehicle.name}}),()=>s()("pages.vehicles.playerid"),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),gt(3,v,()=>Ki,()=>({duration:200,start:.9})),gt(3,m,()=>Fi,()=>({duration:200})),E(h,m)};Q(l,h=>{e.showGarage&&e.selectedVehicle&&h(d)})}E(i,o),Yt(),n()}hi(["keydown","click"]);var Y5=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),K5=(i,e,t)=>{M(e,""),t()},X5=B('<button class="btn btn-danger clear-btn" type="button" aria-label="Clear search"><i class="fas fa-times"></i></button>'),J5=B('<option class="svelte-hihz04"> </option>'),Q5=(i,e,t)=>e(i,u(t)),eI=(i,e,t)=>e(i,u(t)),tI=B('<div><div class="vehicle-info svelte-hihz04"><div class="vehicle-label svelte-hihz04"><i class="fas fa-car svelte-hihz04"></i> </div> <div class="vehicle-brand svelte-hihz04"><i class="fas fa-industry svelte-hihz04"></i> </div> <div class="vehicle-tags svelte-hihz04"><span class="tag svelte-hihz04"><i class="fas fa-tags svelte-hihz04"></i> </span></div></div> <div class="vehicle-meta svelte-hihz04"><span class="model svelte-hihz04"> </span> <span class="price svelte-hihz04"> </span></div></div>'),iI=B('<div class="loading-more svelte-hihz04"><div class="spinner-border spinner-border-sm text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),nI=B('<div class="view svelte-hihz04"><div class="header svelte-hihz04"><h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <small class="text-muted"> </small></div> <div class="controls-row svelte-hihz04"><div><span class="input-group-text svelte-hihz04"><i class="fas fa-search"></i></span> <input type="text" class="form-control svelte-hihz04"> <!></div> <div><select aria-label="Filter by category"><option class="svelte-hihz04"> </option><!></select></div></div></div> <small class="hint-text text-muted svelte-hihz04"> </small> <div class="vehicle-grid svelte-hihz04"><!> <!></div></div>'),sI=B('<div class="page-container svelte-hihz04"><!></div> <!>',1);function aI(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t),r=30;let o=ae(1),l=ae(!1),d=ae(Gt([])),h=ae(!0),m=ae(""),v=ae("all"),b=ae(!1),y=ae(null),x=ae(""),k=qi(()=>u(d).filter(ie=>{const Z=u(m).toLowerCase(),$=typeof(ie==null?void 0:ie.model)=="string"?ie.model:String((ie==null?void 0:ie.model)??"").trim(),X=typeof(ie==null?void 0:ie.name)=="string"?ie.name:String((ie==null?void 0:ie.name)??"").trim(),Y=typeof(ie==null?void 0:ie.brand)=="string"?ie.brand:String((ie==null?void 0:ie.brand)??"").trim(),te=typeof(ie==null?void 0:ie.category)=="string"?ie.category:String((ie==null?void 0:ie.category)??"").trim(),K=$.toLowerCase().includes(Z)||X.toLowerCase().includes(Z)||Y.toLowerCase().includes(Z),F=u(v)==="all"||te===u(v);return K&&F})),C=qi(()=>Array.from(new Set(u(d).map(ie=>typeof(ie==null?void 0:ie.category)=="string"?ie.category:"uncategorized"))).sort()),A=qi(()=>u(k).slice(0,u(o)*r));function T(ie){const Z=ie.target;Z.scrollHeight-Z.scrollTop-Z.clientHeight<100&&!u(l)&&u(A).length<u(k).length&&I()}async function I(){M(l,!0),await new Promise(ie=>setTimeout(ie,200)),Yr(o),M(l,!1)}pn(()=>{M(h,!0),Ve("getAllVehicles").then(({status:ie,data:Z})=>{if(ie==="ok"){const $=Array.isArray(Z)?Z:[];let X=0;const Y=$.map((te,K)=>{const F=te,R=typeof(F==null?void 0:F.model)=="string",J=typeof(F==null?void 0:F.name)=="string",U=typeof(F==null?void 0:F.brand)=="string",ce=typeof(F==null?void 0:F.category)=="string";(!R||!J||!U||!ce)&&X++;const fe=J?String(F.name):R?String(F.model):"Unknown Vehicle",Me=(R?String(F.model):fe.replace(/\s+/g,"_").toLowerCase())||`vehicle_${K}`,Se=U?String(F.brand):"Unknown",Pe=ce?String(F.category):"uncategorized",Be=typeof(F==null?void 0:F.price)=="number"?F.price:Number(F==null?void 0:F.price),ue=Number.isFinite(Be)?Be:0,oe=typeof(F==null?void 0:F.hash)=="number"?F.hash:Number(F==null?void 0:F.hash),me=Number.isFinite(oe)?oe:0;return{model:Me,name:fe,brand:Se,price:ue,hash:me,category:Pe}});M(d,Y,!0),X>0&&console.warn(`[Vehicles] Sanitized ${X} vehicle(s) with invalid fields.`)}else console.error("Failed to load vehicles",Z);M(h,!1)})});function D(ie){try{const Z=document.createElement("input");Z.value=ie,Z.setAttribute("readonly",""),Z.style.position="fixed",Z.style.opacity="0",Z.style.pointerEvents="none",document.body.appendChild(Z),Z.select(),document.execCommand("copy"),document.body.removeChild(Z)}catch(Z){console.error("Copy failed",Z)}}function N(ie,Z){if(ie.ctrlKey||ie.metaKey){D(Z.model),ze(s()("pages.installation.copied"),"success");return}ie.shiftKey&&j(Z)}function z(ie,Z){H(Z.model),ze(s()("notifications.vehicles.spawnedvehicle",{values:{vehicle:Z.name}}),"success")}function H(ie){Ve("spawnVehicle",{model:ie}),ri("sounds/action.mp3")}function j(ie){M(y,ie,!0),M(x,""),M(b,!0)}async function re(){if(u(y)&&u(x).trim()){const{status:ie}=await Ve("addVehicleToGarage",{model:u(y).model,targetPlayerId:u(x)});ie==="ok"?(ze(s()("notifications.vehicles.addedvehicletogarage",{values:{vehicle:u(y).name,target:u(x)}}),"success"),ri("sounds/action.mp3")):ze(s()("notifications.vehicles.failedtoaddvehicletogarage"),"error"),M(b,!1)}}function V(){M(o,1)}var q=sI(),le=yt(q),ee=p(le);{var W=ie=>{var Z=Y5(),$=p(Z),X=p($),Y=p(X);se(te=>S(Y,te),[()=>s()("pages.vehicles.loading")]),E(ie,Z)},ne=ie=>{var Z=nI(),$=p(Z),X=p($),Y=p(X),te=g(X,2),K=p(te),F=p(K),R=g(K,2),J=p(R),U=g(te,2),ce=p(U);let fe;var ve=g(p(ce),2);ve.__input=V;var Me=g(ve,2);{var Se=xe=>{var we=X5();we.__click=[K5,m,V],E(xe,we)};Q(Me,xe=>{u(m)&&xe(Se)})}var Pe=g(ce,2);let Be;var ue=p(Pe);let oe;ue.__change=V;var me=p(ue);me.value=me.__value="all";var Le=p(me),Oe=g(me);Vt(Oe,17,()=>u(C),Si,(xe,we)=>{var Re=J5(),qe={},Ge=p(Re);se(()=>{qe!==(qe=u(we))&&(Re.value=(Re.__value=u(we))??""),S(Ge,u(we))}),E(xe,Re)});var _e=g($,2),be=p(_e),Te=g(_e,2),pe=p(Te);Vt(pe,19,()=>u(A),(xe,we)=>xe.model||xe.name||we,(xe,we)=>{var Re=tI();Re.__click=[Q5,N,we],Re.__dblclick=[eI,z,we];var qe=p(Re),Ge=p(qe),tt=g(p(Ge)),Ye=g(Ge,2),Je=g(p(Ye)),Ue=g(Ye,2),at=p(Ue),Ee=g(p(at)),He=g(qe,2),Ke=p(He),it=p(Ke),pt=g(Ke,2),Tt=p(pt);se(mt=>{G(Re,1,`vehicle-card ${a().darkMode?"":"vehicle-card-light"}`,"svelte-hihz04"),Ot(Re,"title",`${u(we).name??""} (${u(we).model??""})`),S(tt,` ${u(we).name??""}`),S(Je,` ${u(we).brand??""}`),S(Ee,` ${u(we).category??""}`),S(it,u(we).model),S(Tt,`$${mt??""}`)},[()=>u(we).price.toLocaleString()]),E(xe,Re)});var de=g(pe,2);{var ge=xe=>{var we=iI(),Re=p(we),qe=p(Re),Ge=p(qe);se(tt=>S(Ge,tt),[()=>s()("pages.vehicles.loadingmore")]),E(xe,we)};Q(de,xe=>{u(l)&&xe(ge)})}se((xe,we,Re,qe,Ge,tt,Ye,Je,Ue)=>{S(Y,xe),S(F,we),S(J,Re),fe=G(ce,1,"input-group position-relative mb-2 svelte-hihz04",null,fe,qe),Ot(ve,"placeholder",Ge),Be=G(Pe,1,"filter-controls mb-2 svelte-hihz04",null,Be,tt),oe=G(ue,1,"form-select filter-select svelte-hihz04",null,oe,Ye),S(Le,Je),S(be,Ue)},[()=>s()("pages.vehicles.title"),()=>s()("pages.vehicles.vehiclelist"),()=>s()("pages.vehicles.totals",{values:{count:u(d).length}}),()=>({light:!a().darkMode}),()=>s()("pages.vehicles.searchvehicles"),()=>({light:!a().darkMode}),()=>({light:!a().darkMode}),()=>s()("common.all",{default:"All categories"}),()=>s()("pages.vehicles.hint")]),st(ve,()=>u(m),xe=>M(m,xe)),ur(ue,()=>u(v),xe=>M(v,xe)),Mi("scroll",Te,T),E(ie,Z)};Q(ee,ie=>{u(h)?ie(W):ie(ne,!1)})}var ye=g(le,2);Z5(ye,{get selectedVehicle(){return u(y)},onCancelGarage:()=>M(b,!1),onConfirmGarage:re,get darkMode(){return a().darkMode},get showGarage(){return u(b)},get targetPlayerId(){return u(x)},set targetPlayerId(ie){M(x,ie,!0)}}),E(i,q),Yt(),n()}hi(["input","click","change","dblclick"]);var rI=B('<div><div class="notification-content svelte-ns2cf0"><div class="icon-container svelte-ns2cf0"><i></i></div> <div class="text-container svelte-ns2cf0"><div class="notification-header svelte-ns2cf0"> </div> <div class="notification-message svelte-ns2cf0"> </div></div></div> <div class="progress-bar svelte-ns2cf0"><div class="progress-bar-inner svelte-ns2cf0"></div></div></div>'),oI=B('<div class="notification-container svelte-ns2cf0"></div>');function lI(i){const[e,t]=pi(),n=()=>Xe($m,"$notifications",e);function s(r){switch(r){case"success":return"fa-check-circle";case"error":return"fa-times-circle";case"warning":return"fa-exclamation-triangle";default:return"fa-info-circle"}}var a=oI();Vt(a,5,n,r=>r.id,(r,o)=>{var l=rI(),d=p(l),h=p(d),m=p(h),v=g(h,2),b=p(v),y=p(b),x=g(b,2),k=p(x),C=g(d,2),A=p(C);se((T,I)=>{G(l,1,`notification ${u(o).type??""}`,"svelte-ns2cf0"),G(m,1,`fas ${T??""}`,"svelte-ns2cf0"),S(y,I),S(k,u(o).message),es(A,`animation-duration: ${u(o).duration??""}ms`)},[()=>s(u(o).type||"info"),()=>{var T;return((T=u(o).type)==null?void 0:T.toUpperCase())||"NOTIFICATION"}],_f),gt(3,l,()=>Xr,()=>({x:100,duration:400,easing:ZP})),E(r,l)}),E(i,a),t()}function cI(i,e,t){const n=i.target;M(e,n.value,!0),M(t,u(e).trim().length>0)}function dI(i,e){i.key==="Enter"&&(i.preventDefault(),e())}var hI=B('<div class="loading-container svelte-7kuqjl"><div class="loading-spinner svelte-7kuqjl"><div class="spinner svelte-7kuqjl"></div> <span class="svelte-7kuqjl"> </span></div></div>'),uI=B('<div class="avatar other-admin-avatar svelte-7kuqjl"><i class="fas fa-user-shield svelte-7kuqjl"></i></div>'),fI=B('<div class="avatar self-avatar svelte-7kuqjl"><i class="fas fa-user-shield svelte-7kuqjl"></i></div>'),pI=B('<div><!> <div class="message-content svelte-7kuqjl"><div class="message-header svelte-7kuqjl"><span class="sender-name svelte-7kuqjl"> </span> <span class="timestamp svelte-7kuqjl"> </span></div> <div class="message-bubble svelte-7kuqjl"> </div></div> <!></div>'),mI=B('<div class="message-group self typing-group svelte-7kuqjl"><div class="message-content svelte-7kuqjl"><div class="message-header svelte-7kuqjl"><span class="sender-name svelte-7kuqjl"> </span></div> <div class="message-bubble typing-bubble svelte-7kuqjl"><div class="typing-indicator svelte-7kuqjl"><span class="svelte-7kuqjl"></span><span class="svelte-7kuqjl"></span><span class="svelte-7kuqjl"></span></div></div></div> <div class="avatar self-avatar svelte-7kuqjl"><i class="fas fa-user-shield svelte-7kuqjl"></i></div></div>'),vI=B('<h2 class="card-title text-center mb-2 svelte-7kuqjl"> </h2> <div><div class="messages-container svelte-7kuqjl"><div class="messages-wrapper svelte-7kuqjl"><!> <!></div></div> <div class="input-area svelte-7kuqjl"><div class="input-container svelte-7kuqjl"><div class="input-wrapper svelte-7kuqjl"><input type="text" class="message-input svelte-7kuqjl"> <button class="send-button svelte-7kuqjl"><i class="fas fa-paper-plane svelte-7kuqjl"></i></button></div></div></div></div>',1),gI=B("<div><!></div>");function _I(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=ae(""),l=ae(!1),d=ae(!1),h;pn(()=>{m()});async function m(){M(l,!0);const{status:T,data:I}=await Ve("getChatMessages");T==="ok"?M(r,I,!0):ze(s()("notifications.adminchat.failedtoloadchatmessages"),"error"),M(l,!1)}function v(){h&&(h.scrollTop=h.scrollHeight)}fn(()=>{h&&v()}),fn(()=>{h&&u(r).length>0&&setTimeout(v,10)}),fn(()=>{h&&u(d)&&setTimeout(v,50)});async function b(){if(u(o).trim()!==""){const{status:T}=await Ve("sendAdminChatMessage",{message:u(o)});T==="ok"?(M(o,""),M(d,!1)):ze(s()("notifications.adminchat.failedtosendmessage"),"error")}}la("receiveChatMessage",T=>{let I=T.senderId==a().currentUserLicense?"You":T.sender,D=T.senderId==a().currentUserLicense;M(r,[...u(r),{id:Date.now(),sender:I,message:T.message,time:T.time,self:D}],!0)});var y=gI();let x;var k=p(y);{var C=T=>{var I=hI(),D=p(I),N=g(p(D),2),z=p(N);se(H=>S(z,H),[()=>s()("pages.adminchat.loading")]),E(T,I)},A=T=>{var I=vI(),D=yt(I),N=p(D),z=g(D,2);let H;var j=p(z),re=p(j),V=p(re);Vt(V,17,()=>u(r),Z=>Z.id,(Z,$)=>{var X=pI(),Y=p(X);{var te=Pe=>{var Be=uI();E(Pe,Be)};Q(Y,Pe=>{u($).self||Pe(te)})}var K=g(Y,2),F=p(K),R=p(F),J=p(R),U=g(R,2),ce=p(U),fe=g(F,2),ve=p(fe),Me=g(K,2);{var Se=Pe=>{var Be=fI();E(Pe,Be)};Q(Me,Pe=>{u($).self&&Pe(Se)})}se(()=>{G(X,1,`message-group ${u($).self?"self":"other"}`,"svelte-7kuqjl"),S(J,u($).sender),S(ce,u($).time),S(ve,u($).message)}),gt(3,X,()=>Xr,()=>({y:20,duration:300})),E(Z,X)});var q=g(V,2);{var le=Z=>{var $=mI(),X=p($),Y=p(X),te=p(Y),K=p(te);se(F=>S(K,F),[()=>s()("pages.adminchat.you")]),gt(3,$,()=>Xr,()=>({y:10,duration:200})),E(Z,$)};Q(q,Z=>{u(d)&&Z(le)})}Kr(j,Z=>h=Z,()=>h);var ee=g(j,2),W=p(ee),ne=p(W),ye=p(ne);ye.__input=[cI,o,d],ye.__keydown=[dI,b];var ie=g(ye,2);ie.__click=b,se((Z,$,X,Y)=>{S(N,Z),H=G(z,1,"chat-layout svelte-7kuqjl",null,H,$),Ot(ye,"placeholder",X),Eu(ye,u(o)),ie.disabled=Y},[()=>s()("pages.adminchat.title"),()=>({"chat-layout-dark":a().darkMode}),()=>s()("pages.adminchat.typeamessage"),()=>!u(o).trim()]),E(T,I)};Q(k,T=>{u(l)?T(C):T(A,!1)})}se(T=>x=G(y,1,"admin-chat-page svelte-7kuqjl",null,x,T),[()=>({light:!a().darkMode})]),E(i,y),Yt(),n()}hi(["input","keydown","click"]);var bI=B('<div class="spinner-border spinner-border-sm me-2" role="status"><span class="visually-hidden">Loading...</span></div>'),yI=(i,e)=>e(i),xI=(i,e,t)=>e(u(t).value),wI=B('<input type="radio" class="btn-check svelte-uf1j1z" name="layer-options"> <label class="btn btn-outline-primary btn-sm svelte-uf1j1z"><i></i> <span class="d-none d-md-inline svelte-uf1j1z"> </span></label>',1),kI=B('<div><div class="controls-header svelte-uf1j1z"><h6 class="mb-0 svelte-uf1j1z"><i class="fas fa-layer-group me-2"></i> </h6> <div class="header-actions svelte-uf1j1z"><!> <button class="collapse-btn svelte-uf1j1z"><i></i></button></div></div> <div><div class="control-section svelte-uf1j1z"><label class="form-label svelte-uf1j1z"> </label> <div class="btn-group w-100 svelte-uf1j1z" role="group"></div></div></div></div>');function SI(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=Yi(e,"activeLayer",15),o=Yi(e,"isLoading",3,!1),l=ae(!1);pn(()=>{const q=localStorage.getItem("mapControlsCollapsed");q&&M(l,JSON.parse(q),!0)});function d(q){q&&q.stopPropagation(),M(l,!u(l)),localStorage.setItem("mapControlsCollapsed",JSON.stringify(u(l)))}const h=[{value:"markers",label:"map.layers.markers",icon:"fas fa-map-marker-alt"},{value:"heatmap",label:"map.layers.heatmap",icon:"fas fa-fire"},{value:"both",label:"map.layers.both",icon:"fas fa-layer-group"}];function m(q){r(q),e.onLayerChange(q)}var v=kI();let b;var y=p(v);y.__click=d;var x=p(y),k=g(p(x)),C=g(x,2),A=p(C);{var T=q=>{var le=bI();E(q,le)};Q(A,q=>{o()&&!u(l)&&q(T)})}var I=g(A,2);I.__click=[yI,d];var D=p(I),N=g(y,2);let z;var H=p(N),j=p(H),re=p(j),V=g(j,2);Vt(V,21,()=>h,Si,(q,le)=>{var ee=wI(),W=yt(ee);W.__change=[xI,m,le];var ne=g(W,2),ye=p(ne),ie=g(ye,2),Z=p(ie);se(($,X)=>{Ot(W,"id",`layer-${u(le).value??""}`),Eu(W,u(le).value),pg(W,r()===u(le).value),Ot(ne,"for",`layer-${u(le).value??""}`),Ot(ne,"title",$),G(ye,1,`${u(le).icon??""} me-1`,"svelte-uf1j1z"),S(Z,X)},[()=>a()(u(le).label),()=>a()(u(le).label)]),E(q,ee)}),se((q,le,ee,W)=>{b=G(v,1,"layer-controls-panel svelte-uf1j1z",null,b,q),S(k,` ${le??""}`),Ot(I,"title",u(l)?"Expand controls":"Collapse controls"),Ot(I,"aria-label",u(l)?"Expand controls":"Collapse controls"),G(D,1,`fas ${u(l)?"fa-chevron-down":"fa-chevron-up"}`,"svelte-uf1j1z"),z=G(N,1,"controls-content svelte-uf1j1z",null,z,ee),S(re,W)},[()=>({dark:s().darkMode,collapsed:u(l)}),()=>a()("map.controls.title"),()=>({hidden:u(l)}),()=>a()("map.controls.layer")]),E(i,v),Yt(),n()}hi(["click","change"]);var kc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var CI=kc.exports,Ib;function MI(){return Ib||(Ib=1,function(i,e){(function(t,n){n(e)})(CI,function(t){var n="1.9.4";function s(c){var f,_,w,P;for(_=1,w=arguments.length;_<w;_++){P=arguments[_];for(f in P)c[f]=P[f]}return c}var a=Object.create||function(){function c(){}return function(f){return c.prototype=f,new c}}();function r(c,f){var _=Array.prototype.slice;if(c.bind)return c.bind.apply(c,_.call(arguments,1));var w=_.call(arguments,2);return function(){return c.apply(f,w.length?w.concat(_.call(arguments)):arguments)}}var o=0;function l(c){return"_leaflet_id"in c||(c._leaflet_id=++o),c._leaflet_id}function d(c,f,_){var w,P,O,he;return he=function(){w=!1,P&&(O.apply(_,P),P=!1)},O=function(){w?P=arguments:(c.apply(_,arguments),setTimeout(he,f),w=!0)},O}function h(c,f,_){var w=f[1],P=f[0],O=w-P;return c===w&&_?c:((c-P)%O+O)%O+P}function m(){return!1}function v(c,f){if(f===!1)return c;var _=Math.pow(10,f===void 0?6:f);return Math.round(c*_)/_}function b(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function y(c){return b(c).split(/\s+/)}function x(c,f){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var _ in f)c.options[_]=f[_];return c.options}function k(c,f,_){var w=[];for(var P in c)w.push(encodeURIComponent(_?P.toUpperCase():P)+"="+encodeURIComponent(c[P]));return(!f||f.indexOf("?")===-1?"?":"&")+w.join("&")}var C=/\{ *([\w_ -]+) *\}/g;function A(c,f){return c.replace(C,function(_,w){var P=f[w];if(P===void 0)throw new Error("No value provided for variable "+_);return typeof P=="function"&&(P=P(f)),P})}var T=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function I(c,f){for(var _=0;_<c.length;_++)if(c[_]===f)return _;return-1}var D="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function N(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var z=0;function H(c){var f=+new Date,_=Math.max(0,16-(f-z));return z=f+_,window.setTimeout(c,_)}var j=window.requestAnimationFrame||N("RequestAnimationFrame")||H,re=window.cancelAnimationFrame||N("CancelAnimationFrame")||N("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function V(c,f,_){if(_&&j===H)c.call(f);else return j.call(window,r(c,f))}function q(c){c&&re.call(window,c)}var le={__proto__:null,extend:s,create:a,bind:r,get lastId(){return o},stamp:l,throttle:d,wrapNum:h,falseFn:m,formatNum:v,trim:b,splitWords:y,setOptions:x,getParamString:k,template:A,isArray:T,indexOf:I,emptyImageUrl:D,requestFn:j,cancelFn:re,requestAnimFrame:V,cancelAnimFrame:q};function ee(){}ee.extend=function(c){var f=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},_=f.__super__=this.prototype,w=a(_);w.constructor=f,f.prototype=w;for(var P in this)Object.prototype.hasOwnProperty.call(this,P)&&P!=="prototype"&&P!=="__super__"&&(f[P]=this[P]);return c.statics&&s(f,c.statics),c.includes&&(W(c.includes),s.apply(null,[w].concat(c.includes))),s(w,c),delete w.statics,delete w.includes,w.options&&(w.options=_.options?a(_.options):{},s(w.options,c.options)),w._initHooks=[],w.callInitHooks=function(){if(!this._initHooksCalled){_.callInitHooks&&_.callInitHooks.call(this),this._initHooksCalled=!0;for(var O=0,he=w._initHooks.length;O<he;O++)w._initHooks[O].call(this)}},f},ee.include=function(c){var f=this.prototype.options;return s(this.prototype,c),c.options&&(this.prototype.options=f,this.mergeOptions(c.options)),this},ee.mergeOptions=function(c){return s(this.prototype.options,c),this},ee.addInitHook=function(c){var f=Array.prototype.slice.call(arguments,1),_=typeof c=="function"?c:function(){this[c].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(_),this};function W(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=T(c)?c:[c];for(var f=0;f<c.length;f++)c[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ne={on:function(c,f,_){if(typeof c=="object")for(var w in c)this._on(w,c[w],f);else{c=y(c);for(var P=0,O=c.length;P<O;P++)this._on(c[P],f,_)}return this},off:function(c,f,_){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var w in c)this._off(w,c[w],f);else{c=y(c);for(var P=arguments.length===1,O=0,he=c.length;O<he;O++)P?this._off(c[O]):this._off(c[O],f,_)}return this},_on:function(c,f,_,w){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(c,f,_)===!1){_===this&&(_=void 0);var P={fn:f,ctx:_};w&&(P.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(P)}},_off:function(c,f,_){var w,P,O;if(this._events&&(w=this._events[c],!!w)){if(arguments.length===1){if(this._firingCount)for(P=0,O=w.length;P<O;P++)w[P].fn=m;delete this._events[c];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var he=this._listens(c,f,_);if(he!==!1){var ke=w[he];this._firingCount&&(ke.fn=m,this._events[c]=w=w.slice()),w.splice(he,1)}}},fire:function(c,f,_){if(!this.listens(c,_))return this;var w=s({},f,{type:c,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var P=this._events[c];if(P){this._firingCount=this._firingCount+1||1;for(var O=0,he=P.length;O<he;O++){var ke=P[O],Ie=ke.fn;ke.once&&this.off(c,Ie,ke.ctx),Ie.call(ke.ctx||this,w)}this._firingCount--}}return _&&this._propagateEvent(w),this},listens:function(c,f,_,w){typeof c!="string"&&console.warn('"string" type argument expected');var P=f;typeof f!="function"&&(w=!!f,P=void 0,_=void 0);var O=this._events&&this._events[c];if(O&&O.length&&this._listens(c,P,_)!==!1)return!0;if(w){for(var he in this._eventParents)if(this._eventParents[he].listens(c,f,_,w))return!0}return!1},_listens:function(c,f,_){if(!this._events)return!1;var w=this._events[c]||[];if(!f)return!!w.length;_===this&&(_=void 0);for(var P=0,O=w.length;P<O;P++)if(w[P].fn===f&&w[P].ctx===_)return P;return!1},once:function(c,f,_){if(typeof c=="object")for(var w in c)this._on(w,c[w],f,!0);else{c=y(c);for(var P=0,O=c.length;P<O;P++)this._on(c[P],f,_,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[l(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[l(c)],this},_propagateEvent:function(c){for(var f in this._eventParents)this._eventParents[f].fire(c.type,s({layer:c.target,propagatedFrom:c.target},c),!0)}};ne.addEventListener=ne.on,ne.removeEventListener=ne.clearAllEventListeners=ne.off,ne.addOneTimeEventListener=ne.once,ne.fireEvent=ne.fire,ne.hasEventListeners=ne.listens;var ye=ee.extend(ne);function ie(c,f,_){this.x=_?Math.round(c):c,this.y=_?Math.round(f):f}var Z=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(c){return this.clone()._add($(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract($(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new ie(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new ie(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Z(this.x),this.y=Z(this.y),this},distanceTo:function(c){c=$(c);var f=c.x-this.x,_=c.y-this.y;return Math.sqrt(f*f+_*_)},equals:function(c){return c=$(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=$(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function $(c,f,_){return c instanceof ie?c:T(c)?new ie(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new ie(c.x,c.y):new ie(c,f,_)}function X(c,f){if(c)for(var _=f?[c,f]:c,w=0,P=_.length;w<P;w++)this.extend(_[w])}X.prototype={extend:function(c){var f,_;if(!c)return this;if(c instanceof ie||typeof c[0]=="number"||"x"in c)f=_=$(c);else if(c=Y(c),f=c.min,_=c.max,!f||!_)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=_.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(_.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(_.y,this.max.y)),this},getCenter:function(c){return $((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return $(this.min.x,this.max.y)},getTopRight:function(){return $(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var f,_;return typeof c[0]=="number"||c instanceof ie?c=$(c):c=Y(c),c instanceof X?(f=c.min,_=c.max):f=_=c,f.x>=this.min.x&&_.x<=this.max.x&&f.y>=this.min.y&&_.y<=this.max.y},intersects:function(c){c=Y(c);var f=this.min,_=this.max,w=c.min,P=c.max,O=P.x>=f.x&&w.x<=_.x,he=P.y>=f.y&&w.y<=_.y;return O&&he},overlaps:function(c){c=Y(c);var f=this.min,_=this.max,w=c.min,P=c.max,O=P.x>f.x&&w.x<_.x,he=P.y>f.y&&w.y<_.y;return O&&he},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var f=this.min,_=this.max,w=Math.abs(f.x-_.x)*c,P=Math.abs(f.y-_.y)*c;return Y($(f.x-w,f.y-P),$(_.x+w,_.y+P))},equals:function(c){return c?(c=Y(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function Y(c,f){return!c||c instanceof X?c:new X(c,f)}function te(c,f){if(c)for(var _=f?[c,f]:c,w=0,P=_.length;w<P;w++)this.extend(_[w])}te.prototype={extend:function(c){var f=this._southWest,_=this._northEast,w,P;if(c instanceof F)w=c,P=c;else if(c instanceof te){if(w=c._southWest,P=c._northEast,!w||!P)return this}else return c?this.extend(R(c)||K(c)):this;return!f&&!_?(this._southWest=new F(w.lat,w.lng),this._northEast=new F(P.lat,P.lng)):(f.lat=Math.min(w.lat,f.lat),f.lng=Math.min(w.lng,f.lng),_.lat=Math.max(P.lat,_.lat),_.lng=Math.max(P.lng,_.lng)),this},pad:function(c){var f=this._southWest,_=this._northEast,w=Math.abs(f.lat-_.lat)*c,P=Math.abs(f.lng-_.lng)*c;return new te(new F(f.lat-w,f.lng-P),new F(_.lat+w,_.lng+P))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof F||"lat"in c?c=R(c):c=K(c);var f=this._southWest,_=this._northEast,w,P;return c instanceof te?(w=c.getSouthWest(),P=c.getNorthEast()):w=P=c,w.lat>=f.lat&&P.lat<=_.lat&&w.lng>=f.lng&&P.lng<=_.lng},intersects:function(c){c=K(c);var f=this._southWest,_=this._northEast,w=c.getSouthWest(),P=c.getNorthEast(),O=P.lat>=f.lat&&w.lat<=_.lat,he=P.lng>=f.lng&&w.lng<=_.lng;return O&&he},overlaps:function(c){c=K(c);var f=this._southWest,_=this._northEast,w=c.getSouthWest(),P=c.getNorthEast(),O=P.lat>f.lat&&w.lat<_.lat,he=P.lng>f.lng&&w.lng<_.lng;return O&&he},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,f){return c?(c=K(c),this._southWest.equals(c.getSouthWest(),f)&&this._northEast.equals(c.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function K(c,f){return c instanceof te?c:new te(c,f)}function F(c,f,_){if(isNaN(c)||isNaN(f))throw new Error("Invalid LatLng object: ("+c+", "+f+")");this.lat=+c,this.lng=+f,_!==void 0&&(this.alt=+_)}F.prototype={equals:function(c,f){if(!c)return!1;c=R(c);var _=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return _<=(f===void 0?1e-9:f)},toString:function(c){return"LatLng("+v(this.lat,c)+", "+v(this.lng,c)+")"},distanceTo:function(c){return U.distance(this,R(c))},wrap:function(){return U.wrapLatLng(this)},toBounds:function(c){var f=180*c/40075017,_=f/Math.cos(Math.PI/180*this.lat);return K([this.lat-f,this.lng-_],[this.lat+f,this.lng+_])},clone:function(){return new F(this.lat,this.lng,this.alt)}};function R(c,f,_){return c instanceof F?c:T(c)&&typeof c[0]!="object"?c.length===3?new F(c[0],c[1],c[2]):c.length===2?new F(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new F(c.lat,"lng"in c?c.lng:c.lon,c.alt):f===void 0?null:new F(c,f,_)}var J={latLngToPoint:function(c,f){var _=this.projection.project(c),w=this.scale(f);return this.transformation._transform(_,w)},pointToLatLng:function(c,f){var _=this.scale(f),w=this.transformation.untransform(c,_);return this.projection.unproject(w)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var f=this.projection.bounds,_=this.scale(c),w=this.transformation.transform(f.min,_),P=this.transformation.transform(f.max,_);return new X(w,P)},infinite:!1,wrapLatLng:function(c){var f=this.wrapLng?h(c.lng,this.wrapLng,!0):c.lng,_=this.wrapLat?h(c.lat,this.wrapLat,!0):c.lat,w=c.alt;return new F(_,f,w)},wrapLatLngBounds:function(c){var f=c.getCenter(),_=this.wrapLatLng(f),w=f.lat-_.lat,P=f.lng-_.lng;if(w===0&&P===0)return c;var O=c.getSouthWest(),he=c.getNorthEast(),ke=new F(O.lat-w,O.lng-P),Ie=new F(he.lat-w,he.lng-P);return new te(ke,Ie)}},U=s({},J,{wrapLng:[-180,180],R:6371e3,distance:function(c,f){var _=Math.PI/180,w=c.lat*_,P=f.lat*_,O=Math.sin((f.lat-c.lat)*_/2),he=Math.sin((f.lng-c.lng)*_/2),ke=O*O+Math.cos(w)*Math.cos(P)*he*he,Ie=2*Math.atan2(Math.sqrt(ke),Math.sqrt(1-ke));return this.R*Ie}}),ce=6378137,fe={R:ce,MAX_LATITUDE:85.0511287798,project:function(c){var f=Math.PI/180,_=this.MAX_LATITUDE,w=Math.max(Math.min(_,c.lat),-_),P=Math.sin(w*f);return new ie(this.R*c.lng*f,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(c){var f=180/Math.PI;return new F((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*f,c.x*f/this.R)},bounds:function(){var c=ce*Math.PI;return new X([-c,-c],[c,c])}()};function ve(c,f,_,w){if(T(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=f,this._c=_,this._d=w}ve.prototype={transform:function(c,f){return this._transform(c.clone(),f)},_transform:function(c,f){return f=f||1,c.x=f*(this._a*c.x+this._b),c.y=f*(this._c*c.y+this._d),c},untransform:function(c,f){return f=f||1,new ie((c.x/f-this._b)/this._a,(c.y/f-this._d)/this._c)}};function Me(c,f,_,w){return new ve(c,f,_,w)}var Se=s({},U,{code:"EPSG:3857",projection:fe,transformation:function(){var c=.5/(Math.PI*fe.R);return Me(c,.5,-c,.5)}()}),Pe=s({},Se,{code:"EPSG:900913"});function Be(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function ue(c,f){var _="",w,P,O,he,ke,Ie;for(w=0,O=c.length;w<O;w++){for(ke=c[w],P=0,he=ke.length;P<he;P++)Ie=ke[P],_+=(P?"L":"M")+Ie.x+" "+Ie.y;_+=f?Ae.svg?"z":"x":""}return _||"M0 0"}var oe=document.documentElement.style,me="ActiveXObject"in window,Le=me&&!document.addEventListener,Oe="msLaunchUri"in navigator&&!("documentMode"in document),_e=Ce("webkit"),be=Ce("android"),Te=Ce("android 2")||Ce("android 3"),pe=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),de=be&&Ce("Google")&&pe<537&&!("AudioNode"in window),ge=!!window.opera,xe=!Oe&&Ce("chrome"),we=Ce("gecko")&&!_e&&!ge&&!me,Re=!xe&&Ce("safari"),qe=Ce("phantom"),Ge="OTransition"in oe,tt=navigator.platform.indexOf("Win")===0,Ye=me&&"transition"in oe,Je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Te,Ue="MozPerspective"in oe,at=!window.L_DISABLE_3D&&(Ye||Je||Ue)&&!Ge&&!qe,Ee=typeof orientation<"u"||Ce("mobile"),He=Ee&&_e,Ke=Ee&&Je,it=!window.PointerEvent&&window.MSPointerEvent,pt=!!(window.PointerEvent||it),Tt="ontouchstart"in window||!!window.TouchEvent,mt=!window.L_NO_TOUCH&&(Tt||pt),zt=Ee&&ge,oi=Ee&&we,Ai=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kt=function(){var c=!1;try{var f=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",m,f),window.removeEventListener("testPassiveEventSupport",m,f)}catch{}return c}(),Wt=function(){return!!document.createElement("canvas").getContext}(),Rt=!!(document.createElementNS&&Be("svg").createSVGRect),di=!!Rt&&function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ci=!Rt&&function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var f=c.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}}(),Ti=navigator.platform.indexOf("Mac")===0,Qe=navigator.platform.indexOf("Linux")===0;function Ce(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Ae={ie:me,ielt9:Le,edge:Oe,webkit:_e,android:be,android23:Te,androidStock:de,opera:ge,chrome:xe,gecko:we,safari:Re,phantom:qe,opera12:Ge,win:tt,ie3d:Ye,webkit3d:Je,gecko3d:Ue,any3d:at,mobile:Ee,mobileWebkit:He,mobileWebkit3d:Ke,msPointer:it,pointer:pt,touch:mt,touchNative:Tt,mobileOpera:zt,mobileGecko:oi,retina:Ai,passiveEvents:Kt,canvas:Wt,svg:Rt,vml:Ci,inlineSvg:di,mac:Ti,linux:Qe},xt=Ae.msPointer?"MSPointerDown":"pointerdown",_t=Ae.msPointer?"MSPointerMove":"pointermove",bt=Ae.msPointer?"MSPointerUp":"pointerup",Pt=Ae.msPointer?"MSPointerCancel":"pointercancel",Ht={touchstart:xt,touchmove:_t,touchend:bt,touchcancel:Pt},Nt={touchstart:et,touchmove:Fe,touchend:Fe,touchcancel:Fe},rt={},dt=!1;function Qt(c,f,_){return f==="touchstart"&&Ri(),Nt[f]?(_=Nt[f].bind(this,_),c.addEventListener(Ht[f],_,!1),_):(console.warn("wrong event specified:",f),m)}function mi(c,f,_){if(!Ht[f]){console.warn("wrong event specified:",f);return}c.removeEventListener(Ht[f],_,!1)}function Ii(c){rt[c.pointerId]=c}function Ji(c){rt[c.pointerId]&&(rt[c.pointerId]=c)}function bn(c){delete rt[c.pointerId]}function Ri(){dt||(document.addEventListener(xt,Ii,!0),document.addEventListener(_t,Ji,!0),document.addEventListener(bt,bn,!0),document.addEventListener(Pt,bn,!0),dt=!0)}function Fe(c,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var _ in rt)f.touches.push(rt[_]);f.changedTouches=[f],c(f)}}function et(c,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&an(f),Fe(c,f)}function nt(c){var f={},_,w;for(w in c)_=c[w],f[w]=_&&_.bind?_.bind(c):_;return c=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var lt=200;function wt(c,f){c.addEventListener("dblclick",f);var _=0,w;function P(O){if(O.detail!==1){w=O.detail;return}if(!(O.pointerType==="mouse"||O.sourceCapabilities&&!O.sourceCapabilities.firesTouchEvents)){var he=ka(O);if(!(he.some(function(Ie){return Ie instanceof HTMLLabelElement&&Ie.attributes.for})&&!he.some(function(Ie){return Ie instanceof HTMLInputElement||Ie instanceof HTMLSelectElement}))){var ke=Date.now();ke-_<=lt?(w++,w===2&&f(nt(O))):w=1,_=ke}}}return c.addEventListener("click",P),{dblclick:f,simDblclick:P}}function Xt(c,f){c.removeEventListener("dblclick",f.dblclick),c.removeEventListener("click",f.simDblclick)}var Ut=wi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ut=wi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Bt=ut==="webkitTransition"||ut==="OTransition"?ut+"End":"transitionend";function jt(c){return typeof c=="string"?document.getElementById(c):c}function Ft(c,f){var _=c.style[f]||c.currentStyle&&c.currentStyle[f];if((!_||_==="auto")&&document.defaultView){var w=document.defaultView.getComputedStyle(c,null);_=w?w[f]:null}return _==="auto"?null:_}function ct(c,f,_){var w=document.createElement(c);return w.className=f||"",_&&_.appendChild(w),w}function vt(c){var f=c.parentNode;f&&f.removeChild(c)}function qt(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function ot(c){var f=c.parentNode;f&&f.lastChild!==c&&f.appendChild(c)}function Lt(c){var f=c.parentNode;f&&f.firstChild!==c&&f.insertBefore(c,f.firstChild)}function Dt(c,f){if(c.classList!==void 0)return c.classList.contains(f);var _=li(c);return _.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(_)}function $e(c,f){if(c.classList!==void 0)for(var _=y(f),w=0,P=_.length;w<P;w++)c.classList.add(_[w]);else if(!Dt(c,f)){var O=li(c);si(c,(O?O+" ":"")+f)}}function kt(c,f){c.classList!==void 0?c.classList.remove(f):si(c,b((" "+li(c)+" ").replace(" "+f+" "," ")))}function si(c,f){c.className.baseVal===void 0?c.className=f:c.className.baseVal=f}function li(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function ei(c,f){"opacity"in c.style?c.style.opacity=f:"filter"in c.style&&Li(c,f)}function Li(c,f){var _=!1,w="DXImageTransform.Microsoft.Alpha";try{_=c.filters.item(w)}catch{if(f===1)return}f=Math.round(f*100),_?(_.Enabled=f!==100,_.Opacity=f):c.style.filter+=" progid:"+w+"(opacity="+f+")"}function wi(c){for(var f=document.documentElement.style,_=0;_<c.length;_++)if(c[_]in f)return c[_];return!1}function Et(c,f,_){var w=f||new ie(0,0);c.style[Ut]=(Ae.ie3d?"translate("+w.x+"px,"+w.y+"px)":"translate3d("+w.x+"px,"+w.y+"px,0)")+(_?" scale("+_+")":"")}function ft(c,f){c._leaflet_pos=f,Ae.any3d?Et(c,f):(c.style.left=f.x+"px",c.style.top=f.y+"px")}function ai(c){return c._leaflet_pos||new ie(0,0)}var ci,bi,yi;if("onselectstart"in document)ci=function(){$t(window,"selectstart",an)},bi=function(){vi(window,"selectstart",an)};else{var ti=wi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ci=function(){if(ti){var c=document.documentElement.style;yi=c[ti],c[ti]="none"}},bi=function(){ti&&(document.documentElement.style[ti]=yi,yi=void 0)}}function Zi(){$t(window,"dragstart",an)}function nn(){vi(window,"dragstart",an)}var cn,dn;function Cn(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Qi(),cn=c,dn=c.style.outlineStyle,c.style.outlineStyle="none",$t(window,"keydown",Qi))}function Qi(){cn&&(cn.style.outlineStyle=dn,cn=void 0,dn=void 0,vi(window,"keydown",Qi))}function sn(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function En(c){var f=c.getBoundingClientRect();return{x:f.width/c.offsetWidth||1,y:f.height/c.offsetHeight||1,boundingClientRect:f}}var ps={__proto__:null,TRANSFORM:Ut,TRANSITION:ut,TRANSITION_END:Bt,get:jt,getStyle:Ft,create:ct,remove:vt,empty:qt,toFront:ot,toBack:Lt,hasClass:Dt,addClass:$e,removeClass:kt,setClass:si,getClass:li,setOpacity:ei,testProp:wi,setTransform:Et,setPosition:ft,getPosition:ai,get disableTextSelection(){return ci},get enableTextSelection(){return bi},disableImageDrag:Zi,enableImageDrag:nn,preventOutline:Cn,restoreOutline:Qi,getSizedParentNode:sn,getScale:En};function $t(c,f,_,w){if(f&&typeof f=="object")for(var P in f)Cs(c,P,f[P],_);else{f=y(f);for(var O=0,he=f.length;O<he;O++)Cs(c,f[O],_,w)}return this}var hn="_leaflet_events";function vi(c,f,_,w){if(arguments.length===1)Ss(c),delete c[hn];else if(f&&typeof f=="object")for(var P in f)Ms(c,P,f[P],_);else if(f=y(f),arguments.length===2)Ss(c,function(ke){return I(f,ke)!==-1});else for(var O=0,he=f.length;O<he;O++)Ms(c,f[O],_,w);return this}function Ss(c,f){for(var _ in c[hn]){var w=_.split(/\d/)[0];(!f||f(w))&&Ms(c,w,null,null,_)}}var ms={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cs(c,f,_,w){var P=f+l(_)+(w?"_"+l(w):"");if(c[hn]&&c[hn][P])return this;var O=function(ke){return _.call(w||c,ke||window.event)},he=O;!Ae.touchNative&&Ae.pointer&&f.indexOf("touch")===0?O=Qt(c,f,O):Ae.touch&&f==="dblclick"?O=wt(c,O):"addEventListener"in c?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?c.addEventListener(ms[f]||f,O,Ae.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(O=function(ke){ke=ke||window.event,Gn(c,ke)&&he(ke)},c.addEventListener(ms[f],O,!1)):c.addEventListener(f,he,!1):c.attachEvent("on"+f,O),c[hn]=c[hn]||{},c[hn][P]=O}function Ms(c,f,_,w,P){P=P||f+l(_)+(w?"_"+l(w):"");var O=c[hn]&&c[hn][P];if(!O)return this;!Ae.touchNative&&Ae.pointer&&f.indexOf("touch")===0?mi(c,f,O):Ae.touch&&f==="dblclick"?Xt(c,O):"removeEventListener"in c?c.removeEventListener(ms[f]||f,O,!1):c.detachEvent("on"+f,O),c[hn][P]=null}function Ps(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function wa(c){return Cs(c,"wheel",Ps),this}function As(c){return $t(c,"mousedown touchstart dblclick contextmenu",Ps),c._leaflet_disable_click=!0,this}function an(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function Ts(c){return an(c),Ps(c),this}function ka(c){if(c.composedPath)return c.composedPath();for(var f=[],_=c.target;_;)f.push(_),_=_.parentNode;return f}function Qa(c,f){if(!f)return new ie(c.clientX,c.clientY);var _=En(f),w=_.boundingClientRect;return new ie((c.clientX-w.left)/_.x-f.clientLeft,(c.clientY-w.top)/_.y-f.clientTop)}var ho=Ae.linux&&Ae.chrome?window.devicePixelRatio:Ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ns(c){return Ae.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/ho:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function Gn(c,f){var _=f.relatedTarget;if(!_)return!0;try{for(;_&&_!==c;)_=_.parentNode}catch{return!1}return _!==c}var Js={__proto__:null,on:$t,off:vi,stopPropagation:Ps,disableScrollPropagation:wa,disableClickPropagation:As,preventDefault:an,stop:Ts,getPropagationPath:ka,getMousePosition:Qa,getWheelDelta:ns,isExternalTarget:Gn,addListener:$t,removeListener:vi},gi=ye.extend({run:function(c,f,_,w){this.stop(),this._el=c,this._inProgress=!0,this._duration=_||.25,this._easeOutPower=1/Math.max(w||.5,.2),this._startPos=ai(c),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=V(this._animate,this),this._step()},_step:function(c){var f=+new Date-this._startTime,_=this._duration*1e3;f<_?this._runFrame(this._easeOut(f/_),c):(this._runFrame(1),this._complete())},_runFrame:function(c,f){var _=this._startPos.add(this._offset.multiplyBy(c));f&&_._round(),ft(this._el,_),this.fire("step")},_complete:function(){q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),It=ye.extend({options:{crs:Se,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,f){f=x(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(R(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ut&&Ae.any3d&&!Ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),$t(this._proxy,Bt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,f,_){if(f=f===void 0?this._zoom:this._limitZoom(f),c=this._limitCenter(R(c),f,this.options.maxBounds),_=_||{},this._stop(),this._loaded&&!_.reset&&_!==!0){_.animate!==void 0&&(_.zoom=s({animate:_.animate},_.zoom),_.pan=s({animate:_.animate,duration:_.duration},_.pan));var w=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,f,_.zoom):this._tryAnimatedPan(c,_.pan);if(w)return clearTimeout(this._sizeTimer),this}return this._resetView(c,f,_.pan&&_.pan.noMoveStart),this},setZoom:function(c,f){return this._loaded?this.setView(this.getCenter(),c,{zoom:f}):(this._zoom=c,this)},zoomIn:function(c,f){return c=c||(Ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,f)},zoomOut:function(c,f){return c=c||(Ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,f)},setZoomAround:function(c,f,_){var w=this.getZoomScale(f),P=this.getSize().divideBy(2),O=c instanceof ie?c:this.latLngToContainerPoint(c),he=O.subtract(P).multiplyBy(1-1/w),ke=this.containerPointToLatLng(P.add(he));return this.setView(ke,f,{zoom:_})},_getBoundsCenterZoom:function(c,f){f=f||{},c=c.getBounds?c.getBounds():K(c);var _=$(f.paddingTopLeft||f.padding||[0,0]),w=$(f.paddingBottomRight||f.padding||[0,0]),P=this.getBoundsZoom(c,!1,_.add(w));if(P=typeof f.maxZoom=="number"?Math.min(f.maxZoom,P):P,P===1/0)return{center:c.getCenter(),zoom:P};var O=w.subtract(_).divideBy(2),he=this.project(c.getSouthWest(),P),ke=this.project(c.getNorthEast(),P),Ie=this.unproject(he.add(ke).divideBy(2).add(O),P);return{center:Ie,zoom:P}},fitBounds:function(c,f){if(c=K(c),!c.isValid())throw new Error("Bounds are not valid.");var _=this._getBoundsCenterZoom(c,f);return this.setView(_.center,_.zoom,f)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,f){return this.setView(c,this._zoom,{pan:f})},panBy:function(c,f){if(c=$(c).round(),f=f||{},!c.x&&!c.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new gi,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){$e(this._mapPane,"leaflet-pan-anim");var _=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,_,f.duration||.25,f.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,f,_){if(_=_||{},_.animate===!1||!Ae.any3d)return this.setView(c,f,_);this._stop();var w=this.project(this.getCenter()),P=this.project(c),O=this.getSize(),he=this._zoom;c=R(c),f=f===void 0?he:f;var ke=Math.max(O.x,O.y),Ie=ke*this.getZoomScale(he,f),We=P.distanceTo(w)||1,St=1.42,ii=St*St;function ki(zn){var dh=zn?-1:1,XC=zn?Ie:ke,JC=Ie*Ie-ke*ke+dh*ii*ii*We*We,QC=2*XC*ii*We,mp=JC/QC,J_=Math.sqrt(mp*mp+1)-mp,eM=J_<1e-9?-18:Math.log(J_);return eM}function vs(zn){return(Math.exp(zn)-Math.exp(-zn))/2}function Zn(zn){return(Math.exp(zn)+Math.exp(-zn))/2}function Qs(zn){return vs(zn)/Zn(zn)}var Es=ki(0);function nl(zn){return ke*(Zn(Es)/Zn(Es+St*zn))}function GC(zn){return ke*(Zn(Es)*Qs(Es+St*zn)-vs(Es))/ii}function ZC(zn){return 1-Math.pow(1-zn,1.5)}var YC=Date.now(),K_=(ki(1)-Es)/St,KC=_.duration?1e3*_.duration:1e3*K_*.8;function X_(){var zn=(Date.now()-YC)/KC,dh=ZC(zn)*K_;zn<=1?(this._flyToFrame=V(X_,this),this._move(this.unproject(w.add(P.subtract(w).multiplyBy(GC(dh)/We)),he),this.getScaleZoom(ke/nl(dh),he),{flyTo:!0})):this._move(c,f)._moveEnd(!0)}return this._moveStart(!0,_.noMoveStart),X_.call(this),this},flyToBounds:function(c,f){var _=this._getBoundsCenterZoom(c,f);return this.flyTo(_.center,_.zoom,f)},setMaxBounds:function(c){return c=K(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var f=this.options.minZoom;return this.options.minZoom=c,this._loaded&&f!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var f=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&f!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,f){this._enforcingBounds=!0;var _=this.getCenter(),w=this._limitCenter(_,this._zoom,K(c));return _.equals(w)||this.panTo(w,f),this._enforcingBounds=!1,this},panInside:function(c,f){f=f||{};var _=$(f.paddingTopLeft||f.padding||[0,0]),w=$(f.paddingBottomRight||f.padding||[0,0]),P=this.project(this.getCenter()),O=this.project(c),he=this.getPixelBounds(),ke=Y([he.min.add(_),he.max.subtract(w)]),Ie=ke.getSize();if(!ke.contains(O)){this._enforcingBounds=!0;var We=O.subtract(ke.getCenter()),St=ke.extend(O).getSize().subtract(Ie);P.x+=We.x<0?-St.x:St.x,P.y+=We.y<0?-St.y:St.y,this.panTo(this.unproject(P),f),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=s({animate:!1,pan:!0},c===!0?{animate:!0}:c);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var _=this.getSize(),w=f.divideBy(2).round(),P=_.divideBy(2).round(),O=w.subtract(P);return!O.x&&!O.y?this:(c.animate&&c.pan?this.panBy(O):(c.pan&&this._rawPanBy(O),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:_}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=s({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=r(this._handleGeolocationResponse,this),_=r(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,_,c):navigator.geolocation.getCurrentPosition(f,_,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var f=c.code,_=c.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+_+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var f=c.coords.latitude,_=c.coords.longitude,w=new F(f,_),P=w.toBounds(c.coords.accuracy*2),O=this._locateOptions;if(O.setView){var he=this.getBoundsZoom(P);this.setView(w,O.maxZoom?Math.min(he,O.maxZoom):he)}var ke={latlng:w,bounds:P,timestamp:c.timestamp};for(var Ie in c.coords)typeof c.coords[Ie]=="number"&&(ke[Ie]=c.coords[Ie]);this.fire("locationfound",ke)}},addHandler:function(c,f){if(!f)return this;var _=this[c]=new f(this);return this._handlers.push(_),this.options[c]&&_.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)vt(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,f){var _="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),w=ct("div",_,f||this._mapPane);return c&&(this._panes[c]=w),w},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),f=this.unproject(c.getBottomLeft()),_=this.unproject(c.getTopRight());return new te(f,_)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,f,_){c=K(c),_=$(_||[0,0]);var w=this.getZoom()||0,P=this.getMinZoom(),O=this.getMaxZoom(),he=c.getNorthWest(),ke=c.getSouthEast(),Ie=this.getSize().subtract(_),We=Y(this.project(ke,w),this.project(he,w)).getSize(),St=Ae.any3d?this.options.zoomSnap:1,ii=Ie.x/We.x,ki=Ie.y/We.y,vs=f?Math.max(ii,ki):Math.min(ii,ki);return w=this.getScaleZoom(vs,w),St&&(w=Math.round(w/(St/100))*(St/100),w=f?Math.ceil(w/St)*St:Math.floor(w/St)*St),Math.max(P,Math.min(O,w))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,f){var _=this._getTopLeftPoint(c,f);return new X(_,_.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,f){var _=this.options.crs;return f=f===void 0?this._zoom:f,_.scale(c)/_.scale(f)},getScaleZoom:function(c,f){var _=this.options.crs;f=f===void 0?this._zoom:f;var w=_.zoom(c*_.scale(f));return isNaN(w)?1/0:w},project:function(c,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(R(c),f)},unproject:function(c,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng($(c),f)},layerPointToLatLng:function(c){var f=$(c).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(c){var f=this.project(R(c))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(R(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(K(c))},distance:function(c,f){return this.options.crs.distance(R(c),R(f))},containerPointToLayerPoint:function(c){return $(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return $(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var f=this.containerPointToLayerPoint($(c));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(R(c)))},mouseEventToContainerPoint:function(c){return Qa(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var f=this._container=jt(c);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");$t(f,"scroll",this._onScroll,this),this._containerId=l(f)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ae.any3d,$e(c,"leaflet-container"+(Ae.touch?" leaflet-touch":"")+(Ae.retina?" leaflet-retina":"")+(Ae.ielt9?" leaflet-oldie":"")+(Ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=Ft(c,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ft(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||($e(c.markerPane,"leaflet-zoom-hide"),$e(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,f,_){ft(this._mapPane,new ie(0,0));var w=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var P=this._zoom!==f;this._moveStart(P,_)._move(c,f)._moveEnd(P),this.fire("viewreset"),w&&this.fire("load")},_moveStart:function(c,f){return c&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(c,f,_,w){f===void 0&&(f=this._zoom);var P=this._zoom!==f;return this._zoom=f,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),w?_&&_.pinch&&this.fire("zoom",_):((P||_&&_.pinch)&&this.fire("zoom",_),this.fire("move",_)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){ft(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[l(this._container)]=this;var f=c?vi:$t;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),Ae.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){q(this._resizeRequest),this._resizeRequest=V(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,f){for(var _=[],w,P=f==="mouseout"||f==="mouseover",O=c.target||c.srcElement,he=!1;O;){if(w=this._targets[l(O)],w&&(f==="click"||f==="preclick")&&this._draggableMoved(w)){he=!0;break}if(w&&w.listens(f,!0)&&(P&&!Gn(O,c)||(_.push(w),P))||O===this._container)break;O=O.parentNode}return!_.length&&!he&&!P&&this.listens(f,!0)&&(_=[this]),_},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var f=c.target||c.srcElement;if(!(!this._loaded||f._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(f))){var _=c.type;_==="mousedown"&&Cn(f),this._fireDOMEvent(c,_)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,f,_){if(c.type==="click"){var w=s({},c);w.type="preclick",this._fireDOMEvent(w,w.type,_)}var P=this._findEventTargets(c,f);if(_){for(var O=[],he=0;he<_.length;he++)_[he].listens(f,!0)&&O.push(_[he]);P=O.concat(P)}if(P.length){f==="contextmenu"&&an(c);var ke=P[0],Ie={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var We=ke.getLatLng&&(!ke._radius||ke._radius<=10);Ie.containerPoint=We?this.latLngToContainerPoint(ke.getLatLng()):this.mouseEventToContainerPoint(c),Ie.layerPoint=this.containerPointToLayerPoint(Ie.containerPoint),Ie.latlng=We?ke.getLatLng():this.layerPointToLatLng(Ie.layerPoint)}for(he=0;he<P.length;he++)if(P[he].fire(f,Ie,!0),Ie.originalEvent._stopped||P[he].options.bubblingMouseEvents===!1&&I(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,f=this._handlers.length;c<f;c++)this._handlers[c].disable()},whenReady:function(c,f){return this._loaded?c.call(f||this,{target:this}):this.on("load",c,f),this},_getMapPanePos:function(){return ai(this._mapPane)||new ie(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,f){var _=c&&f!==void 0?this._getNewPixelOrigin(c,f):this.getPixelOrigin();return _.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,f){var _=this.getSize()._divideBy(2);return this.project(c,f)._subtract(_)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,f,_){var w=this._getNewPixelOrigin(_,f);return this.project(c,f)._subtract(w)},_latLngBoundsToNewLayerBounds:function(c,f,_){var w=this._getNewPixelOrigin(_,f);return Y([this.project(c.getSouthWest(),f)._subtract(w),this.project(c.getNorthWest(),f)._subtract(w),this.project(c.getSouthEast(),f)._subtract(w),this.project(c.getNorthEast(),f)._subtract(w)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,f,_){if(!_)return c;var w=this.project(c,f),P=this.getSize().divideBy(2),O=new X(w.subtract(P),w.add(P)),he=this._getBoundsOffset(O,_,f);return Math.abs(he.x)<=1&&Math.abs(he.y)<=1?c:this.unproject(w.add(he),f)},_limitOffset:function(c,f){if(!f)return c;var _=this.getPixelBounds(),w=new X(_.min.add(c),_.max.add(c));return c.add(this._getBoundsOffset(w,f))},_getBoundsOffset:function(c,f,_){var w=Y(this.project(f.getNorthEast(),_),this.project(f.getSouthWest(),_)),P=w.min.subtract(c.min),O=w.max.subtract(c.max),he=this._rebound(P.x,-O.x),ke=this._rebound(P.y,-O.y);return new ie(he,ke)},_rebound:function(c,f){return c+f>0?Math.round(c-f)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(f))},_limitZoom:function(c){var f=this.getMinZoom(),_=this.getMaxZoom(),w=Ae.any3d?this.options.zoomSnap:1;return w&&(c=Math.round(c/w)*w),Math.max(f,Math.min(_,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){kt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,f){var _=this._getCenterOffset(c)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(_)?!1:(this.panBy(_,f),!0)},_createAnimProxy:function(){var c=this._proxy=ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(f){var _=Ut,w=this._proxy.style[_];Et(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),w===this._proxy.style[_]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),f=this.getZoom();Et(this._proxy,this.project(c,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,f,_){if(this._animatingZoom)return!0;if(_=_||{},!this._zoomAnimated||_.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var w=this.getZoomScale(f),P=this._getCenterOffset(c)._divideBy(1-1/w);return _.animate!==!0&&!this.getSize().contains(P)?!1:(V(function(){this._moveStart(!0,_.noMoveStart||!1)._animateZoom(c,f,!0)},this),!0)},_animateZoom:function(c,f,_,w){this._mapPane&&(_&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=f,$e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:f,noUpdate:w}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&kt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $n(c,f){return new It(c,f)}var mn=ee.extend({options:{position:"topright"},initialize:function(c){x(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var f=this._map;return f&&f.removeControl(this),this.options.position=c,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var f=this._container=this.onAdd(c),_=this.getPosition(),w=c._controlCorners[_];return $e(f,"leaflet-control"),_.indexOf("bottom")!==-1?w.insertBefore(f,w.firstChild):w.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),ss=function(c){return new mn(c)};It.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},f="leaflet-",_=this._controlContainer=ct("div",f+"control-container",this._container);function w(P,O){var he=f+P+" "+f+O;c[P+O]=ct("div",he,_)}w("top","left"),w("top","right"),w("bottom","left"),w("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)vt(this._controlCorners[c]);vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Sa=mn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,f,_,w){return _<w?-1:w<_?1:0}},initialize:function(c,f,_){x(this,_),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var w in c)this._addLayer(c[w],w);for(w in f)this._addLayer(f[w],w,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return mn.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,f){return this._addLayer(c,f),this._map?this._update():this},addOverlay:function(c,f){return this._addLayer(c,f,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var f=this._getLayer(l(c));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){$e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?($e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):kt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return kt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",f=this._container=ct("div",c),_=this.options.collapsed;f.setAttribute("aria-haspopup",!0),As(f),wa(f);var w=this._section=ct("section",c+"-list");_&&(this._map.on("click",this.collapse,this),$t(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var P=this._layersLink=ct("a",c+"-toggle",f);P.href="#",P.title="Layers",P.setAttribute("role","button"),$t(P,{keydown:function(O){O.keyCode===13&&this._expandSafely()},click:function(O){an(O),this._expandSafely()}},this),_||this.expand(),this._baseLayersList=ct("div",c+"-base",w),this._separator=ct("div",c+"-separator",w),this._overlaysList=ct("div",c+"-overlays",w),f.appendChild(w)},_getLayer:function(c){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&l(this._layers[f].layer)===c)return this._layers[f]},_addLayer:function(c,f,_){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:f,overlay:_}),this.options.sortLayers&&this._layers.sort(r(function(w,P){return this.options.sortFunction(w.layer,P.layer,w.name,P.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;qt(this._baseLayersList),qt(this._overlaysList),this._layerControlInputs=[];var c,f,_,w,P=0;for(_=0;_<this._layers.length;_++)w=this._layers[_],this._addItem(w),f=f||w.overlay,c=c||!w.overlay,P+=w.overlay?0:1;return this.options.hideSingleBase&&(c=c&&P>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=f&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var f=this._getLayer(l(c.target)),_=f.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;_&&this._map.fire(_,f)},_createRadioElement:function(c,f){var _='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(f?' checked="checked"':"")+"/>",w=document.createElement("div");return w.innerHTML=_,w.firstChild},_addItem:function(c){var f=document.createElement("label"),_=this._map.hasLayer(c.layer),w;c.overlay?(w=document.createElement("input"),w.type="checkbox",w.className="leaflet-control-layers-selector",w.defaultChecked=_):w=this._createRadioElement("leaflet-base-layers_"+l(this),_),this._layerControlInputs.push(w),w.layerId=l(c.layer),$t(w,"click",this._onInputClick,this);var P=document.createElement("span");P.innerHTML=" "+c.name;var O=document.createElement("span");f.appendChild(O),O.appendChild(w),O.appendChild(P);var he=c.overlay?this._overlaysList:this._baseLayersList;return he.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,f,_,w=[],P=[];this._handlingClick=!0;for(var O=c.length-1;O>=0;O--)f=c[O],_=this._getLayer(f.layerId).layer,f.checked?w.push(_):f.checked||P.push(_);for(O=0;O<P.length;O++)this._map.hasLayer(P[O])&&this._map.removeLayer(P[O]);for(O=0;O<w.length;O++)this._map.hasLayer(w[O])||this._map.addLayer(w[O]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,f,_,w=this._map.getZoom(),P=c.length-1;P>=0;P--)f=c[P],_=this._getLayer(f.layerId).layer,f.disabled=_.options.minZoom!==void 0&&w<_.options.minZoom||_.options.maxZoom!==void 0&&w>_.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,$t(c,"click",an),this.expand();var f=this;setTimeout(function(){vi(c,"click",an),f._preventClick=!1})}}),Mr=function(c,f,_){return new Sa(c,f,_)},Ca=mn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var f="leaflet-control-zoom",_=ct("div",f+" leaflet-bar"),w=this.options;return this._zoomInButton=this._createButton(w.zoomInText,w.zoomInTitle,f+"-in",_,this._zoomIn),this._zoomOutButton=this._createButton(w.zoomOutText,w.zoomOutTitle,f+"-out",_,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),_},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,f,_,w,P){var O=ct("a",_,w);return O.innerHTML=c,O.href="#",O.title=f,O.setAttribute("role","button"),O.setAttribute("aria-label",f),As(O),$t(O,"click",Ts),$t(O,"click",P,this),$t(O,"click",this._refocusOnMap,this),O},_updateDisabled:function(){var c=this._map,f="leaflet-disabled";kt(this._zoomInButton,f),kt(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&($e(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&($e(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});It.mergeOptions({zoomControl:!0}),It.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ca,this.addControl(this.zoomControl))});var Pr=function(c){return new Ca(c)},Ze=mn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var f="leaflet-control-scale",_=ct("div",f),w=this.options;return this._addScales(w,f+"-line",_),c.on(w.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),_},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,f,_){c.metric&&(this._mScale=ct("div",f,_)),c.imperial&&(this._iScale=ct("div",f,_))},_update:function(){var c=this._map,f=c.getSize().y/2,_=c.distance(c.containerPointToLatLng([0,f]),c.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(_)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var f=this._getRoundNum(c),_=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,_,f/c)},_updateImperial:function(c){var f=c*3.2808399,_,w,P;f>5280?(_=f/5280,w=this._getRoundNum(_),this._updateScale(this._iScale,w+" mi",w/_)):(P=this._getRoundNum(f),this._updateScale(this._iScale,P+" ft",P/f))},_updateScale:function(c,f,_){c.style.width=Math.round(this.options.maxWidth*_)+"px",c.innerHTML=f},_getRoundNum:function(c){var f=Math.pow(10,(Math.floor(c)+"").length-1),_=c/f;return _=_>=10?10:_>=5?5:_>=3?3:_>=2?2:1,f*_}}),uo=function(c){return new Ze(c)},fo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',er=mn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ae.inlineSvg?fo+" ":"")+"Leaflet</a>"},initialize:function(c){x(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=ct("div","leaflet-control-attribution"),As(this._container);for(var f in c._layers)c._layers[f].getAttribution&&this.addAttribution(c._layers[f].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var f in this._attributions)this._attributions[f]&&c.push(f);var _=[];this.options.prefix&&_.push(this.options.prefix),c.length&&_.push(c.join(", ")),this._container.innerHTML=_.join(' <span aria-hidden="true">|</span> ')}}});It.mergeOptions({attributionControl:!0}),It.addInitHook(function(){this.options.attributionControl&&new er().addTo(this)});var Vn=function(c){return new er(c)};mn.Layers=Sa,mn.Zoom=Ca,mn.Scale=Ze,mn.Attribution=er,ss.layers=Mr,ss.zoom=Pr,ss.scale=uo,ss.attribution=Vn;var Vi=ee.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vi.addTo=function(c,f){return c.addHandler(f,this),this};var Ls={Events:ne},Ma=Ae.touch?"touchstart mousedown":"mousedown",as=ye.extend({options:{clickTolerance:3},initialize:function(c,f,_,w){x(this,w),this._element=c,this._dragStartTarget=f||c,this._preventOutline=_},enable:function(){this._enabled||($t(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(as._dragging===this&&this.finishDrag(!0),vi(this._dragStartTarget,Ma,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!Dt(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){as._dragging===this&&this.finishDrag();return}if(!(as._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(as._dragging=this,this._preventOutline&&Cn(this._element),Zi(),ci(),!this._moving)){this.fire("down");var f=c.touches?c.touches[0]:c,_=sn(this._element);this._startPoint=new ie(f.clientX,f.clientY),this._startPos=ai(this._element),this._parentScale=En(_);var w=c.type==="mousedown";$t(document,w?"mousemove":"touchmove",this._onMove,this),$t(document,w?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var f=c.touches&&c.touches.length===1?c.touches[0]:c,_=new ie(f.clientX,f.clientY)._subtract(this._startPoint);!_.x&&!_.y||Math.abs(_.x)+Math.abs(_.y)<this.options.clickTolerance||(_.x/=this._parentScale.x,_.y/=this._parentScale.y,an(c),this._moved||(this.fire("dragstart"),this._moved=!0,$e(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),$e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(_),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),ft(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){kt(document.body,"leaflet-dragging"),this._lastTarget&&(kt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vi(document,"mousemove touchmove",this._onMove,this),vi(document,"mouseup touchend touchcancel",this._onUp,this),nn(),bi();var f=this._moved&&this._moving;this._moving=!1,as._dragging=!1,f&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function Pa(c,f,_){var w,P=[1,4,2,8],O,he,ke,Ie,We,St,ii,ki;for(O=0,St=c.length;O<St;O++)c[O]._code=tr(c[O],f);for(ke=0;ke<4;ke++){for(ii=P[ke],w=[],O=0,St=c.length,he=St-1;O<St;he=O++)Ie=c[O],We=c[he],Ie._code&ii?We._code&ii||(ki=Jo(We,Ie,ii,f,_),ki._code=tr(ki,f),w.push(ki)):(We._code&ii&&(ki=Jo(We,Ie,ii,f,_),ki._code=tr(ki,f),w.push(ki)),w.push(Ie));c=w}return c}function Aa(c,f){var _,w,P,O,he,ke,Ie,We,St;if(!c||c.length===0)throw new Error("latlngs not passed");Ds(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var ii=R([0,0]),ki=K(c),vs=ki.getNorthWest().distanceTo(ki.getSouthWest())*ki.getNorthEast().distanceTo(ki.getNorthWest());vs<1700&&(ii=ha(c));var Zn=c.length,Qs=[];for(_=0;_<Zn;_++){var Es=R(c[_]);Qs.push(f.project(R([Es.lat-ii.lat,Es.lng-ii.lng])))}for(ke=Ie=We=0,_=0,w=Zn-1;_<Zn;w=_++)P=Qs[_],O=Qs[w],he=P.y*O.x-O.y*P.x,Ie+=(P.x+O.x)*he,We+=(P.y+O.y)*he,ke+=he*3;ke===0?St=Qs[0]:St=[Ie/ke,We/ke];var nl=f.unproject($(St));return R([nl.lat+ii.lat,nl.lng+ii.lng])}function ha(c){for(var f=0,_=0,w=0,P=0;P<c.length;P++){var O=R(c[P]);f+=O.lat,_+=O.lng,w++}return R([f/w,_/w])}var Qf={__proto__:null,clipPolygon:Pa,polygonCenter:Aa,centroid:ha};function Gd(c,f){if(!f||!c.length)return c.slice();var _=f*f;return c=ip(c,_),c=tp(c,_),c}function Zd(c,f,_){return Math.sqrt(po(c,f,_,!0))}function ep(c,f,_){return po(c,f,_)}function tp(c,f){var _=c.length,w=typeof Uint8Array<"u"?Uint8Array:Array,P=new w(_);P[0]=P[_-1]=1,Ql(c,P,f,0,_-1);var O,he=[];for(O=0;O<_;O++)P[O]&&he.push(c[O]);return he}function Ql(c,f,_,w,P){var O=0,he,ke,Ie;for(ke=w+1;ke<=P-1;ke++)Ie=po(c[ke],c[w],c[P],!0),Ie>O&&(he=ke,O=Ie);O>_&&(f[he]=1,Ql(c,f,_,w,he),Ql(c,f,_,he,P))}function ip(c,f){for(var _=[c[0]],w=1,P=0,O=c.length;w<O;w++)np(c[w],c[P])>f&&(_.push(c[w]),P=w);return P<O-1&&_.push(c[O-1]),_}var Yd;function Kd(c,f,_,w,P){var O=w?Yd:tr(c,_),he=tr(f,_),ke,Ie,We;for(Yd=he;;){if(!(O|he))return[c,f];if(O&he)return!1;ke=O||he,Ie=Jo(c,f,ke,_,P),We=tr(Ie,_),ke===O?(c=Ie,O=We):(f=Ie,he=We)}}function Jo(c,f,_,w,P){var O=f.x-c.x,he=f.y-c.y,ke=w.min,Ie=w.max,We,St;return _&8?(We=c.x+O*(Ie.y-c.y)/he,St=Ie.y):_&4?(We=c.x+O*(ke.y-c.y)/he,St=ke.y):_&2?(We=Ie.x,St=c.y+he*(Ie.x-c.x)/O):_&1&&(We=ke.x,St=c.y+he*(ke.x-c.x)/O),new ie(We,St,P)}function tr(c,f){var _=0;return c.x<f.min.x?_|=1:c.x>f.max.x&&(_|=2),c.y<f.min.y?_|=4:c.y>f.max.y&&(_|=8),_}function np(c,f){var _=f.x-c.x,w=f.y-c.y;return _*_+w*w}function po(c,f,_,w){var P=f.x,O=f.y,he=_.x-P,ke=_.y-O,Ie=he*he+ke*ke,We;return Ie>0&&(We=((c.x-P)*he+(c.y-O)*ke)/Ie,We>1?(P=_.x,O=_.y):We>0&&(P+=he*We,O+=ke*We)),he=c.x-P,ke=c.y-O,w?he*he+ke*ke:new ie(P,O)}function Ds(c){return!T(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function Xd(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ds(c)}function Jd(c,f){var _,w,P,O,he,ke,Ie,We;if(!c||c.length===0)throw new Error("latlngs not passed");Ds(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var St=R([0,0]),ii=K(c),ki=ii.getNorthWest().distanceTo(ii.getSouthWest())*ii.getNorthEast().distanceTo(ii.getNorthWest());ki<1700&&(St=ha(c));var vs=c.length,Zn=[];for(_=0;_<vs;_++){var Qs=R(c[_]);Zn.push(f.project(R([Qs.lat-St.lat,Qs.lng-St.lng])))}for(_=0,w=0;_<vs-1;_++)w+=Zn[_].distanceTo(Zn[_+1])/2;if(w===0)We=Zn[0];else for(_=0,O=0;_<vs-1;_++)if(he=Zn[_],ke=Zn[_+1],P=he.distanceTo(ke),O+=P,O>w){Ie=(O-w)/P,We=[ke.x-Ie*(ke.x-he.x),ke.y-Ie*(ke.y-he.y)];break}var Es=f.unproject($(We));return R([Es.lat+St.lat,Es.lng+St.lng])}var sp={__proto__:null,simplify:Gd,pointToSegmentDistance:Zd,closestPointOnSegment:ep,clipSegment:Kd,_getEdgeIntersection:Jo,_getBitCode:tr,_sqClosestPointOnSegment:po,isFlat:Ds,_flat:Xd,polylineCenter:Jd},ec={project:function(c){return new ie(c.lng,c.lat)},unproject:function(c){return new F(c.y,c.x)},bounds:new X([-180,-90],[180,90])},tc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new X([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var f=Math.PI/180,_=this.R,w=c.lat*f,P=this.R_MINOR/_,O=Math.sqrt(1-P*P),he=O*Math.sin(w),ke=Math.tan(Math.PI/4-w/2)/Math.pow((1-he)/(1+he),O/2);return w=-_*Math.log(Math.max(ke,1e-10)),new ie(c.lng*f*_,w)},unproject:function(c){for(var f=180/Math.PI,_=this.R,w=this.R_MINOR/_,P=Math.sqrt(1-w*w),O=Math.exp(-c.y/_),he=Math.PI/2-2*Math.atan(O),ke=0,Ie=.1,We;ke<15&&Math.abs(Ie)>1e-7;ke++)We=P*Math.sin(he),We=Math.pow((1-We)/(1+We),P/2),Ie=Math.PI/2-2*Math.atan(O*We)-he,he+=Ie;return new F(he*f,c.x*f/_)}},ap={__proto__:null,LonLat:ec,Mercator:tc,SphericalMercator:fe},rp=s({},U,{code:"EPSG:3395",projection:tc,transformation:function(){var c=.5/(Math.PI*tc.R);return Me(c,.5,-c,.5)}()}),Qd=s({},U,{code:"EPSG:4326",projection:ec,transformation:Me(1/180,1,-1/180,.5)}),op=s({},J,{projection:ec,transformation:Me(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,f){var _=f.lng-c.lng,w=f.lat-c.lat;return Math.sqrt(_*_+w*w)},infinite:!0});J.Earth=U,J.EPSG3395=rp,J.EPSG3857=Se,J.EPSG900913=Pe,J.EPSG4326=Qd,J.Simple=op;var Ws=ye.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[l(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[l(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var f=c.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var _=this.getEvents();f.on(_,this),this.once("remove",function(){f.off(_,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});It.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var f=l(c);return this._layers[f]?this:(this._layers[f]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var f=l(c);return this._layers[f]?(this._loaded&&c.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return l(c)in this._layers},eachLayer:function(c,f){for(var _ in this._layers)c.call(f,this._layers[_]);return this},_addLayers:function(c){c=c?T(c)?c:[c]:[];for(var f=0,_=c.length;f<_;f++)this.addLayer(c[f])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[l(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var f=l(c);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,f=-1/0,_=this._getZoomSpan();for(var w in this._zoomBoundLayers){var P=this._zoomBoundLayers[w].options;c=P.minZoom===void 0?c:Math.min(c,P.minZoom),f=P.maxZoom===void 0?f:Math.max(f,P.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=c===1/0?void 0:c,_!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Ar=Ws.extend({initialize:function(c,f){x(this,f),this._layers={};var _,w;if(c)for(_=0,w=c.length;_<w;_++)this.addLayer(c[_])},addLayer:function(c){var f=this.getLayerId(c);return this._layers[f]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var f=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(c){var f=typeof c=="number"?c:this.getLayerId(c);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var f=Array.prototype.slice.call(arguments,1),_,w;for(_ in this._layers)w=this._layers[_],w[c]&&w[c].apply(w,f);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,f){for(var _ in this._layers)c.call(f,this._layers[_]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return l(c)}}),lp=function(c,f){return new Ar(c,f)},ua=Ar.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),Ar.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),Ar.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new te;for(var f in this._layers){var _=this._layers[f];c.extend(_.getBounds?_.getBounds():_.getLatLng())}return c}}),cp=function(c,f){return new ua(c,f)},Tr=ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){x(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,f){var _=this._getIconUrl(c);if(!_){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var w=this._createImg(_,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(w,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),w},_setIconStyles:function(c,f){var _=this.options,w=_[f+"Size"];typeof w=="number"&&(w=[w,w]);var P=$(w),O=$(f==="shadow"&&_.shadowAnchor||_.iconAnchor||P&&P.divideBy(2,!0));c.className="leaflet-marker-"+f+" "+(_.className||""),O&&(c.style.marginLeft=-O.x+"px",c.style.marginTop=-O.y+"px"),P&&(c.style.width=P.x+"px",c.style.height=P.y+"px")},_createImg:function(c,f){return f=f||document.createElement("img"),f.src=c,f},_getIconUrl:function(c){return Ae.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function dp(c){return new Tr(c)}var mo=Tr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof mo.imagePath!="string"&&(mo.imagePath=this._detectIconPath()),(this.options.imagePath||mo.imagePath)+Tr.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var f=function(_,w,P){var O=w.exec(_);return O&&O[P]};return c=f(c,/^url\((['"])?(.+)\1\)$/,2),c&&f(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=ct("div","leaflet-default-icon-path",document.body),f=Ft(c,"background-image")||Ft(c,"backgroundImage");if(document.body.removeChild(c),f=this._stripUrl(f),f)return f;var _=document.querySelector('link[href$="leaflet.css"]');return _?_.href.substring(0,_.href.length-11-1):""}}),eh=Vi.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new as(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),$e(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&kt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var f=this._marker,_=f._map,w=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,O=ai(f._icon),he=_.getPixelBounds(),ke=_.getPixelOrigin(),Ie=Y(he.min._subtract(ke).add(P),he.max._subtract(ke).subtract(P));if(!Ie.contains(O)){var We=$((Math.max(Ie.max.x,O.x)-Ie.max.x)/(he.max.x-Ie.max.x)-(Math.min(Ie.min.x,O.x)-Ie.min.x)/(he.min.x-Ie.min.x),(Math.max(Ie.max.y,O.y)-Ie.max.y)/(he.max.y-Ie.max.y)-(Math.min(Ie.min.y,O.y)-Ie.min.y)/(he.min.y-Ie.min.y)).multiplyBy(w);_.panBy(We,{animate:!1}),this._draggable._newPos._add(We),this._draggable._startPos._add(We),ft(f._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=V(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(q(this._panRequest),this._panRequest=V(this._adjustPan.bind(this,c)))},_onDrag:function(c){var f=this._marker,_=f._shadow,w=ai(f._icon),P=f._map.layerPointToLatLng(w);_&&ft(_,w),f._latlng=P,c.latlng=P,c.oldLatLng=this._oldLatLng,f.fire("move",c).fire("drag",c)},_onDragEnd:function(c){q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Qo=Ws.extend({options:{icon:new mo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,f){x(this,f),this._latlng=R(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var f=this._latlng;return this._latlng=R(c),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),_=c.icon.createIcon(this._icon),w=!1;_!==this._icon&&(this._icon&&this._removeIcon(),w=!0,c.title&&(_.title=c.title),_.tagName==="IMG"&&(_.alt=c.alt||"")),$e(_,f),c.keyboard&&(_.tabIndex="0",_.setAttribute("role","button")),this._icon=_,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&$t(_,"focus",this._panOnFocus,this);var P=c.icon.createShadow(this._shadow),O=!1;P!==this._shadow&&(this._removeShadow(),O=!0),P&&($e(P,f),P.alt=""),this._shadow=P,c.opacity<1&&this._updateOpacity(),w&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&O&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vi(this._icon,"focus",this._panOnFocus,this),vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&vt(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&ft(this._icon,c),this._shadow&&ft(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&($e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),eh)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new eh(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&ei(this._icon,c),this._shadow&&ei(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var f=this.options.icon.options,_=f.iconSize?$(f.iconSize):$(0,0),w=f.iconAnchor?$(f.iconAnchor):$(0,0);c.panInside(this._latlng,{paddingTopLeft:w,paddingBottomRight:_.subtract(w)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function TC(c,f){return new Qo(c,f)}var Lr=Ws.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return x(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),th=Lr.extend({options:{fill:!0,radius:10},initialize:function(c,f){x(this,f),this._latlng=R(c),this._radius=this.options.radius},setLatLng:function(c){var f=this._latlng;return this._latlng=R(c),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var f=c&&c.radius||this._radius;return Lr.prototype.setStyle.call(this,c),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,f=this._radiusY||c,_=this._clickTolerance(),w=[c+_,f+_];this._pxBounds=new X(this._point.subtract(w),this._point.add(w))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function LC(c,f){return new th(c,f)}var hp=th.extend({initialize:function(c,f,_){if(typeof f=="number"&&(f=s({},_,{radius:f})),x(this,f),this._latlng=R(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Lr.prototype.setStyle,_project:function(){var c=this._latlng.lng,f=this._latlng.lat,_=this._map,w=_.options.crs;if(w.distance===U.distance){var P=Math.PI/180,O=this._mRadius/U.R/P,he=_.project([f+O,c]),ke=_.project([f-O,c]),Ie=he.add(ke).divideBy(2),We=_.unproject(Ie).lat,St=Math.acos((Math.cos(O*P)-Math.sin(f*P)*Math.sin(We*P))/(Math.cos(f*P)*Math.cos(We*P)))/P;(isNaN(St)||St===0)&&(St=O/Math.cos(Math.PI/180*f)),this._point=Ie.subtract(_.getPixelOrigin()),this._radius=isNaN(St)?0:Ie.x-_.project([We,c-St]).x,this._radiusY=Ie.y-he.y}else{var ii=w.unproject(w.project(this._latlng).subtract([this._mRadius,0]));this._point=_.latLngToLayerPoint(this._latlng),this._radius=this._point.x-_.latLngToLayerPoint(ii).x}this._updateBounds()}});function DC(c,f,_){return new hp(c,f,_)}var ir=Lr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,f){x(this,f),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var f=1/0,_=null,w=po,P,O,he=0,ke=this._parts.length;he<ke;he++)for(var Ie=this._parts[he],We=1,St=Ie.length;We<St;We++){P=Ie[We-1],O=Ie[We];var ii=w(c,P,O,!0);ii<f&&(f=ii,_=w(c,P,O))}return _&&(_.distance=Math.sqrt(f)),_},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Jd(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,f){return f=f||this._defaultShape(),c=R(c),f.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new te,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Ds(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var f=[],_=Ds(c),w=0,P=c.length;w<P;w++)_?(f[w]=R(c[w]),this._bounds.extend(f[w])):f[w]=this._convertLatLngs(c[w]);return f},_project:function(){var c=new X;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),f=new ie(c,c);this._rawPxBounds&&(this._pxBounds=new X([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(c,f,_){var w=c[0]instanceof F,P=c.length,O,he;if(w){for(he=[],O=0;O<P;O++)he[O]=this._map.latLngToLayerPoint(c[O]),_.extend(he[O]);f.push(he)}else for(O=0;O<P;O++)this._projectLatlngs(c[O],f,_)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,_,w,P,O,he,ke,Ie;for(_=0,P=0,O=this._rings.length;_<O;_++)for(Ie=this._rings[_],w=0,he=Ie.length;w<he-1;w++)ke=Kd(Ie[w],Ie[w+1],c,w,!0),ke&&(f[P]=f[P]||[],f[P].push(ke[0]),(ke[1]!==Ie[w+1]||w===he-2)&&(f[P].push(ke[1]),P++))}},_simplifyPoints:function(){for(var c=this._parts,f=this.options.smoothFactor,_=0,w=c.length;_<w;_++)c[_]=Gd(c[_],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,f){var _,w,P,O,he,ke,Ie=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(_=0,O=this._parts.length;_<O;_++)for(ke=this._parts[_],w=0,he=ke.length,P=he-1;w<he;P=w++)if(!(!f&&w===0)&&Zd(c,ke[P],ke[w])<=Ie)return!0;return!1}});function EC(c,f){return new ir(c,f)}ir._flat=Xd;var el=ir.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Aa(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var f=ir.prototype._convertLatLngs.call(this,c),_=f.length;return _>=2&&f[0]instanceof F&&f[0].equals(f[_-1])&&f.pop(),f},_setLatLngs:function(c){ir.prototype._setLatLngs.call(this,c),Ds(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ds(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,f=this.options.weight,_=new ie(f,f);if(c=new X(c.min.subtract(_),c.max.add(_)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var w=0,P=this._rings.length,O;w<P;w++)O=Pa(this._rings[w],c,!0),O.length&&this._parts.push(O)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var f=!1,_,w,P,O,he,ke,Ie,We;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(O=0,Ie=this._parts.length;O<Ie;O++)for(_=this._parts[O],he=0,We=_.length,ke=We-1;he<We;ke=he++)w=_[he],P=_[ke],w.y>c.y!=P.y>c.y&&c.x<(P.x-w.x)*(c.y-w.y)/(P.y-w.y)+w.x&&(f=!f);return f||ir.prototype._containsPoint.call(this,c,!0)}});function IC(c,f){return new el(c,f)}var nr=ua.extend({initialize:function(c,f){x(this,f),this._layers={},c&&this.addData(c)},addData:function(c){var f=T(c)?c:c.features,_,w,P;if(f){for(_=0,w=f.length;_<w;_++)P=f[_],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var O=this.options;if(O.filter&&!O.filter(c))return this;var he=ih(c,O);return he?(he.feature=ah(c),he.defaultOptions=he.options,this.resetStyle(he),O.onEachFeature&&O.onEachFeature(c,he),this.addLayer(he)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=s({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(f){this._setLayerStyle(f,c)},this)},_setLayerStyle:function(c,f){c.setStyle&&(typeof f=="function"&&(f=f(c.feature)),c.setStyle(f))}});function ih(c,f){var _=c.type==="Feature"?c.geometry:c,w=_?_.coordinates:null,P=[],O=f&&f.pointToLayer,he=f&&f.coordsToLatLng||up,ke,Ie,We,St;if(!w&&!_)return null;switch(_.type){case"Point":return ke=he(w),E_(O,c,ke,f);case"MultiPoint":for(We=0,St=w.length;We<St;We++)ke=he(w[We]),P.push(E_(O,c,ke,f));return new ua(P);case"LineString":case"MultiLineString":return Ie=nh(w,_.type==="LineString"?0:1,he),new ir(Ie,f);case"Polygon":case"MultiPolygon":return Ie=nh(w,_.type==="Polygon"?1:2,he),new el(Ie,f);case"GeometryCollection":for(We=0,St=_.geometries.length;We<St;We++){var ii=ih({geometry:_.geometries[We],type:"Feature",properties:c.properties},f);ii&&P.push(ii)}return new ua(P);case"FeatureCollection":for(We=0,St=_.features.length;We<St;We++){var ki=ih(_.features[We],f);ki&&P.push(ki)}return new ua(P);default:throw new Error("Invalid GeoJSON object.")}}function E_(c,f,_,w){return c?c(f,_):new Qo(_,w&&w.markersInheritOptions&&w)}function up(c){return new F(c[1],c[0],c[2])}function nh(c,f,_){for(var w=[],P=0,O=c.length,he;P<O;P++)he=f?nh(c[P],f-1,_):(_||up)(c[P]),w.push(he);return w}function fp(c,f){return c=R(c),c.alt!==void 0?[v(c.lng,f),v(c.lat,f),v(c.alt,f)]:[v(c.lng,f),v(c.lat,f)]}function sh(c,f,_,w){for(var P=[],O=0,he=c.length;O<he;O++)P.push(f?sh(c[O],Ds(c[O])?0:f-1,_,w):fp(c[O],w));return!f&&_&&P.length>0&&P.push(P[0].slice()),P}function tl(c,f){return c.feature?s({},c.feature,{geometry:f}):ah(f)}function ah(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var pp={toGeoJSON:function(c){return tl(this,{type:"Point",coordinates:fp(this.getLatLng(),c)})}};Qo.include(pp),hp.include(pp),th.include(pp),ir.include({toGeoJSON:function(c){var f=!Ds(this._latlngs),_=sh(this._latlngs,f?1:0,!1,c);return tl(this,{type:(f?"Multi":"")+"LineString",coordinates:_})}}),el.include({toGeoJSON:function(c){var f=!Ds(this._latlngs),_=f&&!Ds(this._latlngs[0]),w=sh(this._latlngs,_?2:f?1:0,!0,c);return f||(w=[w]),tl(this,{type:(_?"Multi":"")+"Polygon",coordinates:w})}}),Ar.include({toMultiPoint:function(c){var f=[];return this.eachLayer(function(_){f.push(_.toGeoJSON(c).geometry.coordinates)}),tl(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(c){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(c);var _=f==="GeometryCollection",w=[];return this.eachLayer(function(P){if(P.toGeoJSON){var O=P.toGeoJSON(c);if(_)w.push(O.geometry);else{var he=ah(O);he.type==="FeatureCollection"?w.push.apply(w,he.features):w.push(he)}}}),_?tl(this,{geometries:w,type:"GeometryCollection"}):{type:"FeatureCollection",features:w}}});function I_(c,f){return new nr(c,f)}var OC=I_,rh=Ws.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,f,_){this._url=c,this._bounds=K(f),x(this,_)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&($e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&ot(this._image),this},bringToBack:function(){return this._map&&Lt(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=K(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",f=this._image=c?this._url:ct("img");if($e(f,"leaflet-image-layer"),this._zoomAnimated&&$e(f,"leaflet-zoom-animated"),this.options.className&&$e(f,this.options.className),f.onselectstart=m,f.onmousemove=m,f.onload=r(this.fire,this,"load"),f.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(c){var f=this._map.getZoomScale(c.zoom),_=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Et(this._image,_,f)},_reset:function(){var c=this._image,f=new X(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),_=f.getSize();ft(c,f.min),c.style.width=_.x+"px",c.style.height=_.y+"px"},_updateOpacity:function(){ei(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),BC=function(c,f,_){return new rh(c,f,_)},O_=rh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",f=this._image=c?this._url:ct("video");if($e(f,"leaflet-image-layer"),this._zoomAnimated&&$e(f,"leaflet-zoom-animated"),this.options.className&&$e(f,this.options.className),f.onselectstart=m,f.onmousemove=m,f.onloadeddata=r(this.fire,this,"load"),c){for(var _=f.getElementsByTagName("source"),w=[],P=0;P<_.length;P++)w.push(_[P].src);this._url=_.length>0?w:[f.src];return}T(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var O=0;O<this._url.length;O++){var he=ct("source");he.src=this._url[O],f.appendChild(he)}}});function RC(c,f,_){return new O_(c,f,_)}var B_=rh.extend({_initImage:function(){var c=this._image=this._url;$e(c,"leaflet-image-layer"),this._zoomAnimated&&$e(c,"leaflet-zoom-animated"),this.options.className&&$e(c,this.options.className),c.onselectstart=m,c.onmousemove=m}});function zC(c,f,_){return new B_(c,f,_)}var Ta=Ws.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,f){c&&(c instanceof F||T(c))?(this._latlng=R(c),x(this,f)):(x(this,c),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&ei(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&ei(this._container,1),this.bringToFront(),this.options.interactive&&($e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(ei(this._container,0),this._removeTimeout=setTimeout(r(vt,void 0,this._container),200)):vt(this._container),this.options.interactive&&(kt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=R(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ot(this._container),this},bringToBack:function(){return this._map&&Lt(this._container),this},_prepareOpen:function(c){var f=this._source;if(!f._map)return!1;if(f instanceof ua){f=null;var _=this._source._layers;for(var w in _)if(_[w]._map){f=_[w];break}if(!f)return!1;this._source=f}if(!c)if(f.getCenter)c=f.getCenter();else if(f.getLatLng)c=f.getLatLng();else if(f.getBounds)c=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")c.innerHTML=f;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),f=$(this.options.offset),_=this._getAnchor();this._zoomAnimated?ft(this._container,c.add(_)):f=f.add(c).add(_);var w=this._containerBottom=-f.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=w+"px",this._container.style.left=P+"px"}},_getAnchor:function(){return[0,0]}});It.include({_initOverlay:function(c,f,_,w){var P=f;return P instanceof c||(P=new c(w).setContent(f)),_&&P.setLatLng(_),P}}),Ws.include({_initOverlay:function(c,f,_,w){var P=_;return P instanceof c?(x(P,w),P._source=this):(P=f&&!w?f:new c(w,this),P.setContent(_)),P}});var oh=Ta.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Ta.prototype.openOn.call(this,c)},onAdd:function(c){Ta.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Lr||this._source.on("preclick",Ps))},onRemove:function(c){Ta.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Lr||this._source.off("preclick",Ps))},getEvents:function(){var c=Ta.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",f=this._container=ct("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),_=this._wrapper=ct("div",c+"-content-wrapper",f);if(this._contentNode=ct("div",c+"-content",_),As(f),wa(this._contentNode),$t(f,"contextmenu",Ps),this._tipContainer=ct("div",c+"-tip-container",f),this._tip=ct("div",c+"-tip",this._tipContainer),this.options.closeButton){var w=this._closeButton=ct("a",c+"-close-button",f);w.setAttribute("role","button"),w.setAttribute("aria-label","Close popup"),w.href="#close",w.innerHTML='<span aria-hidden="true">&#215;</span>',$t(w,"click",function(P){an(P),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,f=c.style;f.width="",f.whiteSpace="nowrap";var _=c.offsetWidth;_=Math.min(_,this.options.maxWidth),_=Math.max(_,this.options.minWidth),f.width=_+1+"px",f.whiteSpace="",f.height="";var w=c.offsetHeight,P=this.options.maxHeight,O="leaflet-popup-scrolled";P&&w>P?(f.height=P+"px",$e(c,O)):kt(c,O),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),_=this._getAnchor();ft(this._container,f.add(_))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,f=parseInt(Ft(this._container,"marginBottom"),10)||0,_=this._container.offsetHeight+f,w=this._containerWidth,P=new ie(this._containerLeft,-_-this._containerBottom);P._add(ai(this._container));var O=c.layerPointToContainerPoint(P),he=$(this.options.autoPanPadding),ke=$(this.options.autoPanPaddingTopLeft||he),Ie=$(this.options.autoPanPaddingBottomRight||he),We=c.getSize(),St=0,ii=0;O.x+w+Ie.x>We.x&&(St=O.x+w-We.x+Ie.x),O.x-St-ke.x<0&&(St=O.x-ke.x),O.y+_+Ie.y>We.y&&(ii=O.y+_-We.y+Ie.y),O.y-ii-ke.y<0&&(ii=O.y-ke.y),(St||ii)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([St,ii]))}},_getAnchor:function(){return $(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),NC=function(c,f){return new oh(c,f)};It.mergeOptions({closePopupOnClick:!0}),It.include({openPopup:function(c,f,_){return this._initOverlay(oh,c,f,_).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Ws.include({bindPopup:function(c,f){return this._popup=this._initOverlay(oh,this._popup,c,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof ua||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){Ts(c);var f=c.layer||c.target;if(this._popup._source===f&&!(f instanceof Lr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=f,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var lh=Ta.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Ta.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Ta.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Ta.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",f=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=ct("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var f,_,w=this._map,P=this._container,O=w.latLngToContainerPoint(w.getCenter()),he=w.layerPointToContainerPoint(c),ke=this.options.direction,Ie=P.offsetWidth,We=P.offsetHeight,St=$(this.options.offset),ii=this._getAnchor();ke==="top"?(f=Ie/2,_=We):ke==="bottom"?(f=Ie/2,_=0):ke==="center"?(f=Ie/2,_=We/2):ke==="right"?(f=0,_=We/2):ke==="left"?(f=Ie,_=We/2):he.x<O.x?(ke="right",f=0,_=We/2):(ke="left",f=Ie+(St.x+ii.x)*2,_=We/2),c=c.subtract($(f,_,!0)).add(St).add(ii),kt(P,"leaflet-tooltip-right"),kt(P,"leaflet-tooltip-left"),kt(P,"leaflet-tooltip-top"),kt(P,"leaflet-tooltip-bottom"),$e(P,"leaflet-tooltip-"+ke),ft(P,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&ei(this._container,c)},_animateZoom:function(c){var f=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(f)},_getAnchor:function(){return $(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),FC=function(c,f){return new lh(c,f)};It.include({openTooltip:function(c,f,_){return this._initOverlay(lh,c,f,_).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Ws.include({bindTooltip:function(c,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(lh,this._tooltip,c,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var f=c?"off":"on",_={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?_.add=this._openTooltip:(_.mouseover=this._openTooltip,_.mouseout=this.closeTooltip,_.click=this._openTooltip,this._map?this._addFocusListeners():_.add=this._addFocusListeners),this._tooltip.options.sticky&&(_.mousemove=this._moveTooltip),this[f](_),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof ua||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var f=typeof c.getElement=="function"&&c.getElement();f&&($t(f,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),$t(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var f=typeof c.getElement=="function"&&c.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var f=c.latlng,_,w;this._tooltip.options.sticky&&c.originalEvent&&(_=this._map.mouseEventToContainerPoint(c.originalEvent),w=this._map.containerPointToLayerPoint(_),f=this._map.layerPointToLatLng(w)),this._tooltip.setLatLng(f)}});var R_=Tr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var f=c&&c.tagName==="DIV"?c:document.createElement("div"),_=this.options;if(_.html instanceof Element?(qt(f),f.appendChild(_.html)):f.innerHTML=_.html!==!1?_.html:"",_.bgPos){var w=$(_.bgPos);f.style.backgroundPosition=-w.x+"px "+-w.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function HC(c){return new R_(c)}Tr.Default=mo;var ic=Ws.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){x(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),vt(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ot(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Lt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof ie?c:new ie(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var f=this.getPane().children,_=-c(-1/0,1/0),w=0,P=f.length,O;w<P;w++)O=f[w].style.zIndex,f[w]!==this._container&&O&&(_=c(_,+O));isFinite(_)&&(this.options.zIndex=_+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ae.ielt9){ei(this._container,this.options.opacity);var c=+new Date,f=!1,_=!1;for(var w in this._tiles){var P=this._tiles[w];if(!(!P.current||!P.loaded)){var O=Math.min(1,(c-P.loaded)/200);ei(P.el,O),O<1?f=!0:(P.active?_=!0:this._onOpaqueTile(P),P.active=!0)}}_&&!this._noPrune&&this._pruneTiles(),f&&(q(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,f=this.options.maxZoom;if(c!==void 0){for(var _ in this._levels)_=Number(_),this._levels[_].el.children.length||_===c?(this._levels[_].el.style.zIndex=f-Math.abs(c-_),this._onUpdateLevel(_)):(vt(this._levels[_].el),this._removeTilesAtZoom(_),this._onRemoveLevel(_),delete this._levels[_]);var w=this._levels[c],P=this._map;return w||(w=this._levels[c]={},w.el=ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),w.el.style.zIndex=f,w.origin=P.project(P.unproject(P.getPixelOrigin()),c).round(),w.zoom=c,this._setZoomTransform(w,P.getCenter(),P.getZoom()),m(w.el.offsetWidth),this._onCreateLevel(w)),this._level=w,w}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var c,f,_=this._map.getZoom();if(_>this.options.maxZoom||_<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)f=this._tiles[c],f.retain=f.current;for(c in this._tiles)if(f=this._tiles[c],f.current&&!f.active){var w=f.coords;this._retainParent(w.x,w.y,w.z,w.z-5)||this._retainChildren(w.x,w.y,w.z,w.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var f in this._tiles)this._tiles[f].coords.z===c&&this._removeTile(f)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)vt(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,f,_,w){var P=Math.floor(c/2),O=Math.floor(f/2),he=_-1,ke=new ie(+P,+O);ke.z=+he;var Ie=this._tileCoordsToKey(ke),We=this._tiles[Ie];return We&&We.active?(We.retain=!0,!0):(We&&We.loaded&&(We.retain=!0),he>w?this._retainParent(P,O,he,w):!1)},_retainChildren:function(c,f,_,w){for(var P=2*c;P<2*c+2;P++)for(var O=2*f;O<2*f+2;O++){var he=new ie(P,O);he.z=_+1;var ke=this._tileCoordsToKey(he),Ie=this._tiles[ke];if(Ie&&Ie.active){Ie.retain=!0;continue}else Ie&&Ie.loaded&&(Ie.retain=!0);_+1<w&&this._retainChildren(P,O,_+1,w)}},_resetView:function(c){var f=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var f=this.options;return f.minNativeZoom!==void 0&&c<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<c?f.maxNativeZoom:c},_setView:function(c,f,_,w){var P=Math.round(f);this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom?P=void 0:P=this._clampZoom(P);var O=this.options.updateWhenZooming&&P!==this._tileZoom;(!w||O)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(c),_||this._pruneTiles(),this._noPrune=!!_),this._setZoomTransforms(c,f)},_setZoomTransforms:function(c,f){for(var _ in this._levels)this._setZoomTransform(this._levels[_],c,f)},_setZoomTransform:function(c,f,_){var w=this._map.getZoomScale(_,c.zoom),P=c.origin.multiplyBy(w).subtract(this._map._getNewPixelOrigin(f,_)).round();Ae.any3d?Et(c.el,P,w):ft(c.el,P)},_resetGrid:function(){var c=this._map,f=c.options.crs,_=this._tileSize=this.getTileSize(),w=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,f.wrapLng[0]],w).x/_.x),Math.ceil(c.project([0,f.wrapLng[1]],w).x/_.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([f.wrapLat[0],0],w).y/_.x),Math.ceil(c.project([f.wrapLat[1],0],w).y/_.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var f=this._map,_=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),w=f.getZoomScale(_,this._tileZoom),P=f.project(c,this._tileZoom).floor(),O=f.getSize().divideBy(w*2);return new X(P.subtract(O),P.add(O))},_update:function(c){var f=this._map;if(f){var _=this._clampZoom(f.getZoom());if(c===void 0&&(c=f.getCenter()),this._tileZoom!==void 0){var w=this._getTiledPixelBounds(c),P=this._pxBoundsToTileRange(w),O=P.getCenter(),he=[],ke=this.options.keepBuffer,Ie=new X(P.getBottomLeft().subtract([ke,-ke]),P.getTopRight().add([ke,-ke]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var We in this._tiles){var St=this._tiles[We].coords;(St.z!==this._tileZoom||!Ie.contains(new ie(St.x,St.y)))&&(this._tiles[We].current=!1)}if(Math.abs(_-this._tileZoom)>1){this._setView(c,_);return}for(var ii=P.min.y;ii<=P.max.y;ii++)for(var ki=P.min.x;ki<=P.max.x;ki++){var vs=new ie(ki,ii);if(vs.z=this._tileZoom,!!this._isValidTile(vs)){var Zn=this._tiles[this._tileCoordsToKey(vs)];Zn?Zn.current=!0:he.push(vs)}}if(he.sort(function(Es,nl){return Es.distanceTo(O)-nl.distanceTo(O)}),he.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Qs=document.createDocumentFragment();for(ki=0;ki<he.length;ki++)this._addTile(he[ki],Qs);this._level.el.appendChild(Qs)}}}},_isValidTile:function(c){var f=this._map.options.crs;if(!f.infinite){var _=this._globalTileRange;if(!f.wrapLng&&(c.x<_.min.x||c.x>_.max.x)||!f.wrapLat&&(c.y<_.min.y||c.y>_.max.y))return!1}if(!this.options.bounds)return!0;var w=this._tileCoordsToBounds(c);return K(this.options.bounds).overlaps(w)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var f=this._map,_=this.getTileSize(),w=c.scaleBy(_),P=w.add(_),O=f.unproject(w,c.z),he=f.unproject(P,c.z);return[O,he]},_tileCoordsToBounds:function(c){var f=this._tileCoordsToNwSe(c),_=new te(f[0],f[1]);return this.options.noWrap||(_=this._map.wrapLatLngBounds(_)),_},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var f=c.split(":"),_=new ie(+f[0],+f[1]);return _.z=+f[2],_},_removeTile:function(c){var f=this._tiles[c];f&&(vt(f.el),delete this._tiles[c],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){$e(c,"leaflet-tile");var f=this.getTileSize();c.style.width=f.x+"px",c.style.height=f.y+"px",c.onselectstart=m,c.onmousemove=m,Ae.ielt9&&this.options.opacity<1&&ei(c,this.options.opacity)},_addTile:function(c,f){var _=this._getTilePos(c),w=this._tileCoordsToKey(c),P=this.createTile(this._wrapCoords(c),r(this._tileReady,this,c));this._initTile(P),this.createTile.length<2&&V(r(this._tileReady,this,c,null,P)),ft(P,_),this._tiles[w]={el:P,coords:c,current:!0},f.appendChild(P),this.fire("tileloadstart",{tile:P,coords:c})},_tileReady:function(c,f,_){f&&this.fire("tileerror",{error:f,tile:_,coords:c});var w=this._tileCoordsToKey(c);_=this._tiles[w],_&&(_.loaded=+new Date,this._map._fadeAnimated?(ei(_.el,0),q(this._fadeFrame),this._fadeFrame=V(this._updateOpacity,this)):(_.active=!0,this._pruneTiles()),f||($e(_.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:_.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ae.ielt9||!this._map._fadeAnimated?V(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var f=new ie(this._wrapX?h(c.x,this._wrapX):c.x,this._wrapY?h(c.y,this._wrapY):c.y);return f.z=c.z,f},_pxBoundsToTileRange:function(c){var f=this.getTileSize();return new X(c.min.unscaleBy(f).floor(),c.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function jC(c){return new ic(c)}var il=ic.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,f){this._url=c,f=x(this,f),f.detectRetina&&Ae.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,f){return this._url===c&&f===void 0&&(f=!0),this._url=c,f||this.redraw(),this},createTile:function(c,f){var _=document.createElement("img");return $t(_,"load",r(this._tileOnLoad,this,f,_)),$t(_,"error",r(this._tileOnError,this,f,_)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(_.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(_.referrerPolicy=this.options.referrerPolicy),_.alt="",_.src=this.getTileUrl(c),_},getTileUrl:function(c){var f={r:Ae.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var _=this._globalTileRange.max.y-c.y;this.options.tms&&(f.y=_),f["-y"]=_}return A(this._url,s(f,this.options))},_tileOnLoad:function(c,f){Ae.ielt9?setTimeout(r(c,this,null,f),0):c(null,f)},_tileOnError:function(c,f,_){var w=this.options.errorTileUrl;w&&f.getAttribute("src")!==w&&(f.src=w),c(_,f)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,f=this.options.maxZoom,_=this.options.zoomReverse,w=this.options.zoomOffset;return _&&(c=f-c),c+w},_getSubdomain:function(c){var f=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var c,f;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(f=this._tiles[c].el,f.onload=m,f.onerror=m,!f.complete)){f.src=D;var _=this._tiles[c].coords;vt(f),delete this._tiles[c],this.fire("tileabort",{tile:f,coords:_})}},_removeTile:function(c){var f=this._tiles[c];if(f)return f.el.setAttribute("src",D),ic.prototype._removeTile.call(this,c)},_tileReady:function(c,f,_){if(!(!this._map||_&&_.getAttribute("src")===D))return ic.prototype._tileReady.call(this,c,f,_)}});function z_(c,f){return new il(c,f)}var N_=il.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,f){this._url=c;var _=s({},this.defaultWmsParams);for(var w in f)w in this.options||(_[w]=f[w]);f=x(this,f);var P=f.detectRetina&&Ae.retina?2:1,O=this.getTileSize();_.width=O.x*P,_.height=O.y*P,this.wmsParams=_},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,il.prototype.onAdd.call(this,c)},getTileUrl:function(c){var f=this._tileCoordsToNwSe(c),_=this._crs,w=Y(_.project(f[0]),_.project(f[1])),P=w.min,O=w.max,he=(this._wmsVersion>=1.3&&this._crs===Qd?[P.y,P.x,O.y,O.x]:[P.x,P.y,O.x,O.y]).join(","),ke=il.prototype.getTileUrl.call(this,c);return ke+k(this.wmsParams,ke,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+he},setParams:function(c,f){return s(this.wmsParams,c),f||this.redraw(),this}});function $C(c,f){return new N_(c,f)}il.WMS=N_,z_.wms=$C;var sr=Ws.extend({options:{padding:.1},initialize:function(c){x(this,c),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),$e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,f){var _=this._map.getZoomScale(f,this._zoom),w=this._map.getSize().multiplyBy(.5+this.options.padding),P=this._map.project(this._center,f),O=w.multiplyBy(-_).add(P).subtract(this._map._getNewPixelOrigin(c,f));Ae.any3d?Et(this._container,O,_):ft(this._container,O)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,f=this._map.getSize(),_=this._map.containerPointToLayerPoint(f.multiplyBy(-c)).round();this._bounds=new X(_,_.add(f.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),F_=sr.extend({options:{tolerance:0},getEvents:function(){var c=sr.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){sr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");$t(c,"mousemove",this._onMouseMove,this),$t(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),$t(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){q(this._redrawRequest),delete this._ctx,vt(this._container),vi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var f in this._layers)c=this._layers[f],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sr.prototype._update.call(this);var c=this._bounds,f=this._container,_=c.getSize(),w=Ae.retina?2:1;ft(f,c.min),f.width=w*_.x,f.height=w*_.y,f.style.width=_.x+"px",f.style.height=_.y+"px",Ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){sr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[l(c)]=c;var f=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var f=c._order,_=f.next,w=f.prev;_?_.prev=w:this._drawLast=w,w?w.next=_:this._drawFirst=_,delete c._order,delete this._layers[l(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var f=c.options.dashArray.split(/[, ]+/),_=[],w,P;for(P=0;P<f.length;P++){if(w=Number(f[P]),isNaN(w))return;_.push(w)}c.options._dashArray=_}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||V(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var f=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new X,this._redrawBounds.extend(c._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(c._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var f=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,f=this._redrawBounds;if(this._ctx.save(),f){var _=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,_.x,_.y),this._ctx.clip()}this._drawing=!0;for(var w=this._drawFirst;w;w=w.next)c=w.layer,(!f||c._pxBounds&&c._pxBounds.intersects(f))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,f){if(this._drawing){var _,w,P,O,he=c._parts,ke=he.length,Ie=this._ctx;if(ke){for(Ie.beginPath(),_=0;_<ke;_++){for(w=0,P=he[_].length;w<P;w++)O=he[_][w],Ie[w?"lineTo":"moveTo"](O.x,O.y);f&&Ie.closePath()}this._fillStroke(Ie,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var f=c._point,_=this._ctx,w=Math.max(Math.round(c._radius),1),P=(Math.max(Math.round(c._radiusY),1)||w)/w;P!==1&&(_.save(),_.scale(1,P)),_.beginPath(),_.arc(f.x,f.y/P,w,0,Math.PI*2,!1),P!==1&&_.restore(),this._fillStroke(_,c)}},_fillStroke:function(c,f){var _=f.options;_.fill&&(c.globalAlpha=_.fillOpacity,c.fillStyle=_.fillColor||_.color,c.fill(_.fillRule||"evenodd")),_.stroke&&_.weight!==0&&(c.setLineDash&&c.setLineDash(f.options&&f.options._dashArray||[]),c.globalAlpha=_.opacity,c.lineWidth=_.weight,c.strokeStyle=_.color,c.lineCap=_.lineCap,c.lineJoin=_.lineJoin,c.stroke())},_onClick:function(c){for(var f=this._map.mouseEventToLayerPoint(c),_,w,P=this._drawFirst;P;P=P.next)_=P.layer,_.options.interactive&&_._containsPoint(f)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(_))&&(w=_);this._fireEvent(w?[w]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,f)}},_handleMouseOut:function(c){var f=this._hoveredLayer;f&&(kt(this._container,"leaflet-interactive"),this._fireEvent([f],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,f){if(!this._mouseHoverThrottled){for(var _,w,P=this._drawFirst;P;P=P.next)_=P.layer,_.options.interactive&&_._containsPoint(f)&&(w=_);w!==this._hoveredLayer&&(this._handleMouseOut(c),w&&($e(this._container,"leaflet-interactive"),this._fireEvent([w],c,"mouseover"),this._hoveredLayer=w)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,f,_){this._map._fireDOMEvent(f,_||f.type,c)},_bringToFront:function(c){var f=c._order;if(f){var _=f.next,w=f.prev;if(_)_.prev=w;else return;w?w.next=_:_&&(this._drawFirst=_),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(c)}},_bringToBack:function(c){var f=c._order;if(f){var _=f.next,w=f.prev;if(w)w.next=_;else return;_?_.prev=w:w&&(this._drawLast=w),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(c)}}});function H_(c){return Ae.canvas?new F_(c):null}var nc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),VC={_initContainer:function(){this._container=ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(sr.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var f=c._container=nc("shape");$e(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",c._path=nc("path"),f.appendChild(c._path),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){var f=c._container;this._container.appendChild(f),c.options.interactive&&c.addInteractiveTarget(f)},_removePath:function(c){var f=c._container;vt(f),c.removeInteractiveTarget(f),delete this._layers[l(c)]},_updateStyle:function(c){var f=c._stroke,_=c._fill,w=c.options,P=c._container;P.stroked=!!w.stroke,P.filled=!!w.fill,w.stroke?(f||(f=c._stroke=nc("stroke")),P.appendChild(f),f.weight=w.weight+"px",f.color=w.color,f.opacity=w.opacity,w.dashArray?f.dashStyle=T(w.dashArray)?w.dashArray.join(" "):w.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=w.lineCap.replace("butt","flat"),f.joinstyle=w.lineJoin):f&&(P.removeChild(f),c._stroke=null),w.fill?(_||(_=c._fill=nc("fill")),P.appendChild(_),_.color=w.fillColor||w.color,_.opacity=w.fillOpacity):_&&(P.removeChild(_),c._fill=null)},_updateCircle:function(c){var f=c._point.round(),_=Math.round(c._radius),w=Math.round(c._radiusY||_);this._setPath(c,c._empty()?"M0 0":"AL "+f.x+","+f.y+" "+_+","+w+" 0,"+65535*360)},_setPath:function(c,f){c._path.v=f},_bringToFront:function(c){ot(c._container)},_bringToBack:function(c){Lt(c._container)}},ch=Ae.vml?nc:Be,sc=sr.extend({_initContainer:function(){this._container=ch("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ch("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){vt(this._container),vi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sr.prototype._update.call(this);var c=this._bounds,f=c.getSize(),_=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,_.setAttribute("width",f.x),_.setAttribute("height",f.y)),ft(_,c.min),_.setAttribute("viewBox",[c.min.x,c.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(c){var f=c._path=ch("path");c.options.className&&$e(f,c.options.className),c.options.interactive&&$e(f,"leaflet-interactive"),this._updateStyle(c),this._layers[l(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){vt(c._path),c.removeInteractiveTarget(c._path),delete this._layers[l(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var f=c._path,_=c.options;f&&(_.stroke?(f.setAttribute("stroke",_.color),f.setAttribute("stroke-opacity",_.opacity),f.setAttribute("stroke-width",_.weight),f.setAttribute("stroke-linecap",_.lineCap),f.setAttribute("stroke-linejoin",_.lineJoin),_.dashArray?f.setAttribute("stroke-dasharray",_.dashArray):f.removeAttribute("stroke-dasharray"),_.dashOffset?f.setAttribute("stroke-dashoffset",_.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),_.fill?(f.setAttribute("fill",_.fillColor||_.color),f.setAttribute("fill-opacity",_.fillOpacity),f.setAttribute("fill-rule",_.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(c,f){this._setPath(c,ue(c._parts,f))},_updateCircle:function(c){var f=c._point,_=Math.max(Math.round(c._radius),1),w=Math.max(Math.round(c._radiusY),1)||_,P="a"+_+","+w+" 0 1,0 ",O=c._empty()?"M0 0":"M"+(f.x-_)+","+f.y+P+_*2+",0 "+P+-_*2+",0 ";this._setPath(c,O)},_setPath:function(c,f){c._path.setAttribute("d",f)},_bringToFront:function(c){ot(c._path)},_bringToBack:function(c){Lt(c._path)}});Ae.vml&&sc.include(VC);function j_(c){return Ae.svg||Ae.vml?new sc(c):null}It.include({getRenderer:function(c){var f=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var f=this._paneRenderers[c];return f===void 0&&(f=this._createRenderer({pane:c}),this._paneRenderers[c]=f),f},_createRenderer:function(c){return this.options.preferCanvas&&H_(c)||j_(c)}});var $_=el.extend({initialize:function(c,f){el.prototype.initialize.call(this,this._boundsToLatLngs(c),f)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=K(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function WC(c,f){return new $_(c,f)}sc.create=ch,sc.pointsToPath=ue,nr.geometryToLayer=ih,nr.coordsToLatLng=up,nr.coordsToLatLngs=nh,nr.latLngToCoords=fp,nr.latLngsToCoords=sh,nr.getFeature=tl,nr.asFeature=ah,It.mergeOptions({boxZoom:!0});var V_=Vi.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){$t(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ci(),Zi(),this._startPoint=this._map.mouseEventToContainerPoint(c),$t(document,{contextmenu:Ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=ct("div","leaflet-zoom-box",this._container),$e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var f=new X(this._point,this._startPoint),_=f.getSize();ft(this._box,f.min),this._box.style.width=_.x+"px",this._box.style.height=_.y+"px"},_finish:function(){this._moved&&(vt(this._box),kt(this._container,"leaflet-crosshair")),bi(),nn(),vi(document,{contextmenu:Ts,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var f=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});It.addInitHook("addHandler","boxZoom",V_),It.mergeOptions({doubleClickZoom:!0});var W_=Vi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var f=this._map,_=f.getZoom(),w=f.options.zoomDelta,P=c.originalEvent.shiftKey?_-w:_+w;f.options.doubleClickZoom==="center"?f.setZoom(P):f.setZoomAround(c.containerPoint,P)}});It.addInitHook("addHandler","doubleClickZoom",W_),It.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var q_=Vi.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new as(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}$e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){kt(this._map._container,"leaflet-grab"),kt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=K(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var f=this._lastTime=+new Date,_=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(_),this._times.push(f),this._prunePositions(f)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,f){return c-(c-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;c.x<f.min.x&&(c.x=this._viscousLimit(c.x,f.min.x)),c.y<f.min.y&&(c.y=this._viscousLimit(c.y,f.min.y)),c.x>f.max.x&&(c.x=this._viscousLimit(c.x,f.max.x)),c.y>f.max.y&&(c.y=this._viscousLimit(c.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,f=Math.round(c/2),_=this._initialWorldOffset,w=this._draggable._newPos.x,P=(w-f+_)%c+f-_,O=(w+f+_)%c-f-_,he=Math.abs(P+_)<Math.abs(O+_)?P:O;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=he},_onDragEnd:function(c){var f=this._map,_=f.options,w=!_.inertia||c.noInertia||this._times.length<2;if(f.fire("dragend",c),w)f.fire("moveend");else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),O=(this._lastTime-this._times[0])/1e3,he=_.easeLinearity,ke=P.multiplyBy(he/O),Ie=ke.distanceTo([0,0]),We=Math.min(_.inertiaMaxSpeed,Ie),St=ke.multiplyBy(We/Ie),ii=We/(_.inertiaDeceleration*he),ki=St.multiplyBy(-ii/2).round();!ki.x&&!ki.y?f.fire("moveend"):(ki=f._limitOffset(ki,f.options.maxBounds),V(function(){f.panBy(ki,{duration:ii,easeLinearity:he,noMoveStart:!0,animate:!0})}))}}});It.addInitHook("addHandler","dragging",q_),It.mergeOptions({keyboard:!0,keyboardPanDelta:80});var U_=Vi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),$t(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,f=document.documentElement,_=c.scrollTop||f.scrollTop,w=c.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(w,_)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var f=this._panKeys={},_=this.keyCodes,w,P;for(w=0,P=_.left.length;w<P;w++)f[_.left[w]]=[-1*c,0];for(w=0,P=_.right.length;w<P;w++)f[_.right[w]]=[c,0];for(w=0,P=_.down.length;w<P;w++)f[_.down[w]]=[0,c];for(w=0,P=_.up.length;w<P;w++)f[_.up[w]]=[0,-1*c]},_setZoomDelta:function(c){var f=this._zoomKeys={},_=this.keyCodes,w,P;for(w=0,P=_.zoomIn.length;w<P;w++)f[_.zoomIn[w]]=c;for(w=0,P=_.zoomOut.length;w<P;w++)f[_.zoomOut[w]]=-c},_addHooks:function(){$t(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var f=c.keyCode,_=this._map,w;if(f in this._panKeys){if(!_._panAnim||!_._panAnim._inProgress)if(w=this._panKeys[f],c.shiftKey&&(w=$(w).multiplyBy(3)),_.options.maxBounds&&(w=_._limitOffset($(w),_.options.maxBounds)),_.options.worldCopyJump){var P=_.wrapLatLng(_.unproject(_.project(_.getCenter()).add(w)));_.panTo(P)}else _.panBy(w)}else if(f in this._zoomKeys)_.setZoom(_.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&_._popup&&_._popup.options.closeOnEscapeKey)_.closePopup();else return;Ts(c)}}});It.addInitHook("addHandler","keyboard",U_),It.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var G_=Vi.extend({addHooks:function(){$t(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var f=ns(c),_=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var w=Math.max(_-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),w),Ts(c)},_performZoom:function(){var c=this._map,f=c.getZoom(),_=this._map.options.zoomSnap||0;c._stop();var w=this._delta/(this._map.options.wheelPxPerZoomLevel*4),P=4*Math.log(2/(1+Math.exp(-Math.abs(w))))/Math.LN2,O=_?Math.ceil(P/_)*_:P,he=c._limitZoom(f+(this._delta>0?O:-O))-f;this._delta=0,this._startTime=null,he&&(c.options.scrollWheelZoom==="center"?c.setZoom(f+he):c.setZoomAround(this._lastMousePos,f+he))}});It.addInitHook("addHandler","scrollWheelZoom",G_);var qC=600;It.mergeOptions({tapHold:Ae.touchNative&&Ae.safari&&Ae.mobile,tapTolerance:15});var Z_=Vi.extend({addHooks:function(){$t(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var f=c.touches[0];this._startPos=this._newPos=new ie(f.clientX,f.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&($t(document,"touchend",an),$t(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),qC),$t(document,"touchend touchcancel contextmenu",this._cancel,this),$t(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){vi(document,"touchend",an),vi(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),vi(document,"touchend touchcancel contextmenu",this._cancel,this),vi(document,"touchmove",this._onMove,this)},_onMove:function(c){var f=c.touches[0];this._newPos=new ie(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,f){var _=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});_._simulated=!0,f.target.dispatchEvent(_)}});It.addInitHook("addHandler","tapHold",Z_),It.mergeOptions({touchZoom:Ae.touch,bounceAtZoomLimits:!0});var Y_=Vi.extend({addHooks:function(){$e(this._map._container,"leaflet-touch-zoom"),$t(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){kt(this._map._container,"leaflet-touch-zoom"),vi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var f=this._map;if(!(!c.touches||c.touches.length!==2||f._animatingZoom||this._zooming)){var _=f.mouseEventToContainerPoint(c.touches[0]),w=f.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(_.add(w)._divideBy(2))),this._startDist=_.distanceTo(w),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),$t(document,"touchmove",this._onTouchMove,this),$t(document,"touchend touchcancel",this._onTouchEnd,this),an(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var f=this._map,_=f.mouseEventToContainerPoint(c.touches[0]),w=f.mouseEventToContainerPoint(c.touches[1]),P=_.distanceTo(w)/this._startDist;if(this._zoom=f.getScaleZoom(P,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&P<1||this._zoom>f.getMaxZoom()&&P>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,P===1)return}else{var O=_._add(w)._divideBy(2)._subtract(this._centerPoint);if(P===1&&O.x===0&&O.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(O),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),q(this._animRequest);var he=r(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=V(he,this,!0),an(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,q(this._animRequest),vi(document,"touchmove",this._onTouchMove,this),vi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});It.addInitHook("addHandler","touchZoom",Y_),It.BoxZoom=V_,It.DoubleClickZoom=W_,It.Drag=q_,It.Keyboard=U_,It.ScrollWheelZoom=G_,It.TapHold=Z_,It.TouchZoom=Y_,t.Bounds=X,t.Browser=Ae,t.CRS=J,t.Canvas=F_,t.Circle=hp,t.CircleMarker=th,t.Class=ee,t.Control=mn,t.DivIcon=R_,t.DivOverlay=Ta,t.DomEvent=Js,t.DomUtil=ps,t.Draggable=as,t.Evented=ye,t.FeatureGroup=ua,t.GeoJSON=nr,t.GridLayer=ic,t.Handler=Vi,t.Icon=Tr,t.ImageOverlay=rh,t.LatLng=F,t.LatLngBounds=te,t.Layer=Ws,t.LayerGroup=Ar,t.LineUtil=sp,t.Map=It,t.Marker=Qo,t.Mixin=Ls,t.Path=Lr,t.Point=ie,t.PolyUtil=Qf,t.Polygon=el,t.Polyline=ir,t.Popup=oh,t.PosAnimation=gi,t.Projection=ap,t.Rectangle=$_,t.Renderer=sr,t.SVG=sc,t.SVGOverlay=B_,t.TileLayer=il,t.Tooltip=lh,t.Transformation=ve,t.Util=le,t.VideoOverlay=O_,t.bind=r,t.bounds=Y,t.canvas=H_,t.circle=DC,t.circleMarker=LC,t.control=ss,t.divIcon=HC,t.extend=s,t.featureGroup=cp,t.geoJSON=I_,t.geoJson=OC,t.gridLayer=jC,t.icon=dp,t.imageOverlay=BC,t.latLng=R,t.latLngBounds=K,t.layerGroup=lp,t.map=$n,t.marker=TC,t.point=$,t.polygon=IC,t.polyline=EC,t.popup=NC,t.rectangle=WC,t.setOptions=x,t.stamp=l,t.svg=j_,t.svgOverlay=zC,t.tileLayer=z_,t.tooltip=FC,t.transformation=Me,t.version=n,t.videoOverlay=RC;var UC=window.L;t.noConflict=function(){return window.L=UC,this},window.L=t})}(kc,kc.exports)),kc.exports}var PI=MI();const rc=Hx(PI);(function(){function i(e){return this instanceof i?(this._canvas=e=typeof e=="string"?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new i(e)}i.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(e,t){return this._data=e,this},max:function(e){return this._max=e,this},add:function(e){return this._data.push(e),this},clear:function(){return this._data=[],this},radius:function(e,t){t=t||15;var n=this._circle=document.createElement("canvas"),s=n.getContext("2d"),a=this._r=e+t;return n.width=n.height=2*a,s.shadowOffsetX=s.shadowOffsetY=200,s.shadowBlur=t,s.shadowColor="black",s.beginPath(),s.arc(a-200,a-200,e,0,2*Math.PI,!0),s.closePath(),s.fill(),this},gradient:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),s=n.createLinearGradient(0,0,0,256);t.width=1,t.height=256;for(var a in e)s.addColorStop(a,e[a]);return n.fillStyle=s,n.fillRect(0,0,1,256),this._grad=n.getImageData(0,0,1,256).data,this},draw:function(e){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var t=this._ctx;t.clearRect(0,0,this._width,this._height);for(var n,s=0,a=this._data.length;a>s;s++)n=this._data[s],t.globalAlpha=Math.max(n[2]/this._max,e||.05),t.drawImage(this._circle,n[0]-this._r,n[1]-this._r);var r=t.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),t.putImageData(r,0,0),this},_colorize:function(e,t){for(var n,s=3,a=e.length;a>s;s+=4)n=4*e[s],n&&(e[s-3]=t[n],e[s-2]=t[n+1],e[s-1]=t[n+2])}},window.simpleheat=i})(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(i,e){this._latlngs=i,L.setOptions(this,e)},setLatLngs:function(i){return this._latlngs=i,this.redraw()},addLatLng:function(i){return this._latlngs.push(i),this.redraw()},setOptions:function(i){return L.setOptions(this,i),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(i){this._map=i,this._canvas||this._initCanvas(),i._panes.overlayPane.appendChild(this._canvas),i.on("moveend",this._reset,this),i.options.zoomAnimation&&L.Browser.any3d&&i.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(i){i.getPanes().overlayPane.removeChild(this._canvas),i.off("moveend",this._reset,this),i.options.zoomAnimation&&i.off("zoomanim",this._animateZoom,this)},addTo:function(i){return i.addLayer(this),this},_initCanvas:function(){var i=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);i.style[e]="50% 50%";var t=this._map.getSize();i.width=t.x,i.height=t.y;var n=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(i,"leaflet-zoom-"+(n?"animated":"hide")),this._heat=simpleheat(i),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var i=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,i);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var i,e,t,n,s,a,r,o,l,d=[],h=this._heat._r,m=this._map.getSize(),v=new L.Bounds(L.point([-h,-h]),m.add([h,h])),b=this.options.max===void 0?1:this.options.max,y=this.options.maxZoom===void 0?this._map.getMaxZoom():this.options.maxZoom,x=1/Math.pow(2,Math.max(0,Math.min(y-this._map.getZoom(),12))),k=h/2,C=[],A=this._map._getMapPanePos(),T=A.x%k,I=A.y%k;for(i=0,e=this._latlngs.length;e>i;i++)if(t=this._map.latLngToContainerPoint(this._latlngs[i]),v.contains(t)){s=Math.floor((t.x-T)/k)+2,a=Math.floor((t.y-I)/k)+2;var D=this._latlngs[i].alt!==void 0?this._latlngs[i].alt:this._latlngs[i][2]!==void 0?+this._latlngs[i][2]:1;l=D*x,C[a]=C[a]||[],n=C[a][s],n?(n[0]=(n[0]*n[2]+t.x*l)/(n[2]+l),n[1]=(n[1]*n[2]+t.y*l)/(n[2]+l),n[2]+=l):C[a][s]=[t.x,t.y,l]}for(i=0,e=C.length;e>i;i++)if(C[i])for(r=0,o=C[i].length;o>r;r++)n=C[i][r],n&&d.push([Math.round(n[0]),Math.round(n[1]),Math.min(n[2],b)]);this._heat.data(d).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(i){var e=this._map.getZoomScale(i.zoom),t=this._map._getCenterOffset(i.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,t,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(t)+" scale("+e+")"}}),L.heatLayer=function(i,e){return new L.HeatLayer(i,e)};var AI=B('<div><div class="view svelte-1fb5eak"><h2 class="card-title text-center mb-4"> </h2> <div class="d-flex justify-content-between align-items-center mb-2 pe-2"><div class="map-stats svelte-1fb5eak"><small class="text-muted svelte-1fb5eak"> <!></small></div> <button class="btn btn-outline-primary btn-sm refresh-btn svelte-1fb5eak"><i></i> </button></div> <div class="map-container svelte-1fb5eak"><div id="map" class="svelte-1fb5eak"></div> <div class="layer-controls-overlay svelte-1fb5eak"><!></div></div></div></div>');function TI(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=ae(Gt([])),l=null,d={},h=null,m=ae(!0),v=ae(!1),b,y=ae("markers");pn(()=>(x(),N(),A(),b=setInterval(()=>{N(),(u(y)==="heatmap"||u(y)==="both")&&A()},5e3),()=>clearInterval(b)));function x(){if(l)return;l=rc.map("map",{crs:rc.CRS.Simple,minZoom:-6,maxZoom:2,zoomControl:!0,attributionControl:!1});const R=[[-8192/2,-8192/2],[8192/2,8192/2]];rc.imageOverlay("image32_satellite.jpg",R).addTo(l),l.setView([0,0],-3)}function k(){if(l){for(const K in d)d[K].remove();if(d={},u(y)==="markers"||u(y)==="both")for(const K of u(r)){const F=K.x*.66-350,R=K.y*.66-1450,J=rc.marker([R,F],{title:K.name}).addTo(l);J.bindTooltip(K.name,{permanent:!0,direction:"top",offset:[-15,-10]}),J.on("click",()=>Sg(K.id)),d[K.id]=J}}}function C(){if(l&&(h&&(l.removeLayer(h),h=null),(u(y)==="heatmap"||u(y)==="both")&&u(o).length>0)){const K=u(o).map(F=>{const R=F.x*.66-350;return[F.y*.66-1450,R,F.intensity]});h=rc.heatLayer(K,{radius:40,blur:25,maxZoom:18,max:1,minOpacity:.4,gradient:{0:"#313695",.1:"#4575b4",.2:"#74add1",.3:"#abd9e9",.4:"#e0f3f8",.5:"#ffffcc",.6:"#fed976",.7:"#feb24c",.8:"#fd8d3c",.9:"#f03b20",1:"#bd0026"}}),h.addTo(l)}}async function A(){if(!(!l||u(y)!=="heatmap"&&u(y)!=="both")){M(v,!0);try{const{status:K,data:F}=await Ve("getHeatMapData");K==="ok"?(M(o,F,!0),C()):ze(s()("notifications.playermap.failedtoloadheatmapdata"),"error")}catch(K){console.error("Failed to load heat map data:",K),ze(s()("notifications.playermap.failedtoloadheatmapdata"),"error")}finally{M(v,!1)}}}let T=ae(!1);function I(){l&&(M(T,!0),Promise.all([Ve("getAllPlayerLocations"),u(y)!=="markers"?Ve("getHeatMapData"):Promise.resolve({status:"ok",data:[]})]).then(([K,F])=>{K.status==="ok"?(M(r,K.data,!0),k()):console.error("Failed to reload player locations",K.data),F.status==="ok"&&(u(y)==="heatmap"||u(y)==="both")&&(M(o,F.data,!0),C()),setTimeout(()=>{M(T,!1)},1e3)}))}function D(K){M(y,K,!0),k(),C(),(K==="heatmap"||K==="both")&&A()}async function N(){const{status:K,data:F}=await Ve("getAllPlayerLocations");K==="ok"?(M(r,F,!0),k()):ze(s()("notifications.playermap.failedtoloadplayerlocations"),"error"),M(m,!1)}var z=AI();let H;var j=p(z),re=p(j),V=p(re),q=g(re,2),le=p(q),ee=p(le),W=p(ee),ne=g(W);{var ye=K=>{var F=Al();se(R=>S(F,`• ${R??""}`),[()=>s()("pages.playermap.heatmapPoints",{values:{count:u(o).length}})]),E(K,F)};Q(ne,K=>{(u(y)==="heatmap"||u(y)==="both")&&u(o).length>0&&K(ye)})}var ie=g(le,2);ie.__click=I;var Z=p(ie),$=g(Z),X=g(q,2),Y=g(p(X),2),te=p(Y);SI(te,{onLayerChange:D,get isLoading(){return u(v)},get activeLayer(){return u(y)},set activeLayer(K){M(y,K,!0)}}),se((K,F,R,J)=>{H=G(z,1,"page-container svelte-1fb5eak",null,H,K),S(V,F),S(W,`${R??""} `),ie.disabled=u(T),G(Z,1,`fas ${u(T)?"fa-spinner fa-spin":"fa-sync-alt"} me-1`,"svelte-1fb5eak"),S($,` ${J??""}`)},[()=>({light:!a().darkMode}),()=>s()("pages.playermap.title"),()=>s()("pages.playermap.playersOnline",{values:{count:u(r).length}}),()=>u(T)?s()("pages.playermap.refreshing"):s()("pages.playermap.refresh")]),E(i,z),Yt(),n()}hi(["click"]);function LI(i,e,t,n){if(!u(e))return;const s=u(e).id;Ve("deleteReport",{id:s}).then(({status:a})=>{a==="ok"&&(ri("sounds/action.mp3"),M(t,u(t).filter(r=>r.id!==s),!0)),M(n,!1),M(e,null)})}function DI(i,e,t){M(e,!1),M(t,null)}function EI(i,e,t){M(e,null),M(t,[],!0)}function II(i,e,t,n){M(e,!!u(t).trim()),i.key==="Enter"&&!i.shiftKey&&(n(),M(e,!1))}var OI=B('<div class="d-flex justify-content-center align-items-center svelte-1kpphsr" style="height: 100%;"><div class="spinner-border text-primary svelte-1kpphsr" role="status"><span class="visually-hidden svelte-1kpphsr"> </span></div></div>'),BI=(i,e)=>M(e,""),RI=B('<button class="btn btn-danger clear-btn svelte-1kpphsr" type="button" aria-label="Clear search"><i class="fas fa-times svelte-1kpphsr"></i></button>'),zI=B('<span class="badge bg-warning text-dark svelte-1kpphsr"> </span>'),NI=B('<span class="badge bg-secondary svelte-1kpphsr"> </span>'),FI=(i,e,t)=>e(u(t).id),HI=B('<button type="button" class="btn btn-sm btn-success svelte-1kpphsr"><i class="fas fa-check me-1 svelte-1kpphsr"></i> </button>'),jI=(i,e,t)=>e(u(t).id),$I=B('<button type="button" class="btn btn-sm btn-warning svelte-1kpphsr"><i class="fas fa-undo me-1 svelte-1kpphsr"></i> </button>'),VI=(i,e)=>Sg(u(e).playerId),WI=(i,e,t)=>e(u(t)),qI=(i,e,t)=>e(u(t)),UI=B('<div><div class="row-top svelte-1kpphsr"><div class="player-name svelte-1kpphsr"><strong class="svelte-1kpphsr"> </strong> <!></div> <div class="report-time svelte-1kpphsr"><small class="svelte-1kpphsr"> </small></div></div> <div class="report-content svelte-1kpphsr"><div class="report-message svelte-1kpphsr"><i class="fas fa-comment-alt svelte-1kpphsr"></i> <strong class="svelte-1kpphsr">Message:</strong> </div></div> <div class="actions svelte-1kpphsr"><!> <button type="button" class="btn btn-sm btn-info svelte-1kpphsr"><i class="fas fa-user me-1 svelte-1kpphsr"></i> </button> <button type="button" class="btn btn-sm btn-primary svelte-1kpphsr"><i class="fas fa-comments me-1 svelte-1kpphsr"></i> </button> <button type="button" class="btn btn-sm btn-danger svelte-1kpphsr"><i class="fas fa-trash-alt me-1 svelte-1kpphsr"></i> </button></div></div>'),GI=B('<div><div class="text-center py-5 svelte-1kpphsr"><i class="fas fa-clipboard-list fa-3x mb-3 text-muted svelte-1kpphsr"></i> <h5 class="text-muted svelte-1kpphsr"> </h5></div></div>'),ZI=B('<div class="view svelte-1kpphsr"><h2 class="card-title text-center svelte-1kpphsr"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1 svelte-1kpphsr"><h4 class="mb-0 svelte-1kpphsr"> </h4> <small class="text-muted svelte-1kpphsr"> </small></div> <div><span class="input-group-text svelte-1kpphsr"><i class="fas fa-search svelte-1kpphsr"></i></span> <input type="text" class="form-control svelte-1kpphsr"> <!></div> <div class="report-list svelte-1kpphsr"><!></div></div>'),YI=B('<div class="admin-name svelte-1kpphsr"> </div>'),KI=B('<div class="message-time svelte-1kpphsr"> </div>'),XI=B('<div><!> <div class="message-content svelte-1kpphsr"> </div> <!></div>'),JI=B('<div class="chat-message admin typing-indicator svelte-1kpphsr"><div class="message-content svelte-1kpphsr"><span class="typing-dot svelte-1kpphsr"></span> <span class="typing-dot svelte-1kpphsr"></span> <span class="typing-dot svelte-1kpphsr"></span></div></div>'),QI=B('<div><div><div class="chat-header svelte-1kpphsr"><strong class="svelte-1kpphsr"> </strong> <button class="btn btn-sm btn-danger ms-auto svelte-1kpphsr"><i class="fas fa-times svelte-1kpphsr"></i></button></div> <div class="chat-messages svelte-1kpphsr"><!> <!></div> <div class="chat-input svelte-1kpphsr"><input type="text" class="form-control svelte-1kpphsr"> <button class="btn btn-primary svelte-1kpphsr"> </button></div></div></div>'),eO=B('<div class="overlay-backdrop svelte-1kpphsr"><div><h5 class="svelte-1kpphsr"> </h5> <p class="svelte-1kpphsr"> </p> <p class="text-danger svelte-1kpphsr"> </p> <div class="d-flex justify-content-end gap-2 mt-3 svelte-1kpphsr"><button class="btn btn-secondary svelte-1kpphsr"> </button> <button class="btn btn-danger svelte-1kpphsr"> </button></div></div></div>'),tO=B("<div><!></div> <!> <!>",1);function iO(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(Gt([])),o=ae(!0),l=ae(null),d=ae(Gt([])),h=ae(""),m=ae(""),v=qi(()=>u(r).filter(Z=>Z.playerName.toLowerCase().includes(u(m).toLowerCase())||Z.subject.toLowerCase().includes(u(m).toLowerCase())||Z.message.toLowerCase().includes(u(m).toLowerCase()))),b=ae(!1),y=ae(null),x=null,k=ae(null),C=ae(!1);pn(()=>{A()});function A(){M(o,!0),Ve("getReports").then(({status:Z,data:$})=>{Z==="ok"?M(r,$,!0):console.error("Failed to load reports",$),M(o,!1)})}function T(Z){Ve("claimReport",{id:Z}).then(({status:$})=>{$==="ok"&&A(),ri("sounds/action.mp3")})}function I(Z){Ve("unclaimReport",{id:Z}).then(({status:$})=>{$==="ok"&&A(),ri("sounds/action.mp3")})}function D(Z){M(y,Z,!0),M(b,!0)}function N(Z){M(l,{reportId:Z.id,playerName:Z.playerName},!0),M(d,[],!0),Ve("getReportChatMessages",{reportId:Z.id}).then(({status:$,data:X})=>{$==="ok"?M(d,X.map(Y=>({...Y,reportId:Z.id})),!0):console.error("Failed to load chat messages",X)})}function z(){!u(h).trim()||!u(l)||(M(d,[...u(d),{reportId:u(l).reportId,from:"admin",message:u(h).trim(),adminName:s().currentUserPermissionGroup||"Admin",timestamp:Math.floor(Date.now()/1e3)}],!0),Ve("sendReportChatMessage",{reportId:u(l).reportId,message:u(h).trim()}),M(h,""))}fn(()=>{u(l)?(H(),x&&clearInterval(x),x=setInterval(H,1e3)):x&&(clearInterval(x),x=null)});function H(){if(u(l)&&u(l).reportId){const Z=u(l).reportId,$=u(d).filter(Y=>Y.reportId===Z),X=$.length>0?`${$[$.length-1].message}_${$[$.length-1].from}_${$[$.length-1].timestamp}`:null;Ve("getReportChatMessages",{reportId:Z}).then(async({status:Y,data:te})=>{if(Y==="ok"){const K=te.map(R=>({...R,reportId:Z})),F=K.length>0?`${K[K.length-1].message}_${K[K.length-1].from}_${K[K.length-1].timestamp}`:null;(K.length!==$.length||F!==X)&&(M(d,K,!0),await Ro(),u(k)&&(u(k).scrollTop=u(k).scrollHeight))}})}}fn(()=>{M(C,!!u(h).trim())}),fn(()=>{u(C)&&Ro().then(()=>{u(k)&&(u(k).scrollTop=u(k).scrollHeight)})}),Td(()=>{x&&clearInterval(x)});var j=tO(),re=yt(j);let V;var q=p(re);{var le=Z=>{var $=OI(),X=p($),Y=p(X),te=p(Y);se(K=>S(te,K),[()=>a()("pages.reports.loading")]),E(Z,$)},ee=Z=>{var $=ZI(),X=p($),Y=p(X),te=g(X,2),K=p(te),F=p(K),R=g(K,2),J=p(R),U=g(te,2);let ce;var fe=g(p(U),2),ve=g(fe,2);{var Me=oe=>{var me=RI();me.__click=[BI,m],E(oe,me)};Q(ve,oe=>{u(m)&&oe(Me)})}var Se=g(U,2),Pe=p(Se);{var Be=oe=>{var me=Bi(),Le=yt(me);Vt(Le,17,()=>u(v),Oe=>Oe.id,(Oe,_e)=>{var be=UI();let Te;var pe=p(be),de=p(pe),ge=p(de),xe=p(ge),we=g(ge,2);{var Re=Kt=>{var Wt=zI(),Rt=p(Wt);se(di=>S(Rt,di),[()=>a()("pages.reports.claimedby",{values:{name:u(_e).claimedByName}})]),E(Kt,Wt)},qe=Kt=>{var Wt=NI(),Rt=p(Wt);se(di=>S(Rt,di),[()=>a()("pages.reports.unclaimed")]),E(Kt,Wt)};Q(we,Kt=>{u(_e).claimedBy?Kt(Re):Kt(qe,!1)})}var Ge=g(de,2),tt=p(Ge),Ye=p(tt),Je=g(pe,2),Ue=p(Je),at=g(p(Ue),3),Ee=g(Je,2),He=p(Ee);{var Ke=Kt=>{var Wt=HI();Wt.__click=[FI,T,_e];var Rt=g(p(Wt));se(di=>S(Rt,` ${di??""}`),[()=>a()("pages.reports.claim")]),E(Kt,Wt)},it=Kt=>{var Wt=$I();Wt.__click=[jI,I,_e];var Rt=g(p(Wt));se(di=>S(Rt,` ${di??""}`),[()=>a()("pages.reports.unclaim")]),E(Kt,Wt)};Q(He,Kt=>{u(_e).claimedBy?Kt(it,!1):Kt(Ke)})}var pt=g(He,2);pt.__click=[VI,_e];var Tt=g(p(pt)),mt=g(pt,2);mt.__click=[WI,N,_e];var zt=g(p(mt)),oi=g(mt,2);oi.__click=[qI,D,_e];var Ai=g(p(oi));se((Kt,Wt,Rt,di,Ci)=>{Te=G(be,1,"report-row card-style svelte-1kpphsr",null,Te,Kt),S(xe,u(_e).playerName),S(Ye,Wt),S(at,` ${u(_e).message??""}`),S(Tt,` ${Rt??""}`),S(zt,` ${di??""}`),S(Ai,` ${Ci??""}`)},[()=>({light:!s().darkMode}),()=>new Date(u(_e).createdAt).toLocaleString(),()=>a()("pages.reports.viewplayer"),()=>a()("pages.reports.chat"),()=>a()("pages.reports.delete")]),E(Oe,be)}),E(oe,me)},ue=oe=>{var me=GI();let Le;var Oe=p(me),_e=g(p(Oe),2),be=p(_e);se((Te,pe)=>{Le=G(me,1,"no-reports-message svelte-1kpphsr",null,Le,Te),S(be,pe)},[()=>({light:!s().darkMode}),()=>a()("pages.reports.noreportsfound")]),E(oe,me)};Q(Pe,oe=>{u(v).length>0?oe(Be):oe(ue,!1)})}se((oe,me,Le,Oe,_e)=>{S(Y,oe),S(F,me),S(J,`${u(v).length??""} ${Le??""}`),ce=G(U,1,"input-group position-relative mb-3 svelte-1kpphsr",null,ce,Oe),Ot(fe,"placeholder",_e)},[()=>a()("pages.reports.title"),()=>a()("pages.reports.reportlist"),()=>a()("pages.reports.reports"),()=>({light:!s().darkMode}),()=>a()("pages.reports.searchreports")]),st(fe,()=>u(m),oe=>M(m,oe)),E(Z,$)};Q(q,Z=>{u(o)?Z(le):Z(ee,!1)})}var W=g(re,2);{var ne=Z=>{var $=QI();let X;var Y=p($);let te;var K=p(Y),F=p(K),R=p(F),J=g(F,2);J.__click=[EI,l,d];var U=g(K,2),ce=p(U);Vt(ce,17,()=>u(d).filter(ue=>{var oe;return ue.reportId===((oe=u(l))==null?void 0:oe.reportId)}),ue=>ue.message+ue.from+ue.timestamp,(ue,oe)=>{var me=XI(),Le=p(me);{var Oe=de=>{var ge=YI(),xe=p(ge);se(()=>S(xe,u(oe).adminName)),E(de,ge)};Q(Le,de=>{u(oe).from==="admin"&&u(oe).adminName&&de(Oe)})}var _e=g(Le,2),be=p(_e),Te=g(_e,2);{var pe=de=>{var ge=KI(),xe=p(ge);se(we=>S(xe,we),[()=>new Date(u(oe).timestamp*1e3).toLocaleTimeString()]),E(de,ge)};Q(Te,de=>{u(oe).timestamp&&de(pe)})}se(()=>{G(me,1,`chat-message ${u(oe).from??""}`,"svelte-1kpphsr"),S(be,u(oe).message)}),E(ue,me)});var fe=g(ce,2);{var ve=ue=>{var oe=JI();E(ue,oe)};Q(fe,ue=>{u(C)&&ue(ve)})}Kr(U,ue=>M(k,ue),()=>u(k));var Me=g(U,2),Se=p(Me);Se.__keydown=[II,C,h,z];var Pe=g(Se,2);Pe.__click=z;var Be=p(Pe);se((ue,oe,me,Le,Oe)=>{X=G($,1,"chat-overlay svelte-1kpphsr",null,X,ue),te=G(Y,1,"chat-window svelte-1kpphsr",null,te,oe),S(R,me),Ot(Se,"placeholder",Le),S(Be,Oe)},[()=>({light:!s().darkMode}),()=>({light:!s().darkMode}),()=>a()("pages.reports.chatwith",{values:{name:u(l).playerName}}),()=>a()("pages.reports.typeamessage"),()=>a()("pages.reports.send")]),st(Se,()=>u(h),ue=>M(h,ue)),gt(3,Y,()=>Xr,()=>({x:200,duration:300})),E(Z,$)};Q(W,Z=>{u(l)&&Z(ne)})}var ye=g(W,2);{var ie=Z=>{var $=eO(),X=p($),Y=p(X),te=p(Y),K=g(Y,2),F=p(K),R=g(K,2),J=p(R),U=g(R,2),ce=p(U);ce.__click=[DI,b,y];var fe=p(ce),ve=g(ce,2);ve.__click=[LI,y,r,b];var Me=p(ve);se((Se,Pe,Be,ue,oe)=>{G(X,1,`modal-box ${s().darkMode?"":"light"}`,"svelte-1kpphsr"),S(te,Se),S(F,Pe),S(J,Be),S(fe,ue),S(Me,oe)},[()=>a()("pages.reports.deletereport"),()=>a()("pages.reports.deletereportmessage",{values:{name:u(y).playerName}}),()=>a()("pages.reports.deletereportwarning"),()=>a()("modals.cancel"),()=>a()("pages.reports.deletereport")]),gt(3,X,()=>Ki,()=>({duration:200,start:.9})),gt(3,$,()=>Fi,()=>({duration:200})),E(Z,$)};Q(ye,Z=>{u(b)&&u(y)&&Z(ie)})}se(Z=>V=G(re,1,"page-container svelte-1kpphsr",null,V,Z),[()=>({light:!s().darkMode})]),E(i,j),Yt(),n()}hi(["click","keydown"]);function nO(i,e,t,n,s){const a=e().find(r=>r.license===u(t));!a||!u(n)||s()({license:a.license,name:a.name,group:u(n)})}var sO=B('<option class="svelte-wazh38"> </option>'),aO=B('<label class="permission-item svelte-wazh38"><input type="radio" name="permissionGroup" class="svelte-wazh38"> <span> </span></label>'),rO=B('<div class="overlay-backdrop svelte-wazh38"><div><h5> </h5> <div class="mb-3"><label class="form-label"> </label> <select><option class="svelte-wazh38"> </option><!></select></div> <div class="mb-3"><label class="form-label"> </label> <div><div class="permissions-list svelte-wazh38"></div></div></div> <div class="d-flex justify-content-end gap-2 mt-3"><button class="btn btn-secondary"> </button> <button class="btn btn-primary"> </button></div></div></div>');function oO(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t),r=[],o=Yi(e,"onlinePlayers",19,()=>[]),l=Yi(e,"groups",19,()=>[]),d=Yi(e,"onAdd",3,()=>{}),h=Yi(e,"onCancel",3,()=>{});let m=ae(""),v=ae("");function b(X){X.focus()}var y=rO(),x=p(y),k=p(x),C=p(k),A=g(k,2),T=p(A),I=p(T),D=g(T,2);let N;var z=p(D);z.value=z.__value="";var H=p(z),j=g(z);Vt(j,17,o,Si,(X,Y)=>{var te=sO(),K={},F=p(te);se(()=>{K!==(K=u(Y).license)&&(te.value=(te.__value=u(Y).license)??""),S(F,`${u(Y).name??""} (${u(Y).license??""})`)}),E(X,te)}),Fn(()=>ur(D,()=>u(m),X=>M(m,X))),Xs(D,X=>b==null?void 0:b(X));var re=g(A,2),V=p(re),q=p(V),le=g(V,2);let ee;var W=p(le);Vt(W,21,l,Si,(X,Y)=>{var te=aO(),K=p(te),F,R=g(K,2);let J;var U=p(R);se(ce=>{F!==(F=u(Y).name)&&(K.value=(K.__value=u(Y).name)??""),J=G(R,1,"svelte-wazh38",null,J,ce),S(U,u(Y).name)},[()=>({"super-admin":u(Y).name==="SuperAdmin"})]),yP(r,[],K,()=>(u(Y).name,u(v)),ce=>M(v,ce)),E(X,te)});var ne=g(re,2),ye=p(ne);ye.__click=function(...X){var Y;(Y=h())==null||Y.apply(this,X)};var ie=p(ye),Z=g(ye,2);Z.__click=[nO,o,m,v,d];var $=p(Z);se((X,Y,te,K,F,R,J,U)=>{G(x,1,`modal-box ${s().darkMode?"":"light"}`,"svelte-wazh38"),S(C,X),S(I,Y),N=G(D,1,"form-select dark-select svelte-wazh38",null,N,te),S(H,K),S(q,F),ee=G(le,1,"permissions-container svelte-wazh38",null,ee,R),S(ie,J),Z.disabled=!u(m)||!u(v),S($,U)},[()=>a()("pages.addadminuser.addnewadmin"),()=>a()("pages.addadminuser.selectplayer"),()=>({light:!s().darkMode}),()=>a()("pages.addadminuser.selectplayerplaceholder"),()=>a()("pages.addadminuser.permissiongroup"),()=>({light:!s().darkMode}),()=>a()("modals.cancel"),()=>a()("pages.addadminuser.addadmin")]),gt(3,x,()=>Ki,()=>({duration:200,start:.9})),gt(3,y,()=>Fi,()=>({duration:200})),E(i,y),Yt(),n()}hi(["click"]);function lO(i,e,t,n,s){u(e)&&Ve("deleteAdminUser",{license:u(e).license}).then(({status:a})=>{a==="ok"?(t(),ze(n()("notifications.adminusers.adminuserdeletedsuccessfully"),"success")):ze(n()("notifications.adminusers.failedtodeleteadminuser"),"error"),M(s,!1),M(e,null)})}function cO(i,e,t){M(e,!1),M(t,null)}function dO(i,e,t,n,s){u(e)&&u(t)&&u(e).group!==u(t)&&n(u(e),u(t)),s()}var hO=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),uO=(i,e)=>e.setCurrentPage("settings"),fO=(i,e)=>M(e,!0),pO=B('<div class="alert alert-info mt-3 mb-3" style="background: rgba(0, 0, 0, 0.2) !important; backdrop-filter: blur(8px);">Some admins are managed by Discord roles. These users cannot be edited or removed here; only admins added through this menu can be managed. <br><br> If you need to manage these admins, please check the server configuration file inside the 919ADMIN folder.</div>'),mO=B('<span class="badge badge-you svelte-iq2los" title="This is you">You</span>'),vO=B('<span class="badge badge-discord svelte-iq2los" title="Discord Admin">Discord</span>'),gO=B('<span class="badge badge-database svelte-iq2los" title="Database Admin">Database</span>'),_O=(i,e,t)=>e(u(t).license,u(t).license),bO=B('<span class="copied-tooltip svelte-iq2los">Copied!</span>'),yO=(i,e,t)=>e(u(t)),xO=(i,e,t)=>e(u(t)),wO=B('<div><div class="d-flex justify-content-between align-items-center mb-2"><div class="user-info svelte-iq2los"><strong class="user-name svelte-iq2los"> <!> <!></strong> <code class="license-code svelte-iq2los"> <button class="copy-license-btn svelte-iq2los"><i class="fas fa-copy"></i> <!></button></code></div></div> <div class="group-section svelte-iq2los"><span class="group-label svelte-iq2los"> </span> <span> </span></div> <div class="admin-card-actions svelte-iq2los"><button class="btn btn-outline-primary set-group-btn svelte-iq2los"><i class="fas fa-user-cog me-1 svelte-iq2los"></i>Set Group</button> <button class="btn btn-outline-danger svelte-iq2los"><i class="fas fa-trash-alt me-2"></i> </button></div></div>'),kO=B('<div class="view svelte-iq2los"><button class="btn btn-sm btn-outline-secondary mb-3 w-100"> </button> <h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <button class="btn btn-primary"> </button></div> <!> <div class="admin-list-scroll svelte-iq2los"><div class="admin-grid svelte-iq2los"></div></div></div>'),SO=B('<div class="overlay-backdrop svelte-iq2los"><div><h5> </h5> <p> </p> <p class="text-danger"> </p> <div class="d-flex justify-content-end gap-2 mt-3"><button class="btn btn-secondary"> </button> <button class="btn btn-danger"> </button></div></div></div>'),CO=(i,e,t)=>M(e,u(t).name,!0),MO=B('<label class="form-check-label svelte-iq2los"><input type="radio" name="modal_group" class="svelte-iq2los"> <span> </span></label>'),PO=B('<div class="overlay-backdrop svelte-iq2los"><div><h5>Set Permission Group</h5> <p>Set the permission group for <strong> </strong>:</p> <div class="permissions-list multi-column mb-3 svelte-iq2los"></div> <div class="d-flex justify-content-end gap-2 mt-3"><button class="btn btn-secondary"> </button> <button class="btn btn-primary"> </button></div></div></div>'),AO=B("<div><!></div> <!> <!> <!>",1);function TO(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(Gt([])),o=ae(Gt([])),l=ae(!0),d=ae(!1),h=qi(()=>s().permissionGroups),m=ae(!1),v=ae(null),b=ae(null),y=ae(!1),x=ae(null),k=ae(null);pn(()=>{C(),A()});function C(){M(l,!0),Ve("getAdminUsers").then(({status:X,data:Y})=>{X==="ok"?M(r,Y,!0):ze(a()("notifications.adminusers.failedtoloadadminusers"),"error"),M(l,!1)})}function A(){Ve("getOnlinePlayers").then(({status:X,data:Y})=>{X==="ok"&&M(o,Y,!0)})}function T(X){if(u(r).some(Y=>Y.license===X.license)){ze(a()("notifications.adminusers.thislicenseisalreadyanadmin"),"error");return}Ve("addAdminUser",X).then(({status:Y})=>{Y==="ok"&&(C(),M(d,!1))})}function I(X,Y){if(X.license===s().currentUserLicense){ze(a()("notifications.adminusers.youcannotchangeyourowngroup"),"error");return}Ve("setAdminUserGroups",{license:X.license,group:Y}).then(({status:te})=>{te==="ok"?(C(),ze(a()("notifications.adminusers.groupupdatedsuccessfully"),"success")):ze(a()("notifications.adminusers.failedtoupdategroups"),"error")})}function D(X){if(X.license===s().currentUserLicense){ze(a()("notifications.adminusers.youcannotdeleteyourownadminaccount"),"error");return}M(v,X,!0),M(m,!0)}async function N(X,Y){try{try{const te=document.createElement("textarea");te.value=X,te.style.position="fixed",te.style.opacity="0",te.style.pointerEvents="none",document.body.appendChild(te),te.select(),te.setSelectionRange(0,99999);const K=document.execCommand("copy");if(document.body.removeChild(te),!K)throw new Error("Copy failed")}catch{ze("Failed to copy license","error");return}M(b,Y,!0),await Ro(),ze("License copied to clipboard","success"),setTimeout(()=>{u(b)===Y&&M(b,null)},1200)}catch{ze("Failed to copy license","error")}}function z(X){M(x,X,!0),M(k,X.group,!0),M(y,!0)}function H(){M(y,!1),M(x,null),M(k,null)}var j=AO(),re=yt(j);let V;var q=p(re);{var le=X=>{var Y=hO(),te=p(Y),K=p(te),F=p(K);se(R=>S(F,R),[()=>a()("pages.adminusers.loading")]),E(X,Y)},ee=X=>{var Y=kO(),te=p(Y);te.__click=[uO,e];var K=p(te),F=g(te,2),R=p(F),J=g(F,2),U=p(J),ce=p(U),fe=g(U,2);fe.__click=[fO,d];var ve=p(fe),Me=g(J,2);{var Se=ue=>{var oe=pO();E(ue,oe)};Q(Me,ue=>{u(r).some(oe=>oe.type==="discord")&&ue(Se)})}var Pe=g(Me,2),Be=p(Pe);Vt(Be,21,()=>u(r),ue=>ue.license,(ue,oe)=>{var me=wO();let Le;var Oe=p(me),_e=p(Oe),be=p(_e),Te=p(be),pe=g(Te);{var de=mt=>{var zt=mO();E(mt,zt)};Q(pe,mt=>{u(oe).license===s().currentUserLicense&&mt(de)})}var ge=g(pe,2);{var xe=mt=>{var zt=vO();E(mt,zt)},we=mt=>{var zt=gO();E(mt,zt)};Q(ge,mt=>{u(oe).type==="discord"?mt(xe):mt(we,!1)})}var Re=g(be,2),qe=p(Re),Ge=g(qe);Ge.__click=[_O,N,oe];var tt=g(p(Ge),2);{var Ye=mt=>{var zt=bO();E(mt,zt)};Q(tt,mt=>{u(b)===u(oe).license&&mt(Ye)})}var Je=g(Oe,2),Ue=p(Je),at=p(Ue),Ee=g(Ue,2),He=p(Ee),Ke=g(Je,2),it=p(Ke);it.__click=[yO,z,oe];var pt=g(it,2);pt.__click=[xO,D,oe];var Tt=g(p(pt),1,!0);se((mt,zt,oi)=>{Le=G(me,1,"admin-card svelte-iq2los",null,Le,mt),S(Te,`${u(oe).name??""} `),Ot(Re,"title",u(oe).license),S(qe,`${u(oe).license??""} `),Ot(Ge,"title",u(b)===u(oe).license?"Copied!":"Copy license"),S(at,`${zt??""}:`),S(He,u(oe).group),it.disabled=u(oe).license===s().currentUserLicense||u(oe).type==="discord",pt.disabled=u(oe).license===s().currentUserLicense||u(oe).type==="discord",S(Tt,oi)},[()=>({light:!s().darkMode}),()=>a()("pages.adminusers.group"),()=>a()("pages.adminusers.deleteadminuser")]),E(ue,me)}),se((ue,oe,me,Le)=>{S(K,`← ${ue??""}`),S(R,oe),S(ce,me),S(ve,Le)},[()=>a()("pages.adminusers.back"),()=>a()("pages.adminusers.title"),()=>a()("pages.adminusers.adminlist"),()=>a()("pages.adminusers.addadmin")]),E(X,Y)};Q(q,X=>{u(l)?X(le):X(ee,!1)})}var W=g(re,2);{var ne=X=>{const Y=qi(()=>u(h).map(te=>({id:te.name,name:te.name})));oO(X,{get onlinePlayers(){return u(o)},get groups(){return u(Y)},onAdd:T,onCancel:()=>M(d,!1)})};Q(W,X=>{u(d)&&X(ne)})}var ye=g(W,2);{var ie=X=>{var Y=SO(),te=p(Y),K=p(te),F=p(K),R=g(K,2),J=p(R),U=g(R,2),ce=p(U),fe=g(U,2),ve=p(fe);ve.__click=[cO,m,v];var Me=p(ve),Se=g(ve,2);Se.__click=[lO,v,C,a,m];var Pe=p(Se);se((Be,ue,oe,me,Le)=>{G(te,1,`modal-box ${s().darkMode?"":"light"}`,"svelte-iq2los"),S(F,Be),S(J,ue),S(ce,oe),S(Me,me),S(Pe,Le)},[()=>a()("pages.adminusers.deleteadminuser"),()=>a()("pages.adminusers.deleteadminusermessage",{values:{name:u(v).name}}),()=>a()("pages.adminusers.deleteadminuserwarning"),()=>a()("modals.cancel"),()=>a()("modals.delete")]),gt(3,te,()=>Ki,()=>({duration:200,start:.9})),gt(3,Y,()=>Fi,()=>({duration:200})),E(X,Y)};Q(ye,X=>{u(m)&&u(v)&&X(ie)})}var Z=g(ye,2);{var $=X=>{var Y=PO(),te=p(Y),K=g(p(te),2),F=g(p(K)),R=p(F),J=g(K,2);Vt(J,21,()=>u(h),Si,(Se,Pe)=>{var Be=MO(),ue=p(Be);ue.__change=[CO,k,Pe];var oe=g(ue,2);let me;var Le=p(oe);se(Oe=>{pg(ue,u(k)===u(Pe).name),me=G(oe,1,"svelte-iq2los",null,me,Oe),S(Le,u(Pe).name)},[()=>({"super-admin":u(Pe).name==="SuperAdmin"})]),E(Se,Be)});var U=g(J,2),ce=p(U);ce.__click=H;var fe=p(ce),ve=g(ce,2);ve.__click=[dO,x,k,I,H];var Me=p(ve);se((Se,Pe)=>{G(te,1,`modal-box ${s().darkMode?"":"light"}`,"svelte-iq2los"),S(R,u(x).name),S(fe,Se),ve.disabled=!u(k)||u(k)===u(x).group,S(Me,Pe)},[()=>a()("modals.cancel"),()=>a()("modals.save")]),gt(3,te,()=>Ki,()=>({duration:200,start:.9})),gt(3,Y,()=>Fi,()=>({duration:200})),E(X,Y)};Q(Z,X=>{u(y)&&u(x)&&X($)})}se(X=>V=G(re,1,"page-container svelte-iq2los",null,V,X),[()=>({light:!s().darkMode})]),E(i,j),Yt(),n()}hi(["click","change"]);function LO(i,e,t,n){Object.values(e).forEach(s=>{s.permissions.forEach(a=>{u(t).add(a)})}),n().permissions=Array.from(u(t)).join(", ")}function DO(i,e,t){u(e).clear(),M(e,new Set,!0),t().permissions=Array.from(u(e)).join(", ")}var EO=B('<div class="alert alert-danger"> </div>'),IO=B('<div class="text-danger mt-1" style="font-size: 0.875em;"> </div>'),OO=(i,e,t)=>e(t()),BO=(i,e,t)=>e(t()),RO=(i,e,t)=>e(u(t)),zO=B('<label class="permission-item svelte-1ihofwq"><input type="checkbox" class="svelte-1ihofwq"> <span class="svelte-1ihofwq"> </span></label>'),NO=B('<div class="permission-category svelte-1ihofwq"><div class="category-header svelte-1ihofwq"><h6 class="mb-1 svelte-1ihofwq"> </h6> <div class="category-actions svelte-1ihofwq"><button class="btn btn-sm btn-link p-0 me-2 svelte-1ihofwq">All</button> <button class="btn btn-sm btn-link p-0 svelte-1ihofwq">None</button></div></div> <div class="permissions-list svelte-1ihofwq"></div></div>'),FO=B('<div class="overlay-backdrop svelte-1ihofwq"><div><h5> </h5> <!> <div class="mb-2"><label class="form-label">Name</label> <input placeholder="Only letters and numbers allowed"></div> <div class="mb-2"><label class="form-label">Description</label> <input> <!></div> <div class="mb-2"><label class="form-label">Permissions</label> <div class="d-flex gap-2 mb-2"><button class="btn btn-sm btn-primary">Select All</button> <button class="btn btn-sm btn-secondary">Deselect All</button></div> <div></div></div> <div class="d-flex justify-content-end gap-2 mt-2"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-primary"> </button></div></div></div>');function HO(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t),r=Yi(e,"editingGroupName",3,null),o=Yi(e,"groupFormVisible",3,!1),l=Yi(e,"errorMsg",3,""),d=Yi(e,"group",7),h=Yi(e,"onSave",3,()=>{}),m=Yi(e,"onClose",3,()=>{}),v=10;let b=ae("");const y=Gt({pages:{title:"Pages",permissions:["page:AdminUsers","page:PermissionGroups","page:PlayerList","page:AdminChat","page:Reports","page:Map","page:Items","page:Vehicles","page:Resources","page:Analytics","page:Tebex","page:PunishmentList","page:Addons","page:Characters"]},otherActions:{title:"Keybind Actions",permissions:["otheraction:ToggleNoClip","otheraction:TogglePlayerNames"]},quickActions:{title:"Quick Actions",permissions:s().quickActions.map(j=>j.key)},playerActions:{title:"Player Actions",permissions:s().playerActions.map(j=>j.key)}});let x=ae(Gt(new Set));fn(()=>{d().permissions&&M(x,new Set(d().permissions.split(",").map(j=>j.trim()).filter(Boolean)),!0)});function k(j){return/^[a-zA-Z0-9]+$/.test(j)}function C(){return!(!d().name||d().description.length<v||!k(d().name))}fn(()=>{!r()&&d().name&&(k(d().name)||(d().name=d().name.replace(/[^a-zA-Z0-9]/g,"")))}),fn(()=>{d().description.length>0&&d().description.length<v?M(b,`Description must be at least ${v} characters long`):M(b,"")});function A(j){u(x).has(j)?u(x).delete(j):u(x).add(j),d().permissions=Array.from(u(x)).join(", ")}function T(j){y[j].permissions.forEach(re=>{u(x).add(re)}),d().permissions=Array.from(u(x)).join(", ")}function I(j){y[j].permissions.forEach(re=>{u(x).delete(re)}),d().permissions=Array.from(u(x)).join(", ")}function D(j){o()&&!r()&&j.focus()}var N=Bi(),z=yt(N);{var H=j=>{var re=FO(),V=p(re),q=p(V),le=p(q),ee=g(q,2);{var W=Pe=>{var Be=EO(),ue=p(Be);se(()=>S(ue,l())),E(Pe,Be)};Q(ee,Pe=>{l()&&Pe(W)})}var ne=g(ee,2),ye=g(p(ne),2);let ie;Fn(()=>st(ye,()=>d().name,Pe=>d().name=Pe)),Xs(ye,Pe=>D==null?void 0:D(Pe));var Z=g(ne,2),$=g(p(Z),2);let X;Ot($,"placeholder",`Minimum ${v} characters required`);var Y=g($,2);{var te=Pe=>{var Be=IO(),ue=p(Be);se(()=>S(ue,u(b))),E(Pe,Be)};Q(Y,Pe=>{u(b)&&Pe(te)})}var K=g(Z,2),F=g(p(K),2),R=p(F);R.__click=[LO,y,x,d];var J=g(R,2);J.__click=[DO,x,d];var U=g(F,2);let ce;Vt(U,21,()=>Object.entries(y),Si,(Pe,Be)=>{let ue=()=>u(Be)[0],oe=()=>u(Be)[1];var me=NO(),Le=p(me),Oe=p(Le),_e=p(Oe),be=g(Oe,2),Te=p(be);Te.__click=[OO,T,ue];var pe=g(Te,2);pe.__click=[BO,I,ue];var de=g(Le,2);Vt(de,21,()=>oe().permissions,Si,(ge,xe)=>{var we=zO(),Re=p(we);Re.__click=[RO,A,xe];var qe=g(Re,2),Ge=p(qe);se((tt,Ye)=>{pg(Re,tt),S(Ge,Ye)},[()=>u(x).has(u(xe)),()=>u(xe).split(":")[1]]),E(ge,we)}),se(()=>S(_e,oe().title)),E(Pe,me)});var fe=g(K,2),ve=p(fe);ve.__click=function(...Pe){var Be;(Be=m())==null||Be.apply(this,Pe)};var Me=g(ve,2);Me.__click=function(...Pe){var Be;(Be=h())==null||Be.apply(this,Pe)};var Se=p(Me);se((Pe,Be,ue,oe,me,Le)=>{G(V,1,`modal-box ${s().darkMode?"":"light"}`,"svelte-1ihofwq"),S(le,`${Pe??""} ${Be??""}`),ie=G(ye,1,"form-control dark-input svelte-1ihofwq",null,ie,ue),ye.disabled=r()!==null,X=G($,1,"form-control dark-input svelte-1ihofwq",null,X,oe),ce=G(U,1,"permissions-container svelte-1ihofwq",null,ce,me),Me.disabled=Le,S(Se,r()?"Save Changes":"Add Group")},[()=>r()?a()("pages.permissiongroups.edit"):a()("pages.permissiongroups.add"),()=>a()("pages.permissiongroups.permissiongroup"),()=>({light:!s().darkMode}),()=>({light:!s().darkMode}),()=>({light:!s().darkMode}),()=>!C()]),st($,()=>d().description,Pe=>d().description=Pe),gt(3,V,()=>Ki,()=>({duration:200,start:.9})),gt(3,re,()=>Fi,()=>({duration:200})),E(j,re)};Q(z,j=>{o()&&j(H)})}E(i,N),Yt(),n()}hi(["click"]);async function jO(i,e,t,n,s){if(!u(e))return;(await Ve("deletePermissionGroup",{name:u(e)})).status==="ok"?Pf(u(t).filter(r=>r.name!==u(e))):M(n,"Failed to delete permission group."),M(s,!1),M(e,null)}function $O(i,e,t){M(e,!1),M(t,null)}var VO=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),WO=(i,e)=>e.setCurrentPage("settings"),qO=(i,e)=>e(),UO=(i,e,t)=>e(u(t)),GO=(i,e,t)=>e(u(t).name),ZO=B('<div><div class="d-flex justify-content-between align-items-center mb-2"><strong> </strong></div> <div class="mb-1 text-muted" style="font-size:0.95em;"> </div> <div class="permissions-box svelte-2zbonw"><div class="permissions-list multi-column svelte-2zbonw"><span> </span></div></div> <div class="d-flex gap-2"><button class="btn btn-sm btn-primary"> </button> <button class="btn btn-sm btn-danger"> </button></div></div>'),YO=B('<div class="view svelte-2zbonw"><button class="btn btn-sm btn-outline-secondary mb-3"> </button> <h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <button class="btn btn-success"> </button></div> <div class="admin-grid svelte-2zbonw"><div><div class="d-flex justify-content-between align-items-center mb-2"><strong> </strong> <span class="badge bg-warning text-dark"> </span></div> <div class="mb-1 text-muted" style="font-size:0.95em;"> </div> <div class="permissions-box svelte-2zbonw"><div class="permissions-list multi-column svelte-2zbonw"><span> </span></div></div></div> <!></div></div>'),KO=B('<div class="overlay-backdrop svelte-2zbonw"><div><h5> </h5> <p> </p> <p class="text-danger"> </p> <div class="d-flex justify-content-end gap-2 mt-3"><button class="btn btn-secondary"> </button> <button class="btn btn-danger"> </button></div></div></div>'),XO=B("<div><!></div> <!> <!>",1);function JO(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(null),o=ae(!1),l=ae(!0),d=ae(""),h=qi(()=>s().permissionGroups),m=ae(Gt({name:"",description:"",permissions:""})),v=ae(!1),b=ae(null);const y=qi(()=>s().permissionGroups[0]);pn(()=>{M(l,!1)});function x(){M(r,null),M(m,{name:"",description:"",permissions:""},!0),M(o,!0)}function k(le){le.name!=="SuperAdmin"&&(M(r,le.name,!0),M(m,{name:le.name,description:le.description??"",permissions:le.permissions.join(", ")},!0),M(o,!0))}async function C(){if(!u(m).name.trim()){M(d,"Group name is required.");return}if(u(m).name.toLowerCase()==="superadmin"){M(d,"Cannot create or modify SuperAdmin group.");return}const le={name:u(m).name.trim(),description:u(m).description.trim(),permissions:u(m).permissions.split(",").map(ee=>ee.trim()).filter(Boolean)};try{let ee;if(u(r)?ee=await Ve("editPermissionGroup",le):ee=await Ve("addPermissionGroup",le),ee.status==="error"){M(d,"Failed to save permission group");return}const W=await Ve("getPermissionGroups");W.status==="ok"?(Pf(W.data),M(o,!1),M(d,"")):M(d,"Failed to refresh permission groups.")}catch(ee){console.error("Error saving permission group:",ee),M(d,"Failed to save permission group. Please try again.")}}function A(le){if(le==="SuperAdmin"){M(d,"Cannot delete SuperAdmin group.");return}M(b,le,!0),M(v,!0)}function T(){M(o,!1),M(d,"")}var I=XO(),D=yt(I);let N;var z=p(D);{var H=le=>{var ee=VO(),W=p(ee),ne=p(W),ye=p(ne);se(ie=>S(ye,ie),[()=>a()("pages.permissiongroups.loading")]),E(le,ee)},j=le=>{var ee=YO(),W=p(ee);W.__click=[WO,e];var ne=p(W),ye=g(W,2),ie=p(ye),Z=g(ye,2),$=p(Z),X=p($),Y=g($,2);Y.__click=[qO,x];var te=p(Y),K=g(Z,2),F=p(K);let R;var J=p(F),U=p(J),ce=p(U),fe=g(U,2),ve=p(fe),Me=g(J,2),Se=p(Me),Pe=g(Me,2),Be=p(Pe),ue=p(Be),oe=p(ue),me=g(F,2);Vt(me,17,()=>u(h),Le=>Le.name,(Le,Oe)=>{var _e=Bi(),be=yt(_e);{var Te=pe=>{var de=ZO();let ge;var xe=p(de),we=p(xe),Re=p(we),qe=g(xe,2),Ge=p(qe),tt=g(qe,2),Ye=p(tt),Je=p(Ye),Ue=p(Je),at=g(tt,2),Ee=p(at);Ee.__click=[UO,k,Oe];var He=p(Ee),Ke=g(Ee,2);Ke.__click=[GO,A,Oe];var it=p(Ke);se((pt,Tt,mt,zt)=>{ge=G(de,1,"admin-card position-relative svelte-2zbonw",null,ge,pt),S(Re,u(Oe).name),S(Ge,u(Oe).description),S(Ue,Tt),S(He,mt),S(it,zt)},[()=>({light:!s().darkMode}),()=>u(Oe).permissions.join(", ")||a()("pages.permissiongroups.nopermissionsassigned"),()=>a()("pages.permissiongroups.edit"),()=>a()("pages.permissiongroups.delete")]),E(pe,de)};Q(be,pe=>{u(Oe).name!=="SuperAdmin"&&pe(Te)})}E(Le,_e)}),se((Le,Oe,_e,be,Te,pe,de)=>{S(ne,`← ${Le??""}`),S(ie,Oe),S(X,_e),S(te,be),R=G(F,1,"admin-card superadmin-card position-relative svelte-2zbonw",null,R,Te),S(ce,u(y).name),S(ve,pe),S(Se,u(y).description),S(oe,`${de??""} (*)`)},[()=>a()("pages.permissiongroups.back"),()=>a()("pages.permissiongroups.title"),()=>a()("pages.permissiongroups.grouplist"),()=>a()("pages.permissiongroups.addpermissiongroup"),()=>({light:!s().darkMode}),()=>a()("pages.permissiongroups.builtin"),()=>a()("pages.permissiongroups.allpermissions")]),E(le,ee)};Q(z,le=>{u(l)?le(H):le(j,!1)})}var re=g(D,2);HO(re,{get editingGroupName(){return u(r)},get groupFormVisible(){return u(o)},get errorMsg(){return u(d)},get group(){return u(m)},onSave:C,onClose:T});var V=g(re,2);{var q=le=>{var ee=KO(),W=p(ee),ne=p(W),ye=p(ne),ie=g(ne,2),Z=p(ie),$=g(ie,2),X=p($),Y=g($,2),te=p(Y);te.__click=[$O,v,b];var K=p(te),F=g(te,2);F.__click=[jO,b,h,d,v];var R=p(F);se((J,U,ce,fe,ve)=>{G(W,1,`modal-box ${s().darkMode?"":"light"}`,"svelte-2zbonw"),S(ye,J),S(Z,U),S(X,ce),S(K,fe),S(R,ve)},[()=>a()("pages.permissiongroups.deletepermissiongroup"),()=>a()("pages.permissiongroups.deletepermissiongroupmessage",{values:{name:u(b)}}),()=>a()("pages.permissiongroups.deletepermissiongroupwarning"),()=>a()("modals.cancel"),()=>a()("pages.permissiongroups.delete")]),gt(3,W,()=>Ki,()=>({duration:200,start:.9})),gt(3,ee,()=>Fi,()=>({duration:200})),E(le,ee)};Q(V,le=>{u(v)&&le(q)})}se(le=>N=G(D,1,"page-container svelte-2zbonw",null,N,le),[()=>({light:!s().darkMode})]),E(i,I),Yt(),n()}hi(["click"]);var QO=(i,e)=>e("offlineaction:SetCharacterName","Set Character Name",["First Name","Last Name"]),e4=B('<button class="edit-btn svelte-lxvwne" title="Edit Name"><i class="fas fa-edit"></i></button>'),t4=(i,e)=>e("offlineaction:GiveCash","Add Cash",["Amount"]),i4=B('<button class="edit-btn svelte-lxvwne" title="Add Cash"><i class="fas fa-plus"></i></button>'),n4=(i,e)=>e("offlineaction:RemoveCash","Remove Cash",["Amount"]),s4=B('<button class="edit-btn svelte-lxvwne" title="Remove Cash"><i class="fas fa-minus"></i></button>'),a4=(i,e)=>e("offlineaction:GiveBankMoney","Add Bank Money",["Amount"]),r4=B('<button class="edit-btn svelte-lxvwne" title="Add Bank"><i class="fas fa-plus"></i></button>'),o4=(i,e)=>e("offlineaction:RemoveBankMoney","Remove Bank Money",["Amount"]),l4=B('<button class="edit-btn svelte-lxvwne" title="Remove Bank"><i class="fas fa-minus"></i></button>'),c4=(i,e)=>e("offlineaction:SetJob","Set Job",["Job Name","Grade"]),d4=B('<button class="edit-btn svelte-lxvwne" title="Edit Job"><i class="fas fa-edit"></i></button>'),h4=B('<div><span class="label svelte-lxvwne"> </span> <div class="value d-flex align-items-center gap-2 svelte-lxvwne"><span> </span> <!></div></div>'),u4=(i,e)=>e("offlineaction:SetJob","Set Job",["Job Name","Grade"]),f4=B('<button class="edit-btn svelte-lxvwne" title="Set Job"><i class="fas fa-edit"></i></button>'),p4=B('<div><span class="label svelte-lxvwne"> </span> <div class="value d-flex align-items-center gap-2 svelte-lxvwne"><span> </span> <!></div></div>'),m4=(i,e)=>e("offlineaction:SetGang","Set Gang",["Gang Name","Grade"]),v4=B('<button class="edit-btn svelte-lxvwne" title="Edit Gang"><i class="fas fa-edit"></i></button>'),g4=B('<div><span class="label svelte-lxvwne"> </span> <div class="value d-flex align-items-center gap-2 svelte-lxvwne"><span> </span> <!></div></div>'),_4=(i,e)=>e("offlineaction:SetGang","Set Gang",["Gang Name","Grade"]),b4=B('<button class="edit-btn svelte-lxvwne" title="Set Gang"><i class="fas fa-edit"></i></button>'),y4=B('<div><span class="label svelte-lxvwne"> </span> <div class="value d-flex align-items-center gap-2 svelte-lxvwne"><span> </span> <!></div></div>'),x4=B('<div><span class="label svelte-lxvwne"> </span> <div class="value svelte-lxvwne"> </div></div>'),w4=B('<div><span class="label svelte-lxvwne"> </span> <div class="value svelte-lxvwne"> </div></div>'),k4=(i,e)=>M(e,!u(e)),S4=(i,e,t)=>e(u(t)),C4=B('<div class="identifier svelte-lxvwne"><span> </span> <button class="copy-btn svelte-lxvwne" title="Copy"><i class="fas fa-copy"></i></button></div>'),M4=(i,e)=>M(e,!u(e)),P4=B('<i class="fas fa-gavel text-danger" title="Ban"></i>'),A4=B('<i class="fas fa-exclamation-triangle text-warning" title="Warn"></i>'),T4=B('<i class="fas fa-sign-out-alt text-info" title="Kick"></i>'),L4=B('<span class="status-badge active svelte-lxvwne"><i class="fas fa-check-circle"></i> Active</span>'),D4=B('<span class="status-badge revoked svelte-lxvwne"><i class="fas fa-times-circle"></i> Revoked</span>'),E4=B('<span class="status-badge inactive svelte-lxvwne"><i class="fas fa-minus-circle"></i> Inactive</span>'),I4=B("<!> <!> <!>",1),O4=B('<div><span class="type-col svelte-lxvwne"><!> <!> <!> <span class="type-label svelte-lxvwne"> </span></span> <span class="reason-col"> </span> <span class="issuedby-col"> </span> <span class="issuedat-col small-date svelte-lxvwne"> </span> <span class="status-col"><!></span> <span class="expire-col small-date svelte-lxvwne"> </span></div>'),B4=B('<div class="punishments-card svelte-lxvwne"><div class="punishments-table-header svelte-lxvwne"><span class="type-col svelte-lxvwne">Type</span> <span class="reason-col">Reason</span> <span class="issuedby-col">Issued By</span> <span class="issuedat-col">Issued At</span> <span class="status-col">Status</span> <span class="expire-col">Expire</span></div> <!></div>'),R4=B('<div class="empty-list svelte-lxvwne">No punishments found.</div>'),z4=(i,e,t)=>e("createOfflineBan",t()("pages.punishment.ban")||"Ban Player",[t()("pages.punishment.duration_hours")||"Duration (hours)",t()("pages.punishment.reason_placeholder")||"Reason"]),N4=B('<button class="btn btn-sm btn-warning"><i class="fas fa-gavel me-1"></i> </button>'),F4=B('<div style="user-select:text;"><div class="header mb-2 svelte-lxvwne"><div class="d-flex align-items-center gap-2"><h3 class="character-name svelte-lxvwne"> </h3> <!></div> <small class="server-id svelte-lxvwne"> </small></div> <div class="info-grid mb-2 svelte-lxvwne"><div><span class="label svelte-lxvwne"> </span> <div class="value svelte-lxvwne"> </div></div> <div><span class="label svelte-lxvwne"> </span> <div class="value svelte-lxvwne"> </div></div> <div><span class="label svelte-lxvwne"> </span> <div class="value text-success d-flex align-items-center gap-2 svelte-lxvwne"><span> </span> <!> <!></div></div> <div><span class="label svelte-lxvwne"> </span> <div class="value text-success d-flex align-items-center gap-2 svelte-lxvwne"><span> </span> <!> <!></div></div></div> <div class="info-grid mb-2 svelte-lxvwne"><!> <!> <!></div> <div class="identifiers-section svelte-lxvwne"><div class="identifiers-header svelte-lxvwne"><span class="label svelte-lxvwne"> </span> <small class="toggle-text svelte-lxvwne"> </small></div> <div></div></div> <div class="history-section svelte-lxvwne"><div class="history-header svelte-lxvwne"><span class="label svelte-lxvwne"> </span> <small class="toggle-text svelte-lxvwne"> </small></div> <div><!></div></div> <div class="actions-section mt-3 svelte-lxvwne"><span class="label mb-2 svelte-lxvwne"> </span> <div class="action-buttons svelte-lxvwne"><!> <button class="btn btn-sm btn-danger"><i class="fas fa-user-slash me-1"></i> </button></div></div></div>');function H4(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=Yi(e,"selectedCharacter",7),o=ae(!1),l=ae(!1);function d(Qe){return`$${Qe.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`}function h(Qe){return new Date(Qe).toLocaleString()}function m(Qe,Ce,Ae){e.onOpenOfflinePrompt({key:Qe,title:Ce,promptPlaceholders:Ae})}function v(Qe){try{const Ce=document.createElement("textarea");Ce.value=Qe,Ce.style.position="fixed",Ce.style.opacity="0",Ce.style.pointerEvents="none",document.body.appendChild(Ce),Ce.select(),document.execCommand("copy"),document.body.removeChild(Ce)}catch(Ce){console.error("Copy failed",Ce)}}var b=F4(),y=p(b),x=p(y),k=p(x),C=p(k),A=g(k,2);{var T=Qe=>{var Ce=e4();Ce.__click=[QO,m],E(Qe,Ce)};Q(A,Qe=>{a().currentUserPermissions.includes("playeraction:SetCharacterName")&&Qe(T)})}var I=g(x,2),D=p(I),N=g(y,2),z=p(N),H=p(z),j=p(H),re=g(H,2),V=p(re),q=g(z,2),le=p(q),ee=p(le),W=g(le,2),ne=p(W),ye=g(q,2),ie=p(ye),Z=p(ie),$=g(ie,2),X=p($),Y=p(X),te=g(X,2);{var K=Qe=>{var Ce=i4();Ce.__click=[t4,m],E(Qe,Ce)};Q(te,Qe=>{a().currentUserPermissions.includes("playeraction:GiveCash")&&Qe(K)})}var F=g(te,2);{var R=Qe=>{var Ce=s4();Ce.__click=[n4,m],E(Qe,Ce)};Q(F,Qe=>{a().currentUserPermissions.includes("playeraction:RemoveCash")&&Qe(R)})}var J=g(ye,2),U=p(J),ce=p(U),fe=g(U,2),ve=p(fe),Me=p(ve),Se=g(ve,2);{var Pe=Qe=>{var Ce=r4();Ce.__click=[a4,m],E(Qe,Ce)};Q(Se,Qe=>{a().currentUserPermissions.includes("playeraction:GiveBankMoney")&&Qe(Pe)})}var Be=g(Se,2);{var ue=Qe=>{var Ce=l4();Ce.__click=[o4,m],E(Qe,Ce)};Q(Be,Qe=>{a().currentUserPermissions.includes("playeraction:RemoveBankMoney")&&Qe(ue)})}var oe=g(N,2),me=p(oe);{var Le=Qe=>{var Ce=h4(),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t),Pt=p(bt),Ht=g(bt,2);{var Nt=rt=>{var dt=d4();dt.__click=[c4,m],E(rt,dt)};Q(Ht,rt=>{a().currentUserPermissions.includes("playeraction:SetJob")&&rt(Nt)})}se(rt=>{var dt,Qt;S(xt,rt),S(Pt,`${((dt=r().job)==null?void 0:dt.label)??""} (${((Qt=r().job)==null?void 0:Qt.grade_label)??""})`)},[()=>s()("pages.characterlist.job")]),E(Qe,Ce)},Oe=Qe=>{var Ce=p4(),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t),Pt=p(bt),Ht=g(bt,2);{var Nt=rt=>{var dt=f4();dt.__click=[u4,m],E(rt,dt)};Q(Ht,rt=>{a().currentUserPermissions.includes("playeraction:SetJob")&&rt(Nt)})}se((rt,dt)=>{S(xt,rt),S(Pt,dt)},[()=>s()("pages.characterlist.job"),()=>s()("pages.characterlist.none")]),E(Qe,Ce)};Q(me,Qe=>{r().job?Qe(Le):Qe(Oe,!1)})}var _e=g(me,2);{var be=Qe=>{var Ce=g4(),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t),Pt=p(bt),Ht=g(bt,2);{var Nt=rt=>{var dt=v4();dt.__click=[m4,m],E(rt,dt)};Q(Ht,rt=>{a().currentUserPermissions.includes("playeraction:SetGang")&&rt(Nt)})}se(rt=>{var dt,Qt;S(xt,rt),S(Pt,`${((dt=r().gang)==null?void 0:dt.label)??""} (${((Qt=r().gang)==null?void 0:Qt.grade_label)??""})`)},[()=>s()("pages.characterlist.gang")]),E(Qe,Ce)},Te=Qe=>{var Ce=y4(),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t),Pt=p(bt),Ht=g(bt,2);{var Nt=rt=>{var dt=b4();dt.__click=[_4,m],E(rt,dt)};Q(Ht,rt=>{a().currentUserPermissions.includes("playeraction:SetGang")&&rt(Nt)})}se((rt,dt)=>{S(xt,rt),S(Pt,dt)},[()=>s()("pages.characterlist.gang"),()=>s()("pages.characterlist.none")]),E(Qe,Ce)};Q(_e,Qe=>{r().gang?Qe(be):Qe(Te,!1)})}var pe=g(_e,2);{var de=Qe=>{var Ce=x4(),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t);se(Pt=>{S(xt,Pt),S(bt,r().phone)},[()=>s()("pages.characterlist.phone")]),E(Qe,Ce)},ge=Qe=>{var Ce=w4(),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t);se((Pt,Ht)=>{S(xt,Pt),S(bt,Ht)},[()=>s()("pages.characterlist.phone"),()=>s()("pages.characterlist.none")]),E(Qe,Ce)};Q(pe,Qe=>{r().phone?Qe(de):Qe(ge,!1)})}var xe=g(oe,2),we=p(xe);we.__click=[k4,o];var Re=p(we),qe=p(Re),Ge=g(Re,2),tt=p(Ge),Ye=g(we,2);let Je;Vt(Ye,21,()=>r().identifiers??[],Si,(Qe,Ce)=>{var Ae=C4(),xt=p(Ae),_t=p(xt),bt=g(xt,2);bt.__click=[S4,v,Ce],se(()=>S(_t,u(Ce))),E(Qe,Ae)});var Ue=g(xe,2),at=p(Ue);at.__click=[M4,l];var Ee=p(at),He=p(Ee),Ke=g(Ee,2),it=p(Ke),pt=g(at,2);let Tt;var mt=p(pt);{var zt=Qe=>{var Ce=Bi(),Ae=yt(Ce);{var xt=bt=>{var Pt=B4(),Ht=g(p(Pt),2);Vt(Ht,17,()=>r().punishments,Si,(Nt,rt,dt)=>{var Qt=O4();G(Qt,1,`punishments-row ${dt%2===0?"even":"odd"}`,"svelte-lxvwne");var mi=p(Qt),Ii=p(mi);{var Ji=Dt=>{var $e=P4();E(Dt,$e)};Q(Ii,Dt=>{u(rt).type==="ban"&&Dt(Ji)})}var bn=g(Ii,2);{var Ri=Dt=>{var $e=A4();E(Dt,$e)};Q(bn,Dt=>{u(rt).type==="warn"&&Dt(Ri)})}var Fe=g(bn,2);{var et=Dt=>{var $e=T4();E(Dt,$e)};Q(Fe,Dt=>{u(rt).type==="kick"&&Dt(et)})}var nt=g(Fe,2),lt=p(nt),wt=g(mi,2),Xt=p(wt),Ut=g(wt,2),ut=p(Ut),Bt=g(Ut,2),jt=p(Bt),Ft=g(Bt,2),ct=p(Ft);{var vt=Dt=>{var $e=I4(),kt=yt($e);{var si=Et=>{var ft=L4();E(Et,ft)};Q(kt,Et=>{u(rt).status==="active"&&Et(si)})}var li=g(kt,2);{var ei=Et=>{var ft=D4();E(Et,ft)};Q(li,Et=>{u(rt).status==="revoked"&&Et(ei)})}var Li=g(li,2);{var wi=Et=>{var ft=E4();E(Et,ft)};Q(Li,Et=>{u(rt).status==="inactive"&&Et(wi)})}E(Dt,$e)},qt=Dt=>{var $e=Al("-");E(Dt,$e)};Q(ct,Dt=>{u(rt).type==="ban"?Dt(vt):Dt(qt,!1)})}var ot=g(Ft,2),Lt=p(ot);se((Dt,$e,kt)=>{S(lt,Dt),S(Xt,u(rt).reason),S(ut,u(rt).issuedBy),S(jt,$e),S(Lt,kt)},[()=>u(rt).type.charAt(0).toUpperCase()+u(rt).type.slice(1),()=>new Date(u(rt).issuedAt).toLocaleString(),()=>u(rt).expire?new Date(u(rt).expire*1e3).toLocaleString():"-"]),E(Nt,Qt)}),E(bt,Pt)},_t=bt=>{var Pt=R4();E(bt,Pt)};Q(Ae,bt=>{r().punishments&&r().punishments.length>0?bt(xt):bt(_t,!1)})}E(Qe,Ce)};Q(mt,Qe=>{u(l)&&Qe(zt)})}var oi=g(Ue,2),Ai=p(oi),Kt=p(Ai),Wt=g(Ai,2),Rt=p(Wt);{var di=Qe=>{var Ce=N4();Ce.__click=[z4,m,s];var Ae=g(p(Ce));se(xt=>S(Ae,` ${xt??""}`),[()=>s()("pages.punishment.ban")||"Ban"]),E(Qe,Ce)};Q(Rt,Qe=>{a().currentUserPermissions.includes("playeraction:Ban")&&Qe(di)})}var Ci=g(Rt,2);Ci.__click=function(...Qe){var Ce;(Ce=e.onRequestDelete)==null||Ce.apply(this,Qe)};var Ti=g(p(Ci));se((Qe,Ce,Ae,xt,_t,bt,Pt,Ht,Nt,rt,dt,Qt,mi,Ii,Ji)=>{G(b,1,`player-card ${a().darkMode?"dark":"light"} card shadow-sm p-3`,"svelte-lxvwne"),S(C,r().characterName),S(D,`ID: ${r().id??""}`),S(j,Qe),S(V,r().citizenId),S(ee,Ce),S(ne,Ae),S(Z,xt),S(Y,_t),S(ce,bt),S(Me,Pt),S(qe,Ht),S(tt,Nt),Je=G(Ye,1,"identifiers-list svelte-lxvwne",null,Je,rt),S(He,dt),S(it,Qt),Tt=G(pt,1,"punishments-list svelte-lxvwne",null,Tt,mi),S(Kt,Ii),S(Ti,` ${Ji??""}`)},[()=>s()("pages.characterlist.citizenid"),()=>s()("pages.characterlist.lastseen"),()=>h(r().lastSeen),()=>s()("pages.characterlist.cash"),()=>d(r().cash??0),()=>s()("pages.characterlist.bank"),()=>d(r().bank??0),()=>s()("pages.characterlist.identifiers"),()=>u(o)?s()("pages.characterlist.hide"):s()("pages.characterlist.show"),()=>({expanded:u(o)}),()=>s()("pages.characterlist.history"),()=>u(l)?s()("pages.characterlist.hide"):s()("pages.characterlist.show"),()=>({expanded:u(l)}),()=>s()("pages.characterlist.characteractions"),()=>s()("pages.characterlist.delete")]),E(i,b),Yt(),n()}hi(["click"]);var j4=(i,e)=>i.key==="Enter"&&e.confirmPrompt(),$4=B('<div class="col"><input type="text" class="form-control"></div>'),V4=B('<div class="row g-2 mb-3"></div>'),W4=(i,e)=>i.key==="Enter"&&e.confirmPrompt(),q4=B('<input type="text" class="form-control mb-3">'),U4=B('<div class="overlay-backdrop svelte-16vkgn1"><div><h5 class="mb-3"> </h5> <!> <div class="d-flex justify-content-end gap-2"><button class="btn btn-secondary"> </button> <button class="btn btn-success"> </button></div></div></div>');function G4(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=Yi(e,"promptInputs",15);function r(h,m){m&&h.focus()}var o=Bi(),l=yt(o);{var d=h=>{var m=U4(),v=p(m);let b;var y=p(v),x=p(y),k=g(y,2);{var C=H=>{var j=V4();Vt(j,21,a,Si,(re,V,q)=>{var le=$4(),ee=p(le);ee.__keydown=[j4,e],Fn(()=>st(ee,()=>a()[q],W=>a(a()[q]=W,!0))),Xs(ee,(W,ne)=>r==null?void 0:r(W,ne),()=>q===0),se(W=>Ot(ee,"placeholder",W),[()=>{var W,ne;return((ne=(W=e.pendingAction)==null?void 0:W.promptPlaceholders)==null?void 0:ne[q])??s()("modals.input")}]),E(re,le)}),E(H,j)},A=H=>{var j=Bi(),re=yt(j);Vt(re,17,a,Si,(V,q,le)=>{var ee=q4();ee.__keydown=[W4,e],Fn(()=>st(ee,()=>a()[le],W=>a(a()[le]=W,!0))),Xs(ee,(W,ne)=>r==null?void 0:r(W,ne),()=>le===0),se(W=>Ot(ee,"placeholder",W),[()=>{var W,ne;return((ne=(W=e.pendingAction)==null?void 0:W.promptPlaceholders)==null?void 0:ne[le])??s()("modals.input")}]),E(V,ee)}),E(H,j)};Q(k,H=>{a().length===2?H(C):H(A,!1)})}var T=g(k,2),I=p(T);I.__click=function(...H){var j;(j=e.cancelPrompt)==null||j.apply(this,H)};var D=p(I),N=g(I,2);N.__click=function(...H){var j;(j=e.confirmPrompt)==null||j.apply(this,H)};var z=p(N);se((H,j,re)=>{b=G(v,1,"overlay-modal card p-4 svelte-16vkgn1",null,b,H),S(x,e.pendingAction.title),S(D,j),S(z,re)},[()=>({light:!e.darkMode}),()=>s()("modals.cancel"),()=>s()("modals.confirm")]),gt(3,v,()=>Ki,()=>({duration:200,start:.9})),gt(3,m,()=>Fi,()=>({duration:200})),E(h,m)};Q(l,h=>{e.pendingAction&&h(d)})}E(i,o),Yt(),n()}hi(["keydown","click"]);function Z4(i,e,t,n,s){M(e,!1),M(t,null),M(n,null),M(s,[],!0)}function Y4(i,e,t){M(e,!1),M(t,null)}var K4=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div></div>'),X4=(i,e)=>M(e,""),J4=B('<button class="btn btn-danger clear-btn" type="button" aria-label="Clear search"><i class="fas fa-times"></i></button>'),Q4=(i,e,t)=>e(u(t).citizenId),eB=B('<div class="d-flex justify-content-center align-items-center details-loading svelte-1jyuewz"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),tB=B('<div><div class="details-content svelte-1jyuewz"><!></div></div>'),iB=B('<div><button type="button"><div class="character-grid svelte-1jyuewz"><div class="character-name svelte-1jyuewz"><i class="fas fa-user me-2 svelte-1jyuewz"></i> </div> <div class="character-id svelte-1jyuewz"><i class="fas fa-id-card me-2 svelte-1jyuewz"></i> </div></div> <i></i></button></div> <!>',1),nB=B('<div class="loading-more svelte-1jyuewz"><div class="spinner-border spinner-border-sm text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),sB=B('<div class="view svelte-1jyuewz"><h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <small class="text-muted"> </small></div> <div><span class="input-group-text svelte-1jyuewz"><i class="fas fa-search"></i></span> <input type="text" class="form-control svelte-1jyuewz"> <!></div> <div class="character-list list-group svelte-1jyuewz"><!> <!></div></div>'),aB=(i,e)=>void e(),rB=B('<div class="overlay-backdrop svelte-1jyuewz"><div><h5> </h5> <p class="mb-2"><!></p> <p class="mb-1"><!></p> <p class="mb-3"><!></p> <div class="d-flex gap-2 justify-content-end"><button class="btn btn-secondary"> </button> <button class="btn btn-danger"> </button></div></div></div>'),oB=(i,e)=>void e(),lB=B('<div class="overlay-backdrop svelte-1jyuewz"><div><h5> </h5> <p class="mb-2"> </p> <p class="text-warning d-flex align-items-center gap-2" style="margin-bottom: 1rem;"><i class="fas fa-exclamation-triangle"></i> <span> </span></p> <div class="d-flex gap-2 justify-content-end"><button class="btn btn-secondary"> </button> <button class="btn btn-danger"> </button></div></div></div>'),cB=B('<div class="page-container svelte-1jyuewz"><!></div> <!> <!> <!>',1);function dB(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=ae(!0),l=ae(!1),d=ae(""),h=ae(null),m=ae(null),v=ae(Gt([])),b=ae(null),y=ae(null),x=ae(!1),k=ae(null),C=qi(()=>(()=>{const U=u(d).trim().toLowerCase();return U?u(r).filter(ce=>{const fe=(ce.characterName??"").toLowerCase(),ve=(ce.citizenId??"").toLowerCase(),Me=(ce.serverName??"").toLowerCase(),Se=(ce.license??"").toLowerCase(),Pe=String(ce.id??"");return fe.includes(U)||ve.includes(U)||Me.includes(U)||Se.includes(U)||Pe.includes(U)}):u(r)})());const A=25;let T=ae(1),I=ae(!1),D=qi(()=>u(C).slice(0,u(T)*A));fn(()=>{u(d),M(T,1)});function N(U){const ce=U.target;ce.scrollHeight-ce.scrollTop-ce.clientHeight<100&&!u(I)&&u(D).length<u(C).length&&z()}async function z(){M(I,!0),await new Promise(U=>setTimeout(U,200)),Yr(T),M(I,!1)}pn(()=>{H()});async function H(){M(o,!0);const{status:U,data:ce}=await Ve("getAllCharacters");U==="ok"?M(r,ce,!0):ze(s()("notifications.characterlist.failedtoloadcharacters"),"error"),M(o,!1)}async function j(U){if(u(b)===U){M(b,null),M(y,null);return}M(b,U,!0),M(y,null),M(l,!0);const{status:ce,data:fe}=await Ve("getCharacterInfo",{citizenId:U});ce==="ok"?(M(y,(fe==null?void 0:fe.data)??fe,!0),M(h,u(y),!0)):(ze(s()("notifications.characterlist.failedtoloadcharacterdetails"),"error"),M(b,null)),M(l,!1)}function re(U){var ce;M(m,U,!0),M(v,((ce=U.promptPlaceholders)==null?void 0:ce.map(()=>""))??[],!0)}async function V(){var ce;if(!u(m))return;const U=u(v).map(fe=>fe.trim());if(!U.some(fe=>fe==="")){if(u(m).key==="createOfflineBan"){const fe=Number(U[0]);if(!isFinite(fe)||fe<0)return;M(W,{durationHours:fe,reason:U[1]},!0),M(m,null),M(v,[],!0),await Ro(),M(ee,!0);return}Ve("executeOfflineAction",{actionKey:u(m).key,citizenId:(ce=u(h))==null?void 0:ce.citizenId,inputs:U}).then(async({status:fe,data:ve})=>{var Me,Se;if(fe==="ok"){ri("sounds/action.mp3");const Pe=await Ve("getCharacterInfo",{citizenId:(Me=u(h))==null?void 0:Me.citizenId});Pe.status==="ok"&&(M(h,((Se=Pe.data)==null?void 0:Se.data)??Pe.data,!0),u(b)&&u(h)&&u(b)===u(h).citizenId&&M(y,u(h),!0))}else console.error("Failed to execute offline action",ve);M(m,null),M(v,[],!0)})}}function q(){M(m,null),M(v,[],!0)}function le(){u(y)&&(M(k,u(y),!0),M(x,!0))}let ee=ae(!1),W=ae(null);async function ne(){var Me;if(!u(W)||!u(h))return;const{durationHours:U,reason:ce}=u(W),{status:fe,data:ve}=await Ve("createOfflineBan",{citizenId:u(h).citizenId,durationHours:Math.ceil(U),reason:ce});if(fe==="ok"){ri("sounds/action.mp3"),ze(s()("notifications.punishment.offlineban_created",{values:{name:u(h).characterName}}),"success");const Se=await Ve("getCharacterInfo",{citizenId:u(h).citizenId});Se.status==="ok"&&(M(h,((Me=Se.data)==null?void 0:Me.data)??Se.data,!0),u(b)&&u(h)&&u(b)===u(h).citizenId&&M(y,u(h),!0))}else console.error("Failed to create offline ban",ve),ze((ve==null?void 0:ve.message)||s()("notifications.punishment.offlineban_failed",{values:{message:(ve==null?void 0:ve.message)||"Unknown error"}}),"error");M(ee,!1),M(W,null),M(m,null),M(v,[],!0)}async function ye(){var ve;if(!u(k))return;const U=u(k).citizenId,{status:ce,data:fe}=await Ve("executeOfflineAction",{actionKey:"offlineaction:DeleteCharacter",citizenId:U,inputs:null});ce==="ok"?(ri("sounds/action.mp3"),ze(s()("notifications.characterlist.actionexecutedsuccessfully",{values:{action:"offlineaction:DeleteCharacter"}}),"success"),M(r,u(r).filter(Me=>Me.citizenId!==U),!0),u(b)===U&&M(b,null),((ve=u(h))==null?void 0:ve.citizenId)===U&&M(h,null),M(y,null),M(x,!1),M(k,null)):(console.error("Failed to delete character",fe),ze((fe==null?void 0:fe.message)||s()("notifications.characterlist.failedtoexecute",{values:{message:(fe==null?void 0:fe.message)||"Unknown error"}}),"error"))}var ie=cB(),Z=yt(ie),$=p(Z);{var X=U=>{var ce=K4();E(U,ce)},Y=U=>{var ce=sB(),fe=p(ce),ve=p(fe),Me=g(fe,2),Se=p(Me),Pe=p(Se),Be=g(Se,2),ue=p(Be),oe=g(Me,2);let me;var Le=g(p(oe),2),Oe=g(Le,2);{var _e=ge=>{var xe=J4();xe.__click=[X4,d],E(ge,xe)};Q(Oe,ge=>{u(d)&&ge(_e)})}var be=g(oe,2),Te=p(be);Vt(Te,17,()=>u(D),ge=>ge.id,(ge,xe)=>{var we=iB(),Re=yt(we);let qe;var Ge=p(Re);let tt;Ge.__click=[Q4,j,xe];var Ye=p(Ge),Je=p(Ye),Ue=g(p(Je)),at=g(Je,2),Ee=g(p(at)),He=g(Ye,2);let Ke;var it=g(Re,2);{var pt=Tt=>{var mt=tB();let zt;var oi=p(mt),Ai=p(oi);{var Kt=Rt=>{var di=eB(),Ci=p(di),Ti=p(Ci),Qe=p(Ti);se(Ce=>S(Qe,Ce),[()=>s()("pages.characterlist.loadingdetails")]),E(Rt,di)},Wt=(Rt,di)=>{{var Ci=Ti=>{H4(Ti,{get selectedCharacter(){return u(y)},onOpenOfflinePrompt:re,onRequestDelete:le})};Q(Rt,Ti=>{u(y)&&Ti(Ci)},di)}};Q(Ai,Rt=>{u(l)&&!u(y)?Rt(Kt):Rt(Wt,!1)})}se(Rt=>zt=G(mt,1,"list-group-item details-item svelte-1jyuewz",null,zt,Rt),[()=>({light:!a().darkMode})]),E(Tt,mt)};Q(it,Tt=>{u(b)===u(xe).citizenId&&Tt(pt)})}se((Tt,mt,zt)=>{qe=G(Re,1,"expandable-item svelte-1jyuewz",null,qe,Tt),tt=G(Ge,1,"character-item list-group-item list-group-item-action svelte-1jyuewz",null,tt,mt),Ot(Ge,"aria-label",`Toggle character ${u(xe).characterName}`),Ot(Ge,"aria-expanded",u(b)===u(xe).citizenId),S(Ue,` ${u(xe).characterName??""}`),S(Ee,` ${u(xe).citizenId??""}`),Ke=G(He,1,"fas fa-chevron-right chevron svelte-1jyuewz",null,Ke,zt)},[()=>({open:u(b)===u(xe).citizenId}),()=>({light:!a().darkMode}),()=>({rotated:u(b)===u(xe).citizenId})]),E(ge,we)});var pe=g(Te,2);{var de=ge=>{var xe=nB(),we=p(xe),Re=p(we),qe=p(Re);se(Ge=>S(qe,Ge),[()=>s()("pages.characterlist.loadingmore")]),E(ge,xe)};Q(pe,ge=>{u(I)&&ge(de)})}se((ge,xe,we,Re,qe)=>{S(ve,ge),S(Pe,xe),S(ue,we),me=G(oe,1,"input-group position-relative mb-2 svelte-1jyuewz",null,me,Re),Ot(Le,"placeholder",qe)},[()=>s()("pages.characterlist.title"),()=>s()("pages.characterlist.characterlist"),()=>s()("pages.characterlist.totalcharacters",{values:{count:u(r).length}}),()=>({light:!a().darkMode}),()=>s()("pages.characterlist.searchcharacters")]),st(Le,()=>u(d),ge=>M(d,ge)),Mi("scroll",be,N),E(U,ce)};Q($,U=>{u(o)?U(X):U(Y,!1)})}var te=g(Z,2);G4(te,{get pendingAction(){return u(m)},confirmPrompt:V,cancelPrompt:q,get darkMode(){return a().darkMode},get promptInputs(){return u(v)},set promptInputs(U){M(v,U,!0)}});var K=g(te,2);{var F=U=>{var ce=rB(),fe=p(ce);let ve;var Me=p(fe),Se=p(Me),Pe=g(Me,2),Be=p(Pe);Po(Be,()=>s()("pages.punishment.ban_confirm_player",{values:{name:u(h).characterName,cid:u(h).citizenId}})||`${u(h).characterName} (${u(h).citizenId})`);var ue=g(Pe,2),oe=p(ue);Po(oe,()=>s()("pages.punishment.ban_confirm_reason",{values:{reason:u(W).reason}})||`Reason: ${u(W).reason}`);var me=g(ue,2),Le=p(me);Po(Le,()=>s()("pages.punishment.ban_confirm_duration_hours",{values:{hours:Math.ceil(u(W).durationHours)}})||`Duration: ${Math.ceil(u(W).durationHours)} hours (${u(W).durationHours<=0?"Permanent":""})`);var Oe=g(me,2),_e=p(Oe);_e.__click=[Z4,ee,W,m,v];var be=p(_e),Te=g(_e,2);Te.__click=[aB,ne];var pe=p(Te);se((de,ge,xe,we)=>{ve=G(fe,1,"modal-box svelte-1jyuewz",null,ve,de),S(Se,ge),S(be,xe),S(pe,we)},[()=>({light:!a().darkMode}),()=>s()("pages.punishment.ban_confirm_title")||"Confirm Ban",()=>s()("modals.cancel"),()=>s()("pages.punishment.ban")||"Ban"]),gt(3,fe,()=>Ki,()=>({duration:200,start:.9})),gt(3,ce,()=>Fi,()=>({duration:200})),E(U,ce)};Q(K,U=>{u(ee)&&u(W)&&u(h)&&U(F)})}var R=g(K,2);{var J=U=>{var ce=lB(),fe=p(ce);let ve;var Me=p(fe),Se=p(Me),Pe=g(Me,2),Be=p(Pe),ue=g(Pe,2),oe=g(p(ue),2),me=p(oe),Le=g(ue,2),Oe=p(Le);Oe.__click=[Y4,x,k];var _e=p(Oe),be=g(Oe,2);be.__click=[oB,ye];var Te=p(be);se((pe,de,ge,xe,we,Re)=>{ve=G(fe,1,"modal-box svelte-1jyuewz",null,ve,pe),S(Se,de),S(Be,ge),S(me,xe),S(_e,we),S(Te,Re)},[()=>({light:!a().darkMode}),()=>s()("pages.characterlist.delete_confirm_title"),()=>s()("pages.characterlist.delete_confirm_message",{values:{name:u(k).characterName,cid:u(k).citizenId}}),()=>s()("pages.characterlist.delete_confirm_warning"),()=>s()("modals.cancel"),()=>s()("pages.characterlist.delete")]),gt(3,fe,()=>Ki,()=>({duration:200,start:.9})),gt(3,ce,()=>Fi,()=>({duration:200})),E(U,ce)};Q(R,U=>{u(x)&&u(k)&&U(J)})}E(i,ie),Yt(),n()}hi(["click"]);function hB(i,e,t,n,s,a,r){var o;u(e)&&t.onConfirm({...(o=n())!=null&&o.id?{id:n().id}:{},type:u(s),model:u(e),coords:u(a),rotation:r})}var uB=B(`<div class="overlay-backdrop svelte-1xjwz70"><div><h5> </h5> <div class="mb-3"><label class="form-label">Type</label> <select><option class="svelte-1xjwz70">Object</option><option class="svelte-1xjwz70">Ped</option></select></div> <div class="mb-3"><label class="form-label">Model <i class="fas fa-circle-info ms-1 text-secondary" title="Find model names at gtahash.ru or gta-objects.xyz"></i></label> <input type="text" placeholder="Enter model name..."></div> <div class="alert alert-info mb-3" role="alert"><i class="fas fa-info-circle me-2"></i> <strong>Important:</strong> Placements are streamed in based on the center point of all placed objects/peds, and your distance from it. By default, this is 100 units. 
                To ensure proper streaming behavior, avoid placing items more than 50 units apart from each other. 
                Items placed too far apart may cause unexpected behavior when streaming in/out. To place items further apart, use multiple placements.</div> <div class="row g-3 mb-3"><div class="col-md-6"><label class="form-label">Position</label> <div class="input-group"><input type="number" class="form-control" placeholder="X"> <input type="number" class="form-control" placeholder="Y"> <input type="number" class="form-control" placeholder="Z"></div></div> <div class="col-md-6"><label class="form-label">Rotation</label> <div class="input-group"><input type="number" class="form-control" placeholder="X"> <input type="number" class="form-control" placeholder="Y"> <input type="number" class="form-control" placeholder="Z"></div></div></div> <div class="d-flex justify-content-end gap-2"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-success"> </button></div></div></div>`);function fB(i,e){var v,b,y,x,k,C,A,T,I,D,N;Zt(e,!0);const t=Yi(e,"item",3,null),n=Yi(e,"initialCoords",3,null);let s=ae(Gt(((v=t())==null?void 0:v.type)||"object")),a=ae(Gt(((b=t())==null?void 0:b.model)||"")),r=ae(Gt({x:((y=t())==null?void 0:y.coords.x)||((x=n())==null?void 0:x.x)||0,y:((k=t())==null?void 0:k.coords.y)||((C=n())==null?void 0:C.y)||0,z:((A=t())==null?void 0:A.coords.z)||((T=n())==null?void 0:T.z)||0})),o=Gt({x:((I=t())==null?void 0:I.rotation.x)||0,y:((D=t())==null?void 0:D.rotation.y)||0,z:((N=t())==null?void 0:N.rotation.z)||0});fn(()=>{!t()&&n()&&M(r,{x:n().x,y:n().y,z:n().z},!0)});function l(z){e.show&&z.focus()}var d=Bi(),h=yt(d);{var m=z=>{var H=uB(),j=p(H);let re;var V=p(j),q=p(V),le=g(V,2),ee=g(p(le),2);let W;var ne=p(ee);ne.value=ne.__value="object";var ye=g(ne);ye.value=ye.__value="ped",Fn(()=>ur(ee,()=>u(s),ue=>M(s,ue))),Xs(ee,ue=>l==null?void 0:l(ue));var ie=g(le,2),Z=g(p(ie),2);let $;var X=g(ie,4),Y=p(X),te=g(p(Y),2),K=p(te),F=g(K,2),R=g(F,2),J=g(Y,2),U=g(p(J),2),ce=p(U),fe=g(ce,2),ve=g(fe,2),Me=g(X,2),Se=p(Me);Se.__click=function(...ue){var oe;(oe=e.onCancel)==null||oe.apply(this,ue)};var Pe=g(Se,2);Pe.__click=[hB,a,e,t,s,r,o];var Be=p(Pe);se((ue,oe,me)=>{re=G(j,1,"modal-box svelte-1xjwz70",null,re,ue),S(q,`${t()?"Edit":"Add"} Item`),W=G(ee,1,"form-select dark-select svelte-1xjwz70",null,W,oe),ee.disabled=!!t(),$=G(Z,1,"form-control dark-select svelte-1xjwz70",null,$,me),Pe.disabled=!u(a),S(Be,t()?"Save Changes":"Add Item")},[()=>({light:!e.darkMode}),()=>({light:!e.darkMode}),()=>({light:!e.darkMode})]),st(Z,()=>u(a),ue=>M(a,ue)),st(K,()=>u(r).x,ue=>u(r).x=ue),st(F,()=>u(r).y,ue=>u(r).y=ue),st(R,()=>u(r).z,ue=>u(r).z=ue),st(ce,()=>o.x,ue=>o.x=ue),st(fe,()=>o.y,ue=>o.y=ue),st(ve,()=>o.z,ue=>o.z=ue),gt(3,j,()=>Ki,()=>({duration:200,start:.9})),gt(3,H,()=>Fi,()=>({duration:200})),E(z,H)};Q(h,z=>{e.show&&z(m)})}E(i,d),Yt()}hi(["click"]);var pB=B('<div class="overlay-backdrop svelte-dwxfh7"><div><h5>Delete Item</h5> <p class="mb-4"> </p> <div class="d-flex justify-content-end gap-2"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-danger">Delete</button></div></div></div>');function mB(i,e){Zt(e,!0);var t=Bi(),n=yt(t);{var s=a=>{var r=pB(),o=p(r);let l;var d=g(p(o),2),h=p(d),m=g(d,2),v=p(m);v.__click=function(...y){var x;(x=e.onCancel)==null||x.apply(this,y)};var b=g(v,2);b.__click=function(...y){var x;(x=e.onConfirm)==null||x.apply(this,y)},se(y=>{l=G(o,1,"modal-box svelte-dwxfh7",null,l,y),S(h,`Are you sure you want to delete ${e.itemName??""}?`)},[()=>({light:!e.darkMode})]),gt(3,o,()=>Ki,()=>({duration:200,start:.9})),gt(3,r,()=>Fi,()=>({duration:200})),E(a,r)};Q(n,a=>{e.show&&a(s)})}E(i,t),Yt()}hi(["click"]);function vB(i,e,t){u(e).trim()&&(t.onConfirm(u(e)),M(e,""))}var gB=B('<div class="overlay-backdrop svelte-11mda5q"><div><h5>Create New Placement</h5> <div class="mb-3"><label class="form-label">Name</label> <input type="text" placeholder="Enter placement name..."></div> <div class="d-flex justify-content-end gap-2"><button class="btn btn-secondary">Cancel</button> <button class="btn btn-success">Create Placement</button></div></div></div>');function _B(i,e){Zt(e,!0);let t=ae("");function n(o){e.show&&o.focus()}var s=Bi(),a=yt(s);{var r=o=>{var l=gB(),d=p(l);let h;var m=g(p(d),2),v=g(p(m),2);let b;Fn(()=>st(v,()=>u(t),C=>M(t,C))),Xs(v,C=>n==null?void 0:n(C));var y=g(m,2),x=p(y);x.__click=function(...C){var A;(A=e.onCancel)==null||A.apply(this,C)};var k=g(x,2);k.__click=[vB,t,e],se((C,A,T)=>{h=G(d,1,"modal-box svelte-11mda5q",null,h,C),b=G(v,1,"form-control dark-select svelte-11mda5q",null,b,A),k.disabled=T},[()=>({light:!e.darkMode}),()=>({light:!e.darkMode}),()=>!u(t).trim()]),gt(3,d,()=>Ki,()=>({duration:200,start:.9})),gt(3,l,()=>Fi,()=>({duration:200})),E(o,l)};Q(a,o=>{e.show&&o(r)})}E(i,s),Yt()}hi(["click"]);function bB(i,e){e()}function yB(i,e){ri("sounds/click.mp3"),e.setCurrentPage("addons")}var xB=(i,e)=>M(e,!0),wB=(i,e,t)=>e(u(t)),kB=B('<div class="placement-card svelte-1lyhlyx"><div class="placement-header svelte-1lyhlyx"><i class="fas fa-map svelte-1lyhlyx"></i> <h5 class="svelte-1lyhlyx"> </h5></div> <div class="placement-stats svelte-1lyhlyx"><div class="stat-item svelte-1lyhlyx"><i class="fas fa-cube svelte-1lyhlyx"></i> <span> </span></div> <div class="stat-item svelte-1lyhlyx"><i class="fas fa-user svelte-1lyhlyx"></i> <span> </span></div></div></div>'),SB=B('<div class="no-placements svelte-1lyhlyx"><i class="fas fa-info-circle" style="font-size: 2rem; color: #64748b; margin-bottom: 0.5rem;"></i> <p class="svelte-1lyhlyx">No placements created yet. Click "New Placement" to get started.</p></div>'),CB=B('<div class="control-section svelte-1lyhlyx"><div class="controls-header svelte-1lyhlyx"><h4 class="svelte-1lyhlyx">Placements</h4> <button class="btn btn-primary svelte-1lyhlyx"><i class="fas fa-plus"></i> New Placement</button></div> <div class="placements-grid svelte-1lyhlyx"><!> <!></div></div>'),MB=(i,e)=>M(e,null),PB=(i,e,t)=>e(u(t)),AB=(i,e,t)=>e(u(t)),TB=(i,e,t)=>M(e,u(t),!0),LB=(i,e,t)=>e(u(t)),DB=B('<div class="item-card svelte-1lyhlyx"><div class="item-info svelte-1lyhlyx"><div class="item-header svelte-1lyhlyx"><i></i> <span class="model-name svelte-1lyhlyx"> </span></div> <div class="item-details svelte-1lyhlyx"><span> </span> <span> </span></div></div> <div class="item-actions svelte-1lyhlyx"><button class="action-btn teleport svelte-1lyhlyx" title="Teleport to item"><i class="fas fa-location-arrow"></i></button> <button class="action-btn move svelte-1lyhlyx" title="Edit position/rotation"><i class="fas fa-arrows-alt"></i></button> <button class="action-btn edit svelte-1lyhlyx" title="Edit properties"><i class="fas fa-edit"></i></button> <button class="action-btn delete svelte-1lyhlyx" title="Delete item"><i class="fas fa-trash"></i></button></div></div>'),EB=B('<div class="no-items svelte-1lyhlyx"><i class="fas fa-info-circle" style="font-size: 2rem; color: #64748b; margin-bottom: 0.5rem;"></i> <p class="svelte-1lyhlyx">No items placed yet. Click "Add Item" to get started.</p></div>'),IB=B('<div class="control-section svelte-1lyhlyx"><button class="btn-back secondary svelte-1lyhlyx"><i class="fas fa-arrow-left"></i> Back to Placements</button> <div class="controls-header svelte-1lyhlyx"><h4 class="svelte-1lyhlyx"> </h4> <button class="btn btn-primary svelte-1lyhlyx"><i class="fas fa-plus"></i> Add Item</button></div> <div class="items-section svelte-1lyhlyx"><div class="section-header svelte-1lyhlyx"><h5 class="svelte-1lyhlyx">Placed Items</h5> <div class="stats svelte-1lyhlyx"><span class="stat-badge objects svelte-1lyhlyx"><i class="fas fa-cube"></i> </span> <span class="stat-badge peds svelte-1lyhlyx"><i class="fas fa-user"></i> </span></div></div> <div class="items-list svelte-1lyhlyx"><!> <!></div></div></div>'),OB=B('<div><div class="page-header svelte-1lyhlyx"><button class="btn-back svelte-1lyhlyx"><i class="fas fa-arrow-left"></i> Back to Addons</button> <h2 class="svelte-1lyhlyx">Object & Ped Placer</h2></div> <div class="page-content svelte-1lyhlyx"><!></div></div> <!> <!> <!>',1);function BB(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=ae(null),l=ae(!1),d=ae(!1),h=ae(null),m=ae(null),v=ae(!1),b=ae(null);pn(()=>{y()});async function y(){const{status:te,data:K}=await Ve("getPlacements");te==="ok"?M(r,K,!0):ze(s()("notifications.placer.failedtoloadplacements"),"error")}async function x(te){const{status:K,data:F}=await Ve("createPlacement",{name:te});K==="ok"?(M(r,[...u(r),F],!0),M(l,!1),ze(s()("notifications.placer.placementcreatedsuccessfully"),"success")):ze(s()("notifications.placer.failedtocreateplacement"),"error")}async function k(te){M(o,te,!0)}async function C(te){var R;const{status:K,data:F}=await Ve(te.type==="object"?"addPlacementObject":"addPlacementPed",{placementId:(R=u(o))==null?void 0:R.id,...te});K==="ok"?(te.type==="object"?u(o).objects=[...u(o).objects,F]:u(o).peds=[...u(o).peds,F],M(d,!1)):ze(s()("notifications.placer.failedtoadditem"),"error")}async function A(te){var F,R;const{status:K}=await Ve(te.type==="object"?"updatePlacementObject":"updatePlacementPed",{placementId:(F=u(o))==null?void 0:F.id,itemId:(R=u(h))==null?void 0:R.id,...te});K==="ok"?(te.type==="object"?u(o).objects=u(o).objects.map(J=>J===u(h)?{...te,id:u(h).id}:J):u(o).peds=u(o).peds.map(J=>J===u(h)?{...te,id:u(h).id}:J),M(h,null),ze(s()("notifications.placer.itemupdatedsuccessfully"),"success")):ze(s()("notifications.placer.failedtoupdateitem"),"error")}async function T(te){M(b,te,!0),M(v,!0)}async function I(){var K;if(!u(b))return;const{status:te}=await Ve(u(b).type==="object"?"deletePlacementObject":"deletePlacementPed",{placementId:(K=u(o))==null?void 0:K.id,itemId:u(b).id});te==="ok"?(u(b).type==="object"?u(o).objects=u(o).objects.filter(F=>F!==u(b)):u(o).peds=u(o).peds.filter(F=>F!==u(b)),ze(s()("notifications.placer.itemdeletedsuccessfully"),"success")):ze(s()("notifications.placer.failedtodeleteitem"),"error"),M(v,!1),M(b,null)}function D(){M(v,!1),M(b,null)}async function N(te){var R;const{status:K,data:F}=await Ve("startEditingItem",{type:te.type,itemId:te.id,placementId:(R=u(o))==null?void 0:R.id});F.status==="ok"?ze(s()("notifications.placer.startededitingitem"),"info"):ze((F==null?void 0:F.message)||s()("notifications.placer.failedtostartediting"),"error")}async function z(){const{status:te,data:K}=await Ve("getPlayerFrontPosition");te==="ok"?(M(m,{x:Number(K.coords.x.toFixed(2)),y:Number(K.coords.y.toFixed(2)),z:Number(K.coords.z.toFixed(2))},!0),M(d,!0),M(h,null)):ze(s()("notifications.placer.failedtogetplayerfrontposition"),"error")}async function H(te){const{status:K}=await Ve("teleportToItem",{coords:te.coords});K!=="ok"&&ze(s()("notifications.placer.failedtoteleporttoitem"),"error")}var j=OB(),re=yt(j);let V;var q=p(re),le=p(q);le.__click=[yB,e];var ee=g(q,2),W=p(ee);{var ne=te=>{var K=CB(),F=p(K),R=g(p(F),2);R.__click=[xB,l];var J=g(F,2),U=p(J);Vt(U,17,()=>u(r),Si,(ve,Me)=>{var Se=kB();Se.__click=[wB,k,Me];var Pe=p(Se),Be=g(p(Pe),2),ue=p(Be),oe=g(Pe,2),me=p(oe),Le=g(p(me),2),Oe=p(Le),_e=g(me,2),be=g(p(_e),2),Te=p(be);se(()=>{var pe,de;S(ue,u(Me).name),S(Oe,`${(((pe=u(Me).objects)==null?void 0:pe.length)||0)??""} Objects`),S(Te,`${(((de=u(Me).peds)==null?void 0:de.length)||0)??""} Peds`)}),E(ve,Se)});var ce=g(U,2);{var fe=ve=>{var Me=SB();E(ve,Me)};Q(ce,ve=>{u(r).length===0&&ve(fe)})}E(te,K)},ye=te=>{var K=IB(),F=p(K);F.__click=[MB,o];var R=g(F,2),J=p(R),U=p(J),ce=g(J,2);ce.__click=[bB,z];var fe=g(R,2),ve=p(fe),Me=g(p(ve),2),Se=p(Me),Pe=g(p(Se)),Be=g(Se,2),ue=g(p(Be)),oe=g(ve,2),me=p(oe);Vt(me,17,()=>{var _e,be;return[...((_e=u(o))==null?void 0:_e.objects)??[],...((be=u(o))==null?void 0:be.peds)??[]]},Si,(_e,be)=>{var Te=DB(),pe=p(Te),de=p(pe),ge=p(de),xe=g(ge,2),we=p(xe),Re=g(de,2),qe=p(Re),Ge=p(qe),tt=g(qe,2),Ye=p(tt),Je=g(pe,2),Ue=p(Je);Ue.__click=[PB,H,be];var at=g(Ue,2);at.__click=[AB,N,be];var Ee=g(at,2);Ee.__click=[TB,h,be];var He=g(Ee,2);He.__click=[LB,T,be],se((Ke,it,pt,Tt,mt,zt)=>{G(ge,1,`fas ${u(be).type==="object"?"fa-cube":"fa-user"}`,"svelte-1lyhlyx"),es(ge,`color: ${u(be).type==="object"?"#3b82f6":"#10b981"}`),S(we,u(be).model),S(Ge,`Pos: ${Ke??""}, ${it??""}, ${pt??""}`),S(Ye,`Rot: ${Tt??""}°, ${mt??""}°, ${zt??""}°`)},[()=>u(be).coords.x.toFixed(2),()=>u(be).coords.y.toFixed(2),()=>u(be).coords.z.toFixed(2),()=>u(be).rotation.x.toFixed(1),()=>u(be).rotation.y.toFixed(1),()=>u(be).rotation.z.toFixed(1)]),E(_e,Te)});var Le=g(me,2);{var Oe=_e=>{var be=EB();E(_e,be)};Q(Le,_e=>{u(o).objects.length===0&&u(o).peds.length===0&&_e(Oe)})}se(()=>{var _e,be;S(U,u(o).name),S(Pe,` ${(((_e=u(o).objects)==null?void 0:_e.length)||0)??""} Objects`),S(ue,` ${(((be=u(o).peds)==null?void 0:be.length)||0)??""} Peds`)}),E(te,K)};Q(W,te=>{u(o)?te(ye,!1):te(ne)})}var ie=g(re,2);const Z=qi(()=>u(d)||!!u(h));fB(ie,{get item(){return u(h)},get show(){return u(Z)},get initialCoords(){return u(m)},onConfirm:te=>{u(h)?A(te):C(te),M(m,null)},onCancel:()=>{M(d,!1),M(h,null),M(m,null)},get darkMode(){return a().darkMode}});var $=g(ie,2);const X=qi(()=>{var te;return((te=u(b))==null?void 0:te.model)??""});mB($,{get show(){return u(v)},get itemName(){return u(X)},onConfirm:()=>void I(),onCancel:D,get darkMode(){return a().darkMode}});var Y=g($,2);_B(Y,{get show(){return u(l)},onConfirm:te=>void x(te),onCancel:()=>M(l,!1),get darkMode(){return a().darkMode}}),se(te=>V=G(re,1,"placer-page svelte-1lyhlyx",null,V,te),[()=>({light:!a().darkMode})]),E(i,j),Yt(),n()}hi(["click"]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Bd(i){return i+.5|0}const Nr=(i,e,t)=>Math.max(Math.min(i,t),e);function Sc(i){return Nr(Bd(i*2.55),0,255)}function Gr(i){return Nr(Bd(i*255),0,255)}function lr(i){return Nr(Bd(i/2.55)/100,0,1)}function Ob(i){return Nr(Bd(i*100),0,100)}const ea={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Vm=[..."0123456789ABCDEF"],RB=i=>Vm[i&15],zB=i=>Vm[(i&240)>>4]+Vm[i&15],vh=i=>(i&240)>>4===(i&15),NB=i=>vh(i.r)&&vh(i.g)&&vh(i.b)&&vh(i.a);function FB(i){var e=i.length,t;return i[0]==="#"&&(e===4||e===5?t={r:255&ea[i[1]]*17,g:255&ea[i[2]]*17,b:255&ea[i[3]]*17,a:e===5?ea[i[4]]*17:255}:(e===7||e===9)&&(t={r:ea[i[1]]<<4|ea[i[2]],g:ea[i[3]]<<4|ea[i[4]],b:ea[i[5]]<<4|ea[i[6]],a:e===9?ea[i[7]]<<4|ea[i[8]]:255})),t}const HB=(i,e)=>i<255?e(i):"";function jB(i){var e=NB(i)?RB:zB;return i?"#"+e(i.r)+e(i.g)+e(i.b)+HB(i.a,e):void 0}const $B=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uw(i,e,t){const n=e*Math.min(t,1-t),s=(a,r=(a+i/30)%12)=>t-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function VB(i,e,t){const n=(s,a=(s+i/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function WB(i,e,t){const n=uw(i,1,.5);let s;for(e+t>1&&(s=1/(e+t),e*=s,t*=s),s=0;s<3;s++)n[s]*=1-e-t,n[s]+=e;return n}function qB(i,e,t,n,s){return i===s?(e-t)/n+(e<t?6:0):e===s?(t-i)/n+2:(i-e)/n+4}function Cg(i){const t=i.r/255,n=i.g/255,s=i.b/255,a=Math.max(t,n,s),r=Math.min(t,n,s),o=(a+r)/2;let l,d,h;return a!==r&&(h=a-r,d=o>.5?h/(2-a-r):h/(a+r),l=qB(t,n,s,h,a),l=l*60+.5),[l|0,d||0,o]}function Mg(i,e,t,n){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,t,n)).map(Gr)}function Pg(i,e,t){return Mg(uw,i,e,t)}function UB(i,e,t){return Mg(WB,i,e,t)}function GB(i,e,t){return Mg(VB,i,e,t)}function fw(i){return(i%360+360)%360}function ZB(i){const e=$B.exec(i);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?Sc(+e[5]):Gr(+e[5]));const s=fw(+e[2]),a=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?n=UB(s,a,r):e[1]==="hsv"?n=GB(s,a,r):n=Pg(s,a,r),{r:n[0],g:n[1],b:n[2],a:t}}function YB(i,e){var t=Cg(i);t[0]=fw(t[0]+e),t=Pg(t),i.r=t[0],i.g=t[1],i.b=t[2]}function KB(i){if(!i)return;const e=Cg(i),t=e[0],n=Ob(e[1]),s=Ob(e[2]);return i.a<255?`hsla(${t}, ${n}%, ${s}%, ${lr(i.a)})`:`hsl(${t}, ${n}%, ${s}%)`}const Bb={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Rb={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XB(){const i={},e=Object.keys(Rb),t=Object.keys(Bb);let n,s,a,r,o;for(n=0;n<e.length;n++){for(r=o=e[n],s=0;s<t.length;s++)a=t[s],o=o.replace(a,Bb[a]);a=parseInt(Rb[r],16),i[o]=[a>>16&255,a>>8&255,a&255]}return i}let gh;function JB(i){gh||(gh=XB(),gh.transparent=[0,0,0,0]);const e=gh[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const QB=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function eR(i){const e=QB.exec(i);let t=255,n,s,a;if(e){if(e[7]!==n){const r=+e[7];t=e[8]?Sc(r):Nr(r*255,0,255)}return n=+e[1],s=+e[3],a=+e[5],n=255&(e[2]?Sc(n):Nr(n,0,255)),s=255&(e[4]?Sc(s):Nr(s,0,255)),a=255&(e[6]?Sc(a):Nr(a,0,255)),{r:n,g:s,b:a,a:t}}}function tR(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${lr(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Op=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,rl=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function iR(i,e,t){const n=rl(lr(i.r)),s=rl(lr(i.g)),a=rl(lr(i.b));return{r:Gr(Op(n+t*(rl(lr(e.r))-n))),g:Gr(Op(s+t*(rl(lr(e.g))-s))),b:Gr(Op(a+t*(rl(lr(e.b))-a))),a:i.a+t*(e.a-i.a)}}function _h(i,e,t){if(i){let n=Cg(i);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=Pg(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function pw(i,e){return i&&Object.assign(e||{},i)}function zb(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=Gr(i[3]))):(e=pw(i,{r:0,g:0,b:0,a:1}),e.a=Gr(e.a)),e}function nR(i){return i.charAt(0)==="r"?eR(i):ZB(i)}class ed{constructor(e){if(e instanceof ed)return e;const t=typeof e;let n;t==="object"?n=zb(e):t==="string"&&(n=FB(e)||JB(e)||nR(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=pw(this._rgb);return e&&(e.a=lr(e.a)),e}set rgb(e){this._rgb=zb(e)}rgbString(){return this._valid?tR(this._rgb):void 0}hexString(){return this._valid?jB(this._rgb):void 0}hslString(){return this._valid?KB(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,s=e.rgb;let a;const r=t===a?.5:t,o=2*r-1,l=n.a-s.a,d=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;a=1-d,n.r=255&d*n.r+a*s.r+.5,n.g=255&d*n.g+a*s.g+.5,n.b=255&d*n.b+a*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=iR(this._rgb,e._rgb,t)),this}clone(){return new ed(this.rgb)}alpha(e){return this._rgb.a=Gr(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Bd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return _h(this._rgb,2,e),this}darken(e){return _h(this._rgb,2,-e),this}saturate(e){return _h(this._rgb,1,e),this}desaturate(e){return _h(this._rgb,1,-e),this}rotate(e){return YB(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ar(){}const sR=(()=>{let i=0;return()=>i++})();function Pi(i){return i==null}function xn(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Di(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function Tn(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Gs(i,e){return Tn(i)?i:e}function ui(i,e){return typeof i>"u"?e:i}const aR=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/e,mw=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function un(i,e,t){if(i&&typeof i.call=="function")return i.apply(t,e)}function tn(i,e,t,n){let s,a,r;if(xn(i))for(a=i.length,s=0;s<a;s++)e.call(t,i[s],s);else if(Di(i))for(r=Object.keys(i),a=r.length,s=0;s<a;s++)e.call(t,i[r[s]],r[s])}function zu(i,e){let t,n,s,a;if(!i||!e||i.length!==e.length)return!1;for(t=0,n=i.length;t<n;++t)if(s=i[t],a=e[t],s.datasetIndex!==a.datasetIndex||s.index!==a.index)return!1;return!0}function Nu(i){if(xn(i))return i.map(Nu);if(Di(i)){const e=Object.create(null),t=Object.keys(i),n=t.length;let s=0;for(;s<n;++s)e[t[s]]=Nu(i[t[s]]);return e}return i}function vw(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function rR(i,e,t,n){if(!vw(i))return;const s=e[i],a=t[i];Di(s)&&Di(a)?td(s,a,n):e[i]=Nu(a)}function td(i,e,t){const n=xn(e)?e:[e],s=n.length;if(!Di(i))return i;t=t||{};const a=t.merger||rR;let r;for(let o=0;o<s;++o){if(r=n[o],!Di(r))continue;const l=Object.keys(r);for(let d=0,h=l.length;d<h;++d)a(l[d],i,r,t)}return i}function Rc(i,e){return td(i,e,{merger:oR})}function oR(i,e,t){if(!vw(i))return;const n=e[i],s=t[i];Di(n)&&Di(s)?Rc(n,s):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=Nu(s))}const Nb={"":i=>i,x:i=>i.x,y:i=>i.y};function lR(i){const e=i.split("."),t=[];let n="";for(const s of e)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(t.push(n),n="");return t}function cR(i){const e=lR(i);return t=>{for(const n of e){if(n==="")break;t=t&&t[n]}return t}}function Jr(i,e){return(Nb[e]||(Nb[e]=cR(e)))(i)}function Ag(i){return i.charAt(0).toUpperCase()+i.slice(1)}const id=i=>typeof i<"u",Qr=i=>typeof i=="function",Fb=(i,e)=>{if(i.size!==e.size)return!1;for(const t of i)if(!e.has(t))return!1;return!0};function dR(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const $i=Math.PI,gn=2*$i,hR=gn+$i,Fu=Number.POSITIVE_INFINITY,uR=$i/180,On=$i/2,go=$i/4,Hb=$i*2/3,Fr=Math.log10,qa=Math.sign;function zc(i,e,t){return Math.abs(i-e)<t}function jb(i){const e=Math.round(i);i=zc(i,e,i/1e3)?e:i;const t=Math.pow(10,Math.floor(Fr(i))),n=i/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function fR(i){const e=[],t=Math.sqrt(i);let n;for(n=1;n<t;n++)i%n===0&&(e.push(n),e.push(i/n));return t===(t|0)&&e.push(t),e.sort((s,a)=>s-a).pop(),e}function pR(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function El(i){return!pR(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function mR(i,e){const t=Math.round(i);return t-e<=i&&t+e>=i}function gw(i,e,t){let n,s,a;for(n=0,s=i.length;n<s;n++)a=i[n][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function pa(i){return i*($i/180)}function Tg(i){return i*(180/$i)}function $b(i){if(!Tn(i))return;let e=1,t=0;for(;Math.round(i*e)/e!==i;)e*=10,t++;return t}function _w(i,e){const t=e.x-i.x,n=e.y-i.y,s=Math.sqrt(t*t+n*n);let a=Math.atan2(n,t);return a<-.5*$i&&(a+=gn),{angle:a,distance:s}}function Wm(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function vR(i,e){return(i-e+hR)%gn-$i}function os(i){return(i%gn+gn)%gn}function nd(i,e,t,n){const s=os(i),a=os(e),r=os(t),o=os(a-s),l=os(r-s),d=os(s-a),h=os(s-r);return s===a||s===r||n&&a===r||o>l&&d<h}function Kn(i,e,t){return Math.max(e,Math.min(t,i))}function gR(i){return Kn(i,-32768,32767)}function fr(i,e,t,n=1e-6){return i>=Math.min(e,t)-n&&i<=Math.max(e,t)+n}function Lg(i,e,t){t=t||(r=>i[r]<e);let n=i.length-1,s=0,a;for(;n-s>1;)a=s+n>>1,t(a)?s=a:n=a;return{lo:s,hi:n}}const pr=(i,e,t,n)=>Lg(i,t,n?s=>{const a=i[s][e];return a<t||a===t&&i[s+1][e]===t}:s=>i[s][e]<t),_R=(i,e,t)=>Lg(i,t,n=>i[n][e]>=t);function bR(i,e,t){let n=0,s=i.length;for(;n<s&&i[n]<e;)n++;for(;s>n&&i[s-1]>t;)s--;return n>0||s<i.length?i.slice(n,s):i}const bw=["push","pop","shift","splice","unshift"];function yR(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),bw.forEach(t=>{const n="_onData"+Ag(t),s=i[t];Object.defineProperty(i,t,{configurable:!0,enumerable:!1,value(...a){const r=s.apply(this,a);return i._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...a)}),r}})})}function Vb(i,e){const t=i._chartjs;if(!t)return;const n=t.listeners,s=n.indexOf(e);s!==-1&&n.splice(s,1),!(n.length>0)&&(bw.forEach(a=>{delete i[a]}),delete i._chartjs)}function yw(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const xw=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function ww(i,e){let t=[],n=!1;return function(...s){t=s,n||(n=!0,xw.call(window,()=>{n=!1,i.apply(e,t)}))}}function xR(i,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(i,e,n)):i.apply(this,n),e}}const Dg=i=>i==="start"?"left":i==="end"?"right":"center",rs=(i,e,t)=>i==="start"?e:i==="end"?t:(e+t)/2,wR=(i,e,t,n)=>i===(n?"left":"right")?t:i==="center"?(e+t)/2:e;function kw(i,e,t){const n=e.length;let s=0,a=n;if(i._sorted){const{iScale:r,vScale:o,_parsed:l}=i,d=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,h=r.axis,{min:m,max:v,minDefined:b,maxDefined:y}=r.getUserBounds();if(b){if(s=Math.min(pr(l,h,m).lo,t?n:pr(e,h,r.getPixelForValue(m)).lo),d){const x=l.slice(0,s+1).reverse().findIndex(k=>!Pi(k[o.axis]));s-=Math.max(0,x)}s=Kn(s,0,n-1)}if(y){let x=Math.max(pr(l,r.axis,v,!0).hi+1,t?0:pr(e,h,r.getPixelForValue(v),!0).hi+1);if(d){const k=l.slice(x-1).findIndex(C=>!Pi(C[o.axis]));x+=Math.max(0,k)}a=Kn(x,s,n)-s}else a=n-s}return{start:s,count:a}}function Sw(i){const{xScale:e,yScale:t,_scaleRanges:n}=i,s={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return i._scaleRanges=s,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,s),a}const bh=i=>i===0||i===1,Wb=(i,e,t)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*gn/t)),qb=(i,e,t)=>Math.pow(2,-10*i)*Math.sin((i-e)*gn/t)+1,Nc={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*On)+1,easeOutSine:i=>Math.sin(i*On),easeInOutSine:i=>-.5*(Math.cos($i*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>bh(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>bh(i)?i:Wb(i,.075,.3),easeOutElastic:i=>bh(i)?i:qb(i,.075,.3),easeInOutElastic(i){return bh(i)?i:i<.5?.5*Wb(i*2,.1125,.45):.5+.5*qb(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-Nc.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Nc.easeInBounce(i*2)*.5:Nc.easeOutBounce(i*2-1)*.5+.5};function Eg(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Ub(i){return Eg(i)?i:new ed(i)}function Bp(i){return Eg(i)?i:new ed(i).saturate(.5).darken(.1).hexString()}const kR=["x","y","borderWidth","radius","tension"],SR=["color","borderColor","backgroundColor"];function CR(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:SR},numbers:{type:"number",properties:kR}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function MR(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Gb=new Map;function PR(i,e){e=e||{};const t=i+JSON.stringify(e);let n=Gb.get(t);return n||(n=new Intl.NumberFormat(i,e),Gb.set(t,n)),n}function Rd(i,e,t){return PR(e,t).format(i)}const Cw={values(i){return xn(i)?i:""+i},numeric(i,e,t){if(i===0)return"0";const n=this.chart.options.locale;let s,a=i;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(s="scientific"),a=AR(i,t)}const r=Fr(Math.abs(a)),o=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Rd(i,n,l)},logarithmic(i,e,t){if(i===0)return"0";const n=t[e].significand||i/Math.pow(10,Math.floor(Fr(i)));return[1,2,3,5,10,15].includes(n)||e>.8*t.length?Cw.numeric.call(this,i,e,t):""}};function AR(i,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&i!==Math.floor(i)&&(t=i-Math.floor(i)),t}var Ef={formatters:Cw};function TR(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ef.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const No=Object.create(null),qm=Object.create(null);function Fc(i,e){if(!e)return i;const t=e.split(".");for(let n=0,s=t.length;n<s;++n){const a=t[n];i=i[a]||(i[a]=Object.create(null))}return i}function Rp(i,e,t){return typeof e=="string"?td(Fc(i,e),t):td(Fc(i,""),e)}class LR{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>Bp(s.backgroundColor),this.hoverBorderColor=(n,s)=>Bp(s.borderColor),this.hoverColor=(n,s)=>Bp(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Rp(this,e,t)}get(e){return Fc(this,e)}describe(e,t){return Rp(qm,e,t)}override(e,t){return Rp(No,e,t)}route(e,t,n,s){const a=Fc(this,e),r=Fc(this,n),o="_"+t;Object.defineProperties(a,{[o]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const l=this[o],d=r[s];return Di(l)?Object.assign({},d,l):ui(l,d)},set(l){this[o]=l}}})}apply(e){e.forEach(t=>t(this))}}var wn=new LR({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[CR,MR,TR]);function DR(i){return!i||Pi(i.size)||Pi(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function Hu(i,e,t,n,s){let a=e[s];return a||(a=e[s]=i.measureText(s).width,t.push(s)),a>n&&(n=a),n}function ER(i,e,t,n){n=n||{};let s=n.data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(s=n.data={},a=n.garbageCollect=[],n.font=e),i.save(),i.font=e;let r=0;const o=t.length;let l,d,h,m,v;for(l=0;l<o;l++)if(m=t[l],m!=null&&!xn(m))r=Hu(i,s,a,r,m);else if(xn(m))for(d=0,h=m.length;d<h;d++)v=m[d],v!=null&&!xn(v)&&(r=Hu(i,s,a,r,v));i.restore();const b=a.length/2;if(b>t.length){for(l=0;l<b;l++)delete s[a[l]];a.splice(0,b)}return r}function _o(i,e,t){const n=i.currentDevicePixelRatio,s=t!==0?Math.max(t/2,.5):0;return Math.round((e-s)*n)/n+s}function Zb(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function Um(i,e,t,n){Mw(i,e,t,n,null)}function Mw(i,e,t,n,s){let a,r,o,l,d,h,m,v;const b=e.pointStyle,y=e.rotation,x=e.radius;let k=(y||0)*uR;if(b&&typeof b=="object"&&(a=b.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){i.save(),i.translate(t,n),i.rotate(k),i.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),i.restore();return}if(!(isNaN(x)||x<=0)){switch(i.beginPath(),b){default:s?i.ellipse(t,n,s/2,x,0,0,gn):i.arc(t,n,x,0,gn),i.closePath();break;case"triangle":h=s?s/2:x,i.moveTo(t+Math.sin(k)*h,n-Math.cos(k)*x),k+=Hb,i.lineTo(t+Math.sin(k)*h,n-Math.cos(k)*x),k+=Hb,i.lineTo(t+Math.sin(k)*h,n-Math.cos(k)*x),i.closePath();break;case"rectRounded":d=x*.516,l=x-d,r=Math.cos(k+go)*l,m=Math.cos(k+go)*(s?s/2-d:l),o=Math.sin(k+go)*l,v=Math.sin(k+go)*(s?s/2-d:l),i.arc(t-m,n-o,d,k-$i,k-On),i.arc(t+v,n-r,d,k-On,k),i.arc(t+m,n+o,d,k,k+On),i.arc(t-v,n+r,d,k+On,k+$i),i.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*x,h=s?s/2:l,i.rect(t-h,n-l,2*h,2*l);break}k+=go;case"rectRot":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,o=Math.sin(k)*x,v=Math.sin(k)*(s?s/2:x),i.moveTo(t-m,n-o),i.lineTo(t+v,n-r),i.lineTo(t+m,n+o),i.lineTo(t-v,n+r),i.closePath();break;case"crossRot":k+=go;case"cross":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,o=Math.sin(k)*x,v=Math.sin(k)*(s?s/2:x),i.moveTo(t-m,n-o),i.lineTo(t+m,n+o),i.moveTo(t+v,n-r),i.lineTo(t-v,n+r);break;case"star":m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,o=Math.sin(k)*x,v=Math.sin(k)*(s?s/2:x),i.moveTo(t-m,n-o),i.lineTo(t+m,n+o),i.moveTo(t+v,n-r),i.lineTo(t-v,n+r),k+=go,m=Math.cos(k)*(s?s/2:x),r=Math.cos(k)*x,o=Math.sin(k)*x,v=Math.sin(k)*(s?s/2:x),i.moveTo(t-m,n-o),i.lineTo(t+m,n+o),i.moveTo(t+v,n-r),i.lineTo(t-v,n+r);break;case"line":r=s?s/2:Math.cos(k)*x,o=Math.sin(k)*x,i.moveTo(t-r,n-o),i.lineTo(t+r,n+o);break;case"dash":i.moveTo(t,n),i.lineTo(t+Math.cos(k)*(s?s/2:x),n+Math.sin(k)*x);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function mr(i,e,t){return t=t||.5,!e||i&&i.x>e.left-t&&i.x<e.right+t&&i.y>e.top-t&&i.y<e.bottom+t}function If(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function Of(i){i.restore()}function IR(i,e,t,n,s){if(!e)return i.lineTo(t.x,t.y);if(s==="middle"){const a=(e.x+t.x)/2;i.lineTo(a,e.y),i.lineTo(a,t.y)}else s==="after"!=!!n?i.lineTo(e.x,t.y):i.lineTo(t.x,e.y);i.lineTo(t.x,t.y)}function OR(i,e,t,n){if(!e)return i.lineTo(t.x,t.y);i.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function BR(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),Pi(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function RR(i,e,t,n,s){if(s.strikethrough||s.underline){const a=i.measureText(n),r=e-a.actualBoundingBoxLeft,o=e+a.actualBoundingBoxRight,l=t-a.actualBoundingBoxAscent,d=t+a.actualBoundingBoxDescent,h=s.strikethrough?(l+d)/2:d;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=s.decorationWidth||2,i.moveTo(r,h),i.lineTo(o,h),i.stroke()}}function zR(i,e){const t=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=t}function Fo(i,e,t,n,s,a={}){const r=xn(e)?e:[e],o=a.strokeWidth>0&&a.strokeColor!=="";let l,d;for(i.save(),i.font=s.string,BR(i,a),l=0;l<r.length;++l)d=r[l],a.backdrop&&zR(i,a.backdrop),o&&(a.strokeColor&&(i.strokeStyle=a.strokeColor),Pi(a.strokeWidth)||(i.lineWidth=a.strokeWidth),i.strokeText(d,t,n,a.maxWidth)),i.fillText(d,t,n,a.maxWidth),RR(i,t,n,d,a),n+=Number(s.lineHeight);i.restore()}function sd(i,e){const{x:t,y:n,w:s,h:a,radius:r}=e;i.arc(t+r.topLeft,n+r.topLeft,r.topLeft,1.5*$i,$i,!0),i.lineTo(t,n+a-r.bottomLeft),i.arc(t+r.bottomLeft,n+a-r.bottomLeft,r.bottomLeft,$i,On,!0),i.lineTo(t+s-r.bottomRight,n+a),i.arc(t+s-r.bottomRight,n+a-r.bottomRight,r.bottomRight,On,0,!0),i.lineTo(t+s,n+r.topRight),i.arc(t+s-r.topRight,n+r.topRight,r.topRight,0,-On,!0),i.lineTo(t+r.topLeft,n)}const NR=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,FR=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function HR(i,e){const t=(""+i).match(NR);if(!t||t[1]==="normal")return e*1.2;switch(i=+t[2],t[3]){case"px":return i;case"%":i/=100;break}return e*i}const jR=i=>+i||0;function Ig(i,e){const t={},n=Di(e),s=n?Object.keys(e):e,a=Di(i)?n?r=>ui(i[r],i[e[r]]):r=>i[r]:()=>i;for(const r of s)t[r]=jR(a(r));return t}function Pw(i){return Ig(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Eo(i){return Ig(i,["topLeft","topRight","bottomLeft","bottomRight"])}function hs(i){const e=Pw(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function qn(i,e){i=i||{},e=e||wn.font;let t=ui(i.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=ui(i.style,e.style);n&&!(""+n).match(FR)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const s={family:ui(i.family,e.family),lineHeight:HR(ui(i.lineHeight,e.lineHeight),t),size:t,style:n,weight:ui(i.weight,e.weight),string:""};return s.string=DR(s),s}function Cc(i,e,t,n){let s,a,r;for(s=0,a=i.length;s<a;++s)if(r=i[s],r!==void 0&&r!==void 0)return r}function $R(i,e,t){const{min:n,max:s}=i,a=mw(e,(s-n)/2),r=(o,l)=>t&&o===0?0:o+l;return{min:r(n,-Math.abs(a)),max:r(s,a)}}function oo(i,e){return Object.assign(Object.create(i),e)}function Og(i,e=[""],t,n,s=()=>i[0]){const a=t||i;typeof n>"u"&&(n=Dw("_fallback",i));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:a,_fallback:n,_getTarget:s,override:o=>Og([o,...i],e,a,n)};return new Proxy(r,{deleteProperty(o,l){return delete o[l],delete o._keys,delete i[0][l],!0},get(o,l){return Tw(o,l,()=>KR(l,e,i,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(o,l){return Kb(o).includes(l)},ownKeys(o){return Kb(o)},set(o,l,d){const h=o._storage||(o._storage=s());return o[l]=h[l]=d,delete o._keys,!0}})}function Il(i,e,t,n){const s={_cacheable:!1,_proxy:i,_context:e,_subProxy:t,_stack:new Set,_descriptors:Aw(i,n),setContext:a=>Il(i,a,t,n),override:a=>Il(i.override(a),e,t,n)};return new Proxy(s,{deleteProperty(a,r){return delete a[r],delete i[r],!0},get(a,r,o){return Tw(a,r,()=>WR(a,r,o))},getOwnPropertyDescriptor(a,r){return a._descriptors.allKeys?Reflect.has(i,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,r)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(a,r){return Reflect.has(i,r)},ownKeys(){return Reflect.ownKeys(i)},set(a,r,o){return i[r]=o,delete a[r],!0}})}function Aw(i,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:s=e.allKeys}=i;return{allKeys:s,scriptable:t,indexable:n,isScriptable:Qr(t)?t:()=>t,isIndexable:Qr(n)?n:()=>n}}const VR=(i,e)=>i?i+Ag(e):e,Bg=(i,e)=>Di(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Tw(i,e,t){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const n=t();return i[e]=n,n}function WR(i,e,t){const{_proxy:n,_context:s,_subProxy:a,_descriptors:r}=i;let o=n[e];return Qr(o)&&r.isScriptable(e)&&(o=qR(e,o,i,t)),xn(o)&&o.length&&(o=UR(e,o,i,r.isIndexable)),Bg(e,o)&&(o=Il(o,s,a&&a[e],r)),o}function qR(i,e,t,n){const{_proxy:s,_context:a,_subProxy:r,_stack:o}=t;if(o.has(i))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+i);o.add(i);let l=e(a,r||n);return o.delete(i),Bg(i,l)&&(l=Rg(s._scopes,s,i,l)),l}function UR(i,e,t,n){const{_proxy:s,_context:a,_subProxy:r,_descriptors:o}=t;if(typeof a.index<"u"&&n(i))return e[a.index%e.length];if(Di(e[0])){const l=e,d=s._scopes.filter(h=>h!==l);e=[];for(const h of l){const m=Rg(d,s,i,h);e.push(Il(m,a,r&&r[i],o))}}return e}function Lw(i,e,t){return Qr(i)?i(e,t):i}const GR=(i,e)=>i===!0?e:typeof i=="string"?Jr(e,i):void 0;function ZR(i,e,t,n,s){for(const a of e){const r=GR(t,a);if(r){i.add(r);const o=Lw(r._fallback,t,s);if(typeof o<"u"&&o!==t&&o!==n)return o}else if(r===!1&&typeof n<"u"&&t!==n)return null}return!1}function Rg(i,e,t,n){const s=e._rootScopes,a=Lw(e._fallback,t,n),r=[...i,...s],o=new Set;o.add(n);let l=Yb(o,r,t,a||t,n);return l===null||typeof a<"u"&&a!==t&&(l=Yb(o,r,a,l,n),l===null)?!1:Og(Array.from(o),[""],s,a,()=>YR(e,t,n))}function Yb(i,e,t,n,s){for(;t;)t=ZR(i,e,t,n,s);return t}function YR(i,e,t){const n=i._getTarget();e in n||(n[e]={});const s=n[e];return xn(s)&&Di(t)?t:s||{}}function KR(i,e,t,n){let s;for(const a of e)if(s=Dw(VR(a,i),t),typeof s<"u")return Bg(i,s)?Rg(t,n,i,s):s}function Dw(i,e){for(const t of e){if(!t)continue;const n=t[i];if(typeof n<"u")return n}}function Kb(i){let e=i._keys;return e||(e=i._keys=XR(i._scopes)),e}function XR(i){const e=new Set;for(const t of i)for(const n of Object.keys(t).filter(s=>!s.startsWith("_")))e.add(n);return Array.from(e)}function Ew(i,e,t,n){const{iScale:s}=i,{key:a="r"}=this._parsing,r=new Array(n);let o,l,d,h;for(o=0,l=n;o<l;++o)d=o+t,h=e[d],r[o]={r:s.parse(Jr(h,a),d)};return r}const JR=Number.EPSILON||1e-14,Ol=(i,e)=>e<i.length&&!i[e].skip&&i[e],Iw=i=>i==="x"?"y":"x";function QR(i,e,t,n){const s=i.skip?e:i,a=e,r=t.skip?e:t,o=Wm(a,s),l=Wm(r,a);let d=o/(o+l),h=l/(o+l);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const m=n*d,v=n*h;return{previous:{x:a.x-m*(r.x-s.x),y:a.y-m*(r.y-s.y)},next:{x:a.x+v*(r.x-s.x),y:a.y+v*(r.y-s.y)}}}function ez(i,e,t){const n=i.length;let s,a,r,o,l,d=Ol(i,0);for(let h=0;h<n-1;++h)if(l=d,d=Ol(i,h+1),!(!l||!d)){if(zc(e[h],0,JR)){t[h]=t[h+1]=0;continue}s=t[h]/e[h],a=t[h+1]/e[h],o=Math.pow(s,2)+Math.pow(a,2),!(o<=9)&&(r=3/Math.sqrt(o),t[h]=s*r*e[h],t[h+1]=a*r*e[h])}}function tz(i,e,t="x"){const n=Iw(t),s=i.length;let a,r,o,l=Ol(i,0);for(let d=0;d<s;++d){if(r=o,o=l,l=Ol(i,d+1),!o)continue;const h=o[t],m=o[n];r&&(a=(h-r[t])/3,o[`cp1${t}`]=h-a,o[`cp1${n}`]=m-a*e[d]),l&&(a=(l[t]-h)/3,o[`cp2${t}`]=h+a,o[`cp2${n}`]=m+a*e[d])}}function iz(i,e="x"){const t=Iw(e),n=i.length,s=Array(n).fill(0),a=Array(n);let r,o,l,d=Ol(i,0);for(r=0;r<n;++r)if(o=l,l=d,d=Ol(i,r+1),!!l){if(d){const h=d[e]-l[e];s[r]=h!==0?(d[t]-l[t])/h:0}a[r]=o?d?qa(s[r-1])!==qa(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}ez(i,s,a),tz(i,a,e)}function yh(i,e,t){return Math.max(Math.min(i,t),e)}function nz(i,e){let t,n,s,a,r,o=mr(i[0],e);for(t=0,n=i.length;t<n;++t)r=a,a=o,o=t<n-1&&mr(i[t+1],e),a&&(s=i[t],r&&(s.cp1x=yh(s.cp1x,e.left,e.right),s.cp1y=yh(s.cp1y,e.top,e.bottom)),o&&(s.cp2x=yh(s.cp2x,e.left,e.right),s.cp2y=yh(s.cp2y,e.top,e.bottom)))}function sz(i,e,t,n,s){let a,r,o,l;if(e.spanGaps&&(i=i.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")iz(i,s);else{let d=n?i[i.length-1]:i[0];for(a=0,r=i.length;a<r;++a)o=i[a],l=QR(d,o,i[Math.min(a+1,r-(n?0:1))%r],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,d=o}e.capBezierPoints&&nz(i,t)}function zg(){return typeof window<"u"&&typeof document<"u"}function Ng(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ju(i,e,t){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=i,n}const Bf=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function az(i,e){return Bf(i).getPropertyValue(e)}const rz=["top","right","bottom","left"];function Io(i,e,t){const n={};t=t?"-"+t:"";for(let s=0;s<4;s++){const a=rz[s];n[a]=parseFloat(i[e+"-"+a+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const oz=(i,e,t)=>(i>0||e>0)&&(!t||!t.shadowRoot);function lz(i,e){const t=i.touches,n=t&&t.length?t[0]:i,{offsetX:s,offsetY:a}=n;let r=!1,o,l;if(oz(s,a,i.target))o=s,l=a;else{const d=e.getBoundingClientRect();o=n.clientX-d.left,l=n.clientY-d.top,r=!0}return{x:o,y:l,box:r}}function wo(i,e){if("native"in i)return i;const{canvas:t,currentDevicePixelRatio:n}=e,s=Bf(t),a=s.boxSizing==="border-box",r=Io(s,"padding"),o=Io(s,"border","width"),{x:l,y:d,box:h}=lz(i,t),m=r.left+(h&&o.left),v=r.top+(h&&o.top);let{width:b,height:y}=e;return a&&(b-=r.width+o.width,y-=r.height+o.height),{x:Math.round((l-m)/b*t.width/n),y:Math.round((d-v)/y*t.height/n)}}function cz(i,e,t){let n,s;if(e===void 0||t===void 0){const a=i&&Ng(i);if(!a)e=i.clientWidth,t=i.clientHeight;else{const r=a.getBoundingClientRect(),o=Bf(a),l=Io(o,"border","width"),d=Io(o,"padding");e=r.width-d.width-l.width,t=r.height-d.height-l.height,n=ju(o.maxWidth,a,"clientWidth"),s=ju(o.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:n||Fu,maxHeight:s||Fu}}const xh=i=>Math.round(i*10)/10;function dz(i,e,t,n){const s=Bf(i),a=Io(s,"margin"),r=ju(s.maxWidth,i,"clientWidth")||Fu,o=ju(s.maxHeight,i,"clientHeight")||Fu,l=cz(i,e,t);let{width:d,height:h}=l;if(s.boxSizing==="content-box"){const v=Io(s,"border","width"),b=Io(s,"padding");d-=b.width+v.width,h-=b.height+v.height}return d=Math.max(0,d-a.width),h=Math.max(0,n?d/n:h-a.height),d=xh(Math.min(d,r,l.maxWidth)),h=xh(Math.min(h,o,l.maxHeight)),d&&!h&&(h=xh(d/2)),(e!==void 0||t!==void 0)&&n&&l.height&&h>l.height&&(h=l.height,d=xh(Math.floor(h*n))),{width:d,height:h}}function Xb(i,e,t){const n=e||1,s=Math.floor(i.height*n),a=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const r=i.canvas;return r.style&&(t||!r.style.height&&!r.style.width)&&(r.style.height=`${i.height}px`,r.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||r.height!==s||r.width!==a?(i.currentDevicePixelRatio=n,r.height=s,r.width=a,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}const hz=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};zg()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function Jb(i,e){const t=az(i,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ko(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:i.y+t*(e.y-i.y)}}function uz(i,e,t,n){return{x:i.x+t*(e.x-i.x),y:n==="middle"?t<.5?i.y:e.y:n==="after"?t<1?i.y:e.y:t>0?e.y:i.y}}function fz(i,e,t,n){const s={x:i.cp2x,y:i.cp2y},a={x:e.cp1x,y:e.cp1y},r=ko(i,s,t),o=ko(s,a,t),l=ko(a,e,t),d=ko(r,o,t),h=ko(o,l,t);return ko(d,h,t)}const pz=function(i,e){return{x(t){return i+i+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},mz=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function _l(i,e,t){return i?pz(e,t):mz()}function Ow(i,e){let t,n;(e==="ltr"||e==="rtl")&&(t=i.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),i.prevTextDirection=n)}function Bw(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function Rw(i){return i==="angle"?{between:nd,compare:vR,normalize:os}:{between:fr,compare:(e,t)=>e-t,normalize:e=>e}}function Qb({start:i,end:e,count:t,loop:n,style:s}){return{start:i%t,end:e%t,loop:n&&(e-i+1)%t===0,style:s}}function vz(i,e,t){const{property:n,start:s,end:a}=t,{between:r,normalize:o}=Rw(n),l=e.length;let{start:d,end:h,loop:m}=i,v,b;if(m){for(d+=l,h+=l,v=0,b=l;v<b&&r(o(e[d%l][n]),s,a);++v)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:m,style:i.style}}function zw(i,e,t){if(!t)return[i];const{property:n,start:s,end:a}=t,r=e.length,{compare:o,between:l,normalize:d}=Rw(n),{start:h,end:m,loop:v,style:b}=vz(i,e,t),y=[];let x=!1,k=null,C,A,T;const I=()=>l(s,T,C)&&o(s,T)!==0,D=()=>o(a,C)===0||l(a,T,C),N=()=>x||I(),z=()=>!x||D();for(let H=h,j=h;H<=m;++H)A=e[H%r],!A.skip&&(C=d(A[n]),C!==T&&(x=l(C,s,a),k===null&&N()&&(k=o(C,s)===0?H:j),k!==null&&z()&&(y.push(Qb({start:k,end:H,loop:v,count:r,style:b})),k=null),j=H,T=C));return k!==null&&y.push(Qb({start:k,end:m,loop:v,count:r,style:b})),y}function Nw(i,e){const t=[],n=i.segments;for(let s=0;s<n.length;s++){const a=zw(n[s],i.points,e);a.length&&t.push(...a)}return t}function gz(i,e,t,n){let s=0,a=e-1;if(t&&!n)for(;s<e&&!i[s].skip;)s++;for(;s<e&&i[s].skip;)s++;for(s%=e,t&&(a+=s);a>s&&i[a%e].skip;)a--;return a%=e,{start:s,end:a}}function _z(i,e,t,n){const s=i.length,a=[];let r=e,o=i[e],l;for(l=e+1;l<=t;++l){const d=i[l%s];d.skip||d.stop?o.skip||(n=!1,a.push({start:e%s,end:(l-1)%s,loop:n}),e=r=d.stop?l:null):(r=l,o.skip&&(e=l)),o=d}return r!==null&&a.push({start:e%s,end:r%s,loop:n}),a}function bz(i,e){const t=i.points,n=i.options.spanGaps,s=t.length;if(!s)return[];const a=!!i._loop,{start:r,end:o}=gz(t,s,a,n);if(n===!0)return e0(i,[{start:r,end:o,loop:a}],t,e);const l=o<r?o+s:o,d=!!i._fullLoop&&r===0&&o===s-1;return e0(i,_z(t,r,l,d),t,e)}function e0(i,e,t,n){return!n||!n.setContext||!t?e:yz(i,e,t,n)}function yz(i,e,t,n){const s=i._chart.getContext(),a=t0(i.options),{_datasetIndex:r,options:{spanGaps:o}}=i,l=t.length,d=[];let h=a,m=e[0].start,v=m;function b(y,x,k,C){const A=o?-1:1;if(y!==x){for(y+=l;t[y%l].skip;)y-=A;for(;t[x%l].skip;)x+=A;y%l!==x%l&&(d.push({start:y%l,end:x%l,loop:k,style:C}),h=C,m=x%l)}}for(const y of e){m=o?m:y.start;let x=t[m%l],k;for(v=m+1;v<=y.end;v++){const C=t[v%l];k=t0(n.setContext(oo(s,{type:"segment",p0:x,p1:C,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:r}))),xz(k,h)&&b(m,v-1,y.loop,h),x=C,h=k}m<v-1&&b(m,v-1,y.loop,h)}return d}function t0(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function xz(i,e){if(!e)return!1;const t=[],n=function(s,a){return Eg(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(i,n)!==JSON.stringify(e,n)}function wh(i,e,t){return i.options.clip?i[t]:e[t]}function wz(i,e){const{xScale:t,yScale:n}=i;return t&&n?{left:wh(t,e,"left"),right:wh(t,e,"right"),top:wh(n,e,"top"),bottom:wh(n,e,"bottom")}:e}function Fw(i,e){const t=e._clip;if(t.disabled)return!1;const n=wz(e,i.chartArea);return{left:t.left===!1?0:n.left-(t.left===!0?0:t.left),right:t.right===!1?i.width:n.right+(t.right===!0?0:t.right),top:t.top===!1?0:n.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?i.height:n.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class kz{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,s){const a=t.listeners[s],r=t.duration;a.forEach(o=>o({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(n-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=xw.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;const a=n.items;let r=a.length-1,o=!1,l;for(;r>=0;--r)l=a[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(a[r]=a[a.length-1],a.pop());o&&(s.draw(),this._notify(s,n,e,"progress")),a.length||(n.running=!1,this._notify(s,n,e,"complete"),n.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let s=n.length-1;for(;s>=0;--s)n[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var rr=new kz;const i0="transparent",Sz={boolean(i,e,t){return t>.5?e:i},color(i,e,t){const n=Ub(i||i0),s=n.valid&&Ub(e||i0);return s&&s.valid?s.mix(n,t).hexString():e},number(i,e,t){return i+(e-i)*t}};class Cz{constructor(e,t,n,s){const a=t[n];s=Cc([e.to,s,a,e.from]);const r=Cc([e.from,a,s]);this._active=!0,this._fn=e.fn||Sz[e.type||typeof r],this._easing=Nc[e.easing]||Nc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const s=this._target[this._prop],a=n-this._start,r=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=Cc([e.to,t,s,e.from]),this._from=Cc([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,s=this._prop,a=this._from,r=this._loop,o=this._to;let l;if(this._active=a!==o&&(r||t<n),!this._active){this._target[s]=o,this._notify(!0);return}if(t<0){this._target[s]=a;return}l=t/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(a,o,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][t]()}}class Hw{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Di(e))return;const t=Object.keys(wn.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(s=>{const a=e[s];if(!Di(a))return;const r={};for(const o of t)r[o]=a[o];(xn(a.properties)&&a.properties||[s]).forEach(o=>{(o===s||!n.has(o))&&n.set(o,r)})})}_animateOptions(e,t){const n=t.options,s=Pz(e,n);if(!s)return[];const a=this._createAnimations(s,n);return n.$shared&&Mz(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,t){const n=this._properties,s=[],a=e.$animations||(e.$animations={}),r=Object.keys(t),o=Date.now();let l;for(l=r.length-1;l>=0;--l){const d=r[l];if(d.charAt(0)==="$")continue;if(d==="options"){s.push(...this._animateOptions(e,t));continue}const h=t[d];let m=a[d];const v=n.get(d);if(m)if(v&&m.active()){m.update(v,h,o);continue}else m.cancel();if(!v||!v.duration){e[d]=h;continue}a[d]=m=new Cz(v,e,d,h),s.push(m)}return s}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return rr.add(this._chart,n),!0}}function Mz(i,e){const t=[],n=Object.keys(e);for(let s=0;s<n.length;s++){const a=i[n[s]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function Pz(i,e){if(!e)return;let t=i.options;if(!t){i.options=e;return}return t.$shared&&(i.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function n0(i,e){const t=i&&i.options||{},n=t.reverse,s=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:n?a:s,end:n?s:a}}function Az(i,e,t){if(t===!1)return!1;const n=n0(i,t),s=n0(e,t);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function Tz(i){let e,t,n,s;return Di(i)?(e=i.top,t=i.right,n=i.bottom,s=i.left):e=t=n=s=i,{top:e,right:t,bottom:n,left:s,disabled:i===!1}}function jw(i,e){const t=[],n=i._getSortedDatasetMetas(e);let s,a;for(s=0,a=n.length;s<a;++s)t.push(n[s].index);return t}function s0(i,e,t,n={}){const s=i.keys,a=n.mode==="single";let r,o,l,d;if(e===null)return;let h=!1;for(r=0,o=s.length;r<o;++r){if(l=+s[r],l===t){if(h=!0,n.all)continue;break}d=i.values[l],Tn(d)&&(a||e===0||qa(e)===qa(d))&&(e+=d)}return!h&&!n.all?0:e}function Lz(i,e){const{iScale:t,vScale:n}=e,s=t.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",r=Object.keys(i),o=new Array(r.length);let l,d,h;for(l=0,d=r.length;l<d;++l)h=r[l],o[l]={[s]:h,[a]:i[h]};return o}function zp(i,e){const t=i&&i.options.stacked;return t||t===void 0&&e.stack!==void 0}function Dz(i,e,t){return`${i.id}.${e.id}.${t.stack||t.type}`}function Ez(i){const{min:e,max:t,minDefined:n,maxDefined:s}=i.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:s?t:Number.POSITIVE_INFINITY}}function Iz(i,e,t){const n=i[e]||(i[e]={});return n[t]||(n[t]={})}function a0(i,e,t,n){for(const s of e.getMatchingVisibleMetas(n).reverse()){const a=i[s.index];if(t&&a>0||!t&&a<0)return s.index}return null}function r0(i,e){const{chart:t,_cachedMeta:n}=i,s=t._stacks||(t._stacks={}),{iScale:a,vScale:r,index:o}=n,l=a.axis,d=r.axis,h=Dz(a,r,n),m=e.length;let v;for(let b=0;b<m;++b){const y=e[b],{[l]:x,[d]:k}=y,C=y._stacks||(y._stacks={});v=C[d]=Iz(s,h,x),v[o]=k,v._top=a0(v,r,!0,n.type),v._bottom=a0(v,r,!1,n.type);const A=v._visualValues||(v._visualValues={});A[o]=k}}function Np(i,e){const t=i.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function Oz(i,e){return oo(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Bz(i,e,t){return oo(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function oc(i,e){const t=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){e=e||i._parsed;for(const s of e){const a=s._stacks;if(!a||a[n]===void 0||a[n][t]===void 0)return;delete a[n][t],a[n]._visualValues!==void 0&&a[n]._visualValues[t]!==void 0&&delete a[n]._visualValues[t]}}}const Fp=i=>i==="reset"||i==="none",o0=(i,e)=>e?i:Object.assign({},i),Rz=(i,e,t)=>i&&!e.hidden&&e._stacked&&{keys:jw(t,!0),values:null};class va{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=zp(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&oc(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),s=(m,v,b,y)=>m==="x"?v:m==="r"?y:b,a=t.xAxisID=ui(n.xAxisID,Np(e,"x")),r=t.yAxisID=ui(n.yAxisID,Np(e,"y")),o=t.rAxisID=ui(n.rAxisID,Np(e,"r")),l=t.indexAxis,d=t.iAxisID=s(l,a,r,o),h=t.vAxisID=s(l,r,a,o);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Vb(this._data,this),e._stacked&&oc(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Di(t)){const s=this._cachedMeta;this._data=Lz(t,s)}else if(n!==t){if(n){Vb(n,this);const s=this._cachedMeta;oc(s),s._parsed=[]}t&&Object.isExtensible(t)&&yR(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let s=!1;this._dataCheck();const a=t._stacked;t._stacked=zp(t.vScale,t),t.stack!==n.stack&&(s=!0,oc(t),t.stack=n.stack),this._resyncElements(e),(s||a!==t._stacked)&&(r0(this,t._parsed),t._stacked=zp(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:s}=this,{iScale:a,_stacked:r}=n,o=a.axis;let l=e===0&&t===s.length?!0:n._sorted,d=e>0&&n._parsed[e-1],h,m,v;if(this._parsing===!1)n._parsed=s,n._sorted=!0,v=s;else{xn(s[e])?v=this.parseArrayData(n,s,e,t):Di(s[e])?v=this.parseObjectData(n,s,e,t):v=this.parsePrimitiveData(n,s,e,t);const b=()=>m[o]===null||d&&m[o]<d[o];for(h=0;h<t;++h)n._parsed[h+e]=m=v[h],l&&(b()&&(l=!1),d=m);n._sorted=l}r&&r0(this,v)}parsePrimitiveData(e,t,n,s){const{iScale:a,vScale:r}=e,o=a.axis,l=r.axis,d=a.getLabels(),h=a===r,m=new Array(s);let v,b,y;for(v=0,b=s;v<b;++v)y=v+n,m[v]={[o]:h||a.parse(d[y],y),[l]:r.parse(t[y],y)};return m}parseArrayData(e,t,n,s){const{xScale:a,yScale:r}=e,o=new Array(s);let l,d,h,m;for(l=0,d=s;l<d;++l)h=l+n,m=t[h],o[l]={x:a.parse(m[0],h),y:r.parse(m[1],h)};return o}parseObjectData(e,t,n,s){const{xScale:a,yScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=new Array(s);let h,m,v,b;for(h=0,m=s;h<m;++h)v=h+n,b=t[v],d[h]={x:a.parse(Jr(b,o),v),y:r.parse(Jr(b,l),v)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const s=this.chart,a=this._cachedMeta,r=t[e.axis],o={keys:jw(s,!0),values:t._stacks[e.axis]._visualValues};return s0(o,r,a.index,{mode:n})}updateRangeFromParsed(e,t,n,s){const a=n[t.axis];let r=a===null?NaN:a;const o=s&&n._stacks[t.axis];s&&o&&(s.values=o,r=s0(s,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const n=this._cachedMeta,s=n._parsed,a=n._sorted&&e===n.iScale,r=s.length,o=this._getOtherScale(e),l=Rz(t,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=Ez(o);let v,b;function y(){b=s[v];const x=b[o.axis];return!Tn(b[e.axis])||h>x||m<x}for(v=0;v<r&&!(!y()&&(this.updateRangeFromParsed(d,e,b,l),a));++v);if(a){for(v=r-1;v>=0;--v)if(!y()){this.updateRangeFromParsed(d,e,b,l);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let s,a,r;for(s=0,a=t.length;s<a;++s)r=t[s][e.axis],Tn(r)&&n.push(r);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,s=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:s?""+s.getLabelForValue(a[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=Tz(ui(this.options.clip,Az(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,s=n.data||[],a=t.chartArea,r=[],o=this._drawStart||0,l=this._drawCount||s.length-o,d=this.options.drawActiveElementsOnTop;let h;for(n.dataset&&n.dataset.draw(e,a,o,l),h=o;h<o+l;++h){const m=s[h];m.hidden||(m.active&&d?r.push(m):m.draw(e,a))}for(h=0;h<r.length;++h)r[h].draw(e,a)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const s=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];a=r.$context||(r.$context=Bz(this.getContext(),e,r)),a.parsed=this.getParsed(e),a.raw=s.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=Oz(this.chart.getContext(),this.index)),a.dataset=s,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const s=t==="active",a=this._cachedDataOpts,r=e+"-"+t,o=a[r],l=this.enableOptionSharing&&id(n);if(o)return o0(o,l);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),m=s?[`${e}Hover`,"hover",e,""]:[e,""],v=d.getOptionScopes(this.getDataset(),h),b=Object.keys(wn.elements[e]),y=()=>this.getContext(n,s,t),x=d.resolveNamedOptions(v,b,y,m);return x.$shared&&(x.$shared=l,a[r]=Object.freeze(o0(x,l))),x}_resolveAnimations(e,t,n){const s=this.chart,a=this._cachedDataOpts,r=`animation-${t}`,o=a[r];if(o)return o;let l;if(s.options.animation!==!1){const h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,t),v=h.getOptionScopes(this.getDataset(),m);l=h.createResolver(v,this.getContext(e,n,t))}const d=new Hw(s,l&&l.animations);return l&&l._cacheable&&(a[r]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Fp(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),s=this._sharedOptions,a=this.getSharedOptions(n),r=this.includeOptions(t,a)||a!==s;return this.updateSharedOptions(a,t,n),{sharedOptions:a,includeOptions:r}}updateElement(e,t,n,s){Fp(s)?Object.assign(e,n):this._resolveAnimations(t,s).update(e,n)}updateSharedOptions(e,t,n){e&&!Fp(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,s){e.active=s;const a=this.getStyle(t,s);this._resolveAnimations(t,n,s).update(e,{options:!s&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,l,d]of this._syncList)this[o](l,d);this._syncList=[];const s=n.length,a=t.length,r=Math.min(a,s);r&&this.parse(0,r),a>s?this._insertElements(s,a-s,e):a<s&&this._removeElements(a,s-a)}_insertElements(e,t,n=!0){const s=this._cachedMeta,a=s.data,r=e+t;let o;const l=d=>{for(d.length+=t,o=d.length-1;o>=r;o--)d[o]=d[o-t]};for(l(a),o=e;o<r;++o)a[o]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,t),n&&this.updateElements(a,e,t,"reset")}updateElements(e,t,n,s){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const s=n._parsed.splice(e,t);n._stacked&&oc(n,s)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,s]=e;this[t](n,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}De(va,"defaults",{}),De(va,"datasetElementType",null),De(va,"dataElementType",null);function zz(i,e){if(!i._cache.$bar){const t=i.getMatchingVisibleMetas(e);let n=[];for(let s=0,a=t.length;s<a;s++)n=n.concat(t[s].controller.getAllParsedValues(i));i._cache.$bar=yw(n.sort((s,a)=>s-a))}return i._cache.$bar}function Nz(i){const e=i.iScale,t=zz(e,i.type);let n=e._length,s,a,r,o;const l=()=>{r===32767||r===-32768||(id(o)&&(n=Math.min(n,Math.abs(r-o)||n)),o=r)};for(s=0,a=t.length;s<a;++s)r=e.getPixelForValue(t[s]),l();for(o=void 0,s=0,a=e.ticks.length;s<a;++s)r=e.getPixelForTick(s),l();return n}function Fz(i,e,t,n){const s=t.barThickness;let a,r;return Pi(s)?(a=e.min*t.categoryPercentage,r=t.barPercentage):(a=s*n,r=1),{chunk:a/n,ratio:r,start:e.pixels[i]-a/2}}function Hz(i,e,t,n){const s=e.pixels,a=s[i];let r=i>0?s[i-1]:null,o=i<s.length-1?s[i+1]:null;const l=t.categoryPercentage;r===null&&(r=a-(o===null?e.end-e.start:o-a)),o===null&&(o=a+a-r);const d=a-(a-Math.min(r,o))/2*l;return{chunk:Math.abs(o-r)/2*l/n,ratio:t.barPercentage,start:d}}function jz(i,e,t,n){const s=t.parse(i[0],n),a=t.parse(i[1],n),r=Math.min(s,a),o=Math.max(s,a);let l=r,d=o;Math.abs(r)>Math.abs(o)&&(l=o,d=r),e[t.axis]=d,e._custom={barStart:l,barEnd:d,start:s,end:a,min:r,max:o}}function $w(i,e,t,n){return xn(i)?jz(i,e,t,n):e[t.axis]=t.parse(i,n),e}function l0(i,e,t,n){const s=i.iScale,a=i.vScale,r=s.getLabels(),o=s===a,l=[];let d,h,m,v;for(d=t,h=t+n;d<h;++d)v=e[d],m={},m[s.axis]=o||s.parse(r[d],d),l.push($w(v,m,a,d));return l}function Hp(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function $z(i,e,t){return i!==0?qa(i):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Vz(i){let e,t,n,s,a;return i.horizontal?(e=i.base>i.x,t="left",n="right"):(e=i.base<i.y,t="bottom",n="top"),e?(s="end",a="start"):(s="start",a="end"),{start:t,end:n,reverse:e,top:s,bottom:a}}function Wz(i,e,t,n){let s=e.borderSkipped;const a={};if(!s){i.borderSkipped=a;return}if(s===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:o,reverse:l,top:d,bottom:h}=Vz(i);s==="middle"&&t&&(i.enableBorderRadius=!0,(t._top||0)===n?s=d:(t._bottom||0)===n?s=h:(a[c0(h,r,o,l)]=!0,s=d)),a[c0(s,r,o,l)]=!0,i.borderSkipped=a}function c0(i,e,t,n){return n?(i=qz(i,e,t),i=d0(i,t,e)):i=d0(i,e,t),i}function qz(i,e,t){return i===e?t:i===t?e:i}function d0(i,e,t){return i==="start"?e:i==="end"?t:i}function Uz(i,{inflateAmount:e},t){i.inflateAmount=e==="auto"?t===1?.33:0:e}class su extends va{parsePrimitiveData(e,t,n,s){return l0(e,t,n,s)}parseArrayData(e,t,n,s){return l0(e,t,n,s)}parseObjectData(e,t,n,s){const{iScale:a,vScale:r}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=a.axis==="x"?o:l,h=r.axis==="x"?o:l,m=[];let v,b,y,x;for(v=n,b=n+s;v<b;++v)x=t[v],y={},y[a.axis]=a.parse(Jr(x,d),v),m.push($w(Jr(x,h),y,r,v));return m}updateRangeFromParsed(e,t,n,s){super.updateRangeFromParsed(e,t,n,s);const a=n._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:s}=t,a=this.getParsed(e),r=a._custom,o=Hp(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(a[s.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,s){const a=s==="reset",{index:r,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),d=o.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:v}=this._getSharedOptions(t,s);for(let b=t;b<t+n;b++){const y=this.getParsed(b),x=a||Pi(y[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(b),k=this._calculateBarIndexPixels(b,h),C=(y._stacks||{})[o.axis],A={horizontal:d,base:x.base,enableBorderRadius:!C||Hp(y._custom)||r===C._top||r===C._bottom,x:d?x.head:k.center,y:d?k.center:x.head,height:d?k.size:Math.abs(x.size),width:d?Math.abs(x.size):k.size};v&&(A.options=m||this.resolveDataElementOptions(b,e[b].active?"active":s));const T=A.options||e[b].options;Wz(A,T,C,r),Uz(A,T,h.ratio),this.updateElement(e[b],b,A,s)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,s=n.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),a=n.options.stacked,r=[],o=this._cachedMeta.controller.getParsed(t),l=o&&o[n.axis],d=h=>{const m=h._parsed.find(b=>b[n.axis]===l),v=m&&m[h.vScale.axis];if(Pi(v)||isNaN(v))return!0};for(const h of s)if(!(t!==void 0&&d(h))&&((a===!1||r.indexOf(h.stack)===-1||a===void 0&&h.stack===void 0)&&r.push(h.stack),h.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[ui(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const s=this._getStacks(e,n),a=t!==void 0?s.indexOf(t):-1;return a===-1?s.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,s=[];let a,r;for(a=0,r=t.data.length;a<r;++a)s.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const o=e.barThickness;return{min:o||Nz(t),pixels:s,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:s},options:{base:a,minBarLength:r}}=this,o=a||0,l=this.getParsed(e),d=l._custom,h=Hp(d);let m=l[t.axis],v=0,b=n?this.applyStack(t,l,n):m,y,x;b!==m&&(v=b-m,b=m),h&&(m=d.barStart,b=d.barEnd-d.barStart,m!==0&&qa(m)!==qa(d.barEnd)&&(v=0),v+=m);const k=!Pi(a)&&!h?a:v;let C=t.getPixelForValue(k);if(this.chart.getDataVisibility(e)?y=t.getPixelForValue(v+b):y=C,x=y-C,Math.abs(x)<r){x=$z(x,t,o)*r,m===o&&(C-=x/2);const A=t.getPixelForDecimal(0),T=t.getPixelForDecimal(1),I=Math.min(A,T),D=Math.max(A,T);C=Math.max(Math.min(C,D),I),y=C+x,n&&!h&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(y)-t.getValueForPixel(C))}if(C===t.getPixelForValue(o)){const A=qa(x)*t.getLineWidthForValue(o)/2;C+=A,x-=A}return{size:x,base:C,head:y,center:y+x/2}}_calculateBarIndexPixels(e,t){const n=t.scale,s=this.options,a=s.skipNull,r=ui(s.maxBarThickness,1/0);let o,l;const d=this._getAxisCount();if(t.grouped){const h=a?this._getStackCount(e):t.stackCount,m=s.barThickness==="flex"?Hz(e,t,s,h*d):Fz(e,t,s,h*d),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,b=this._getAxis().indexOf(ui(v,this.getFirstScaleIdForIndexAxis())),y=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+b;o=m.start+m.chunk*y+m.chunk/2,l=Math.min(r,m.chunk*m.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),l=Math.min(r,t.min*t.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,s=n.length;let a=0;for(;a<s;++a)this.getParsed(a)[t.axis]!==null&&!n[a].hidden&&n[a].draw(this._ctx)}}De(su,"id","bar"),De(su,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),De(su,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class au extends va{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,s){const a=super.parsePrimitiveData(e,t,n,s);for(let r=0;r<a.length;r++)a[r]._custom=this.resolveDataElementOptions(r+n).radius;return a}parseArrayData(e,t,n,s){const a=super.parseArrayData(e,t,n,s);for(let r=0;r<a.length;r++){const o=t[n+r];a[r]._custom=ui(o[2],this.resolveDataElementOptions(r+n).radius)}return a}parseObjectData(e,t,n,s){const a=super.parseObjectData(e,t,n,s);for(let r=0;r<a.length;r++){const o=t[n+r];a[r]._custom=ui(o&&o.r&&+o.r,this.resolveDataElementOptions(r+n).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),o=s.getLabelForValue(r.x),l=a.getLabelForValue(r.y),d=r._custom;return{label:n[e]||"",value:"("+o+", "+l+(d?", "+d:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,s){const a=s==="reset",{iScale:r,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(t,s),h=r.axis,m=o.axis;for(let v=t;v<t+n;v++){const b=e[v],y=!a&&this.getParsed(v),x={},k=x[h]=a?r.getPixelForDecimal(.5):r.getPixelForValue(y[h]),C=x[m]=a?o.getBasePixel():o.getPixelForValue(y[m]);x.skip=isNaN(k)||isNaN(C),d&&(x.options=l||this.resolveDataElementOptions(v,b.active?"active":s),a&&(x.options.radius=0)),this.updateElement(b,v,x,s)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const a=s.radius;return t!=="active"&&(s.radius=0),s.radius+=ui(n&&n._custom,a),s}}De(au,"id","bubble"),De(au,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),De(au,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Gz(i,e,t){let n=1,s=1,a=0,r=0;if(e<gn){const o=i,l=o+e,d=Math.cos(o),h=Math.sin(o),m=Math.cos(l),v=Math.sin(l),b=(T,I,D)=>nd(T,o,l,!0)?1:Math.max(I,I*t,D,D*t),y=(T,I,D)=>nd(T,o,l,!0)?-1:Math.min(I,I*t,D,D*t),x=b(0,d,m),k=b(On,h,v),C=y($i,d,m),A=y($i+On,h,v);n=(x-C)/2,s=(k-A)/2,a=-(x+C)/2,r=-(k+A)/2}return{ratioX:n,ratioY:s,offsetX:a,offsetY:r}}class Ao extends va{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=n;else{let a=l=>+n[l];if(Di(n[e])){const{key:l="value"}=this._parsing;a=d=>+Jr(n[d],l)}let r,o;for(r=e,o=e+t;r<o;++r)s._parsed[r]=a(r)}}_getRotation(){return pa(this.options.rotation-90)}_getCircumference(){return pa(this.options.circumference)}_getRotationExtents(){let e=gn,t=-gn;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const s=this.chart.getDatasetMeta(n).controller,a=s._getRotation(),r=s._getCircumference();e=Math.min(e,a),t=Math.max(t,a+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,s=this._cachedMeta,a=s.data,r=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-r)/2,0),l=Math.min(aR(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:v,ratioY:b,offsetX:y,offsetY:x}=Gz(m,h,l),k=(n.width-r)/v,C=(n.height-r)/b,A=Math.max(Math.min(k,C)/2,0),T=mw(this.options.radius,A),I=Math.max(T*l,0),D=(T-I)/this._getVisibleDatasetWeightTotal();this.offsetX=y*T,this.offsetY=x*T,s.total=this.calculateTotal(),this.outerRadius=T-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const n=this.options,s=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*a/gn)}updateElements(e,t,n,s){const a=s==="reset",r=this.chart,o=r.chartArea,d=r.options.animation,h=(o.left+o.right)/2,m=(o.top+o.bottom)/2,v=a&&d.animateScale,b=v?0:this.innerRadius,y=v?0:this.outerRadius,{sharedOptions:x,includeOptions:k}=this._getSharedOptions(t,s);let C=this._getRotation(),A;for(A=0;A<t;++A)C+=this._circumference(A,a);for(A=t;A<t+n;++A){const T=this._circumference(A,a),I=e[A],D={x:h+this.offsetX,y:m+this.offsetY,startAngle:C,endAngle:C+T,circumference:T,outerRadius:y,innerRadius:b};k&&(D.options=x||this.resolveDataElementOptions(A,I.active?"active":s)),C+=T,this.updateElement(I,A,D,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n=0,s;for(s=0;s<t.length;s++){const a=e._parsed[s];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(s)&&!t[s].hidden&&(n+=Math.abs(a))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?gn*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,s=n.data.labels||[],a=Rd(t._parsed[e],n.options.locale);return{label:s[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const n=this.chart;let s,a,r,o,l;if(!e){for(s=0,a=n.data.datasets.length;s<a;++s)if(n.isDatasetVisible(s)){r=n.getDatasetMeta(s),e=r.data,o=r.controller;break}}if(!e)return 0;for(s=0,a=e.length;s<a;++s)l=o.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(t=Math.max(t,l.borderWidth||0,l.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,s=e.length;n<s;++n){const a=this.resolveDataElementOptions(n);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(ui(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}De(Ao,"id","doughnut"),De(Ao,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),De(Ao,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),De(Ao,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return t.labels.map((a,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class ru extends va{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:s=[],_dataset:a}=t,r=this.chart._animationsDisabled;let{start:o,count:l}=kw(t,s,r);this._drawStart=o,this._drawCount=l,Sw(t)&&(o=0,l=s.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=s;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!r,options:d},e),this.updateElements(s,o,l,e)}updateElements(e,t,n,s){const a=s==="reset",{iScale:r,vScale:o,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(t,s),v=r.axis,b=o.axis,{spanGaps:y,segment:x}=this.options,k=El(y)?y:Number.POSITIVE_INFINITY,C=this.chart._animationsDisabled||a||s==="none",A=t+n,T=e.length;let I=t>0&&this.getParsed(t-1);for(let D=0;D<T;++D){const N=e[D],z=C?N:{};if(D<t||D>=A){z.skip=!0;continue}const H=this.getParsed(D),j=Pi(H[b]),re=z[v]=r.getPixelForValue(H[v],D),V=z[b]=a||j?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,H,l):H[b],D);z.skip=isNaN(re)||isNaN(V)||j,z.stop=D>0&&Math.abs(H[v]-I[v])>k,x&&(z.parsed=H,z.raw=d.data[D]),m&&(z.options=h||this.resolveDataElementOptions(D,N.active?"active":s)),C||this.updateElement(N,D,z,s),I=H}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return n;const a=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(n,a,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}De(ru,"id","line"),De(ru,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),De(ru,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Hc extends va{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,s=n.data.labels||[],a=Rd(t._parsed[e].r,n.options.locale);return{label:s[e]||"",value:a}}parseObjectData(e,t,n,s){return Ew.bind(this)(e,t,n,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,s)=>{const a=this.getParsed(s).r;!isNaN(a)&&this.chart.getDataVisibility(s)&&(a<t.min&&(t.min=a),a>t.max&&(t.max=a))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(s/2,0),r=Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0),o=(a-r)/e.getVisibleDatasetCount();this.outerRadius=a-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,n,s){const a=s==="reset",r=this.chart,l=r.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,m=d.yCenter,v=d.getIndexAngle(0)-.5*$i;let b=v,y;const x=360/this.countVisibleElements();for(y=0;y<t;++y)b+=this._computeAngle(y,s,x);for(y=t;y<t+n;y++){const k=e[y];let C=b,A=b+this._computeAngle(y,s,x),T=r.getDataVisibility(y)?d.getDistanceFromCenterForValue(this.getParsed(y).r):0;b=A,a&&(l.animateScale&&(T=0),l.animateRotate&&(C=A=v));const I={x:h,y:m,innerRadius:0,outerRadius:T,startAngle:C,endAngle:A,options:this.resolveDataElementOptions(y,k.active?"active":s)};this.updateElement(k,y,I,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((n,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?pa(this.resolveDataElementOptions(e,t).angle||n):0}}De(Hc,"id","polarArea"),De(Hc,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),De(Hc,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:s}}=e.legend.options;return t.labels.map((a,r)=>{const l=e.getDatasetMeta(0).controller.getStyle(r);return{text:a,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Gm extends Ao{}De(Gm,"id","pie"),De(Gm,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ou extends va{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,s){return Ew.bind(this)(e,t,n,s)}update(e){const t=this._cachedMeta,n=t.dataset,s=t.data||[],a=t.iScale.getLabels();if(n.points=s,e!=="resize"){const r=this.resolveDatasetElementOptions(e);this.options.showLine||(r.borderWidth=0);const o={_loop:!0,_fullLoop:a.length===s.length,options:r};this.updateElement(n,void 0,o,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,n,s){const a=this._cachedMeta.rScale,r=s==="reset";for(let o=t;o<t+n;o++){const l=e[o],d=this.resolveDataElementOptions(o,l.active?"active":s),h=a.getPointPositionForValue(o,this.getParsed(o).r),m=r?a.xCenter:h.x,v=r?a.yCenter:h.y,b={x:m,y:v,angle:h.angle,skip:isNaN(m)||isNaN(v),options:d};this.updateElement(l,o,b,s)}}}De(ou,"id","radar"),De(ou,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),De(ou,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class lu extends va{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:s,yScale:a}=t,r=this.getParsed(e),o=s.getLabelForValue(r.x),l=a.getLabelForValue(r.y);return{label:n[e]||"",value:"("+o+", "+l+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,s=this.chart._animationsDisabled;let{start:a,count:r}=kw(t,n,s);if(this._drawStart=a,this._drawCount=r,Sw(t)&&(a=0,r=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=n;const d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!s,options:d},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,a,r,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,s){const a=s==="reset",{iScale:r,vScale:o,_stacked:l,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(t,s),m=this.getSharedOptions(h),v=this.includeOptions(s,m),b=r.axis,y=o.axis,{spanGaps:x,segment:k}=this.options,C=El(x)?x:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||a||s==="none";let T=t>0&&this.getParsed(t-1);for(let I=t;I<t+n;++I){const D=e[I],N=this.getParsed(I),z=A?D:{},H=Pi(N[y]),j=z[b]=r.getPixelForValue(N[b],I),re=z[y]=a||H?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,N,l):N[y],I);z.skip=isNaN(j)||isNaN(re)||H,z.stop=I>0&&Math.abs(N[b]-T[b])>C,k&&(z.parsed=N,z.raw=d.data[I]),v&&(z.options=m||this.resolveDataElementOptions(I,D.active?"active":s)),A||this.updateElement(D,I,z,s),T=N}this.updateSharedOptions(m,s,h)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let l=t.length-1;l>=0;--l)o=Math.max(o,t[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const n=e.dataset,s=n.options&&n.options.borderWidth||0;if(!t.length)return s;const a=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,a,r)/2}}De(lu,"id","scatter"),De(lu,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),De(lu,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Zz=Object.freeze({__proto__:null,BarController:su,BubbleController:au,DoughnutController:Ao,LineController:ru,PieController:Gm,PolarAreaController:Hc,RadarController:ou,ScatterController:lu});function bo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Fg{constructor(e){De(this,"options");this.options=e||{}}static override(e){Object.assign(Fg.prototype,e)}init(){}formats(){return bo()}parse(){return bo()}format(){return bo()}add(){return bo()}diff(){return bo()}startOf(){return bo()}endOf(){return bo()}}var Vw={_date:Fg};function Yz(i,e,t,n){const{controller:s,data:a,_sorted:r}=i,o=s._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&r&&a.length){const d=o._reversePixels?_R:pr;if(n){if(s._sharedOptions){const h=a[0],m=typeof h.getRange=="function"&&h.getRange(e);if(m){const v=d(a,e,t-m),b=d(a,e,t+m);return{lo:v.lo,hi:b.hi}}}}else{const h=d(a,e,t);if(l){const{vScale:m}=s._cachedMeta,{_parsed:v}=i,b=v.slice(0,h.lo+1).reverse().findIndex(x=>!Pi(x[m.axis]));h.lo-=Math.max(0,b);const y=v.slice(h.hi).findIndex(x=>!Pi(x[m.axis]));h.hi+=Math.max(0,y)}return h}}return{lo:0,hi:a.length-1}}function Rf(i,e,t,n,s){const a=i.getSortedVisibleDatasetMetas(),r=t[e];for(let o=0,l=a.length;o<l;++o){const{index:d,data:h}=a[o],{lo:m,hi:v}=Yz(a[o],e,r,s);for(let b=m;b<=v;++b){const y=h[b];y.skip||n(y,d,b)}}}function Kz(i){const e=i.indexOf("x")!==-1,t=i.indexOf("y")!==-1;return function(n,s){const a=e?Math.abs(n.x-s.x):0,r=t?Math.abs(n.y-s.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}function jp(i,e,t,n,s){const a=[];return!s&&!i.isPointInArea(e)||Rf(i,t,e,function(o,l,d){!s&&!mr(o,i.chartArea,0)||o.inRange(e.x,e.y,n)&&a.push({element:o,datasetIndex:l,index:d})},!0),a}function Xz(i,e,t,n){let s=[];function a(r,o,l){const{startAngle:d,endAngle:h}=r.getProps(["startAngle","endAngle"],n),{angle:m}=_w(r,{x:e.x,y:e.y});nd(m,d,h)&&s.push({element:r,datasetIndex:o,index:l})}return Rf(i,t,e,a),s}function Jz(i,e,t,n,s,a){let r=[];const o=Kz(t);let l=Number.POSITIVE_INFINITY;function d(h,m,v){const b=h.inRange(e.x,e.y,s);if(n&&!b)return;const y=h.getCenterPoint(s);if(!(!!a||i.isPointInArea(y))&&!b)return;const k=o(e,y);k<l?(r=[{element:h,datasetIndex:m,index:v}],l=k):k===l&&r.push({element:h,datasetIndex:m,index:v})}return Rf(i,t,e,d),r}function $p(i,e,t,n,s,a){return!a&&!i.isPointInArea(e)?[]:t==="r"&&!n?Xz(i,e,t,s):Jz(i,e,t,n,s,a)}function h0(i,e,t,n,s){const a=[],r=t==="x"?"inXRange":"inYRange";let o=!1;return Rf(i,t,e,(l,d,h)=>{l[r]&&l[r](e[t],s)&&(a.push({element:l,datasetIndex:d,index:h}),o=o||l.inRange(e.x,e.y,s))}),n&&!o?[]:a}var Qz={modes:{index(i,e,t,n){const s=wo(e,i),a=t.axis||"x",r=t.includeInvisible||!1,o=t.intersect?jp(i,s,a,n,r):$p(i,s,a,!1,n,r),l=[];return o.length?(i.getSortedVisibleDatasetMetas().forEach(d=>{const h=o[0].index,m=d.data[h];m&&!m.skip&&l.push({element:m,datasetIndex:d.index,index:h})}),l):[]},dataset(i,e,t,n){const s=wo(e,i),a=t.axis||"xy",r=t.includeInvisible||!1;let o=t.intersect?jp(i,s,a,n,r):$p(i,s,a,!1,n,r);if(o.length>0){const l=o[0].datasetIndex,d=i.getDatasetMeta(l).data;o=[];for(let h=0;h<d.length;++h)o.push({element:d[h],datasetIndex:l,index:h})}return o},point(i,e,t,n){const s=wo(e,i),a=t.axis||"xy",r=t.includeInvisible||!1;return jp(i,s,a,n,r)},nearest(i,e,t,n){const s=wo(e,i),a=t.axis||"xy",r=t.includeInvisible||!1;return $p(i,s,a,t.intersect,n,r)},x(i,e,t,n){const s=wo(e,i);return h0(i,s,"x",t.intersect,n)},y(i,e,t,n){const s=wo(e,i);return h0(i,s,"y",t.intersect,n)}}};const Ww=["left","top","right","bottom"];function lc(i,e){return i.filter(t=>t.pos===e)}function u0(i,e){return i.filter(t=>Ww.indexOf(t.pos)===-1&&t.box.axis===e)}function cc(i,e){return i.sort((t,n)=>{const s=e?n:t,a=e?t:n;return s.weight===a.weight?s.index-a.index:s.weight-a.weight})}function eN(i){const e=[];let t,n,s,a,r,o;for(t=0,n=(i||[]).length;t<n;++t)s=i[t],{position:a,options:{stack:r,stackWeight:o=1}}=s,e.push({index:t,box:s,pos:a,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&a+r,stackWeight:o});return e}function tN(i){const e={};for(const t of i){const{stack:n,pos:s,stackWeight:a}=t;if(!n||!Ww.includes(s))continue;const r=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=a}return e}function iN(i,e){const t=tN(i),{vBoxMaxWidth:n,hBoxMaxHeight:s}=e;let a,r,o;for(a=0,r=i.length;a<r;++a){o=i[a];const{fullSize:l}=o.box,d=t[o.stack],h=d&&o.stackWeight/d.weight;o.horizontal?(o.width=h?h*n:l&&e.availableWidth,o.height=s):(o.width=n,o.height=h?h*s:l&&e.availableHeight)}return t}function nN(i){const e=eN(i),t=cc(e.filter(d=>d.box.fullSize),!0),n=cc(lc(e,"left"),!0),s=cc(lc(e,"right")),a=cc(lc(e,"top"),!0),r=cc(lc(e,"bottom")),o=u0(e,"x"),l=u0(e,"y");return{fullSize:t,leftAndTop:n.concat(a),rightAndBottom:s.concat(l).concat(r).concat(o),chartArea:lc(e,"chartArea"),vertical:n.concat(s).concat(l),horizontal:a.concat(r).concat(o)}}function f0(i,e,t,n){return Math.max(i[t],e[t])+Math.max(i[n],e[n])}function qw(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function sN(i,e,t,n){const{pos:s,box:a}=t,r=i.maxPadding;if(!Di(s)){t.size&&(i[s]-=t.size);const m=n[t.stack]||{size:0,count:1};m.size=Math.max(m.size,t.horizontal?a.height:a.width),t.size=m.size/m.count,i[s]+=t.size}a.getPadding&&qw(r,a.getPadding());const o=Math.max(0,e.outerWidth-f0(r,i,"left","right")),l=Math.max(0,e.outerHeight-f0(r,i,"top","bottom")),d=o!==i.w,h=l!==i.h;return i.w=o,i.h=l,t.horizontal?{same:d,other:h}:{same:h,other:d}}function aN(i){const e=i.maxPadding;function t(n){const s=Math.max(e[n]-i[n],0);return i[n]+=s,s}i.y+=t("top"),i.x+=t("left"),t("right"),t("bottom")}function rN(i,e){const t=e.maxPadding;function n(s){const a={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{a[r]=Math.max(e[r],t[r])}),a}return n(i?["left","right"]:["top","bottom"])}function Mc(i,e,t,n){const s=[];let a,r,o,l,d,h;for(a=0,r=i.length,d=0;a<r;++a){o=i[a],l=o.box,l.update(o.width||e.w,o.height||e.h,rN(o.horizontal,e));const{same:m,other:v}=sN(e,t,o,n);d|=m&&s.length,h=h||v,l.fullSize||s.push(o)}return d&&Mc(s,e,t,n)||h}function kh(i,e,t,n,s){i.top=t,i.left=e,i.right=e+n,i.bottom=t+s,i.width=n,i.height=s}function p0(i,e,t,n){const s=t.padding;let{x:a,y:r}=e;for(const o of i){const l=o.box,d=n[o.stack]||{placed:0,weight:1},h=o.stackWeight/d.weight||1;if(o.horizontal){const m=e.w*h,v=d.size||l.height;id(d.start)&&(r=d.start),l.fullSize?kh(l,s.left,r,t.outerWidth-s.right-s.left,v):kh(l,e.left+d.placed,r,m,v),d.start=r,d.placed+=m,r=l.bottom}else{const m=e.h*h,v=d.size||l.width;id(d.start)&&(a=d.start),l.fullSize?kh(l,a,s.top,v,t.outerHeight-s.bottom-s.top):kh(l,a,e.top+d.placed,v,m),d.start=a,d.placed+=m,a=l.right}}e.x=a,e.y=r}var ds={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},i.boxes.push(e)},removeBox(i,e){const t=i.boxes?i.boxes.indexOf(e):-1;t!==-1&&i.boxes.splice(t,1)},configure(i,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(i,e,t,n){if(!i)return;const s=hs(i.options.layout.padding),a=Math.max(e-s.width,0),r=Math.max(t-s.height,0),o=nN(i.boxes),l=o.vertical,d=o.horizontal;tn(i.boxes,x=>{typeof x.beforeLayout=="function"&&x.beforeLayout()});const h=l.reduce((x,k)=>k.box.options&&k.box.options.display===!1?x:x+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:t,padding:s,availableWidth:a,availableHeight:r,vBoxMaxWidth:a/2/h,hBoxMaxHeight:r/2}),v=Object.assign({},s);qw(v,hs(n));const b=Object.assign({maxPadding:v,w:a,h:r,x:s.left,y:s.top},s),y=iN(l.concat(d),m);Mc(o.fullSize,b,m,y),Mc(l,b,m,y),Mc(d,b,m,y)&&Mc(l,b,m,y),aN(b),p0(o.leftAndTop,b,m,y),b.x+=b.w,b.y+=b.h,p0(o.rightAndBottom,b,m,y),i.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},tn(o.chartArea,x=>{const k=x.box;Object.assign(k,i.chartArea),k.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})})}};class Uw{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,s){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):n)}}isAttached(e){return!0}updateConfig(e){}}class oN extends Uw{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const cu="$chartjs",lN={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},m0=i=>i===null||i==="";function cN(i,e){const t=i.style,n=i.getAttribute("height"),s=i.getAttribute("width");if(i[cu]={initial:{height:n,width:s,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",m0(s)){const a=Jb(i,"width");a!==void 0&&(i.width=a)}if(m0(n))if(i.style.height==="")i.height=i.width/(e||2);else{const a=Jb(i,"height");a!==void 0&&(i.height=a)}return i}const Gw=hz?{passive:!0}:!1;function dN(i,e,t){i&&i.addEventListener(e,t,Gw)}function hN(i,e,t){i&&i.canvas&&i.canvas.removeEventListener(e,t,Gw)}function uN(i,e){const t=lN[i.type]||i.type,{x:n,y:s}=wo(i,e);return{type:t,chart:e,native:i,x:n!==void 0?n:null,y:s!==void 0?s:null}}function $u(i,e){for(const t of i)if(t===e||t.contains(e))return!0}function fN(i,e,t){const n=i.canvas,s=new MutationObserver(a=>{let r=!1;for(const o of a)r=r||$u(o.addedNodes,n),r=r&&!$u(o.removedNodes,n);r&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}function pN(i,e,t){const n=i.canvas,s=new MutationObserver(a=>{let r=!1;for(const o of a)r=r||$u(o.removedNodes,n),r=r&&!$u(o.addedNodes,n);r&&t()});return s.observe(document,{childList:!0,subtree:!0}),s}const ad=new Map;let v0=0;function Zw(){const i=window.devicePixelRatio;i!==v0&&(v0=i,ad.forEach((e,t)=>{t.currentDevicePixelRatio!==i&&e()}))}function mN(i,e){ad.size||window.addEventListener("resize",Zw),ad.set(i,e)}function vN(i){ad.delete(i),ad.size||window.removeEventListener("resize",Zw)}function gN(i,e,t){const n=i.canvas,s=n&&Ng(n);if(!s)return;const a=ww((o,l)=>{const d=s.clientWidth;t(o,l),d<s.clientWidth&&t()},window),r=new ResizeObserver(o=>{const l=o[0],d=l.contentRect.width,h=l.contentRect.height;d===0&&h===0||a(d,h)});return r.observe(s),mN(i,a),r}function Vp(i,e,t){t&&t.disconnect(),e==="resize"&&vN(i)}function _N(i,e,t){const n=i.canvas,s=ww(a=>{i.ctx!==null&&t(uN(a,i))},i);return dN(n,e,s),s}class bN extends Uw{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(cN(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[cu])return!1;const n=t[cu].initial;["height","width"].forEach(a=>{const r=n[a];Pi(r)?t.removeAttribute(a):t.setAttribute(a,r)});const s=n.style||{};return Object.keys(s).forEach(a=>{t.style[a]=s[a]}),t.width=t.width,delete t[cu],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),r={attach:fN,detach:pN,resize:gN}[t]||_N;s[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),s=n[t];if(!s)return;({attach:Vp,detach:Vp,resize:Vp}[t]||hN)(e,t,s),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,s){return dz(e,t,n,s)}isAttached(e){const t=e&&Ng(e);return!!(t&&t.isConnected)}}function yN(i){return!zg()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?oN:bN}var eu;let Sr=(eu=class{constructor(){De(this,"x");De(this,"y");De(this,"active",!1);De(this,"options");De(this,"$animations")}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return El(this.x)&&El(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const s={};return e.forEach(a=>{s[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),s}},De(eu,"defaults",{}),De(eu,"defaultRoutes"),eu);function xN(i,e){const t=i.options.ticks,n=wN(i),s=Math.min(t.maxTicksLimit||n,n),a=t.major.enabled?SN(e):[],r=a.length,o=a[0],l=a[r-1],d=[];if(r>s)return CN(e,d,a,r/s),d;const h=kN(a,e,s);if(r>0){let m,v;const b=r>1?Math.round((l-o)/(r-1)):null;for(Sh(e,d,h,Pi(b)?0:o-b,o),m=0,v=r-1;m<v;m++)Sh(e,d,h,a[m],a[m+1]);return Sh(e,d,h,l,Pi(b)?e.length:l+b),d}return Sh(e,d,h),d}function wN(i){const e=i.options.offset,t=i._tickSize(),n=i._length/t+(e?0:1),s=i._maxLength/t;return Math.floor(Math.min(n,s))}function kN(i,e,t){const n=MN(i),s=e.length/t;if(!n)return Math.max(s,1);const a=fR(n);for(let r=0,o=a.length-1;r<o;r++){const l=a[r];if(l>s)return l}return Math.max(s,1)}function SN(i){const e=[];let t,n;for(t=0,n=i.length;t<n;t++)i[t].major&&e.push(t);return e}function CN(i,e,t,n){let s=0,a=t[0],r;for(n=Math.ceil(n),r=0;r<i.length;r++)r===a&&(e.push(i[r]),s++,a=t[s*n])}function Sh(i,e,t,n,s){const a=ui(n,0),r=Math.min(ui(s,i.length),i.length);let o=0,l,d,h;for(t=Math.ceil(t),s&&(l=s-n,t=l/Math.floor(l/t)),h=a;h<0;)o++,h=Math.round(a+o*t);for(d=Math.max(a,0);d<r;d++)d===h&&(e.push(i[d]),o++,h=Math.round(a+o*t))}function MN(i){const e=i.length;let t,n;if(e<2)return!1;for(n=i[0],t=1;t<e;++t)if(i[t]-i[t-1]!==n)return!1;return n}const PN=i=>i==="left"?"right":i==="right"?"left":i,g0=(i,e,t)=>e==="top"||e==="left"?i[e]+t:i[e]-t,_0=(i,e)=>Math.min(e||i,i);function b0(i,e){const t=[],n=i.length/e,s=i.length;let a=0;for(;a<s;a+=n)t.push(i[Math.floor(a)]);return t}function AN(i,e,t){const n=i.ticks.length,s=Math.min(e,n-1),a=i._startPixel,r=i._endPixel,o=1e-6;let l=i.getPixelForTick(s),d;if(!(t&&(n===1?d=Math.max(l-a,r-l):e===0?d=(i.getPixelForTick(1)-l)/2:d=(l-i.getPixelForTick(s-1))/2,l+=s<e?d:-d,l<a-o||l>r+o)))return l}function TN(i,e){tn(i,t=>{const n=t.gc,s=n.length/2;let a;if(s>e){for(a=0;a<s;++a)delete t.data[n[a]];n.splice(0,s)}})}function dc(i){return i.drawTicks?i.tickLength:0}function y0(i,e){if(!i.display)return 0;const t=qn(i.font,e),n=hs(i.padding);return(xn(i.text)?i.text.length:1)*t.lineHeight+n.height}function LN(i,e){return oo(i,{scale:e,type:"scale"})}function DN(i,e,t){return oo(i,{tick:t,index:e,type:"tick"})}function EN(i,e,t){let n=Dg(i);return(t&&e!=="right"||!t&&e==="right")&&(n=PN(n)),n}function IN(i,e,t,n){const{top:s,left:a,bottom:r,right:o,chart:l}=i,{chartArea:d,scales:h}=l;let m=0,v,b,y;const x=r-s,k=o-a;if(i.isHorizontal()){if(b=rs(n,a,o),Di(t)){const C=Object.keys(t)[0],A=t[C];y=h[C].getPixelForValue(A)+x-e}else t==="center"?y=(d.bottom+d.top)/2+x-e:y=g0(i,t,e);v=o-a}else{if(Di(t)){const C=Object.keys(t)[0],A=t[C];b=h[C].getPixelForValue(A)-k+e}else t==="center"?b=(d.left+d.right)/2-k+e:b=g0(i,t,e);y=rs(n,r,s),m=t==="left"?-On:On}return{titleX:b,titleY:y,maxWidth:v,rotation:m}}class Zo extends Sr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:s}=this;return e=Gs(e,Number.POSITIVE_INFINITY),t=Gs(t,Number.NEGATIVE_INFINITY),n=Gs(n,Number.POSITIVE_INFINITY),s=Gs(s,Number.NEGATIVE_INFINITY),{min:Gs(e,n),max:Gs(t,s),minDefined:Tn(e),maxDefined:Tn(t)}}getMinMax(e){let{min:t,max:n,minDefined:s,maxDefined:a}=this.getUserBounds(),r;if(s&&a)return{min:t,max:n};const o=this.getMatchingVisibleMetas();for(let l=0,d=o.length;l<d;++l)r=o[l].controller.getMinMax(this,e),s||(t=Math.min(t,r.min)),a||(n=Math.max(n,r.max));return t=a&&t>n?n:t,n=s&&t>n?t:n,{min:Gs(t,Gs(n,t)),max:Gs(n,Gs(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){un(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:s,grace:a,ticks:r}=this.options,o=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=$R(this,a,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?b0(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=xN(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){un(this.options.afterUpdate,[this])}beforeSetDimensions(){un(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){un(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),un(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){un(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,s,a;for(n=0,s=e.length;n<s;n++)a=e[n],a.label=un(t.callback,[a.value,n,e],this)}afterTickToLabelConversion(){un(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){un(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=_0(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,a=t.maxRotation;let r=s,o,l,d;if(!this._isVisible()||!t.display||s>=a||n<=1||!this.isHorizontal()){this.labelRotation=s;return}const h=this._getLabelSizes(),m=h.widest.width,v=h.highest.height,b=Kn(this.chart.width-m,0,this.maxWidth);o=e.offset?this.maxWidth/n:b/(n-1),m+6>o&&(o=b/(n-(e.offset?.5:1)),l=this.maxHeight-dc(e.grid)-t.padding-y0(e.title,this.chart.options.font),d=Math.sqrt(m*m+v*v),r=Tg(Math.min(Math.asin(Kn((h.highest.height+6)/o,-1,1)),Math.asin(Kn(l/d,-1,1))-Math.asin(Kn(v/d,-1,1)))),r=Math.max(s,Math.min(a,r))),this.labelRotation=r}afterCalculateLabelRotation(){un(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){un(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:s,grid:a}}=this,r=this._isVisible(),o=this.isHorizontal();if(r){const l=y0(s,t.options.font);if(o?(e.width=this.maxWidth,e.height=dc(a)+l):(e.height=this.maxHeight,e.width=dc(a)+l),n.display&&this.ticks.length){const{first:d,last:h,widest:m,highest:v}=this._getLabelSizes(),b=n.padding*2,y=pa(this.labelRotation),x=Math.cos(y),k=Math.sin(y);if(o){const C=n.mirror?0:k*m.width+x*v.height;e.height=Math.min(this.maxHeight,e.height+C+b)}else{const C=n.mirror?0:x*m.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+C+b)}this._calculatePadding(d,h,k,x)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,s){const{ticks:{align:a,padding:r},position:o}=this.options,l=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,b=0;l?d?(v=s*e.width,b=n*t.height):(v=n*e.height,b=s*t.width):a==="start"?b=t.width:a==="end"?v=e.width:a!=="inner"&&(v=e.width/2,b=t.width/2),this.paddingLeft=Math.max((v-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((b-m+r)*this.width/(this.width-m),0)}else{let h=t.height/2,m=e.height/2;a==="start"?(h=0,m=e.height):a==="end"&&(h=t.height,m=0),this.paddingTop=h+r,this.paddingBottom=m+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){un(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)Pi(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=b0(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:s,_longestTextCache:a}=this,r=[],o=[],l=Math.floor(t/_0(t,n));let d=0,h=0,m,v,b,y,x,k,C,A,T,I,D;for(m=0;m<t;m+=l){if(y=e[m].label,x=this._resolveTickFontOptions(m),s.font=k=x.string,C=a[k]=a[k]||{data:{},gc:[]},A=x.lineHeight,T=I=0,!Pi(y)&&!xn(y))T=Hu(s,C.data,C.gc,T,y),I=A;else if(xn(y))for(v=0,b=y.length;v<b;++v)D=y[v],!Pi(D)&&!xn(D)&&(T=Hu(s,C.data,C.gc,T,D),I+=A);r.push(T),o.push(I),d=Math.max(T,d),h=Math.max(I,h)}TN(a,t);const N=r.indexOf(d),z=o.indexOf(h),H=j=>({width:r[j]||0,height:o[j]||0});return{first:H(0),last:H(t-1),widest:H(N),highest:H(z),widths:r,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return gR(this._alignToPixels?_o(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=DN(this.getContext(),e,n))}return this.$context||(this.$context=LN(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=pa(this.labelRotation),n=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,o=a?a.widest.width+r:0,l=a?a.highest.height+r:0;return this.isHorizontal()?l*n>o*s?o/n:l/s:l*s<o*n?l/n:o/s}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,s=this.options,{grid:a,position:r,border:o}=s,l=a.offset,d=this.isHorizontal(),m=this.ticks.length+(l?1:0),v=dc(a),b=[],y=o.setContext(this.getContext()),x=y.display?y.width:0,k=x/2,C=function(ne){return _o(n,ne,x)};let A,T,I,D,N,z,H,j,re,V,q,le;if(r==="top")A=C(this.bottom),z=this.bottom-v,j=A-k,V=C(e.top)+k,le=e.bottom;else if(r==="bottom")A=C(this.top),V=e.top,le=C(e.bottom)-k,z=A+k,j=this.top+v;else if(r==="left")A=C(this.right),N=this.right-v,H=A-k,re=C(e.left)+k,q=e.right;else if(r==="right")A=C(this.left),re=e.left,q=C(e.right)-k,N=A+k,H=this.left+v;else if(t==="x"){if(r==="center")A=C((e.top+e.bottom)/2+.5);else if(Di(r)){const ne=Object.keys(r)[0],ye=r[ne];A=C(this.chart.scales[ne].getPixelForValue(ye))}V=e.top,le=e.bottom,z=A+k,j=z+v}else if(t==="y"){if(r==="center")A=C((e.left+e.right)/2);else if(Di(r)){const ne=Object.keys(r)[0],ye=r[ne];A=C(this.chart.scales[ne].getPixelForValue(ye))}N=A-k,H=N-v,re=e.left,q=e.right}const ee=ui(s.ticks.maxTicksLimit,m),W=Math.max(1,Math.ceil(m/ee));for(T=0;T<m;T+=W){const ne=this.getContext(T),ye=a.setContext(ne),ie=o.setContext(ne),Z=ye.lineWidth,$=ye.color,X=ie.dash||[],Y=ie.dashOffset,te=ye.tickWidth,K=ye.tickColor,F=ye.tickBorderDash||[],R=ye.tickBorderDashOffset;I=AN(this,T,l),I!==void 0&&(D=_o(n,I,Z),d?N=H=re=q=D:z=j=V=le=D,b.push({tx1:N,ty1:z,tx2:H,ty2:j,x1:re,y1:V,x2:q,y2:le,width:Z,color:$,borderDash:X,borderDashOffset:Y,tickWidth:te,tickColor:K,tickBorderDash:F,tickBorderDashOffset:R}))}return this._ticksLength=m,this._borderValue=A,b}_computeLabelItems(e){const t=this.axis,n=this.options,{position:s,ticks:a}=n,r=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:d,padding:h,mirror:m}=a,v=dc(n.grid),b=v+h,y=m?-h:b,x=-pa(this.labelRotation),k=[];let C,A,T,I,D,N,z,H,j,re,V,q,le="middle";if(s==="top")N=this.bottom-y,z=this._getXAxisLabelAlignment();else if(s==="bottom")N=this.top+y,z=this._getXAxisLabelAlignment();else if(s==="left"){const W=this._getYAxisLabelAlignment(v);z=W.textAlign,D=W.x}else if(s==="right"){const W=this._getYAxisLabelAlignment(v);z=W.textAlign,D=W.x}else if(t==="x"){if(s==="center")N=(e.top+e.bottom)/2+b;else if(Di(s)){const W=Object.keys(s)[0],ne=s[W];N=this.chart.scales[W].getPixelForValue(ne)+b}z=this._getXAxisLabelAlignment()}else if(t==="y"){if(s==="center")D=(e.left+e.right)/2-b;else if(Di(s)){const W=Object.keys(s)[0],ne=s[W];D=this.chart.scales[W].getPixelForValue(ne)}z=this._getYAxisLabelAlignment(v).textAlign}t==="y"&&(l==="start"?le="top":l==="end"&&(le="bottom"));const ee=this._getLabelSizes();for(C=0,A=o.length;C<A;++C){T=o[C],I=T.label;const W=a.setContext(this.getContext(C));H=this.getPixelForTick(C)+a.labelOffset,j=this._resolveTickFontOptions(C),re=j.lineHeight,V=xn(I)?I.length:1;const ne=V/2,ye=W.color,ie=W.textStrokeColor,Z=W.textStrokeWidth;let $=z;r?(D=H,z==="inner"&&(C===A-1?$=this.options.reverse?"left":"right":C===0?$=this.options.reverse?"right":"left":$="center"),s==="top"?d==="near"||x!==0?q=-V*re+re/2:d==="center"?q=-ee.highest.height/2-ne*re+re:q=-ee.highest.height+re/2:d==="near"||x!==0?q=re/2:d==="center"?q=ee.highest.height/2-ne*re:q=ee.highest.height-V*re,m&&(q*=-1),x!==0&&!W.showLabelBackdrop&&(D+=re/2*Math.sin(x))):(N=H,q=(1-V)*re/2);let X;if(W.showLabelBackdrop){const Y=hs(W.backdropPadding),te=ee.heights[C],K=ee.widths[C];let F=q-Y.top,R=0-Y.left;switch(le){case"middle":F-=te/2;break;case"bottom":F-=te;break}switch(z){case"center":R-=K/2;break;case"right":R-=K;break;case"inner":C===A-1?R-=K:C>0&&(R-=K/2);break}X={left:R,top:F,width:K+Y.width,height:te+Y.height,color:W.backdropColor}}k.push({label:I,font:j,textOffset:q,options:{rotation:x,color:ye,strokeColor:ie,strokeWidth:Z,textAlign:$,textBaseline:le,translation:[D,N],backdrop:X}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-pa(this.labelRotation))return e==="top"?"left":"right";let s="center";return t.align==="start"?s="left":t.align==="end"?s="right":t.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:s,padding:a}}=this.options,r=this._getLabelSizes(),o=e+a,l=r.widest.width;let d,h;return t==="left"?s?(h=this.right+a,n==="near"?d="left":n==="center"?(d="center",h+=l/2):(d="right",h+=l)):(h=this.right-o,n==="near"?d="right":n==="center"?(d="center",h-=l/2):(d="left",h=this.left)):t==="right"?s?(h=this.left+a,n==="near"?d="right":n==="center"?(d="center",h-=l/2):(d="left",h-=l)):(h=this.left+o,n==="near"?d="left":n==="center"?(d="center",h+=l/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:s,width:a,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,s,a,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const s=this.ticks.findIndex(a=>a.value===e);return s>=0?t.setContext(this.getContext(s)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,r;const o=(l,d,h)=>{!h.width||!h.color||(n.save(),n.lineWidth=h.width,n.strokeStyle=h.color,n.setLineDash(h.borderDash||[]),n.lineDashOffset=h.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(t.display)for(a=0,r=s.length;a<r;++a){const l=s[a];t.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:s}}=this,a=n.setContext(this.getContext()),r=n.display?a.width:0;if(!r)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,m,v;this.isHorizontal()?(d=_o(e,this.left,r)-r/2,h=_o(e,this.right,o)+o/2,m=v=l):(m=_o(e,this.top,r)-r/2,v=_o(e,this.bottom,o)+o/2,d=h=l),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(d,m),t.lineTo(h,v),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,s=this._computeLabelArea();s&&If(n,s);const a=this.getLabelItems(e);for(const r of a){const o=r.options,l=r.font,d=r.label,h=r.textOffset;Fo(n,d,0,h,l,o)}s&&Of(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:s}}=this;if(!n.display)return;const a=qn(n.font),r=hs(n.padding),o=n.align;let l=a.lineHeight/2;t==="bottom"||t==="center"||Di(t)?(l+=r.bottom,xn(n.text)&&(l+=a.lineHeight*(n.text.length-1))):l+=r.top;const{titleX:d,titleY:h,maxWidth:m,rotation:v}=IN(this,l,t,o);Fo(e,n.text,0,0,a,{color:n.color,maxWidth:m,rotation:v,textAlign:EN(o,t,s),textBaseline:"middle",translation:[d,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=ui(e.grid&&e.grid.z,-1),s=ui(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Zo.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[];let a,r;for(a=0,r=t.length;a<r;++a){const o=t[a];o[n]===this.id&&(!e||o.type===e)&&s.push(o)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return qn(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Ch{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;RN(t)&&(n=this.register(t));const s=this.items,a=e.id,r=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in s||(s[a]=e,ON(e,r,n),this.override&&wn.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,s=this.scope;n in t&&delete t[n],s&&n in wn[s]&&(delete wn[s][n],this.override&&delete No[n])}}function ON(i,e,t){const n=td(Object.create(null),[t?wn.get(t):{},wn.get(e),i.defaults]);wn.set(e,n),i.defaultRoutes&&BN(e,i.defaultRoutes),i.descriptors&&wn.describe(e,i.descriptors)}function BN(i,e){Object.keys(e).forEach(t=>{const n=t.split("."),s=n.pop(),a=[i].concat(n).join("."),r=e[t].split("."),o=r.pop(),l=r.join(".");wn.route(a,s,l,o)})}function RN(i){return"id"in i&&"defaults"in i}class zN{constructor(){this.controllers=new Ch(va,"datasets",!0),this.elements=new Ch(Sr,"elements"),this.plugins=new Ch(Object,"plugins"),this.scales=new Ch(Zo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(s=>{const a=n||this._getRegistryForType(s);n||a.isForType(s)||a===this.plugins&&s.id?this._exec(e,a,s):tn(s,r=>{const o=n||this._getRegistryForType(r);this._exec(e,o,r)})})}_exec(e,t,n){const s=Ag(e);un(n["before"+s],[],n),t[e](n),un(n["after"+s],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const s=t.get(e);if(s===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return s}}var Ba=new zN;class NN{constructor(){this._init=[]}notify(e,t,n,s){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(a,e,t,n);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,n,s){s=s||{};for(const a of e){const r=a.plugin,o=r[n],l=[t,s,a.options];if(un(o,l,r)===!1&&s.cancelable)return!1}return!0}invalidate(){Pi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,s=ui(n.options&&n.options.plugins,{}),a=FN(n);return s===!1&&!t?[]:jN(e,a,s,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,s=(a,r)=>a.filter(o=>!r.some(l=>o.plugin.id===l.plugin.id));this._notify(s(t,n),e,"stop"),this._notify(s(n,t),e,"start")}}function FN(i){const e={},t=[],n=Object.keys(Ba.plugins.items);for(let a=0;a<n.length;a++)t.push(Ba.getPlugin(n[a]));const s=i.plugins||[];for(let a=0;a<s.length;a++){const r=s[a];t.indexOf(r)===-1&&(t.push(r),e[r.id]=!0)}return{plugins:t,localIds:e}}function HN(i,e){return!e&&i===!1?null:i===!0?{}:i}function jN(i,{plugins:e,localIds:t},n,s){const a=[],r=i.getContext();for(const o of e){const l=o.id,d=HN(n[l],s);d!==null&&a.push({plugin:o,options:$N(i.config,{plugin:o,local:t[l]},d,r)})}return a}function $N(i,{plugin:e,local:t},n,s){const a=i.pluginScopeKeys(e),r=i.getOptionScopes(n,a);return t&&e.defaults&&r.push(e.defaults),i.createResolver(r,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Zm(i,e){const t=wn.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function VN(i,e){let t=i;return i==="_index_"?t=e:i==="_value_"&&(t=e==="x"?"y":"x"),t}function WN(i,e){return i===e?"_index_":"_value_"}function x0(i){if(i==="x"||i==="y"||i==="r")return i}function qN(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function Ym(i,...e){if(x0(i))return i;for(const t of e){const n=t.axis||qN(t.position)||i.length>1&&x0(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function w0(i,e,t){if(t[e+"AxisID"]===i)return{axis:e}}function UN(i,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(t.length)return w0(i,"x",t[0])||w0(i,"y",t[0])}return{}}function GN(i,e){const t=No[i.type]||{scales:{}},n=e.scales||{},s=Zm(i.type,e),a=Object.create(null);return Object.keys(n).forEach(r=>{const o=n[r];if(!Di(o))return console.error(`Invalid scale configuration for scale: ${r}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const l=Ym(r,o,UN(r,i),wn.scales[o.type]),d=WN(l,s),h=t.scales||{};a[r]=Rc(Object.create(null),[{axis:l},o,h[l],h[d]])}),i.data.datasets.forEach(r=>{const o=r.type||i.type,l=r.indexAxis||Zm(o,e),h=(No[o]||{}).scales||{};Object.keys(h).forEach(m=>{const v=VN(m,l),b=r[v+"AxisID"]||v;a[b]=a[b]||Object.create(null),Rc(a[b],[{axis:v},n[b],h[m]])})}),Object.keys(a).forEach(r=>{const o=a[r];Rc(o,[wn.scales[o.type],wn.scale])}),a}function Yw(i){const e=i.options||(i.options={});e.plugins=ui(e.plugins,{}),e.scales=GN(i,e)}function Kw(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function ZN(i){return i=i||{},i.data=Kw(i.data),Yw(i),i}const k0=new Map,Xw=new Set;function Mh(i,e){let t=k0.get(i);return t||(t=e(),k0.set(i,t),Xw.add(t)),t}const hc=(i,e,t)=>{const n=Jr(e,t);n!==void 0&&i.add(n)};class YN{constructor(e){this._config=ZN(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Kw(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Yw(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Mh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return Mh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return Mh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return Mh(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let s=n.get(e);return(!s||t)&&(s=new Map,n.set(e,s)),s}getOptionScopes(e,t,n){const{options:s,type:a}=this,r=this._cachedScopes(e,n),o=r.get(t);if(o)return o;const l=new Set;t.forEach(h=>{e&&(l.add(e),h.forEach(m=>hc(l,e,m))),h.forEach(m=>hc(l,s,m)),h.forEach(m=>hc(l,No[a]||{},m)),h.forEach(m=>hc(l,wn,m)),h.forEach(m=>hc(l,qm,m))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),Xw.has(t)&&r.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,No[t]||{},wn.datasets[t]||{},{type:t},wn,qm]}resolveNamedOptions(e,t,n,s=[""]){const a={$shared:!0},{resolver:r,subPrefixes:o}=S0(this._resolverCache,e,s);let l=r;if(XN(r,t)){a.$shared=!1,n=Qr(n)?n():n;const d=this.createResolver(e,n,o);l=Il(r,n,d)}for(const d of t)a[d]=l[d];return a}createResolver(e,t,n=[""],s){const{resolver:a}=S0(this._resolverCache,e,n);return Di(t)?Il(a,t,void 0,s):a}}function S0(i,e,t){let n=i.get(e);n||(n=new Map,i.set(e,n));const s=t.join();let a=n.get(s);return a||(a={resolver:Og(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},n.set(s,a)),a}const KN=i=>Di(i)&&Object.getOwnPropertyNames(i).some(e=>Qr(i[e]));function XN(i,e){const{isScriptable:t,isIndexable:n}=Aw(i);for(const s of e){const a=t(s),r=n(s),o=(r||a)&&i[s];if(a&&(Qr(o)||KN(o))||r&&xn(o))return!0}return!1}var JN="4.5.0";const QN=["top","bottom","left","right","chartArea"];function C0(i,e){return i==="top"||i==="bottom"||QN.indexOf(i)===-1&&e==="x"}function M0(i,e){return function(t,n){return t[i]===n[i]?t[e]-n[e]:t[i]-n[i]}}function P0(i){const e=i.chart,t=e.options.animation;e.notifyPlugins("afterRender"),un(t&&t.onComplete,[i],e)}function e6(i){const e=i.chart,t=e.options.animation;un(t&&t.onProgress,[i],e)}function Jw(i){return zg()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const du={},A0=i=>{const e=Jw(i);return Object.values(du).filter(t=>t.canvas===e).pop()};function t6(i,e,t){const n=Object.keys(i);for(const s of n){const a=+s;if(a>=e){const r=i[s];delete i[s],(t>0||a>e)&&(i[a+t]=r)}}}function i6(i,e,t,n){return!t||i.type==="mouseout"?null:n?e:i}class cr{static register(...e){Ba.add(...e),T0()}static unregister(...e){Ba.remove(...e),T0()}constructor(e,t){const n=this.config=new YN(t),s=Jw(e),a=A0(s);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const r=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||yN(s)),this.platform.updateConfig(n);const o=this.platform.acquireContext(s,r.aspectRatio),l=o&&o.canvas,d=l&&l.height,h=l&&l.width;if(this.id=sR(),this.ctx=o,this.canvas=l,this.width=h,this.height=d,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new NN,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=xR(m=>this.update(m),r.resizeDelay||0),this._dataChanges=[],du[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}rr.listen(this,"complete",P0),rr.listen(this,"progress",e6),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:s,_aspectRatio:a}=this;return Pi(e)?t&&a?a:s?n/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ba}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Xb(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Zb(this.canvas,this.ctx),this}stop(){return rr.stop(this),this}resize(e,t){rr.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,s=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(s,e,t,a),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,Xb(this,o,!0)&&(this.notifyPlugins("resize",{size:r}),un(n.onResize,[this,r],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};tn(t,(n,s)=>{n.id=s})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,s=Object.keys(n).reduce((r,o)=>(r[o]=!1,r),{});let a=[];t&&(a=a.concat(Object.keys(t).map(r=>{const o=t[r],l=Ym(r,o),d=l==="r",h=l==="x";return{options:o,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),tn(a,r=>{const o=r.options,l=o.id,d=Ym(l,o),h=ui(o.type,r.dtype);(o.position===void 0||C0(o.position,d)!==C0(r.dposition))&&(o.position=r.dposition),s[l]=!0;let m=null;if(l in n&&n[l].type===h)m=n[l];else{const v=Ba.getScale(h);m=new v({id:l,type:h,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(o,e)}),tn(s,(r,o)=>{r||delete n[o]}),tn(n,r=>{ds.configure(this,r,r.options),ds.addBox(this,r)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((s,a)=>s.index-a.index),n>t){for(let s=t;s<n;++s)this._destroyDatasetMeta(s);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(M0("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,s)=>{t.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,s;for(this._removeUnreferencedMetasets(),n=0,s=t.length;n<s;n++){const a=t[n];let r=this.getDatasetMeta(n);const o=a.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=a.indexAxis||Zm(o,this.options),r.order=a.order||0,r.index=n,r.label=""+a.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const l=Ba.getController(o),{datasetElementType:d,dataElementType:h}=wn.datasets[o];Object.assign(l,{dataElementType:Ba.getElement(h),datasetElementType:d&&Ba.getElement(d)}),r.controller=new l(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){tn(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:m}=this.getDatasetMeta(d),v=!s&&a.indexOf(m)===-1;m.buildOrUpdateElements(v),r=Math.max(+m.getMaxOverflow(),r)}r=this._minPadding=n.layout.autoPadding?r:0,this._updateLayout(r),s||tn(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(M0("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){tn(this.scales,e=>{ds.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Fb(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:s,count:a}of t){const r=n==="_removeElements"?-a:a;t6(e,s,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=a=>new Set(e.filter(r=>r[0]===a).map((r,o)=>o+","+r.splice(1).join(","))),s=n(0);for(let a=1;a<t;a++)if(!Fb(s,n(a)))return;return Array.from(s).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ds.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],tn(this.boxes,s=>{n&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,a)=>{s._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Qr(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),s={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(n.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(rr.has(this)?this.attached&&!rr.running(this)&&rr.start(this):(this.draw(),P0({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let s,a;for(s=0,a=t.length;s<a;++s){const r=t[s];(!e||r.visible)&&n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},s=Fw(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(s&&If(t,s),e.controller.draw(),s&&Of(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return mr(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,s){const a=Qz.modes[t];return typeof a=="function"?a(this,e,n,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let s=n.filter(a=>a&&a._dataset===t).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(s)),s}getContext(){return this.$context||(this.$context=oo(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const s=n?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,s);id(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),r.update(a,{visible:n}),this.update(o=>o.datasetIndex===e?s:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),rr.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Zb(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete du[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(a,r)=>{t.addEventListener(this,a,r),e[a]=r},s=(a,r,o)=>{a.offsetX=r,a.offsetY=o,this._eventHandler(a)};tn(this.options.events,a=>n(a,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(l,d)=>{t.addEventListener(this,l,d),e[l]=d},s=(l,d)=>{e[l]&&(t.removeEventListener(this,l,d),delete e[l])},a=(l,d)=>{this.canvas&&this.resize(l,d)};let r;const o=()=>{s("attach",o),this.attached=!0,this.resize(),n("resize",a),n("detach",r)};r=()=>{this.attached=!1,s("resize",a),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():r()}unbindEvents(){tn(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},tn(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const s=n?"set":"remove";let a,r,o,l;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+s+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){r=e[o];const d=r&&this.getDatasetMeta(r.datasetIndex).controller;d&&d[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:a,index:r})=>{const o=this.getDatasetMeta(a);if(!o)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:o.data[r],index:r}});!zu(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,n){const s=this.options.hover,a=(l,d)=>l.filter(h=>!d.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),r=a(t,e),o=n?e:a(e,t);r.length&&this.updateHoverStyle(r,s.mode,!1),o.length&&s.mode&&this.updateHoverStyle(o,s.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,s)===!1)return;const a=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,s),(a||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:s=[],options:a}=this,r=t,o=this._getActiveElements(e,s,n,r),l=dR(e),d=i6(e,this._lastEvent,n,l);n&&(this._lastEvent=null,un(a.onHover,[e,o,this],this),l&&un(a.onClick,[e,o,this],this));const h=!zu(o,s);return(h||t)&&(this._active=o,this._updateHoverStyles(o,s,t)),this._lastEvent=d,h}_getActiveElements(e,t,n,s){if(e.type==="mouseout")return[];if(!n)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,s)}}De(cr,"defaults",wn),De(cr,"instances",du),De(cr,"overrides",No),De(cr,"registry",Ba),De(cr,"version",JN),De(cr,"getChart",A0);function T0(){return tn(cr.instances,i=>i._plugins.invalidate())}function n6(i,e,t){const{startAngle:n,x:s,y:a,outerRadius:r,innerRadius:o,options:l}=e,{borderWidth:d,borderJoinStyle:h}=l,m=Math.min(d/r,os(n-t));if(i.beginPath(),i.arc(s,a,r-d/2,n+m/2,t-m/2),o>0){const v=Math.min(d/o,os(n-t));i.arc(s,a,o+d/2,t-v/2,n+v/2,!0)}else{const v=Math.min(d/2,r*os(n-t));if(h==="round")i.arc(s,a,v,t-$i/2,n+$i/2,!0);else if(h==="bevel"){const b=2*v*v,y=-b*Math.cos(t+$i/2)+s,x=-b*Math.sin(t+$i/2)+a,k=b*Math.cos(n+$i/2)+s,C=b*Math.sin(n+$i/2)+a;i.lineTo(y,x),i.lineTo(k,C)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function s6(i,e,t){const{startAngle:n,pixelMargin:s,x:a,y:r,outerRadius:o,innerRadius:l}=e;let d=s/o;i.beginPath(),i.arc(a,r,o,n-d,t+d),l>s?(d=s/l,i.arc(a,r,l,t+d,n-d,!0)):i.arc(a,r,s,t+On,n-On),i.closePath(),i.clip()}function a6(i){return Ig(i,["outerStart","outerEnd","innerStart","innerEnd"])}function r6(i,e,t,n){const s=a6(i.options.borderRadius),a=(t-e)/2,r=Math.min(a,n*e/2),o=l=>{const d=(t-Math.min(a,l))*n/2;return Kn(l,0,Math.min(a,d))};return{outerStart:o(s.outerStart),outerEnd:o(s.outerEnd),innerStart:Kn(s.innerStart,0,r),innerEnd:Kn(s.innerEnd,0,r)}}function ol(i,e,t,n){return{x:t+i*Math.cos(e),y:n+i*Math.sin(e)}}function Vu(i,e,t,n,s,a){const{x:r,y:o,startAngle:l,pixelMargin:d,innerRadius:h}=e,m=Math.max(e.outerRadius+n+t-d,0),v=h>0?h+n+t+d:0;let b=0;const y=s-l;if(n){const W=h>0?h-n:0,ne=m>0?m-n:0,ye=(W+ne)/2,ie=ye!==0?y*ye/(ye+n):y;b=(y-ie)/2}const x=Math.max(.001,y*m-t/$i)/m,k=(y-x)/2,C=l+k+b,A=s-k-b,{outerStart:T,outerEnd:I,innerStart:D,innerEnd:N}=r6(e,v,m,A-C),z=m-T,H=m-I,j=C+T/z,re=A-I/H,V=v+D,q=v+N,le=C+D/V,ee=A-N/q;if(i.beginPath(),a){const W=(j+re)/2;if(i.arc(r,o,m,j,W),i.arc(r,o,m,W,re),I>0){const Z=ol(H,re,r,o);i.arc(Z.x,Z.y,I,re,A+On)}const ne=ol(q,A,r,o);if(i.lineTo(ne.x,ne.y),N>0){const Z=ol(q,ee,r,o);i.arc(Z.x,Z.y,N,A+On,ee+Math.PI)}const ye=(A-N/v+(C+D/v))/2;if(i.arc(r,o,v,A-N/v,ye,!0),i.arc(r,o,v,ye,C+D/v,!0),D>0){const Z=ol(V,le,r,o);i.arc(Z.x,Z.y,D,le+Math.PI,C-On)}const ie=ol(z,C,r,o);if(i.lineTo(ie.x,ie.y),T>0){const Z=ol(z,j,r,o);i.arc(Z.x,Z.y,T,C-On,j)}}else{i.moveTo(r,o);const W=Math.cos(j)*m+r,ne=Math.sin(j)*m+o;i.lineTo(W,ne);const ye=Math.cos(re)*m+r,ie=Math.sin(re)*m+o;i.lineTo(ye,ie)}i.closePath()}function o6(i,e,t,n,s){const{fullCircles:a,startAngle:r,circumference:o}=e;let l=e.endAngle;if(a){Vu(i,e,t,n,l,s);for(let d=0;d<a;++d)i.fill();isNaN(o)||(l=r+(o%gn||gn))}return Vu(i,e,t,n,l,s),i.fill(),l}function l6(i,e,t,n,s){const{fullCircles:a,startAngle:r,circumference:o,options:l}=e,{borderWidth:d,borderJoinStyle:h,borderDash:m,borderDashOffset:v,borderRadius:b}=l,y=l.borderAlign==="inner";if(!d)return;i.setLineDash(m||[]),i.lineDashOffset=v,y?(i.lineWidth=d*2,i.lineJoin=h||"round"):(i.lineWidth=d,i.lineJoin=h||"bevel");let x=e.endAngle;if(a){Vu(i,e,t,n,x,s);for(let k=0;k<a;++k)i.stroke();isNaN(o)||(x=r+(o%gn||gn))}y&&s6(i,e,x),l.selfJoin&&x-r>=$i&&b===0&&h!=="miter"&&n6(i,e,x),a||(Vu(i,e,t,n,x,s),i.stroke())}class Pc extends Sr{constructor(t){super();De(this,"circumference");De(this,"endAngle");De(this,"fullCircles");De(this,"innerRadius");De(this,"outerRadius");De(this,"pixelMargin");De(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,n,s){const a=this.getProps(["x","y"],s),{angle:r,distance:o}=_w(a,{x:t,y:n}),{startAngle:l,endAngle:d,innerRadius:h,outerRadius:m,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],s),b=(this.options.spacing+this.options.borderWidth)/2,y=ui(v,d-l),x=nd(r,l,d)&&l!==d,k=y>=gn||x,C=fr(o,h+b,m+b);return k&&C}getCenterPoint(t){const{x:n,y:s,startAngle:a,endAngle:r,innerRadius:o,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:d,spacing:h}=this.options,m=(a+r)/2,v=(o+l+h+d)/2;return{x:n+Math.cos(m)*v,y:s+Math.sin(m)*v}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:n,circumference:s}=this,a=(n.offset||0)/4,r=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=s>gn?Math.floor(s/gn):0,s===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const l=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(l)*a,Math.sin(l)*a);const d=1-Math.sin(Math.min($i,s||0)),h=a*d;t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,o6(t,this,h,r,o),l6(t,this,h,r,o),t.restore()}}De(Pc,"id","arc"),De(Pc,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),De(Pc,"defaultRoutes",{backgroundColor:"backgroundColor"}),De(Pc,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function Qw(i,e,t=e){i.lineCap=ui(t.borderCapStyle,e.borderCapStyle),i.setLineDash(ui(t.borderDash,e.borderDash)),i.lineDashOffset=ui(t.borderDashOffset,e.borderDashOffset),i.lineJoin=ui(t.borderJoinStyle,e.borderJoinStyle),i.lineWidth=ui(t.borderWidth,e.borderWidth),i.strokeStyle=ui(t.borderColor,e.borderColor)}function c6(i,e,t){i.lineTo(t.x,t.y)}function d6(i){return i.stepped?IR:i.tension||i.cubicInterpolationMode==="monotone"?OR:c6}function ek(i,e,t={}){const n=i.length,{start:s=0,end:a=n-1}=t,{start:r,end:o}=e,l=Math.max(s,r),d=Math.min(a,o),h=s<r&&a<r||s>o&&a>o;return{count:n,start:l,loop:e.loop,ilen:d<l&&!h?n+d-l:d-l}}function h6(i,e,t,n){const{points:s,options:a}=e,{count:r,start:o,loop:l,ilen:d}=ek(s,t,n),h=d6(a);let{move:m=!0,reverse:v}=n||{},b,y,x;for(b=0;b<=d;++b)y=s[(o+(v?d-b:b))%r],!y.skip&&(m?(i.moveTo(y.x,y.y),m=!1):h(i,x,y,v,a.stepped),x=y);return l&&(y=s[(o+(v?d:0))%r],h(i,x,y,v,a.stepped)),!!l}function u6(i,e,t,n){const s=e.points,{count:a,start:r,ilen:o}=ek(s,t,n),{move:l=!0,reverse:d}=n||{};let h=0,m=0,v,b,y,x,k,C;const A=I=>(r+(d?o-I:I))%a,T=()=>{x!==k&&(i.lineTo(h,k),i.lineTo(h,x),i.lineTo(h,C))};for(l&&(b=s[A(0)],i.moveTo(b.x,b.y)),v=0;v<=o;++v){if(b=s[A(v)],b.skip)continue;const I=b.x,D=b.y,N=I|0;N===y?(D<x?x=D:D>k&&(k=D),h=(m*h+I)/++m):(T(),i.lineTo(I,D),y=N,m=0,x=k=D),C=D}T()}function Km(i){const e=i.options,t=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?u6:h6}function f6(i){return i.stepped?uz:i.tension||i.cubicInterpolationMode==="monotone"?fz:ko}function p6(i,e,t,n){let s=e._path;s||(s=e._path=new Path2D,e.path(s,t,n)&&s.closePath()),Qw(i,e.options),i.stroke(s)}function m6(i,e,t,n){const{segments:s,options:a}=e,r=Km(e);for(const o of s)Qw(i,a,o.style),i.beginPath(),r(i,e,o,{start:t,end:t+n-1})&&i.closePath(),i.stroke()}const v6=typeof Path2D=="function";function g6(i,e,t,n){v6&&!e.options.segment?p6(i,e,t,n):m6(i,e,t,n)}class Hr extends Sr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const s=n.spanGaps?this._loop:this._fullLoop;sz(this._points,n,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bz(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,s=e[t],a=this.points,r=Nw(this,{property:t,start:s,end:s});if(!r.length)return;const o=[],l=f6(n);let d,h;for(d=0,h=r.length;d<h;++d){const{start:m,end:v}=r[d],b=a[m],y=a[v];if(b===y){o.push(b);continue}const x=Math.abs((s-b[t])/(y[t]-b[t])),k=l(b,y,x,n.stepped);k[t]=e[t],o.push(k)}return o.length===1?o[0]:o}pathSegment(e,t,n){return Km(this)(e,this,t,n)}path(e,t,n){const s=this.segments,a=Km(this);let r=this._loop;t=t||0,n=n||this.points.length-t;for(const o of s)r&=a(e,this,o,{start:t,end:t+n-1});return!!r}draw(e,t,n,s){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),g6(e,this,n,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}De(Hr,"id","line"),De(Hr,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),De(Hr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),De(Hr,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function L0(i,e,t,n){const s=i.options,{[t]:a}=i.getProps([t],n);return Math.abs(e-a)<s.radius+s.hitRadius}class hu extends Sr{constructor(t){super();De(this,"parsed");De(this,"skip");De(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,n,s){const a=this.options,{x:r,y:o}=this.getProps(["x","y"],s);return Math.pow(t-r,2)+Math.pow(n-o,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,n){return L0(this,t,"x",n)}inYRange(t,n){return L0(this,t,"y",n)}getCenterPoint(t){const{x:n,y:s}=this.getProps(["x","y"],t);return{x:n,y:s}}size(t){t=t||this.options||{};let n=t.radius||0;n=Math.max(n,n&&t.hoverRadius||0);const s=n&&t.borderWidth||0;return(n+s)*2}draw(t,n){const s=this.options;this.skip||s.radius<.1||!mr(this,n,this.size(s)/2)||(t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.fillStyle=s.backgroundColor,Um(t,s,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}De(hu,"id","point"),De(hu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),De(hu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function tk(i,e){const{x:t,y:n,base:s,width:a,height:r}=i.getProps(["x","y","base","width","height"],e);let o,l,d,h,m;return i.horizontal?(m=r/2,o=Math.min(t,s),l=Math.max(t,s),d=n-m,h=n+m):(m=a/2,o=t-m,l=t+m,d=Math.min(n,s),h=Math.max(n,s)),{left:o,top:d,right:l,bottom:h}}function jr(i,e,t,n){return i?0:Kn(e,t,n)}function _6(i,e,t){const n=i.options.borderWidth,s=i.borderSkipped,a=Pw(n);return{t:jr(s.top,a.top,0,t),r:jr(s.right,a.right,0,e),b:jr(s.bottom,a.bottom,0,t),l:jr(s.left,a.left,0,e)}}function b6(i,e,t){const{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),s=i.options.borderRadius,a=Eo(s),r=Math.min(e,t),o=i.borderSkipped,l=n||Di(s);return{topLeft:jr(!l||o.top||o.left,a.topLeft,0,r),topRight:jr(!l||o.top||o.right,a.topRight,0,r),bottomLeft:jr(!l||o.bottom||o.left,a.bottomLeft,0,r),bottomRight:jr(!l||o.bottom||o.right,a.bottomRight,0,r)}}function y6(i){const e=tk(i),t=e.right-e.left,n=e.bottom-e.top,s=_6(i,t/2,n/2),a=b6(i,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:a},inner:{x:e.left+s.l,y:e.top+s.t,w:t-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,a.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(s.b,s.r))}}}}function Wp(i,e,t,n){const s=e===null,a=t===null,o=i&&!(s&&a)&&tk(i,n);return o&&(s||fr(e,o.left,o.right))&&(a||fr(t,o.top,o.bottom))}function x6(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function w6(i,e){i.rect(e.x,e.y,e.w,e.h)}function qp(i,e,t={}){const n=i.x!==t.x?-e:0,s=i.y!==t.y?-e:0,a=(i.x+i.w!==t.x+t.w?e:0)-n,r=(i.y+i.h!==t.y+t.h?e:0)-s;return{x:i.x+n,y:i.y+s,w:i.w+a,h:i.h+r,radius:i.radius}}class uu extends Sr{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:s}}=this,{inner:a,outer:r}=y6(this),o=x6(r.radius)?sd:w6;e.save(),(r.w!==a.w||r.h!==a.h)&&(e.beginPath(),o(e,qp(r,t,a)),e.clip(),o(e,qp(a,-t,r)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,qp(a,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,n){return Wp(this,e,t,n)}inXRange(e,t){return Wp(this,e,null,t)}inYRange(e,t){return Wp(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:s,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+s)/2:t,y:a?n:(n+s)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}De(uu,"id","bar"),De(uu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),De(uu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var k6=Object.freeze({__proto__:null,ArcElement:Pc,BarElement:uu,LineElement:Hr,PointElement:hu});const Xm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],D0=Xm.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function ik(i){return Xm[i%Xm.length]}function nk(i){return D0[i%D0.length]}function S6(i,e){return i.borderColor=ik(e),i.backgroundColor=nk(e),++e}function C6(i,e){return i.backgroundColor=i.data.map(()=>ik(e++)),e}function M6(i,e){return i.backgroundColor=i.data.map(()=>nk(e++)),e}function P6(i){let e=0;return(t,n)=>{const s=i.getDatasetMeta(n).controller;s instanceof Ao?e=C6(t,e):s instanceof Hc?e=M6(t,e):s&&(e=S6(t,e))}}function E0(i){let e;for(e in i)if(i[e].borderColor||i[e].backgroundColor)return!0;return!1}function A6(i){return i&&(i.borderColor||i.backgroundColor)}function T6(){return wn.borderColor!=="rgba(0,0,0,0.1)"||wn.backgroundColor!=="rgba(0,0,0,0.1)"}var L6={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,e,t){if(!t.enabled)return;const{data:{datasets:n},options:s}=i.config,{elements:a}=s,r=E0(n)||A6(s)||a&&E0(a)||T6();if(!t.forceOverride&&r)return;const o=P6(i);n.forEach(o)}};function D6(i,e,t,n,s){const a=s.samples||n;if(a>=t)return i.slice(e,e+t);const r=[],o=(t-2)/(a-2);let l=0;const d=e+t-1;let h=e,m,v,b,y,x;for(r[l++]=i[h],m=0;m<a-2;m++){let k=0,C=0,A;const T=Math.floor((m+1)*o)+1+e,I=Math.min(Math.floor((m+2)*o)+1,t)+e,D=I-T;for(A=T;A<I;A++)k+=i[A].x,C+=i[A].y;k/=D,C/=D;const N=Math.floor(m*o)+1+e,z=Math.min(Math.floor((m+1)*o)+1,t)+e,{x:H,y:j}=i[h];for(b=y=-1,A=N;A<z;A++)y=.5*Math.abs((H-k)*(i[A].y-j)-(H-i[A].x)*(C-j)),y>b&&(b=y,v=i[A],x=A);r[l++]=v,h=x}return r[l++]=i[d],r}function E6(i,e,t,n){let s=0,a=0,r,o,l,d,h,m,v,b,y,x;const k=[],C=e+t-1,A=i[e].x,I=i[C].x-A;for(r=e;r<e+t;++r){o=i[r],l=(o.x-A)/I*n,d=o.y;const D=l|0;if(D===h)d<y?(y=d,m=r):d>x&&(x=d,v=r),s=(a*s+o.x)/++a;else{const N=r-1;if(!Pi(m)&&!Pi(v)){const z=Math.min(m,v),H=Math.max(m,v);z!==b&&z!==N&&k.push({...i[z],x:s}),H!==b&&H!==N&&k.push({...i[H],x:s})}r>0&&N!==b&&k.push(i[N]),k.push(o),h=D,a=0,y=x=d,m=v=b=r}}return k}function sk(i){if(i._decimated){const e=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function I0(i){i.data.datasets.forEach(e=>{sk(e)})}function I6(i,e){const t=e.length;let n=0,s;const{iScale:a}=i,{min:r,max:o,minDefined:l,maxDefined:d}=a.getUserBounds();return l&&(n=Kn(pr(e,a.axis,r).lo,0,t-1)),d?s=Kn(pr(e,a.axis,o).hi+1,n,t)-n:s=t-n,{start:n,count:s}}var O6={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,e,t)=>{if(!t.enabled){I0(i);return}const n=i.width;i.data.datasets.forEach((s,a)=>{const{_data:r,indexAxis:o}=s,l=i.getDatasetMeta(a),d=r||s.data;if(Cc([o,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=i.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||i.options.parsing)return;let{start:m,count:v}=I6(l,d);const b=t.threshold||4*n;if(v<=b){sk(s);return}Pi(r)&&(s._data=d,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(x){this._data=x}}));let y;switch(t.algorithm){case"lttb":y=D6(d,m,v,n,t);break;case"min-max":y=E6(d,m,v,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}s._decimated=y})},destroy(i){I0(i)}};function B6(i,e,t){const n=i.segments,s=i.points,a=e.points,r=[];for(const o of n){let{start:l,end:d}=o;d=zf(l,d,s);const h=Jm(t,s[l],s[d],o.loop);if(!e.segments){r.push({source:o,target:h,start:s[l],end:s[d]});continue}const m=Nw(e,h);for(const v of m){const b=Jm(t,a[v.start],a[v.end],v.loop),y=zw(o,s,b);for(const x of y)r.push({source:x,target:v,start:{[t]:O0(h,b,"start",Math.max)},end:{[t]:O0(h,b,"end",Math.min)}})}}return r}function Jm(i,e,t,n){if(n)return;let s=e[i],a=t[i];return i==="angle"&&(s=os(s),a=os(a)),{property:i,start:s,end:a}}function R6(i,e){const{x:t=null,y:n=null}=i||{},s=e.points,a=[];return e.segments.forEach(({start:r,end:o})=>{o=zf(r,o,s);const l=s[r],d=s[o];n!==null?(a.push({x:l.x,y:n}),a.push({x:d.x,y:n})):t!==null&&(a.push({x:t,y:l.y}),a.push({x:t,y:d.y}))}),a}function zf(i,e,t){for(;e>i;e--){const n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function O0(i,e,t,n){return i&&e?n(i[t],e[t]):i?i[t]:e?e[t]:0}function ak(i,e){let t=[],n=!1;return xn(i)?(n=!0,t=i):t=R6(i,e),t.length?new Hr({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function B0(i){return i&&i.fill!==!1}function z6(i,e,t){let s=i[e].fill;const a=[e];let r;if(!t)return s;for(;s!==!1&&a.indexOf(s)===-1;){if(!Tn(s))return s;if(r=i[s],!r)return!1;if(r.visible)return s;a.push(s),s=r.fill}return!1}function N6(i,e,t){const n=$6(i);if(Di(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return Tn(s)&&Math.floor(s)===s?F6(n[0],e,s,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function F6(i,e,t,n){return(i==="-"||i==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function H6(i,e){let t=null;return i==="start"?t=e.bottom:i==="end"?t=e.top:Di(i)?t=e.getPixelForValue(i.value):e.getBasePixel&&(t=e.getBasePixel()),t}function j6(i,e,t){let n;return i==="start"?n=t:i==="end"?n=e.options.reverse?e.min:e.max:Di(i)?n=i.value:n=e.getBaseValue(),n}function $6(i){const e=i.options,t=e.fill;let n=ui(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function V6(i){const{scale:e,index:t,line:n}=i,s=[],a=n.segments,r=n.points,o=W6(e,t);o.push(ak({x:null,y:e.bottom},n));for(let l=0;l<a.length;l++){const d=a[l];for(let h=d.start;h<=d.end;h++)q6(s,r[h],o)}return new Hr({points:s,options:{}})}function W6(i,e){const t=[],n=i.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){const a=n[s];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function q6(i,e,t){const n=[];for(let s=0;s<t.length;s++){const a=t[s],{first:r,last:o,point:l}=U6(a,e,"x");if(!(!l||r&&o)){if(r)n.unshift(l);else if(i.push(l),!o)break}}i.push(...n)}function U6(i,e,t){const n=i.interpolate(e,t);if(!n)return{};const s=n[t],a=i.segments,r=i.points;let o=!1,l=!1;for(let d=0;d<a.length;d++){const h=a[d],m=r[h.start][t],v=r[h.end][t];if(fr(s,m,v)){o=s===m,l=s===v;break}}return{first:o,last:l,point:n}}class rk{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:s,y:a,radius:r}=this;return t=t||{start:0,end:gn},e.arc(s,a,r,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:s}=this,a=e.angle;return{x:t+Math.cos(a)*s,y:n+Math.sin(a)*s,angle:a}}}function G6(i){const{chart:e,fill:t,line:n}=i;if(Tn(t))return Z6(e,t);if(t==="stack")return V6(i);if(t==="shape")return!0;const s=Y6(i);return s instanceof rk?s:ak(s,n)}function Z6(i,e){const t=i.getDatasetMeta(e);return t&&i.isDatasetVisible(e)?t.dataset:null}function Y6(i){return(i.scale||{}).getPointPositionForValue?X6(i):K6(i)}function K6(i){const{scale:e={},fill:t}=i,n=H6(t,e);if(Tn(n)){const s=e.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function X6(i){const{scale:e,fill:t}=i,n=e.options,s=e.getLabels().length,a=n.reverse?e.max:e.min,r=j6(t,e,a),o=[];if(n.grid.circular){const l=e.getPointPositionForValue(0,a);return new rk({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)o.push(e.getPointPositionForValue(l,r));return o}function Up(i,e,t){const n=G6(e),{chart:s,index:a,line:r,scale:o,axis:l}=e,d=r.options,h=d.fill,m=d.backgroundColor,{above:v=m,below:b=m}=h||{},y=s.getDatasetMeta(a),x=Fw(s,y);n&&r.points.length&&(If(i,t),J6(i,{line:r,target:n,above:v,below:b,area:t,scale:o,axis:l,clip:x}),Of(i))}function J6(i,e){const{line:t,target:n,above:s,below:a,area:r,scale:o,clip:l}=e,d=t._loop?"angle":e.axis;i.save();let h=a;a!==s&&(d==="x"?(R0(i,n,r.top),Gp(i,{line:t,target:n,color:s,scale:o,property:d,clip:l}),i.restore(),i.save(),R0(i,n,r.bottom)):d==="y"&&(z0(i,n,r.left),Gp(i,{line:t,target:n,color:a,scale:o,property:d,clip:l}),i.restore(),i.save(),z0(i,n,r.right),h=s)),Gp(i,{line:t,target:n,color:h,scale:o,property:d,clip:l}),i.restore()}function R0(i,e,t){const{segments:n,points:s}=e;let a=!0,r=!1;i.beginPath();for(const o of n){const{start:l,end:d}=o,h=s[l],m=s[zf(l,d,s)];a?(i.moveTo(h.x,h.y),a=!1):(i.lineTo(h.x,t),i.lineTo(h.x,h.y)),r=!!e.pathSegment(i,o,{move:r}),r?i.closePath():i.lineTo(m.x,t)}i.lineTo(e.first().x,t),i.closePath(),i.clip()}function z0(i,e,t){const{segments:n,points:s}=e;let a=!0,r=!1;i.beginPath();for(const o of n){const{start:l,end:d}=o,h=s[l],m=s[zf(l,d,s)];a?(i.moveTo(h.x,h.y),a=!1):(i.lineTo(t,h.y),i.lineTo(h.x,h.y)),r=!!e.pathSegment(i,o,{move:r}),r?i.closePath():i.lineTo(t,m.y)}i.lineTo(t,e.first().y),i.closePath(),i.clip()}function Gp(i,e){const{line:t,target:n,property:s,color:a,scale:r,clip:o}=e,l=B6(t,n,s);for(const{source:d,target:h,start:m,end:v}of l){const{style:{backgroundColor:b=a}={}}=d,y=n!==!0;i.save(),i.fillStyle=b,Q6(i,r,o,y&&Jm(s,m,v)),i.beginPath();const x=!!t.pathSegment(i,d);let k;if(y){x?i.closePath():N0(i,n,v,s);const C=!!n.pathSegment(i,h,{move:x,reverse:!0});k=x&&C,k||N0(i,n,m,s)}i.closePath(),i.fill(k?"evenodd":"nonzero"),i.restore()}}function Q6(i,e,t,n){const s=e.chart.chartArea,{property:a,start:r,end:o}=n||{};if(a==="x"||a==="y"){let l,d,h,m;a==="x"?(l=r,d=s.top,h=o,m=s.bottom):(l=s.left,d=r,h=s.right,m=o),i.beginPath(),t&&(l=Math.max(l,t.left),h=Math.min(h,t.right),d=Math.max(d,t.top),m=Math.min(m,t.bottom)),i.rect(l,d,h-l,m-d),i.clip()}}function N0(i,e,t,n){const s=e.interpolate(t,n);s&&i.lineTo(s.x,s.y)}var e9={id:"filler",afterDatasetsUpdate(i,e,t){const n=(i.data.datasets||[]).length,s=[];let a,r,o,l;for(r=0;r<n;++r)a=i.getDatasetMeta(r),o=a.dataset,l=null,o&&o.options&&o instanceof Hr&&(l={visible:i.isDatasetVisible(r),index:r,fill:N6(o,r,n),chart:i,axis:a.controller.options.indexAxis,scale:a.vScale,line:o}),a.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=z6(s,r,t.propagate))},beforeDraw(i,e,t){const n=t.drawTime==="beforeDraw",s=i.getSortedVisibleDatasetMetas(),a=i.chartArea;for(let r=s.length-1;r>=0;--r){const o=s[r].$filler;o&&(o.line.updateControlPoints(a,o.axis),n&&o.fill&&Up(i.ctx,o,a))}},beforeDatasetsDraw(i,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const n=i.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){const a=n[s].$filler;B0(a)&&Up(i.ctx,a,i.chartArea)}},beforeDatasetDraw(i,e,t){const n=e.meta.$filler;!B0(n)||t.drawTime!=="beforeDatasetDraw"||Up(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const F0=(i,e)=>{let{boxHeight:t=e,boxWidth:n=e}=i;return i.usePointStyle&&(t=Math.min(t,e),n=i.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},t9=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class H0 extends Sr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=un(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,s)=>e.sort(n,s,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,s=qn(n.font),a=s.size,r=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=F0(n,a);let d,h;t.font=s.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(r,a,o,l)+10):(h=this.maxHeight,d=this._fitCols(r,s,o,l)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,s){const{ctx:a,maxWidth:r,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],h=s+o;let m=e;a.textAlign="left",a.textBaseline="middle";let v=-1,b=-h;return this.legendItems.forEach((y,x)=>{const k=n+t/2+a.measureText(y.text).width;(x===0||d[d.length-1]+k+2*o>r)&&(m+=h,d[d.length-(x>0?0:1)]=0,b+=h,v++),l[x]={left:0,top:b,row:v,width:k,height:s},d[d.length-1]+=k+o}),m}_fitCols(e,t,n,s){const{ctx:a,maxHeight:r,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],h=r-e;let m=o,v=0,b=0,y=0,x=0;return this.legendItems.forEach((k,C)=>{const{itemWidth:A,itemHeight:T}=i9(n,t,a,k,s);C>0&&b+T+2*o>h&&(m+=v+o,d.push({width:v,height:b}),y+=v+o,x++,v=b=0),l[C]={left:y,top:b,col:x,width:A,height:T},v=Math.max(v,A),b+=T+o}),m+=v,d.push({width:v,height:b}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:s},rtl:a}}=this,r=_l(a,this.left,this.width);if(this.isHorizontal()){let o=0,l=rs(n,this.left+s,this.right-this.lineWidths[o]);for(const d of t)o!==d.row&&(o=d.row,l=rs(n,this.left+s,this.right-this.lineWidths[o])),d.top+=this.top+e+s,d.left=r.leftForLtr(r.x(l),d.width),l+=d.width+s}else{let o=0,l=rs(n,this.top+e+s,this.bottom-this.columnSizes[o].height);for(const d of t)d.col!==o&&(o=d.col,l=rs(n,this.top+e+s,this.bottom-this.columnSizes[o].height)),d.top=l,d.left+=this.left+s,d.left=r.leftForLtr(r.x(d.left),d.width),l+=d.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;If(e,this),this._draw(),Of(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:s}=this,{align:a,labels:r}=e,o=wn.color,l=_l(e.rtl,this.left,this.width),d=qn(r.font),{padding:h}=r,m=d.size,v=m/2;let b;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=d.string;const{boxWidth:y,boxHeight:x,itemHeight:k}=F0(r,m),C=function(N,z,H){if(isNaN(y)||y<=0||isNaN(x)||x<0)return;s.save();const j=ui(H.lineWidth,1);if(s.fillStyle=ui(H.fillStyle,o),s.lineCap=ui(H.lineCap,"butt"),s.lineDashOffset=ui(H.lineDashOffset,0),s.lineJoin=ui(H.lineJoin,"miter"),s.lineWidth=j,s.strokeStyle=ui(H.strokeStyle,o),s.setLineDash(ui(H.lineDash,[])),r.usePointStyle){const re={radius:x*Math.SQRT2/2,pointStyle:H.pointStyle,rotation:H.rotation,borderWidth:j},V=l.xPlus(N,y/2),q=z+v;Mw(s,re,V,q,r.pointStyleWidth&&y)}else{const re=z+Math.max((m-x)/2,0),V=l.leftForLtr(N,y),q=Eo(H.borderRadius);s.beginPath(),Object.values(q).some(le=>le!==0)?sd(s,{x:V,y:re,w:y,h:x,radius:q}):s.rect(V,re,y,x),s.fill(),j!==0&&s.stroke()}s.restore()},A=function(N,z,H){Fo(s,H.text,N,z+k/2,d,{strikethrough:H.hidden,textAlign:l.textAlign(H.textAlign)})},T=this.isHorizontal(),I=this._computeTitleHeight();T?b={x:rs(a,this.left+h,this.right-n[0]),y:this.top+h+I,line:0}:b={x:this.left+h,y:rs(a,this.top+I+h,this.bottom-t[0].height),line:0},Ow(this.ctx,e.textDirection);const D=k+h;this.legendItems.forEach((N,z)=>{s.strokeStyle=N.fontColor,s.fillStyle=N.fontColor;const H=s.measureText(N.text).width,j=l.textAlign(N.textAlign||(N.textAlign=r.textAlign)),re=y+v+H;let V=b.x,q=b.y;l.setWidth(this.width),T?z>0&&V+re+h>this.right&&(q=b.y+=D,b.line++,V=b.x=rs(a,this.left+h,this.right-n[b.line])):z>0&&q+D>this.bottom&&(V=b.x=V+t[b.line].width+h,b.line++,q=b.y=rs(a,this.top+I+h,this.bottom-t[b.line].height));const le=l.x(V);if(C(le,q,N),V=wR(j,V+y+v,T?V+re:this.right,e.rtl),A(l.x(V),q,N),T)b.x+=re+h;else if(typeof N.text!="string"){const ee=d.lineHeight;b.y+=ok(N,ee)+h}else b.y+=D}),Bw(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=qn(t.font),s=hs(t.padding);if(!t.display)return;const a=_l(e.rtl,this.left,this.width),r=this.ctx,o=t.position,l=n.size/2,d=s.top+l;let h,m=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+d,m=rs(e.align,m,this.right-v);else{const y=this.columnSizes.reduce((x,k)=>Math.max(x,k.height),0);h=d+rs(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const b=rs(o,m,m+v);r.textAlign=a.textAlign(Dg(o)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=n.string,Fo(r,t.text,b,h,n)}_computeTitleHeight(){const e=this.options.title,t=qn(e.font),n=hs(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,s,a;if(fr(e,this.left,this.right)&&fr(t,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(s=a[n],fr(e,s.left,s.left+s.width)&&fr(t,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!a9(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const s=this._hoveredItem,a=t9(s,n);s&&!a&&un(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&un(t.onHover,[e,n,this],this)}else n&&un(t.onClick,[e,n,this],this)}}function i9(i,e,t,n,s){const a=n9(n,i,e,t),r=s9(s,n,e.lineHeight);return{itemWidth:a,itemHeight:r}}function n9(i,e,t,n){let s=i.text;return s&&typeof s!="string"&&(s=s.reduce((a,r)=>a.length>r.length?a:r)),e+t.size/2+n.measureText(s).width}function s9(i,e,t){let n=i;return typeof e.text!="string"&&(n=ok(e,t)),n}function ok(i,e){const t=i.text?i.text.length:0;return e*t}function a9(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var r9={id:"legend",_element:H0,start(i,e,t){const n=i.legend=new H0({ctx:i.ctx,options:t,chart:i});ds.configure(i,n,t),ds.addBox(i,n)},stop(i){ds.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,t){const n=i.legend;ds.configure(i,n,t),n.options=t},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,t){const n=e.datasetIndex,s=t.chart;s.isDatasetVisible(n)?(s.hide(n),e.hidden=!0):(s.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:s,color:a,useBorderRadius:r,borderRadius:o}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(t?0:void 0),h=hs(d.borderWidth);return{text:e[l.index].label,fillStyle:d.backgroundColor,fontColor:a,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:s||d.textAlign,borderRadius:r&&(o||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Hg extends Sr{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const s=xn(n.text)?n.text.length:1;this._padding=hs(n.padding);const a=s*qn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:n,bottom:s,right:a,options:r}=this,o=r.align;let l=0,d,h,m;return this.isHorizontal()?(h=rs(o,n,a),m=t+e,d=a-n):(r.position==="left"?(h=n+e,m=rs(o,s,t),l=$i*-.5):(h=a-e,m=rs(o,t,s),l=$i*.5),d=s-t),{titleX:h,titleY:m,maxWidth:d,rotation:l}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=qn(t.font),a=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:l,rotation:d}=this._drawArgs(a);Fo(e,t.text,0,0,n,{color:t.color,maxWidth:l,rotation:d,textAlign:Dg(t.align),textBaseline:"middle",translation:[r,o]})}}function o9(i,e){const t=new Hg({ctx:i.ctx,options:e,chart:i});ds.configure(i,t,e),ds.addBox(i,t),i.titleBlock=t}var l9={id:"title",_element:Hg,start(i,e,t){o9(i,t)},stop(i){const e=i.titleBlock;ds.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,t){const n=i.titleBlock;ds.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ph=new WeakMap;var c9={id:"subtitle",start(i,e,t){const n=new Hg({ctx:i.ctx,options:t,chart:i});ds.configure(i,n,t),ds.addBox(i,n),Ph.set(i,n)},stop(i){ds.removeBox(i,Ph.get(i)),Ph.delete(i)},beforeUpdate(i,e,t){const n=Ph.get(i);ds.configure(i,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ac={average(i){if(!i.length)return!1;let e,t,n=new Set,s=0,a=0;for(e=0,t=i.length;e<t;++e){const o=i[e].element;if(o&&o.hasValue()){const l=o.tooltipPosition();n.add(l.x),s+=l.y,++a}}return a===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:s/a}},nearest(i,e){if(!i.length)return!1;let t=e.x,n=e.y,s=Number.POSITIVE_INFINITY,a,r,o;for(a=0,r=i.length;a<r;++a){const l=i[a].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),h=Wm(e,d);h<s&&(s=h,o=l)}}if(o){const l=o.tooltipPosition();t=l.x,n=l.y}return{x:t,y:n}}};function Ia(i,e){return e&&(xn(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function or(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function d9(i,e){const{element:t,datasetIndex:n,index:s}=e,a=i.getDatasetMeta(n).controller,{label:r,value:o}=a.getLabelAndValue(s);return{chart:i,label:r,parsed:a.getParsed(s),raw:i.data.datasets[n].data[s],formattedValue:o,dataset:a.getDataset(),dataIndex:s,datasetIndex:n,element:t}}function j0(i,e){const t=i.chart.ctx,{body:n,footer:s,title:a}=i,{boxWidth:r,boxHeight:o}=e,l=qn(e.bodyFont),d=qn(e.titleFont),h=qn(e.footerFont),m=a.length,v=s.length,b=n.length,y=hs(e.padding);let x=y.height,k=0,C=n.reduce((I,D)=>I+D.before.length+D.lines.length+D.after.length,0);if(C+=i.beforeBody.length+i.afterBody.length,m&&(x+=m*d.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),C){const I=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;x+=b*I+(C-b)*l.lineHeight+(C-1)*e.bodySpacing}v&&(x+=e.footerMarginTop+v*h.lineHeight+(v-1)*e.footerSpacing);let A=0;const T=function(I){k=Math.max(k,t.measureText(I).width+A)};return t.save(),t.font=d.string,tn(i.title,T),t.font=l.string,tn(i.beforeBody.concat(i.afterBody),T),A=e.displayColors?r+2+e.boxPadding:0,tn(n,I=>{tn(I.before,T),tn(I.lines,T),tn(I.after,T)}),A=0,t.font=h.string,tn(i.footer,T),t.restore(),k+=y.width,{width:k,height:x}}function h9(i,e){const{y:t,height:n}=e;return t<n/2?"top":t>i.height-n/2?"bottom":"center"}function u9(i,e,t,n){const{x:s,width:a}=n,r=t.caretSize+t.caretPadding;if(i==="left"&&s+a+r>e.width||i==="right"&&s-a-r<0)return!0}function f9(i,e,t,n){const{x:s,width:a}=t,{width:r,chartArea:{left:o,right:l}}=i;let d="center";return n==="center"?d=s<=(o+l)/2?"left":"right":s<=a/2?d="left":s>=r-a/2&&(d="right"),u9(d,i,e,t)&&(d="center"),d}function $0(i,e,t){const n=t.yAlign||e.yAlign||h9(i,t);return{xAlign:t.xAlign||e.xAlign||f9(i,e,t,n),yAlign:n}}function p9(i,e){let{x:t,width:n}=i;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function m9(i,e,t){let{y:n,height:s}=i;return e==="top"?n+=t:e==="bottom"?n-=s+t:n-=s/2,n}function V0(i,e,t,n){const{caretSize:s,caretPadding:a,cornerRadius:r}=i,{xAlign:o,yAlign:l}=t,d=s+a,{topLeft:h,topRight:m,bottomLeft:v,bottomRight:b}=Eo(r);let y=p9(e,o);const x=m9(e,l,d);return l==="center"?o==="left"?y+=d:o==="right"&&(y-=d):o==="left"?y-=Math.max(h,v)+s:o==="right"&&(y+=Math.max(m,b)+s),{x:Kn(y,0,n.width-e.width),y:Kn(x,0,n.height-e.height)}}function Ah(i,e,t){const n=hs(t.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-n.right:i.x+n.left}function W0(i){return Ia([],or(i))}function v9(i,e,t){return oo(i,{tooltip:e,tooltipItems:t,type:"tooltip"})}function q0(i,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?i.override(t):i}const lk={beforeTitle:ar,title(i){if(i.length>0){const e=i[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:ar,beforeBody:ar,beforeLabel:ar,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const t=i.formattedValue;return Pi(t)||(e+=t),e},labelColor(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const t=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:ar,afterBody:ar,beforeFooter:ar,footer:ar,afterFooter:ar};function Is(i,e,t,n){const s=i[e].call(t,n);return typeof s>"u"?lk[e].call(t,n):s}class Qm extends Sr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),s=n.enabled&&t.options.animation&&n.animations,a=new Hw(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=v9(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,s=Is(n,"beforeTitle",this,e),a=Is(n,"title",this,e),r=Is(n,"afterTitle",this,e);let o=[];return o=Ia(o,or(s)),o=Ia(o,or(a)),o=Ia(o,or(r)),o}getBeforeBody(e,t){return W0(Is(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,s=[];return tn(e,a=>{const r={before:[],lines:[],after:[]},o=q0(n,a);Ia(r.before,or(Is(o,"beforeLabel",this,a))),Ia(r.lines,Is(o,"label",this,a)),Ia(r.after,or(Is(o,"afterLabel",this,a))),s.push(r)}),s}getAfterBody(e,t){return W0(Is(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,s=Is(n,"beforeFooter",this,e),a=Is(n,"footer",this,e),r=Is(n,"afterFooter",this,e);let o=[];return o=Ia(o,or(s)),o=Ia(o,or(a)),o=Ia(o,or(r)),o}_createItems(e){const t=this._active,n=this.chart.data,s=[],a=[],r=[];let o=[],l,d;for(l=0,d=t.length;l<d;++l)o.push(d9(this.chart,t[l]));return e.filter&&(o=o.filter((h,m,v)=>e.filter(h,m,v,n))),e.itemSort&&(o=o.sort((h,m)=>e.itemSort(h,m,n))),tn(o,h=>{const m=q0(e.callbacks,h);s.push(Is(m,"labelColor",this,h)),a.push(Is(m,"labelPointStyle",this,h)),r.push(Is(m,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=a,this.labelTextColors=r,this.dataPoints=o,o}update(e,t){const n=this.options.setContext(this.getContext()),s=this._active;let a,r=[];if(!s.length)this.opacity!==0&&(a={opacity:0});else{const o=Ac[n.position].call(this,s,this._eventPosition);r=this._createItems(n),this.title=this.getTitle(r,n),this.beforeBody=this.getBeforeBody(r,n),this.body=this.getBody(r,n),this.afterBody=this.getAfterBody(r,n),this.footer=this.getFooter(r,n);const l=this._size=j0(this,n),d=Object.assign({},o,l),h=$0(this.chart,n,d),m=V0(n,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,a={opacity:1,x:m.x,y:m.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=r,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,s){const a=this.getCaretPosition(e,n,s);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,n){const{xAlign:s,yAlign:a}=this,{caretSize:r,cornerRadius:o}=n,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:m}=Eo(o),{x:v,y:b}=e,{width:y,height:x}=t;let k,C,A,T,I,D;return a==="center"?(I=b+x/2,s==="left"?(k=v,C=k-r,T=I+r,D=I-r):(k=v+y,C=k+r,T=I-r,D=I+r),A=k):(s==="left"?C=v+Math.max(l,h)+r:s==="right"?C=v+y-Math.max(d,m)-r:C=this.caretX,a==="top"?(T=b,I=T-r,k=C-r,A=C+r):(T=b+x,I=T+r,k=C+r,A=C-r),D=T),{x1:k,x2:C,x3:A,y1:T,y2:I,y3:D}}drawTitle(e,t,n){const s=this.title,a=s.length;let r,o,l;if(a){const d=_l(n.rtl,this.x,this.width);for(e.x=Ah(this,n.titleAlign,n),t.textAlign=d.textAlign(n.titleAlign),t.textBaseline="middle",r=qn(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,l=0;l<a;++l)t.fillText(s[l],d.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+o,l+1===a&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,s,a){const r=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:d}=a,h=qn(a.bodyFont),m=Ah(this,"left",a),v=s.x(m),b=l<h.lineHeight?(h.lineHeight-l)/2:0,y=t.y+b;if(a.usePointStyle){const x={radius:Math.min(d,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},k=s.leftForLtr(v,d)+d/2,C=y+l/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Um(e,x,k,C),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,Um(e,x,k,C)}else{e.lineWidth=Di(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const x=s.leftForLtr(v,d),k=s.leftForLtr(s.xPlus(v,1),d-2),C=Eo(r.borderRadius);Object.values(C).some(A=>A!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,sd(e,{x,y,w:d,h:l,radius:C}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),sd(e,{x:k,y:y+1,w:d-2,h:l-2,radius:C}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(x,y,d,l),e.strokeRect(x,y,d,l),e.fillStyle=r.backgroundColor,e.fillRect(k,y+1,d-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:s}=this,{bodySpacing:a,bodyAlign:r,displayColors:o,boxHeight:l,boxWidth:d,boxPadding:h}=n,m=qn(n.bodyFont);let v=m.lineHeight,b=0;const y=_l(n.rtl,this.x,this.width),x=function(H){t.fillText(H,y.x(e.x+b),e.y+v/2),e.y+=v+a},k=y.textAlign(r);let C,A,T,I,D,N,z;for(t.textAlign=r,t.textBaseline="middle",t.font=m.string,e.x=Ah(this,k,n),t.fillStyle=n.bodyColor,tn(this.beforeBody,x),b=o&&k!=="right"?r==="center"?d/2+h:d+2+h:0,I=0,N=s.length;I<N;++I){for(C=s[I],A=this.labelTextColors[I],t.fillStyle=A,tn(C.before,x),T=C.lines,o&&T.length&&(this._drawColorBox(t,e,I,y,n),v=Math.max(m.lineHeight,l)),D=0,z=T.length;D<z;++D)x(T[D]),v=m.lineHeight;tn(C.after,x)}b=0,v=m.lineHeight,tn(this.afterBody,x),e.y-=a}drawFooter(e,t,n){const s=this.footer,a=s.length;let r,o;if(a){const l=_l(n.rtl,this.x,this.width);for(e.x=Ah(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=l.textAlign(n.footerAlign),t.textBaseline="middle",r=qn(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,o=0;o<a;++o)t.fillText(s[o],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}drawBackground(e,t,n,s){const{xAlign:a,yAlign:r}=this,{x:o,y:l}=e,{width:d,height:h}=n,{topLeft:m,topRight:v,bottomLeft:b,bottomRight:y}=Eo(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(o+m,l),r==="top"&&this.drawCaret(e,t,n,s),t.lineTo(o+d-v,l),t.quadraticCurveTo(o+d,l,o+d,l+v),r==="center"&&a==="right"&&this.drawCaret(e,t,n,s),t.lineTo(o+d,l+h-y),t.quadraticCurveTo(o+d,l+h,o+d-y,l+h),r==="bottom"&&this.drawCaret(e,t,n,s),t.lineTo(o+b,l+h),t.quadraticCurveTo(o,l+h,o,l+h-b),r==="center"&&a==="left"&&this.drawCaret(e,t,n,s),t.lineTo(o,l+m),t.quadraticCurveTo(o,l,o+m,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,s=n&&n.x,a=n&&n.y;if(s||a){const r=Ac[e.position].call(this,this._active,this._eventPosition);if(!r)return;const o=this._size=j0(this,e),l=Object.assign({},r,this._size),d=$0(t,e,l),h=V0(e,l,d,t);(s._to!==h.x||a._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const r=hs(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,s,t),Ow(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Bw(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,s=e.map(({datasetIndex:o,index:l})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[l],index:l}}),a=!zu(n,s),r=this._positionChanged(s,t);(a||r)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,n),o=this._positionChanged(r,e),l=t||!zu(r,a)||o;return l&&(this._active=r,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,n,s){const a=this.options;if(e.type==="mouseout")return[];if(!s)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:n,caretY:s,options:a}=this,r=Ac[a.position].call(this,e,t);return r!==!1&&(n!==r.x||s!==r.y)}}De(Qm,"positioners",Ac);var g9={id:"tooltip",_element:Qm,positioners:Ac,afterInit(i,e,t){t&&(i.tooltip=new Qm({chart:i,options:t}))},beforeUpdate(i,e,t){i.tooltip&&i.tooltip.initialize(t)},reset(i,e,t){i.tooltip&&i.tooltip.initialize(t)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",t)}},afterEvent(i,e){if(i.tooltip){const t=e.replay;i.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:lk},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},_9=Object.freeze({__proto__:null,Colors:L6,Decimation:O6,Filler:e9,Legend:r9,SubTitle:c9,Title:l9,Tooltip:g9});const b9=(i,e,t,n)=>(typeof e=="string"?(t=i.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function y9(i,e,t,n){const s=i.indexOf(e);if(s===-1)return b9(i,e,t,n);const a=i.lastIndexOf(e);return s!==a?t:s}const x9=(i,e)=>i===null?null:Kn(Math.round(i),0,e);function U0(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class ev extends Zo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:s,label:a}of t)n[s]===a&&n.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Pi(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:y9(n,e,ui(t,e),this._addedLabels),x9(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(s=this.getLabels().length-1)),this.min=n,this.max=s}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,s=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let r=e;r<=t;r++)s.push({value:r});return s}getLabelForValue(e){return U0.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}De(ev,"id","category"),De(ev,"defaults",{ticks:{callback:U0}});function w9(i,e){const t=[],{bounds:s,step:a,min:r,max:o,precision:l,count:d,maxTicks:h,maxDigits:m,includeBounds:v}=i,b=a||1,y=h-1,{min:x,max:k}=e,C=!Pi(r),A=!Pi(o),T=!Pi(d),I=(k-x)/(m+1);let D=jb((k-x)/y/b)*b,N,z,H,j;if(D<1e-14&&!C&&!A)return[{value:x},{value:k}];j=Math.ceil(k/D)-Math.floor(x/D),j>y&&(D=jb(j*D/y/b)*b),Pi(l)||(N=Math.pow(10,l),D=Math.ceil(D*N)/N),s==="ticks"?(z=Math.floor(x/D)*D,H=Math.ceil(k/D)*D):(z=x,H=k),C&&A&&a&&mR((o-r)/a,D/1e3)?(j=Math.round(Math.min((o-r)/D,h)),D=(o-r)/j,z=r,H=o):T?(z=C?r:z,H=A?o:H,j=d-1,D=(H-z)/j):(j=(H-z)/D,zc(j,Math.round(j),D/1e3)?j=Math.round(j):j=Math.ceil(j));const re=Math.max($b(D),$b(z));N=Math.pow(10,Pi(l)?re:l),z=Math.round(z*N)/N,H=Math.round(H*N)/N;let V=0;for(C&&(v&&z!==r?(t.push({value:r}),z<r&&V++,zc(Math.round((z+V*D)*N)/N,r,G0(r,I,i))&&V++):z<r&&V++);V<j;++V){const q=Math.round((z+V*D)*N)/N;if(A&&q>o)break;t.push({value:q})}return A&&v&&H!==o?t.length&&zc(t[t.length-1].value,o,G0(o,I,i))?t[t.length-1].value=o:t.push({value:o}):(!A||H===o)&&t.push({value:H}),t}function G0(i,e,{horizontal:t,minRotation:n}){const s=pa(n),a=(t?Math.sin(s):Math.cos(s))||.001,r=.75*e*(""+i).length;return Math.min(e/a,r)}class Wu extends Zo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Pi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this;const r=l=>s=t?s:l,o=l=>a=n?a:l;if(e){const l=qa(s),d=qa(a);l<0&&d<0?o(0):l>0&&d>0&&r(0)}if(s===a){let l=a===0?1:Math.abs(a*.05);o(a+l),e||r(s-l)}this.min=s,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),t=t||11),t&&(s=Math.min(t,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const s={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,r=w9(s,a);return e.bounds==="ticks"&&gw(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const s=(n-t)/Math.max(e.length-1,1)/2;t-=s,n+=s}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Rd(e,this.chart.options.locale,this.options.ticks.format)}}class tv extends Wu{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Tn(e)?e:0,this.max=Tn(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=pa(this.options.ticks.minRotation),s=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/s))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}De(tv,"id","linear"),De(tv,"defaults",{ticks:{callback:Ef.formatters.numeric}});const rd=i=>Math.floor(Fr(i)),yo=(i,e)=>Math.pow(10,rd(i)+e);function Z0(i){return i/Math.pow(10,rd(i))===1}function Y0(i,e,t){const n=Math.pow(10,t),s=Math.floor(i/n);return Math.ceil(e/n)-s}function k9(i,e){const t=e-i;let n=rd(t);for(;Y0(i,e,n)>10;)n++;for(;Y0(i,e,n)<10;)n--;return Math.min(n,rd(i))}function S9(i,{min:e,max:t}){e=Gs(i.min,e);const n=[],s=rd(e);let a=k9(e,t),r=a<0?Math.pow(10,Math.abs(a)):1;const o=Math.pow(10,a),l=s>a?Math.pow(10,s):0,d=Math.round((e-l)*r)/r,h=Math.floor((e-l)/o/10)*o*10;let m=Math.floor((d-h)/Math.pow(10,a)),v=Gs(i.min,Math.round((l+h+m*Math.pow(10,a))*r)/r);for(;v<t;)n.push({value:v,major:Z0(v),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(a++,m=2,r=a>=0?1:r),v=Math.round((l+h+m*Math.pow(10,a))*r)/r;const b=Gs(i.max,v);return n.push({value:b,major:Z0(b),significand:m}),n}class iv extends Zo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Wu.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return Tn(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Tn(e)?Math.max(0,e):null,this.max=Tn(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Tn(this._userMin)&&(this.min=e===yo(this.min,0)?yo(this.min,-1):yo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,s=this.max;const a=o=>n=e?n:o,r=o=>s=t?s:o;n===s&&(n<=0?(a(1),r(10)):(a(yo(n,-1)),r(yo(s,1)))),n<=0&&a(yo(s,-1)),s<=0&&r(yo(n,1)),this.min=n,this.max=s}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},n=S9(t,this);return e.bounds==="ticks"&&gw(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Rd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Fr(e),this._valueRange=Fr(this.max)-Fr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Fr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}De(iv,"id","logarithmic"),De(iv,"defaults",{ticks:{callback:Ef.formatters.logarithmic,major:{enabled:!0}}});function nv(i){const e=i.ticks;if(e.display&&i.display){const t=hs(e.backdropPadding);return ui(e.font&&e.font.size,wn.font.size)+t.height}return 0}function C9(i,e,t){return t=xn(t)?t:[t],{w:ER(i,e.string,t),h:t.length*e.lineHeight}}function K0(i,e,t,n,s){return i===n||i===s?{start:e-t/2,end:e+t/2}:i<n||i>s?{start:e-t,end:e}:{start:e,end:e+t}}function M9(i){const e={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},t=Object.assign({},e),n=[],s=[],a=i._pointLabels.length,r=i.options.pointLabels,o=r.centerPointLabels?$i/a:0;for(let l=0;l<a;l++){const d=r.setContext(i.getPointLabelContext(l));s[l]=d.padding;const h=i.getPointPosition(l,i.drawingArea+s[l],o),m=qn(d.font),v=C9(i.ctx,m,i._pointLabels[l]);n[l]=v;const b=os(i.getIndexAngle(l)+o),y=Math.round(Tg(b)),x=K0(y,h.x,v.w,0,180),k=K0(y,h.y,v.h,90,270);P9(t,e,b,x,k)}i.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),i._pointLabelItems=L9(i,n,s)}function P9(i,e,t,n,s){const a=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t));let o=0,l=0;n.start<e.l?(o=(e.l-n.start)/a,i.l=Math.min(i.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/a,i.r=Math.max(i.r,e.r+o)),s.start<e.t?(l=(e.t-s.start)/r,i.t=Math.min(i.t,e.t-l)):s.end>e.b&&(l=(s.end-e.b)/r,i.b=Math.max(i.b,e.b+l))}function A9(i,e,t){const n=i.drawingArea,{extra:s,additionalAngle:a,padding:r,size:o}=t,l=i.getPointPosition(e,n+s+r,a),d=Math.round(Tg(os(l.angle+On))),h=I9(l.y,o.h,d),m=D9(d),v=E9(l.x,o.w,m);return{visible:!0,x:l.x,y:h,textAlign:m,left:v,top:h,right:v+o.w,bottom:h+o.h}}function T9(i,e){if(!e)return!0;const{left:t,top:n,right:s,bottom:a}=i;return!(mr({x:t,y:n},e)||mr({x:t,y:a},e)||mr({x:s,y:n},e)||mr({x:s,y:a},e))}function L9(i,e,t){const n=[],s=i._pointLabels.length,a=i.options,{centerPointLabels:r,display:o}=a.pointLabels,l={extra:nv(a)/2,additionalAngle:r?$i/s:0};let d;for(let h=0;h<s;h++){l.padding=t[h],l.size=e[h];const m=A9(i,h,l);n.push(m),o==="auto"&&(m.visible=T9(m,d),m.visible&&(d=m))}return n}function D9(i){return i===0||i===180?"center":i<180?"left":"right"}function E9(i,e,t){return t==="right"?i-=e:t==="center"&&(i-=e/2),i}function I9(i,e,t){return t===90||t===270?i-=e/2:(t>270||t<90)&&(i-=e),i}function O9(i,e,t){const{left:n,top:s,right:a,bottom:r}=t,{backdropColor:o}=e;if(!Pi(o)){const l=Eo(e.borderRadius),d=hs(e.backdropPadding);i.fillStyle=o;const h=n-d.left,m=s-d.top,v=a-n+d.width,b=r-s+d.height;Object.values(l).some(y=>y!==0)?(i.beginPath(),sd(i,{x:h,y:m,w:v,h:b,radius:l}),i.fill()):i.fillRect(h,m,v,b)}}function B9(i,e){const{ctx:t,options:{pointLabels:n}}=i;for(let s=e-1;s>=0;s--){const a=i._pointLabelItems[s];if(!a.visible)continue;const r=n.setContext(i.getPointLabelContext(s));O9(t,r,a);const o=qn(r.font),{x:l,y:d,textAlign:h}=a;Fo(t,i._pointLabels[s],l,d+o.lineHeight/2,o,{color:r.color,textAlign:h,textBaseline:"middle"})}}function ck(i,e,t,n){const{ctx:s}=i;if(t)s.arc(i.xCenter,i.yCenter,e,0,gn);else{let a=i.getPointPosition(0,e);s.moveTo(a.x,a.y);for(let r=1;r<n;r++)a=i.getPointPosition(r,e),s.lineTo(a.x,a.y)}}function R9(i,e,t,n,s){const a=i.ctx,r=e.circular,{color:o,lineWidth:l}=e;!r&&!n||!o||!l||t<0||(a.save(),a.strokeStyle=o,a.lineWidth=l,a.setLineDash(s.dash||[]),a.lineDashOffset=s.dashOffset,a.beginPath(),ck(i,t,r,n),a.closePath(),a.stroke(),a.restore())}function z9(i,e,t){return oo(i,{label:t,index:e,type:"pointLabel"})}class Tc extends Wu{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=hs(nv(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Tn(e)&&!isNaN(e)?e:0,this.max=Tn(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/nv(this.options))}generateTickLabels(e){Wu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{const s=un(this.options.pointLabels.callback,[t,n],this);return s||s===0?s:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?M9(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,s))}getIndexAngle(e){const t=gn/(this._pointLabels.length||1),n=this.options.startAngle||0;return os(e*t+pa(n))}getDistanceFromCenterForValue(e){if(Pi(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Pi(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return z9(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const s=this.getIndexAngle(e)-On+n;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:s,bottom:a}=this._pointLabelItems[e];return{left:t,top:n,right:s,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),ck(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:s,border:a}=t,r=this._pointLabels.length;let o,l,d;if(t.pointLabels.display&&B9(this,r),s.display&&this.ticks.forEach((h,m)=>{if(m!==0||m===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(m),b=s.setContext(v),y=a.setContext(v);R9(this,b,l,r,y)}}),n.display){for(e.save(),o=r-1;o>=0;o--){const h=n.setContext(this.getPointLabelContext(o)),{color:m,lineWidth:v}=h;!v||!m||(e.lineWidth=v,e.strokeStyle=m,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),d=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const s=this.getIndexAngle(0);let a,r;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!t.reverse)return;const d=n.setContext(this.getContext(l)),h=qn(d.font);if(a=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){e.font=h.string,r=e.measureText(o.label).width,e.fillStyle=d.backdropColor;const m=hs(d.backdropPadding);e.fillRect(-r/2-m.left,-a-h.size/2-m.top,r+m.width,h.size+m.height)}Fo(e,o.label,0,-a,h,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}De(Tc,"id","radialLinear"),De(Tc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ef.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),De(Tc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),De(Tc,"descriptors",{angleLines:{_fallback:"grid"}});const Nf={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fs=Object.keys(Nf);function X0(i,e){return i-e}function J0(i,e){if(Pi(e))return null;const t=i._adapter,{parser:n,round:s,isoWeekday:a}=i._parseOpts;let r=e;return typeof n=="function"&&(r=n(r)),Tn(r)||(r=typeof n=="string"?t.parse(r,n):t.parse(r)),r===null?null:(s&&(r=s==="week"&&(El(a)||a===!0)?t.startOf(r,"isoWeek",a):t.startOf(r,s)),+r)}function Q0(i,e,t,n){const s=Fs.length;for(let a=Fs.indexOf(i);a<s-1;++a){const r=Nf[Fs[a]],o=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((t-e)/(o*r.size))<=n)return Fs[a]}return Fs[s-1]}function N9(i,e,t,n,s){for(let a=Fs.length-1;a>=Fs.indexOf(t);a--){const r=Fs[a];if(Nf[r].common&&i._adapter.diff(s,n,r)>=e-1)return r}return Fs[t?Fs.indexOf(t):0]}function F9(i){for(let e=Fs.indexOf(i)+1,t=Fs.length;e<t;++e)if(Nf[Fs[e]].common)return Fs[e]}function ey(i,e,t){if(!t)i[e]=!0;else if(t.length){const{lo:n,hi:s}=Lg(t,e),a=t[n]>=e?t[n]:t[s];i[a]=!0}}function H9(i,e,t,n){const s=i._adapter,a=+s.startOf(e[0].value,n),r=e[e.length-1].value;let o,l;for(o=a;o<=r;o=+s.add(o,1,n))l=t[o],l>=0&&(e[l].major=!0);return e}function ty(i,e,t){const n=[],s={},a=e.length;let r,o;for(r=0;r<a;++r)o=e[r],s[o]=r,n.push({value:o,major:!1});return a===0||!t?n:H9(i,n,s,t)}class od extends Zo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const n=e.time||(e.time={}),s=this._adapter=new Vw._date(e.adapters.date);s.init(t),Rc(n.displayFormats,s.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:J0(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:s,max:a,minDefined:r,maxDefined:o}=this.getUserBounds();function l(d){!r&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!o&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!r||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Tn(s)&&!isNaN(s)?s:+t.startOf(Date.now(),n),a=Tn(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(s,a-1),this.max=Math.max(s+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,s=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const a=this.min,r=this.max,o=bR(s,a,r);return this._unit=t.unit||(n.autoSkip?Q0(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):N9(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:F9(this._unit),this.initOffsets(s),e.reverse&&o.reverse(),ty(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,n=0,s,a;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?t=1-s:t=(this.getDecimalForValue(e[1])-s)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;t=Kn(t,0,r),n=Kn(n,0,r),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,s=this.options,a=s.time,r=a.unit||Q0(a.minUnit,t,n,this._getLabelCapacity(t)),o=ui(s.ticks.stepSize,1),l=r==="week"?a.isoWeekday:!1,d=El(l)||l===!0,h={};let m=t,v,b;if(d&&(m=+e.startOf(m,"isoWeek",l)),m=+e.startOf(m,d?"day":r),e.diff(n,t,r)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+r);const y=s.ticks.source==="data"&&this.getDataTimestamps();for(v=m,b=0;v<n;v=+e.add(v,o,r),b++)ey(h,v,y);return(v===n||s.bounds==="ticks"||b===1)&&ey(h,v,y),Object.keys(h).sort(X0).map(x=>+x)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const s=this.options.time.displayFormats,a=this._unit,r=t||s[a];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,s){const a=this.options,r=a.ticks.callback;if(r)return un(r,[e,t,n],this);const o=a.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&o[l],m=d&&o[d],v=n[t],b=d&&m&&v&&v.major;return this._adapter.format(e,s||(b?m:h))}generateTickLabels(e){let t,n,s;for(t=0,n=e.length;t<n;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,s=pa(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(s),r=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:n*a+o*r,h:n*r+o*a}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,s=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,ty(this,[e],this._majorUnit),s),r=this._getLabelSize(a),o=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,n=s.length;t<n;++t)e=e.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const s=this.getLabels();for(t=0,n=s.length;t<n;++t)e.push(J0(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return yw(e.sort(X0))}}De(od,"id","time"),De(od,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Th(i,e,t){let n=0,s=i.length-1,a,r,o,l;t?(e>=i[n].pos&&e<=i[s].pos&&({lo:n,hi:s}=pr(i,"pos",e)),{pos:a,time:o}=i[n],{pos:r,time:l}=i[s]):(e>=i[n].time&&e<=i[s].time&&({lo:n,hi:s}=pr(i,"time",e)),{time:a,pos:o}=i[n],{time:r,pos:l}=i[s]);const d=r-a;return d?o+(l-o)*(e-a)/d:o}class sv extends od{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Th(t,this.min),this._tableRange=Th(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,s=[],a=[];let r,o,l,d,h;for(r=0,o=e.length;r<o;++r)d=e[r],d>=t&&d<=n&&s.push(d);if(s.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(r=0,o=s.length;r<o;++r)h=s[r+1],l=s[r-1],d=s[r],Math.round((h+l)/2)!==d&&a.push({time:d,pos:r/(o-1)});return a}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(t)||n.length===1)&&n.push(t),n.sort((s,a)=>s-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Th(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Th(this._table,n*this._tableRange+this._minPos,!0)}}De(sv,"id","timeseries"),De(sv,"defaults",od.defaults);var j9=Object.freeze({__proto__:null,CategoryScale:ev,LinearScale:tv,LogarithmicScale:iv,RadialLinearScale:Tc,TimeScale:od,TimeSeriesScale:sv});const $9=[Zz,k6,_9,j9];cr.register(...$9);const dk=6048e5,V9=864e5,zd=6e4,Nd=36e5,W9=1e3,iy=Symbol.for("constructDateFrom");function Ln(i,e){return typeof i=="function"?i(e):i&&typeof i=="object"&&iy in i?i[iy](e):i instanceof Date?new i.constructor(e):new Date(e)}function fi(i,e){return Ln(e||i,i)}function Ff(i,e,t){const n=fi(i,t==null?void 0:t.in);return isNaN(e)?Ln((t==null?void 0:t.in)||i,NaN):(e&&n.setDate(n.getDate()+e),n)}function jg(i,e,t){const n=fi(i,t==null?void 0:t.in);if(isNaN(e))return Ln(i,NaN);if(!e)return n;const s=n.getDate(),a=Ln(i,n.getTime());a.setMonth(n.getMonth()+e+1,0);const r=a.getDate();return s>=r?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function $g(i,e,t){return Ln(i,+fi(i)+e)}function q9(i,e,t){return $g(i,e*Nd)}let U9={};function Yo(){return U9}function Ya(i,e){var o,l,d,h;const t=Yo(),n=(e==null?void 0:e.weekStartsOn)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=fi(i,e==null?void 0:e.in),a=s.getDay(),r=(a<n?7:0)+a-n;return s.setDate(s.getDate()-r),s.setHours(0,0,0,0),s}function Bl(i,e){return Ya(i,{...e,weekStartsOn:1})}function hk(i,e){const t=fi(i,e==null?void 0:e.in),n=t.getFullYear(),s=Ln(t,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=Bl(s),r=Ln(t,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const o=Bl(r);return t.getTime()>=a.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function qu(i){const e=fi(i),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+i-+t}function Ko(i,...e){const t=Ln.bind(null,e.find(n=>typeof n=="object"));return e.map(t)}function av(i,e){const t=fi(i,e==null?void 0:e.in);return t.setHours(0,0,0,0),t}function uk(i,e,t){const[n,s]=Ko(t==null?void 0:t.in,i,e),a=av(n),r=av(s),o=+a-qu(a),l=+r-qu(r);return Math.round((o-l)/V9)}function G9(i,e){const t=hk(i,e),n=Ln(i,0);return n.setFullYear(t,0,4),n.setHours(0,0,0,0),Bl(n)}function Z9(i,e,t){const n=fi(i,t==null?void 0:t.in);return n.setTime(n.getTime()+e*zd),n}function Y9(i,e,t){return jg(i,e*3,t)}function K9(i,e,t){return $g(i,e*1e3)}function X9(i,e,t){return Ff(i,e*7,t)}function J9(i,e,t){return jg(i,e*12,t)}function jc(i,e){const t=+fi(i)-+fi(e);return t<0?-1:t>0?1:t}function Q9(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function fk(i){return!(!Q9(i)&&typeof i!="number"||isNaN(+fi(i)))}function eF(i,e,t){const[n,s]=Ko(t==null?void 0:t.in,i,e),a=n.getFullYear()-s.getFullYear(),r=n.getMonth()-s.getMonth();return a*12+r}function tF(i,e,t){const[n,s]=Ko(t==null?void 0:t.in,i,e);return n.getFullYear()-s.getFullYear()}function pk(i,e,t){const[n,s]=Ko(t==null?void 0:t.in,i,e),a=ny(n,s),r=Math.abs(uk(n,s));n.setDate(n.getDate()-a*r);const o=+(ny(n,s)===-a),l=a*(r-o);return l===0?0:l}function ny(i,e){const t=i.getFullYear()-e.getFullYear()||i.getMonth()-e.getMonth()||i.getDate()-e.getDate()||i.getHours()-e.getHours()||i.getMinutes()-e.getMinutes()||i.getSeconds()-e.getSeconds()||i.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Fd(i){return e=>{const n=(i?Math[i]:Math.trunc)(e);return n===0?0:n}}function iF(i,e,t){const[n,s]=Ko(t==null?void 0:t.in,i,e),a=(+n-+s)/Nd;return Fd(t==null?void 0:t.roundingMethod)(a)}function Vg(i,e){return+fi(i)-+fi(e)}function nF(i,e,t){const n=Vg(i,e)/zd;return Fd(t==null?void 0:t.roundingMethod)(n)}function mk(i,e){const t=fi(i,e==null?void 0:e.in);return t.setHours(23,59,59,999),t}function vk(i,e){const t=fi(i,e==null?void 0:e.in),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function sF(i,e){const t=fi(i,e==null?void 0:e.in);return+mk(t,e)==+vk(t,e)}function gk(i,e,t){const[n,s,a]=Ko(t==null?void 0:t.in,i,i,e),r=jc(s,a),o=Math.abs(eF(s,a));if(o<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*o);let l=jc(s,a)===-r;sF(n)&&o===1&&jc(n,a)===1&&(l=!1);const d=r*(o-+l);return d===0?0:d}function aF(i,e,t){const n=gk(i,e,t)/3;return Fd(t==null?void 0:t.roundingMethod)(n)}function rF(i,e,t){const n=Vg(i,e)/1e3;return Fd(t==null?void 0:t.roundingMethod)(n)}function oF(i,e,t){const n=pk(i,e,t)/7;return Fd(t==null?void 0:t.roundingMethod)(n)}function lF(i,e,t){const[n,s]=Ko(t==null?void 0:t.in,i,e),a=jc(n,s),r=Math.abs(tF(n,s));n.setFullYear(1584),s.setFullYear(1584);const o=jc(n,s)===-a,l=a*(r-+o);return l===0?0:l}function cF(i,e){const t=fi(i,e==null?void 0:e.in),n=t.getMonth(),s=n-n%3;return t.setMonth(s,1),t.setHours(0,0,0,0),t}function dF(i,e){const t=fi(i,e==null?void 0:e.in);return t.setDate(1),t.setHours(0,0,0,0),t}function hF(i,e){const t=fi(i,e==null?void 0:e.in),n=t.getFullYear();return t.setFullYear(n+1,0,0),t.setHours(23,59,59,999),t}function _k(i,e){const t=fi(i,e==null?void 0:e.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}function uF(i,e){const t=fi(i,e==null?void 0:e.in);return t.setMinutes(59,59,999),t}function fF(i,e){var o,l;const t=Yo(),n=t.weekStartsOn??((l=(o=t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??0,s=fi(i,e==null?void 0:e.in),a=s.getDay(),r=(a<n?-7:0)+6-(a-n);return s.setDate(s.getDate()+r),s.setHours(23,59,59,999),s}function pF(i,e){const t=fi(i,e==null?void 0:e.in);return t.setSeconds(59,999),t}function mF(i,e){const t=fi(i,e==null?void 0:e.in),n=t.getMonth(),s=n-n%3+3;return t.setMonth(s,0),t.setHours(23,59,59,999),t}function vF(i,e){const t=fi(i,e==null?void 0:e.in);return t.setMilliseconds(999),t}const gF={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_F=(i,e,t)=>{let n;const s=gF[i];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Zp(i){return(e={})=>{const t=e.width?String(e.width):i.defaultWidth;return i.formats[t]||i.formats[i.defaultWidth]}}const bF={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},yF={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xF={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wF={date:Zp({formats:bF,defaultWidth:"full"}),time:Zp({formats:yF,defaultWidth:"full"}),dateTime:Zp({formats:xF,defaultWidth:"full"})},kF={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},SF=(i,e,t,n)=>kF[i];function uc(i){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&i.formattingValues){const r=i.defaultFormattingWidth||i.defaultWidth,o=t!=null&&t.width?String(t.width):r;s=i.formattingValues[o]||i.formattingValues[r]}else{const r=i.defaultWidth,o=t!=null&&t.width?String(t.width):i.defaultWidth;s=i.values[o]||i.values[r]}const a=i.argumentCallback?i.argumentCallback(e):e;return s[a]}}const CF={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},MF={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},PF={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},AF={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LF={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},DF=(i,e)=>{const t=Number(i),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},EF={ordinalNumber:DF,era:uc({values:CF,defaultWidth:"wide"}),quarter:uc({values:MF,defaultWidth:"wide",argumentCallback:i=>i-1}),month:uc({values:PF,defaultWidth:"wide"}),day:uc({values:AF,defaultWidth:"wide"}),dayPeriod:uc({values:TF,defaultWidth:"wide",formattingValues:LF,defaultFormattingWidth:"wide"})};function fc(i){return(e,t={})=>{const n=t.width,s=n&&i.matchPatterns[n]||i.matchPatterns[i.defaultMatchWidth],a=e.match(s);if(!a)return null;const r=a[0],o=n&&i.parsePatterns[n]||i.parsePatterns[i.defaultParseWidth],l=Array.isArray(o)?OF(o,m=>m.test(r)):IF(o,m=>m.test(r));let d;d=i.valueCallback?i.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(r.length);return{value:d,rest:h}}}function IF(i,e){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)&&e(i[t]))return t}function OF(i,e){for(let t=0;t<i.length;t++)if(e(i[t]))return t}function BF(i){return(e,t={})=>{const n=e.match(i.matchPattern);if(!n)return null;const s=n[0],a=e.match(i.parsePattern);if(!a)return null;let r=i.valueCallback?i.valueCallback(a[0]):a[0];r=t.valueCallback?t.valueCallback(r):r;const o=e.slice(s.length);return{value:r,rest:o}}}const RF=/^(\d+)(th|st|nd|rd)?/i,zF=/\d+/i,NF={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},FF={any:[/^b/i,/^(a|c)/i]},HF={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jF={any:[/1/i,/2/i,/3/i,/4/i]},$F={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VF={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},WF={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},qF={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},UF={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},GF={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZF={ordinalNumber:BF({matchPattern:RF,parsePattern:zF,valueCallback:i=>parseInt(i,10)}),era:fc({matchPatterns:NF,defaultMatchWidth:"wide",parsePatterns:FF,defaultParseWidth:"any"}),quarter:fc({matchPatterns:HF,defaultMatchWidth:"wide",parsePatterns:jF,defaultParseWidth:"any",valueCallback:i=>i+1}),month:fc({matchPatterns:$F,defaultMatchWidth:"wide",parsePatterns:VF,defaultParseWidth:"any"}),day:fc({matchPatterns:WF,defaultMatchWidth:"wide",parsePatterns:qF,defaultParseWidth:"any"}),dayPeriod:fc({matchPatterns:UF,defaultMatchWidth:"any",parsePatterns:GF,defaultParseWidth:"any"})},bk={code:"en-US",formatDistance:_F,formatLong:wF,formatRelative:SF,localize:EF,match:ZF,options:{weekStartsOn:0,firstWeekContainsDate:1}};function YF(i,e){const t=fi(i,e==null?void 0:e.in);return uk(t,_k(t))+1}function yk(i,e){const t=fi(i,e==null?void 0:e.in),n=+Bl(t)-+G9(t);return Math.round(n/dk)+1}function Wg(i,e){var h,m,v,b;const t=fi(i,e==null?void 0:e.in),n=t.getFullYear(),s=Yo(),a=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(v=s.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,r=Ln((e==null?void 0:e.in)||i,0);r.setFullYear(n+1,0,a),r.setHours(0,0,0,0);const o=Ya(r,e),l=Ln((e==null?void 0:e.in)||i,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const d=Ya(l,e);return+t>=+o?n+1:+t>=+d?n:n-1}function KF(i,e){var o,l,d,h;const t=Yo(),n=(e==null?void 0:e.firstWeekContainsDate)??((l=(o=e==null?void 0:e.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=Wg(i,e),a=Ln((e==null?void 0:e.in)||i,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),Ya(a,e)}function xk(i,e){const t=fi(i,e==null?void 0:e.in),n=+Ya(t,e)-+KF(t,e);return Math.round(n/dk)+1}function en(i,e){const t=i<0?"-":"",n=Math.abs(i).toString().padStart(e,"0");return t+n}const Dr={y(i,e){const t=i.getFullYear(),n=t>0?t:1-t;return en(e==="yy"?n%100:n,e.length)},M(i,e){const t=i.getMonth();return e==="M"?String(t+1):en(t+1,2)},d(i,e){return en(i.getDate(),e.length)},a(i,e){const t=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(i,e){return en(i.getHours()%12||12,e.length)},H(i,e){return en(i.getHours(),e.length)},m(i,e){return en(i.getMinutes(),e.length)},s(i,e){return en(i.getSeconds(),e.length)},S(i,e){const t=e.length,n=i.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return en(s,e.length)}},ll={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},sy={G:function(i,e,t){const n=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(i,e,t){if(e==="yo"){const n=i.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return Dr.y(i,e)},Y:function(i,e,t,n){const s=Wg(i,n),a=s>0?s:1-s;if(e==="YY"){const r=a%100;return en(r,2)}return e==="Yo"?t.ordinalNumber(a,{unit:"year"}):en(a,e.length)},R:function(i,e){const t=hk(i);return en(t,e.length)},u:function(i,e){const t=i.getFullYear();return en(t,e.length)},Q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return en(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(i,e,t){const n=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return en(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(i,e,t){const n=i.getMonth();switch(e){case"M":case"MM":return Dr.M(i,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(i,e,t){const n=i.getMonth();switch(e){case"L":return String(n+1);case"LL":return en(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(i,e,t,n){const s=xk(i,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):en(s,e.length)},I:function(i,e,t){const n=yk(i);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):en(n,e.length)},d:function(i,e,t){return e==="do"?t.ordinalNumber(i.getDate(),{unit:"date"}):Dr.d(i,e)},D:function(i,e,t){const n=YF(i);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):en(n,e.length)},E:function(i,e,t){const n=i.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(i,e,t,n){const s=i.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(a);case"ee":return en(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(i,e,t,n){const s=i.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(a);case"cc":return en(a,e.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(i,e,t){const n=i.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return en(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(i,e,t){const s=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(i,e,t){const n=i.getHours();let s;switch(n===12?s=ll.noon:n===0?s=ll.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(i,e,t){const n=i.getHours();let s;switch(n>=17?s=ll.evening:n>=12?s=ll.afternoon:n>=4?s=ll.morning:s=ll.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(i,e,t){if(e==="ho"){let n=i.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return Dr.h(i,e)},H:function(i,e,t){return e==="Ho"?t.ordinalNumber(i.getHours(),{unit:"hour"}):Dr.H(i,e)},K:function(i,e,t){const n=i.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):en(n,e.length)},k:function(i,e,t){let n=i.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):en(n,e.length)},m:function(i,e,t){return e==="mo"?t.ordinalNumber(i.getMinutes(),{unit:"minute"}):Dr.m(i,e)},s:function(i,e,t){return e==="so"?t.ordinalNumber(i.getSeconds(),{unit:"second"}):Dr.s(i,e)},S:function(i,e){return Dr.S(i,e)},X:function(i,e,t){const n=i.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return ry(n);case"XXXX":case"XX":return So(n);case"XXXXX":case"XXX":default:return So(n,":")}},x:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"x":return ry(n);case"xxxx":case"xx":return So(n);case"xxxxx":case"xxx":default:return So(n,":")}},O:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+ay(n,":");case"OOOO":default:return"GMT"+So(n,":")}},z:function(i,e,t){const n=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+ay(n,":");case"zzzz":default:return"GMT"+So(n,":")}},t:function(i,e,t){const n=Math.trunc(+i/1e3);return en(n,e.length)},T:function(i,e,t){return en(+i,e.length)}};function ay(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),s=Math.trunc(n/60),a=n%60;return a===0?t+String(s):t+String(s)+e+en(a,2)}function ry(i,e){return i%60===0?(i>0?"-":"+")+en(Math.abs(i)/60,2):So(i,e)}function So(i,e=""){const t=i>0?"-":"+",n=Math.abs(i),s=en(Math.trunc(n/60),2),a=en(n%60,2);return t+s+e+a}const oy=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},wk=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},XF=(i,e)=>{const t=i.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return oy(i,e);let a;switch(n){case"P":a=e.dateTime({width:"short"});break;case"PP":a=e.dateTime({width:"medium"});break;case"PPP":a=e.dateTime({width:"long"});break;case"PPPP":default:a=e.dateTime({width:"full"});break}return a.replace("{{date}}",oy(n,e)).replace("{{time}}",wk(s,e))},rv={p:wk,P:XF},JF=/^D+$/,QF=/^Y+$/,e8=["D","DD","YY","YYYY"];function kk(i){return JF.test(i)}function Sk(i){return QF.test(i)}function ov(i,e,t){const n=t8(i,e,t);if(console.warn(n),e8.includes(i))throw new RangeError(n)}function t8(i,e,t){const n=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const i8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,n8=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,s8=/^'([^]*?)'?$/,a8=/''/g,r8=/[a-zA-Z]/;function o8(i,e,t){var h,m,v,b,y,x,k,C;const n=Yo(),s=(t==null?void 0:t.locale)??n.locale??bk,a=(t==null?void 0:t.firstWeekContainsDate)??((m=(h=t==null?void 0:t.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((b=(v=n.locale)==null?void 0:v.options)==null?void 0:b.firstWeekContainsDate)??1,r=(t==null?void 0:t.weekStartsOn)??((x=(y=t==null?void 0:t.locale)==null?void 0:y.options)==null?void 0:x.weekStartsOn)??n.weekStartsOn??((C=(k=n.locale)==null?void 0:k.options)==null?void 0:C.weekStartsOn)??0,o=fi(i,t==null?void 0:t.in);if(!fk(o))throw new RangeError("Invalid time value");let l=e.match(n8).map(A=>{const T=A[0];if(T==="p"||T==="P"){const I=rv[T];return I(A,s.formatLong)}return A}).join("").match(i8).map(A=>{if(A==="''")return{isToken:!1,value:"'"};const T=A[0];if(T==="'")return{isToken:!1,value:l8(A)};if(sy[T])return{isToken:!0,value:A};if(T.match(r8))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:A}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const d={firstWeekContainsDate:a,weekStartsOn:r,locale:s};return l.map(A=>{if(!A.isToken)return A.value;const T=A.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&Sk(T)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&kk(T))&&ov(T,e,String(i));const I=sy[T[0]];return I(o,T,s.localize,d)}).join("")}function l8(i){const e=i.match(s8);return e?e[1].replace(a8,"'"):i}function c8(){return Object.assign({},Yo())}function d8(i,e){const t=fi(i,e==null?void 0:e.in).getDay();return t===0?7:t}function h8(i,e){const t=u8(e)?new e(0):Ln(e,0);return t.setFullYear(i.getFullYear(),i.getMonth(),i.getDate()),t.setHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),t}function u8(i){var e;return typeof i=="function"&&((e=i.prototype)==null?void 0:e.constructor)===i}const f8=10;class Ck{constructor(){De(this,"subPriority",0)}validate(e,t){return!0}}class p8 extends Ck{constructor(e,t,n,s,a){super(),this.value=e,this.validateValue=t,this.setValue=n,this.priority=s,a&&(this.subPriority=a)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,n){return this.setValue(e,t,this.value,n)}}class m8 extends Ck{constructor(t,n){super();De(this,"priority",f8);De(this,"subPriority",-1);this.context=t||(s=>Ln(n,s))}set(t,n){return n.timestampIsSet?t:Ln(t,h8(t,this.context))}}let Gi=class{run(e,t,n,s){const a=this.parse(e,t,n,s);return a?{setter:new p8(a.value,this.validate,this.set,this.priority,this.subPriority),rest:a.rest}:null}validate(e,t,n){return!0}};class v8 extends Gi{constructor(){super(...arguments);De(this,"priority",140);De(this,"incompatibleTokens",["R","u","t","T"])}parse(t,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"});case"GGGGG":return s.era(t,{width:"narrow"});case"GGGG":default:return s.era(t,{width:"wide"})||s.era(t,{width:"abbreviated"})||s.era(t,{width:"narrow"})}}set(t,n,s){return n.era=s,t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}const Bn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},za={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Rn(i,e){return i&&{value:e(i.value),rest:i.rest}}function Pn(i,e){const t=e.match(i);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function Na(i,e){const t=e.match(i);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};const n=t[1]==="+"?1:-1,s=t[2]?parseInt(t[2],10):0,a=t[3]?parseInt(t[3],10):0,r=t[5]?parseInt(t[5],10):0;return{value:n*(s*Nd+a*zd+r*W9),rest:e.slice(t[0].length)}}function Mk(i){return Pn(Bn.anyDigitsSigned,i)}function Dn(i,e){switch(i){case 1:return Pn(Bn.singleDigit,e);case 2:return Pn(Bn.twoDigits,e);case 3:return Pn(Bn.threeDigits,e);case 4:return Pn(Bn.fourDigits,e);default:return Pn(new RegExp("^\\d{1,"+i+"}"),e)}}function Uu(i,e){switch(i){case 1:return Pn(Bn.singleDigitSigned,e);case 2:return Pn(Bn.twoDigitsSigned,e);case 3:return Pn(Bn.threeDigitsSigned,e);case 4:return Pn(Bn.fourDigitsSigned,e);default:return Pn(new RegExp("^-?\\d{1,"+i+"}"),e)}}function qg(i){switch(i){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Pk(i,e){const t=e>0,n=t?e:1-e;let s;if(n<=50)s=i||100;else{const a=n+50,r=Math.trunc(a/100)*100,o=i>=a%100;s=i+r-(o?100:0)}return t?s:1-s}function Ak(i){return i%400===0||i%4===0&&i%100!==0}class g8 extends Gi{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(t,n,s){const a=r=>({year:r,isTwoDigitYear:n==="yy"});switch(n){case"y":return Rn(Dn(4,t),a);case"yo":return Rn(s.ordinalNumber(t,{unit:"year"}),a);default:return Rn(Dn(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,s){const a=t.getFullYear();if(s.isTwoDigitYear){const o=Pk(s.year,a);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const r=!("era"in n)||n.era===1?s.year:1-s.year;return t.setFullYear(r,0,1),t.setHours(0,0,0,0),t}}class _8 extends Gi{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(t,n,s){const a=r=>({year:r,isTwoDigitYear:n==="YY"});switch(n){case"Y":return Rn(Dn(4,t),a);case"Yo":return Rn(s.ordinalNumber(t,{unit:"year"}),a);default:return Rn(Dn(n.length,t),a)}}validate(t,n){return n.isTwoDigitYear||n.year>0}set(t,n,s,a){const r=Wg(t,a);if(s.isTwoDigitYear){const l=Pk(s.year,r);return t.setFullYear(l,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Ya(t,a)}const o=!("era"in n)||n.era===1?s.year:1-s.year;return t.setFullYear(o,0,a.firstWeekContainsDate),t.setHours(0,0,0,0),Ya(t,a)}}class b8 extends Gi{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(t,n){return Uu(n==="R"?4:n.length,t)}set(t,n,s){const a=Ln(t,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),Bl(a)}}class y8 extends Gi{constructor(){super(...arguments);De(this,"priority",130);De(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(t,n){return Uu(n==="u"?4:n.length,t)}set(t,n,s){return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}}class x8 extends Gi{constructor(){super(...arguments);De(this,"priority",120);De(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"Q":case"QQ":return Dn(n.length,t);case"Qo":return s.ordinalNumber(t,{unit:"quarter"});case"QQQ":return s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(t,{width:"wide",context:"formatting"})||s.quarter(t,{width:"abbreviated",context:"formatting"})||s.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class w8 extends Gi{constructor(){super(...arguments);De(this,"priority",120);De(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"q":case"qq":return Dn(n.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,s){return t.setMonth((s-1)*3,1),t.setHours(0,0,0,0),t}}class k8 extends Gi{constructor(){super(...arguments);De(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);De(this,"priority",110)}parse(t,n,s){const a=r=>r-1;switch(n){case"M":return Rn(Pn(Bn.month,t),a);case"MM":return Rn(Dn(2,t),a);case"Mo":return Rn(s.ordinalNumber(t,{unit:"month"}),a);case"MMM":return s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(t,{width:"wide",context:"formatting"})||s.month(t,{width:"abbreviated",context:"formatting"})||s.month(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}class S8 extends Gi{constructor(){super(...arguments);De(this,"priority",110);De(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(t,n,s){const a=r=>r-1;switch(n){case"L":return Rn(Pn(Bn.month,t),a);case"LL":return Rn(Dn(2,t),a);case"Lo":return Rn(s.ordinalNumber(t,{unit:"month"}),a);case"LLL":return s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(t,{width:"wide",context:"standalone"})||s.month(t,{width:"abbreviated",context:"standalone"})||s.month(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.setMonth(s,1),t.setHours(0,0,0,0),t}}function C8(i,e,t){const n=fi(i,t==null?void 0:t.in),s=xk(n,t)-e;return n.setDate(n.getDate()-s*7),fi(n,t==null?void 0:t.in)}class M8 extends Gi{constructor(){super(...arguments);De(this,"priority",100);De(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(t,n,s){switch(n){case"w":return Pn(Bn.week,t);case"wo":return s.ordinalNumber(t,{unit:"week"});default:return Dn(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,s,a){return Ya(C8(t,s,a),a)}}function P8(i,e,t){const n=fi(i,t==null?void 0:t.in),s=yk(n,t)-e;return n.setDate(n.getDate()-s*7),n}class A8 extends Gi{constructor(){super(...arguments);De(this,"priority",100);De(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(t,n,s){switch(n){case"I":return Pn(Bn.week,t);case"Io":return s.ordinalNumber(t,{unit:"week"});default:return Dn(n.length,t)}}validate(t,n){return n>=1&&n<=53}set(t,n,s){return Bl(P8(t,s))}}const T8=[31,28,31,30,31,30,31,31,30,31,30,31],L8=[31,29,31,30,31,30,31,31,30,31,30,31];class D8 extends Gi{constructor(){super(...arguments);De(this,"priority",90);De(this,"subPriority",1);De(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"d":return Pn(Bn.date,t);case"do":return s.ordinalNumber(t,{unit:"date"});default:return Dn(n.length,t)}}validate(t,n){const s=t.getFullYear(),a=Ak(s),r=t.getMonth();return a?n>=1&&n<=L8[r]:n>=1&&n<=T8[r]}set(t,n,s){return t.setDate(s),t.setHours(0,0,0,0),t}}class E8 extends Gi{constructor(){super(...arguments);De(this,"priority",90);De(this,"subpriority",1);De(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(t,n,s){switch(n){case"D":case"DD":return Pn(Bn.dayOfYear,t);case"Do":return s.ordinalNumber(t,{unit:"date"});default:return Dn(n.length,t)}}validate(t,n){const s=t.getFullYear();return Ak(s)?n>=1&&n<=366:n>=1&&n<=365}set(t,n,s){return t.setMonth(0,s),t.setHours(0,0,0,0),t}}function Ug(i,e,t){var m,v,b,y;const n=Yo(),s=(t==null?void 0:t.weekStartsOn)??((v=(m=t==null?void 0:t.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??n.weekStartsOn??((y=(b=n.locale)==null?void 0:b.options)==null?void 0:y.weekStartsOn)??0,a=fi(i,t==null?void 0:t.in),r=a.getDay(),l=(e%7+7)%7,d=7-s,h=e<0||e>6?e-(r+d)%7:(l+d)%7-(r+d)%7;return Ff(a,h,t)}class I8 extends Gi{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(t,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,a){return t=Ug(t,s,a),t.setHours(0,0,0,0),t}}class O8 extends Gi{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(t,n,s,a){const r=o=>{const l=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+l};switch(n){case"e":case"ee":return Rn(Dn(n.length,t),r);case"eo":return Rn(s.ordinalNumber(t,{unit:"day"}),r);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,a){return t=Ug(t,s,a),t.setHours(0,0,0,0),t}}class B8 extends Gi{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(t,n,s,a){const r=o=>{const l=Math.floor((o-1)/7)*7;return(o+a.weekStartsOn+6)%7+l};switch(n){case"c":case"cc":return Rn(Dn(n.length,t),r);case"co":return Rn(s.ordinalNumber(t,{unit:"day"}),r);case"ccc":return s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"ccccc":return s.day(t,{width:"narrow",context:"standalone"});case"cccccc":return s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(t,{width:"wide",context:"standalone"})||s.day(t,{width:"abbreviated",context:"standalone"})||s.day(t,{width:"short",context:"standalone"})||s.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(t,n,s,a){return t=Ug(t,s,a),t.setHours(0,0,0,0),t}}function R8(i,e,t){const n=fi(i,t==null?void 0:t.in),s=d8(n,t),a=e-s;return Ff(n,a,t)}class z8 extends Gi{constructor(){super(...arguments);De(this,"priority",90);De(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(t,n,s){const a=r=>r===0?7:r;switch(n){case"i":case"ii":return Dn(n.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return Rn(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a);case"iiiii":return Rn(s.day(t,{width:"narrow",context:"formatting"}),a);case"iiiiii":return Rn(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a);case"iiii":default:return Rn(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),a)}}validate(t,n){return n>=1&&n<=7}set(t,n,s){return t=R8(t,s),t.setHours(0,0,0,0),t}}class N8 extends Gi{constructor(){super(...arguments);De(this,"priority",80);De(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(t,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(qg(s),0,0,0),t}}class F8 extends Gi{constructor(){super(...arguments);De(this,"priority",80);De(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(t,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(qg(s),0,0,0),t}}class H8 extends Gi{constructor(){super(...arguments);De(this,"priority",80);De(this,"incompatibleTokens",["a","b","t","T"])}parse(t,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(t,{width:"wide",context:"formatting"})||s.dayPeriod(t,{width:"abbreviated",context:"formatting"})||s.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours(qg(s),0,0,0),t}}class j8 extends Gi{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["H","K","k","t","T"])}parse(t,n,s){switch(n){case"h":return Pn(Bn.hour12h,t);case"ho":return s.ordinalNumber(t,{unit:"hour"});default:return Dn(n.length,t)}}validate(t,n){return n>=1&&n<=12}set(t,n,s){const a=t.getHours()>=12;return a&&s<12?t.setHours(s+12,0,0,0):!a&&s===12?t.setHours(0,0,0,0):t.setHours(s,0,0,0),t}}class $8 extends Gi{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(t,n,s){switch(n){case"H":return Pn(Bn.hour23h,t);case"Ho":return s.ordinalNumber(t,{unit:"hour"});default:return Dn(n.length,t)}}validate(t,n){return n>=0&&n<=23}set(t,n,s){return t.setHours(s,0,0,0),t}}class V8 extends Gi{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["h","H","k","t","T"])}parse(t,n,s){switch(n){case"K":return Pn(Bn.hour11h,t);case"Ko":return s.ordinalNumber(t,{unit:"hour"});default:return Dn(n.length,t)}}validate(t,n){return n>=0&&n<=11}set(t,n,s){return t.getHours()>=12&&s<12?t.setHours(s+12,0,0,0):t.setHours(s,0,0,0),t}}class W8 extends Gi{constructor(){super(...arguments);De(this,"priority",70);De(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(t,n,s){switch(n){case"k":return Pn(Bn.hour24h,t);case"ko":return s.ordinalNumber(t,{unit:"hour"});default:return Dn(n.length,t)}}validate(t,n){return n>=1&&n<=24}set(t,n,s){const a=s<=24?s%24:s;return t.setHours(a,0,0,0),t}}class q8 extends Gi{constructor(){super(...arguments);De(this,"priority",60);De(this,"incompatibleTokens",["t","T"])}parse(t,n,s){switch(n){case"m":return Pn(Bn.minute,t);case"mo":return s.ordinalNumber(t,{unit:"minute"});default:return Dn(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setMinutes(s,0,0),t}}class U8 extends Gi{constructor(){super(...arguments);De(this,"priority",50);De(this,"incompatibleTokens",["t","T"])}parse(t,n,s){switch(n){case"s":return Pn(Bn.second,t);case"so":return s.ordinalNumber(t,{unit:"second"});default:return Dn(n.length,t)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setSeconds(s,0),t}}class G8 extends Gi{constructor(){super(...arguments);De(this,"priority",30);De(this,"incompatibleTokens",["t","T"])}parse(t,n){const s=a=>Math.trunc(a*Math.pow(10,-n.length+3));return Rn(Dn(n.length,t),s)}set(t,n,s){return t.setMilliseconds(s),t}}class Z8 extends Gi{constructor(){super(...arguments);De(this,"priority",10);De(this,"incompatibleTokens",["t","T","x"])}parse(t,n){switch(n){case"X":return Na(za.basicOptionalMinutes,t);case"XX":return Na(za.basic,t);case"XXXX":return Na(za.basicOptionalSeconds,t);case"XXXXX":return Na(za.extendedOptionalSeconds,t);case"XXX":default:return Na(za.extended,t)}}set(t,n,s){return n.timestampIsSet?t:Ln(t,t.getTime()-qu(t)-s)}}class Y8 extends Gi{constructor(){super(...arguments);De(this,"priority",10);De(this,"incompatibleTokens",["t","T","X"])}parse(t,n){switch(n){case"x":return Na(za.basicOptionalMinutes,t);case"xx":return Na(za.basic,t);case"xxxx":return Na(za.basicOptionalSeconds,t);case"xxxxx":return Na(za.extendedOptionalSeconds,t);case"xxx":default:return Na(za.extended,t)}}set(t,n,s){return n.timestampIsSet?t:Ln(t,t.getTime()-qu(t)-s)}}class K8 extends Gi{constructor(){super(...arguments);De(this,"priority",40);De(this,"incompatibleTokens","*")}parse(t){return Mk(t)}set(t,n,s){return[Ln(t,s*1e3),{timestampIsSet:!0}]}}class X8 extends Gi{constructor(){super(...arguments);De(this,"priority",20);De(this,"incompatibleTokens","*")}parse(t){return Mk(t)}set(t,n,s){return[Ln(t,s),{timestampIsSet:!0}]}}const J8={G:new v8,y:new g8,Y:new _8,R:new b8,u:new y8,Q:new x8,q:new w8,M:new k8,L:new S8,w:new M8,I:new A8,d:new D8,D:new E8,E:new I8,e:new O8,c:new B8,i:new z8,a:new N8,b:new F8,B:new H8,h:new j8,H:new $8,K:new V8,k:new W8,m:new q8,s:new U8,S:new G8,X:new Z8,x:new Y8,t:new K8,T:new X8},Q8=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,eH=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tH=/^'([^]*?)'?$/,iH=/''/g,nH=/\S/,sH=/[a-zA-Z]/;function aH(i,e,t,n){var k,C,A,T,I,D,N,z;const s=()=>Ln((n==null?void 0:n.in)||t,NaN),a=c8(),r=(n==null?void 0:n.locale)??a.locale??bk,o=(n==null?void 0:n.firstWeekContainsDate)??((C=(k=n==null?void 0:n.locale)==null?void 0:k.options)==null?void 0:C.firstWeekContainsDate)??a.firstWeekContainsDate??((T=(A=a.locale)==null?void 0:A.options)==null?void 0:T.firstWeekContainsDate)??1,l=(n==null?void 0:n.weekStartsOn)??((D=(I=n==null?void 0:n.locale)==null?void 0:I.options)==null?void 0:D.weekStartsOn)??a.weekStartsOn??((z=(N=a.locale)==null?void 0:N.options)==null?void 0:z.weekStartsOn)??0;if(!e)return i?s():fi(t,n==null?void 0:n.in);const d={firstWeekContainsDate:o,weekStartsOn:l,locale:r},h=[new m8(n==null?void 0:n.in,t)],m=e.match(eH).map(H=>{const j=H[0];if(j in rv){const re=rv[j];return re(H,r.formatLong)}return H}).join("").match(Q8),v=[];for(let H of m){!(n!=null&&n.useAdditionalWeekYearTokens)&&Sk(H)&&ov(H,e,i),!(n!=null&&n.useAdditionalDayOfYearTokens)&&kk(H)&&ov(H,e,i);const j=H[0],re=J8[j];if(re){const{incompatibleTokens:V}=re;if(Array.isArray(V)){const le=v.find(ee=>V.includes(ee.token)||ee.token===j);if(le)throw new RangeError(`The format string mustn't contain \`${le.fullToken}\` and \`${H}\` at the same time`)}else if(re.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${H}\` and any other token at the same time`);v.push({token:j,fullToken:H});const q=re.run(i,H,r.match,d);if(!q)return s();h.push(q.setter),i=q.rest}else{if(j.match(sH))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(H==="''"?H="'":j==="'"&&(H=rH(H)),i.indexOf(H)===0)i=i.slice(H.length);else return s()}}if(i.length>0&&nH.test(i))return s();const b=h.map(H=>H.priority).sort((H,j)=>j-H).filter((H,j,re)=>re.indexOf(H)===j).map(H=>h.filter(j=>j.priority===H).sort((j,re)=>re.subPriority-j.subPriority)).map(H=>H[0]);let y=fi(t,n==null?void 0:n.in);if(isNaN(+y))return s();const x={};for(const H of b){if(!H.validate(y,d))return s();const j=H.set(y,x,d);Array.isArray(j)?(y=j[0],Object.assign(x,j[1])):y=j}return y}function rH(i){return i.match(tH)[1].replace(iH,"'")}function oH(i,e){const t=fi(i,e==null?void 0:e.in);return t.setMinutes(0,0,0),t}function lH(i,e){const t=fi(i,e==null?void 0:e.in);return t.setSeconds(0,0),t}function cH(i,e){const t=fi(i,e==null?void 0:e.in);return t.setMilliseconds(0),t}function dH(i,e){const t=()=>Ln(e==null?void 0:e.in,NaN),n=(e==null?void 0:e.additionalDigits)??2,s=pH(i);let a;if(s.date){const d=mH(s.date,n);a=vH(d.restDateString,d.year)}if(!a||isNaN(+a))return t();const r=+a;let o=0,l;if(s.time&&(o=gH(s.time),isNaN(o)))return t();if(s.timezone){if(l=_H(s.timezone),isNaN(l))return t()}else{const d=new Date(r+o),h=fi(0,e==null?void 0:e.in);return h.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),h.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),h}return fi(r+o+l,e==null?void 0:e.in)}const Lh={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},hH=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,uH=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,fH=/^([+-])(\d{2})(?::?(\d{2}))?$/;function pH(i){const e={},t=i.split(Lh.dateTimeDelimiter);let n;if(t.length>2)return e;if(/:/.test(t[0])?n=t[0]:(e.date=t[0],n=t[1],Lh.timeZoneDelimiter.test(e.date)&&(e.date=i.split(Lh.timeZoneDelimiter)[0],n=i.substr(e.date.length,i.length))),n){const s=Lh.timezone.exec(n);s?(e.time=n.replace(s[1],""),e.timezone=s[1]):e.time=n}return e}function mH(i,e){const t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),n=i.match(t);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?s:a*100,restDateString:i.slice((n[1]||n[2]).length)}}function vH(i,e){if(e===null)return new Date(NaN);const t=i.match(hH);if(!t)return new Date(NaN);const n=!!t[4],s=pc(t[1]),a=pc(t[2])-1,r=pc(t[3]),o=pc(t[4]),l=pc(t[5])-1;if(n)return kH(e,o,l)?bH(e,o,l):new Date(NaN);{const d=new Date(0);return!xH(e,a,r)||!wH(e,s)?new Date(NaN):(d.setUTCFullYear(e,a,Math.max(s,r)),d)}}function pc(i){return i?parseInt(i):1}function gH(i){const e=i.match(uH);if(!e)return NaN;const t=Yp(e[1]),n=Yp(e[2]),s=Yp(e[3]);return SH(t,n,s)?t*Nd+n*zd+s*1e3:NaN}function Yp(i){return i&&parseFloat(i.replace(",","."))||0}function _H(i){if(i==="Z")return 0;const e=i.match(fH);if(!e)return 0;const t=e[1]==="+"?-1:1,n=parseInt(e[2]),s=e[3]&&parseInt(e[3])||0;return CH(n,s)?t*(n*Nd+s*zd):NaN}function bH(i,e,t){const n=new Date(0);n.setUTCFullYear(i,0,4);const s=n.getUTCDay()||7,a=(e-1)*7+t+1-s;return n.setUTCDate(n.getUTCDate()+a),n}const yH=[31,null,31,30,31,30,31,31,30,31,30,31];function Tk(i){return i%400===0||i%4===0&&i%100!==0}function xH(i,e,t){return e>=0&&e<=11&&t>=1&&t<=(yH[e]||(Tk(i)?29:28))}function wH(i,e){return e>=1&&e<=(Tk(i)?366:365)}function kH(i,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function SH(i,e,t){return i===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&i>=0&&i<25}function CH(i,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const MH={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Vw._date.override({_id:"date-fns",formats:function(){return MH},parse:function(i,e){if(i===null||typeof i>"u")return null;const t=typeof i;return t==="number"||i instanceof Date?i=fi(i):t==="string"&&(typeof e=="string"?i=aH(i,e,new Date,this.options):i=dH(i,this.options)),fk(i)?i.getTime():null},format:function(i,e){return o8(i,e,this.options)},add:function(i,e,t){switch(t){case"millisecond":return $g(i,e);case"second":return K9(i,e);case"minute":return Z9(i,e);case"hour":return q9(i,e);case"day":return Ff(i,e);case"week":return X9(i,e);case"month":return jg(i,e);case"quarter":return Y9(i,e);case"year":return J9(i,e);default:return i}},diff:function(i,e,t){switch(t){case"millisecond":return Vg(i,e);case"second":return rF(i,e);case"minute":return nF(i,e);case"hour":return iF(i,e);case"day":return pk(i,e);case"week":return oF(i,e);case"month":return gk(i,e);case"quarter":return aF(i,e);case"year":return lF(i,e);default:return 0}},startOf:function(i,e,t){switch(e){case"second":return cH(i);case"minute":return lH(i);case"hour":return oH(i);case"day":return av(i);case"week":return Ya(i);case"isoWeek":return Ya(i,{weekStartsOn:+t});case"month":return dF(i);case"quarter":return cF(i);case"year":return _k(i);default:return i}},endOf:function(i,e){switch(e){case"second":return vF(i);case"minute":return pF(i);case"hour":return uF(i);case"day":return mk(i);case"week":return fF(i);case"month":return vk(i);case"quarter":return mF(i);case"year":return hF(i);default:return i}}});var PH=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),AH=(i,e)=>e("graph"),TH=B('<div class="player-stats-section svelte-1w1mq79"><div class="player-stats-grid svelte-1w1mq79"><div><i class="fas fa-users metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79">Current Players</div></div></div> <div><i class="fas fa-clock metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79">24h Average</div></div></div> <div><i class="fas fa-arrow-up metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79">24h Peak</div></div></div> <div><i class="fas fa-calendar-week metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79">Weekly Average</div></div></div></div></div> <div class="chart-container svelte-1w1mq79"><canvas id="playerCountChart" class="svelte-1w1mq79"></canvas></div>',1),LH=(i,e)=>e("newPlayers"),DH=B('<div><div class="player-info svelte-1w1mq79"><div class="character-name svelte-1w1mq79"> </div> <div class="server-name svelte-1w1mq79"> </div> <div class="join-date svelte-1w1mq79"> </div></div> <div class="citizen-id-right svelte-1w1mq79"><small class="citizen-id svelte-1w1mq79"> </small></div></div>'),EH=B('<div class="text-center mt-3"><small class="text-muted"> </small></div>'),IH=B('<div class="new-players-grid svelte-1w1mq79"></div> <!>',1),OH=B('<div class="text-center py-4"><i class="fas fa-users fa-3x text-muted mb-3"></i> <p class="text-muted">No new players this week</p></div>'),BH=B('<div class="new-players-container svelte-1w1mq79"><!></div>'),RH=(i,e)=>e("wealth"),zH=(i,e)=>e("characterName"),NH=(i,e)=>e("cash"),FH=(i,e)=>e("bank"),HH=(i,e)=>e("total"),jH=B('<tr class="svelte-1w1mq79"><td class="svelte-1w1mq79"> </td><td class="svelte-1w1mq79"> </td><td class="text-end svelte-1w1mq79"> </td><td class="text-end svelte-1w1mq79"> </td><td class="text-end svelte-1w1mq79"> </td></tr>'),$H=(i,e)=>e(),VH=B("<button></button>"),WH=(i,e)=>e(),qH=B('<div class="table-wrapper svelte-1w1mq79"><table class="table svelte-1w1mq79"><thead><tr><th class="svelte-1w1mq79">#</th><th class="sortable svelte-1w1mq79"> <i></i></th><th class="text-end sortable svelte-1w1mq79"> <i></i></th><th class="text-end sortable svelte-1w1mq79"> <i></i></th><th class="text-end sortable svelte-1w1mq79"> <i></i></th></tr></thead><tbody class="svelte-1w1mq79"></tbody></table></div> <div class="pagination-container svelte-1w1mq79"><div class="pagination-info svelte-1w1mq79"> </div> <div class="pagination svelte-1w1mq79"><button class="btn btn-sm btn-outline-primary svelte-1w1mq79"><i class="fas fa-chevron-left"></i></button> <!> <button class="btn btn-sm btn-outline-primary svelte-1w1mq79"><i class="fas fa-chevron-right"></i></button></div></div>',1),UH=B('<div class="view svelte-1w1mq79"><h2 class="card-title text-center mb-4"> </h2> <div class="unified-metrics-section mb-4 svelte-1w1mq79"><div class="unified-metrics-grid svelte-1w1mq79"><div><i class="fas fa-users metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79"> </div></div></div> <div><i class="fas fa-user-friends metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79"> </div></div></div> <div><i class="fas fa-user-plus metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79">New Players This Week</div></div></div> <div><i class="fas fa-box metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79"> </div></div></div> <div><i class="fas fa-money-bill-wave metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79"> </div></div></div> <div><i class="fas fa-car metric-icon svelte-1w1mq79"></i> <div class="metric-content svelte-1w1mq79"><div class="metric-value svelte-1w1mq79"> </div> <div class="metric-label svelte-1w1mq79"> </div></div></div></div></div> <div><div class="section-header svelte-1w1mq79"><h4 class="section-title svelte-1w1mq79"><i class="fas fa-chart-area me-2 svelte-1w1mq79"></i> Player Count & Activity Statistics</h4> <i></i></div> <!></div> <div><div class="section-header svelte-1w1mq79"><h4 class="section-title svelte-1w1mq79"><i class="fas fa-user-plus me-2 svelte-1w1mq79"></i> </h4> <i></i></div> <!></div> <div><div class="section-header svelte-1w1mq79"><h4 class="section-title svelte-1w1mq79"><i class="fas fa-trophy me-2 svelte-1w1mq79"></i> </h4> <i></i></div> <!></div></div>'),GH=B('<div class="page-container svelte-1w1mq79"><!></div>');function ZH(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(null),o=ae(Gt([])),l=ae(null),d=ae(Gt([])),h=ae(!0),m=ae(null),v=ae(!1),b=ae(!1),y=ae(!1),x=ae("total"),k=ae("desc"),C=qi(()=>[...u(o)].sort((Y,te)=>{const K=u(k)==="asc"?1:-1;return u(x)==="characterName"?(Y[u(x)].toLowerCase()<te[u(x)].toLowerCase()?-1:1)*K:(Number(Y[u(x)])-Number(te[u(x)]))*K})),A=ae(1),T=10,I=qi(()=>Math.ceil(u(C).length/T)),D=qi(()=>u(C).slice((u(A)-1)*T,u(A)*T));pn(()=>{N()});async function N(){M(h,!0);const[Y,te,K,F]=await Promise.all([Ve("getServerMetrics"),Ve("getWealthLeaderboard"),Ve("getNewPlayersThisWeek"),Ve("getPlayerCountGraph")]);Y.status==="ok"?M(r,Y.data,!0):ze(s()("notifications.analytics.failedtoloadservermetrics"),"error"),te.status==="ok"&&te.data?M(o,te.data,!0):ze(s()("notifications.analytics.failedtoloadleaderboarddata"),"error"),K.status==="ok"&&K.data?M(l,K.data,!0):ze("Failed to load new players data","error"),F.status==="ok"&&F.data?(M(d,F.data,!0),await Ro(),setTimeout(H,100)):ze("Failed to load player count graph data","error"),M(h,!1)}let z=!1;function H(){if(z)return;z=!0;const Y=document.getElementById("playerCountChart");if(!Y){z=!1;return}if(!u(d).length){z=!1;return}u(m)&&(u(m).destroy(),M(m,null));const te=Y.getContext("2d");if(!te){z=!1;return}const K=a().darkMode;M(m,new cr(te,{type:"line",data:{labels:u(d).map(F=>new Date(F.timestamp*1e3)),datasets:[{label:"Player Count",data:u(d).map(F=>F.player_count),borderColor:"#6ea8fe",backgroundColor:"rgba(110, 168, 254, 0.1)",fill:!0,tension:.4,pointRadius:3,pointHoverRadius:6,borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Player Count - Last 24 Hours",color:K?"#fff":"#333",font:{size:16,weight:600}},legend:{display:!1},tooltip:{backgroundColor:K?"rgba(33, 37, 41, 0.95)":"rgba(255, 255, 255, 0.95)",titleColor:K?"#fff":"#333",bodyColor:K?"#fff":"#333",borderColor:K?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderWidth:1,callbacks:{title(F){return new Date(F[0].parsed.x).toLocaleString()},label(F){return`Players: ${F.parsed.y}`}}}},scales:{x:{type:"time",time:{unit:"hour",displayFormats:{hour:"HH:mm"}},grid:{color:K?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:K?"#aaa":"#666"}},y:{beginAtZero:!0,grid:{color:K?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:K?"#aaa":"#666",precision:0}}},interaction:{intersect:!1,mode:"index"}}}),!0),z=!1}function j(Y){return new Intl.NumberFormat().format(Y)}function re(Y){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(Y)}function V(Y){u(x)===Y?M(k,u(k)==="asc"?"desc":"asc",!0):(M(x,Y,!0),M(k,"desc"))}function q(Y){return u(x)!==Y?"fa-sort":u(k)==="asc"?"fa-sort-up":"fa-sort-down"}function le(){u(A)<u(I)&&Yr(A)}function ee(){u(A)>1&&Yr(A,-1)}function W(Y){Y>=1&&Y<=u(I)&&M(A,Y,!0)}function ne(Y){switch(Y){case"wealth":M(v,!u(v));break;case"newPlayers":M(b,!u(b));break;case"graph":!u(y)&&u(m)&&(u(m).destroy(),M(m,null)),M(y,!u(y)),!u(y)&&u(d).length>0&&setTimeout(()=>{u(y)||H()},100);break}}let ye=ae(Gt(a().darkMode));fn(()=>{u(m)&&a().darkMode!==u(ye)&&!u(y)&&u(d).length>0?(M(ye,a().darkMode,!0),H()):a().darkMode!==u(ye)&&M(ye,a().darkMode,!0)});var ie=GH(),Z=p(ie);{var $=Y=>{var te=PH(),K=p(te),F=p(K),R=p(F);se(J=>S(R,J),[()=>s()("pages.analytics.loading")]),E(Y,te)},X=Y=>{var te=UH(),K=p(te),F=p(K),R=g(K,2),J=p(R),U=p(J);let ce;var fe=g(p(U),2),ve=p(fe),Me=p(ve),Se=g(ve,2),Pe=p(Se),Be=g(U,2);let ue;var oe=g(p(Be),2),me=p(oe),Le=p(me),Oe=g(me,2),_e=p(Oe),be=g(Be,2);let Te;var pe=g(p(be),2),de=p(pe),ge=p(de),xe=g(be,2);let we;var Re=g(p(xe),2),qe=p(Re),Ge=p(qe),tt=g(qe,2),Ye=p(tt),Je=g(xe,2);let Ue;var at=g(p(Je),2),Ee=p(at),He=p(Ee),Ke=g(Ee,2),it=p(Ke),pt=g(Je,2);let Tt;var mt=g(p(pt),2),zt=p(mt),oi=p(zt),Ai=g(zt,2),Kt=p(Ai),Wt=g(R,2);let Rt;var di=p(Wt);di.__click=[AH,ne];var Ci=g(p(di),2),Ti=g(di,2);{var Qe=Fe=>{var et=TH(),nt=yt(et),lt=p(nt),wt=p(lt);let Xt;var Ut=g(p(wt),2),ut=p(Ut),Bt=p(ut),jt=g(wt,2);let Ft;var ct=g(p(jt),2),vt=p(ct),qt=p(vt),ot=g(jt,2);let Lt;var Dt=g(p(ot),2),$e=p(Dt),kt=p($e),si=g(ot,2);let li;var ei=g(p(si),2),Li=p(ei),wi=p(Li);se((Et,ft,ai,ci,bi,yi,ti,Zi)=>{Xt=G(wt,1,"metric-card metric-card-player-stats svelte-1w1mq79",null,Xt,Et),S(Bt,ft),Ft=G(jt,1,"metric-card metric-card-player-stats svelte-1w1mq79",null,Ft,ai),S(qt,ci),Lt=G(ot,1,"metric-card metric-card-player-stats svelte-1w1mq79",null,Lt,bi),S(kt,yi),li=G(si,1,"metric-card metric-card-player-stats svelte-1w1mq79",null,li,ti),S(wi,Zi)},[()=>({light:!a().darkMode}),()=>{var Et,ft;return j(((ft=(Et=u(r))==null?void 0:Et.playerCountStats)==null?void 0:ft.current)||0)},()=>({light:!a().darkMode}),()=>{var Et,ft;return j(((ft=(Et=u(r))==null?void 0:Et.playerCountStats)==null?void 0:ft.avgLast24h)||0)},()=>({light:!a().darkMode}),()=>{var Et,ft;return j(((ft=(Et=u(r))==null?void 0:Et.playerCountStats)==null?void 0:ft.peakLast24h)||0)},()=>({light:!a().darkMode}),()=>{var Et,ft;return j(((ft=(Et=u(r))==null?void 0:Et.playerCountStats)==null?void 0:ft.avgLastWeek)||0)}]),E(Fe,et)};Q(Ti,Fe=>{u(y)||Fe(Qe)})}var Ce=g(Wt,2);let Ae;var xt=p(Ce);xt.__click=[LH,ne];var _t=p(xt),bt=g(p(_t)),Pt=g(_t,2),Ht=g(xt,2);{var Nt=Fe=>{var et=BH(),nt=p(et);{var lt=Xt=>{var Ut=IH(),ut=yt(Ut);Vt(ut,21,()=>u(l).players.slice(0,10),Si,(Ft,ct)=>{var vt=DH();let qt;var ot=p(vt),Lt=p(ot),Dt=p(Lt),$e=g(Lt,2),kt=p($e),si=g($e,2),li=p(si),ei=g(ot,2),Li=p(ei),wi=p(Li);se(Et=>{qt=G(vt,1,"new-player-card svelte-1w1mq79",null,qt,Et),S(Dt,u(ct).characterName),S(kt,u(ct).serverName),S(li,u(ct).joinDate),S(wi,u(ct).citizenid)},[()=>({light:!a().darkMode})]),E(Ft,vt)});var Bt=g(ut,2);{var jt=Ft=>{var ct=EH(),vt=p(ct),qt=p(vt);se(()=>{var ot;return S(qt,`Showing 10 most recent of ${(((ot=u(l))==null?void 0:ot.count)||0)??""} new players this week`)}),E(Ft,ct)};Q(Bt,Ft=>{u(l).players.length>10&&Ft(jt)})}E(Xt,Ut)},wt=Xt=>{var Ut=OH();E(Xt,Ut)};Q(nt,Xt=>{u(l).players.length>0?Xt(lt):Xt(wt,!1)})}E(Fe,et)};Q(Ht,Fe=>{!u(b)&&u(l)&&Fe(Nt)})}var rt=g(Ce,2);let dt;var Qt=p(rt);Qt.__click=[RH,ne];var mi=p(Qt),Ii=g(p(mi)),Ji=g(mi,2),bn=g(Qt,2);{var Ri=Fe=>{var et=qH(),nt=yt(et),lt=p(nt),wt=p(lt),Xt=p(wt),Ut=g(p(Xt));Ut.__click=[zH,V];var ut=p(Ut),Bt=g(ut),jt=g(Ut);jt.__click=[NH,V];var Ft=p(jt),ct=g(Ft),vt=g(jt);vt.__click=[FH,V];var qt=p(vt),ot=g(qt),Lt=g(vt);Lt.__click=[HH,V];var Dt=p(Lt),$e=g(Dt),kt=g(wt);Vt(kt,21,()=>u(D),Si,(ai,ci,bi)=>{var yi=jH(),ti=p(yi),Zi=p(ti),nn=g(ti),cn=p(nn),dn=g(nn),Cn=p(dn),Qi=g(dn),sn=p(Qi),En=g(Qi),ps=p(En);se(($t,hn,vi)=>{S(Zi,(u(A)-1)*T+bi+1),S(cn,u(ci).characterName),S(Cn,$t),S(sn,hn),S(ps,vi)},[()=>re(u(ci).cash),()=>re(u(ci).bank),()=>re(u(ci).total)]),E(ai,yi)});var si=g(nt,2),li=p(si),ei=p(li),Li=g(li,2),wi=p(Li);wi.__click=[$H,ee];var Et=g(wi,2);Vt(Et,17,()=>Array(u(I)),Si,(ai,ci,bi,yi)=>{var ti=VH();ti.__click=()=>W(bi+1),ti.textContent=bi+1,se(()=>G(ti,1,`btn btn-sm ${u(A)===bi+1?"btn-primary":"btn-outline-primary"}`,"svelte-1w1mq79")),E(ai,ti)});var ft=g(Et,2);ft.__click=[WH,le],se((ai,ci,bi,yi,ti,Zi,nn,cn,dn)=>{S(ut,`${ai??""} `),G(Bt,1,`fas ${ci??""} ms-2`,"svelte-1w1mq79"),S(Ft,`${bi??""} `),G(ct,1,`fas ${yi??""} ms-2`,"svelte-1w1mq79"),S(qt,`${ti??""} `),G(ot,1,`fas ${Zi??""} ms-2`,"svelte-1w1mq79"),S(Dt,`${nn??""} `),G($e,1,`fas ${cn??""} ms-2`,"svelte-1w1mq79"),S(ei,dn),wi.disabled=u(A)===1,ft.disabled=u(A)===u(I)},[()=>s()("pages.analytics.character"),()=>q("characterName"),()=>s()("pages.analytics.cash"),()=>q("cash"),()=>s()("pages.analytics.bank"),()=>q("bank"),()=>s()("pages.analytics.total"),()=>q("total"),()=>s()("pages.analytics.showing",{values:{start:(u(A)-1)*T+1,end:Math.min(u(A)*T,u(o).length),total:u(o).length}})]),E(Fe,et)};Q(bn,Fe=>{u(v)||Fe(Ri)})}se((Fe,et,nt,lt,wt,Xt,Ut,ut,Bt,jt,Ft,ct,vt,qt,ot,Lt,Dt,$e,kt,si,li,ei)=>{var Li;S(F,Fe),ce=G(U,1,"metric-card svelte-1w1mq79",null,ce,et),S(Me,nt),S(Pe,lt),ue=G(Be,1,"metric-card svelte-1w1mq79",null,ue,wt),S(Le,Xt),S(_e,Ut),Te=G(be,1,"metric-card svelte-1w1mq79",null,Te,ut),S(ge,Bt),we=G(xe,1,"metric-card svelte-1w1mq79",null,we,jt),S(Ge,Ft),S(Ye,ct),Ue=G(Je,1,"metric-card svelte-1w1mq79",null,Ue,vt),S(He,qt),S(it,ot),Tt=G(pt,1,"metric-card svelte-1w1mq79",null,Tt,Lt),S(oi,Dt),S(Kt,$e),Rt=G(Wt,1,"section-container mb-4 svelte-1w1mq79",null,Rt,kt),G(Ci,1,`fas ${u(y)?"fa-chevron-down":"fa-chevron-up"} toggle-icon`,"svelte-1w1mq79"),Ae=G(Ce,1,"section-container mb-4 svelte-1w1mq79",null,Ae,si),S(bt,` New Players This Week (${(((Li=u(l))==null?void 0:Li.count)||0)??""})`),G(Pt,1,`fas ${u(b)?"fa-chevron-down":"fa-chevron-up"} toggle-icon`,"svelte-1w1mq79"),dt=G(rt,1,"section-container svelte-1w1mq79",null,dt,li),S(Ii,` ${ei??""}`),G(Ji,1,`fas ${u(v)?"fa-chevron-down":"fa-chevron-up"} toggle-icon`,"svelte-1w1mq79")},[()=>s()("pages.analytics.title"),()=>({light:!a().darkMode}),()=>{var Fe;return j(((Fe=u(r))==null?void 0:Fe.totalCharacters)||0)},()=>s()("pages.analytics.totalcharacters"),()=>({light:!a().darkMode}),()=>{var Fe;return j(((Fe=u(r))==null?void 0:Fe.uniquePlayers)||0)},()=>s()("pages.analytics.uniqueplayers"),()=>({light:!a().darkMode}),()=>{var Fe;return j(((Fe=u(r))==null?void 0:Fe.newPlayersThisWeek)||0)},()=>({light:!a().darkMode}),()=>{var Fe;return j(((Fe=u(r))==null?void 0:Fe.totalItems)||0)},()=>s()("pages.analytics.totalitems"),()=>({light:!a().darkMode}),()=>{var Fe;return re(((Fe=u(r))==null?void 0:Fe.totalWealth)||0)},()=>s()("pages.analytics.totalwealth"),()=>({light:!a().darkMode}),()=>{var Fe;return j(((Fe=u(r))==null?void 0:Fe.totalVehicles)||0)},()=>s()("pages.analytics.totalvehicles"),()=>({light:!a().darkMode}),()=>({light:!a().darkMode}),()=>({light:!a().darkMode}),()=>s()("pages.analytics.wealthleaderboard")]),E(Y,te)};Q(Z,Y=>{u(h)?Y($):Y(X,!1)})}E(i,ie),Yt(),n()}hi(["click"]);let lv=[],Lk=[];(()=>{let i="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<i.length;e++)(e%2?Lk:lv).push(t=t+i[e])})();function YH(i){if(i<768)return!1;for(let e=0,t=lv.length;;){let n=e+t>>1;if(i<lv[n])t=n;else if(i>=Lk[n])e=n+1;else return!0;if(e==t)return!1}}function ly(i){return i>=127462&&i<=127487}const cy=8205;function KH(i,e,t=!0,n=!0){return(t?Dk:XH)(i,e,n)}function Dk(i,e,t){if(e==i.length)return e;e&&Ek(i.charCodeAt(e))&&Ik(i.charCodeAt(e-1))&&e--;let n=Kp(i,e);for(e+=dy(n);e<i.length;){let s=Kp(i,e);if(n==cy||s==cy||t&&YH(s))e+=dy(s),n=s;else if(ly(s)){let a=0,r=e-2;for(;r>=0&&ly(Kp(i,r));)a++,r-=2;if(a%2==0)break;e+=2}else break}return e}function XH(i,e,t){for(;e>0;){let n=Dk(i,e-2,t);if(n<e)return n;e--}return 0}function Kp(i,e){let t=i.charCodeAt(e);if(!Ik(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return Ek(n)?(t-55296<<10)+(n-56320)+65536:t}function Ek(i){return i>=56320&&i<57344}function Ik(i){return i>=55296&&i<56320}function dy(i){return i<65536?1:2}let Wi=class Ok{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Rl(this,e,t);let s=[];return this.decompose(0,e,s,2),n.length&&n.decompose(0,n.length,s,3),this.decompose(t,this.length,s,1),Fa.from(s,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Rl(this,e,t);let n=[];return this.decompose(e,t,n,0),Fa.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),s=new $c(this),a=new $c(e);for(let r=t,o=t;;){if(s.next(r),a.next(r),r=0,s.lineBreak!=a.lineBreak||s.done!=a.done||s.value!=a.value)return!1;if(o+=s.value.length,s.done||o>=n)return!0}}iter(e=1){return new $c(this,e)}iterRange(e,t=this.length){return new Bk(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;n=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Rk(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ok.empty:e.length<=32?new In(e):Fa.from(In.split(e,[]))}};class In extends Wi{constructor(e,t=JH(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,s){for(let a=0;;a++){let r=this.text[a],o=s+r.length;if((t?n:o)>=e)return new QH(s,o,n,r);s=o+1,n++}}decompose(e,t,n,s){let a=e<=0&&t>=this.length?this:new In(hy(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let r=n.pop(),o=fu(a.text,r.text.slice(),0,a.length);if(o.length<=32)n.push(new In(o,r.length+a.length));else{let l=o.length>>1;n.push(new In(o.slice(0,l)),new In(o.slice(l)))}}else n.push(a)}replace(e,t,n){if(!(n instanceof In))return super.replace(e,t,n);[e,t]=Rl(this,e,t);let s=fu(this.text,fu(n.text,hy(this.text,0,e)),t),a=this.length+n.length-(t-e);return s.length<=32?new In(s,a):Fa.from(In.split(s,[]),a)}sliceString(e,t=this.length,n=`
`){[e,t]=Rl(this,e,t);let s="";for(let a=0,r=0;a<=t&&r<this.text.length;r++){let o=this.text[r],l=a+o.length;a>e&&r&&(s+=n),e<l&&t>a&&(s+=o.slice(Math.max(0,e-a),t-a)),a=l+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],s=-1;for(let a of e)n.push(a),s+=a.length+1,n.length==32&&(t.push(new In(n,s)),n=[],s=-1);return s>-1&&t.push(new In(n,s)),t}}class Fa extends Wi{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,s){for(let a=0;;a++){let r=this.children[a],o=s+r.length,l=n+r.lines-1;if((t?l:o)>=e)return r.lineInner(e,t,n,s);s=o+1,n=l+1}}decompose(e,t,n,s){for(let a=0,r=0;r<=t&&a<this.children.length;a++){let o=this.children[a],l=r+o.length;if(e<=l&&t>=r){let d=s&((r<=e?1:0)|(l>=t?2:0));r>=e&&l<=t&&!d?n.push(o):o.decompose(e-r,t-r,n,d)}r=l+1}}replace(e,t,n){if([e,t]=Rl(this,e,t),n.lines<this.lines)for(let s=0,a=0;s<this.children.length;s++){let r=this.children[s],o=a+r.length;if(e>=a&&t<=o){let l=r.replace(e-a,t-a,n),d=this.lines-r.lines+l.lines;if(l.lines<d>>4&&l.lines>d>>6){let h=this.children.slice();return h[s]=l,new Fa(h,this.length-(t-e)+n.length)}return super.replace(a,o,l)}a=o+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=Rl(this,e,t);let s="";for(let a=0,r=0;a<this.children.length&&r<=t;a++){let o=this.children[a],l=r+o.length;r>e&&a&&(s+=n),e<l&&t>r&&(s+=o.sliceString(e-r,t-r,n)),r=l+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Fa))return 0;let n=0,[s,a,r,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,a+=t){if(s==r||a==o)return n;let l=this.children[s],d=e.children[a];if(l!=d)return n+l.scanIdentical(d,t);n+=l.length+1}}static from(e,t=e.reduce((n,s)=>n+s.length+1,-1)){let n=0;for(let b of e)n+=b.lines;if(n<32){let b=[];for(let y of e)y.flatten(b);return new In(b,t)}let s=Math.max(32,n>>5),a=s<<1,r=s>>1,o=[],l=0,d=-1,h=[];function m(b){let y;if(b.lines>a&&b instanceof Fa)for(let x of b.children)m(x);else b.lines>r&&(l>r||!l)?(v(),o.push(b)):b instanceof In&&l&&(y=h[h.length-1])instanceof In&&b.lines+y.lines<=32?(l+=b.lines,d+=b.length+1,h[h.length-1]=new In(y.text.concat(b.text),y.length+1+b.length)):(l+b.lines>s&&v(),l+=b.lines,d+=b.length+1,h.push(b))}function v(){l!=0&&(o.push(h.length==1?h[0]:Fa.from(h,d)),d=-1,l=h.length=0)}for(let b of e)m(b);return v(),o.length==1?o[0]:new Fa(o,t)}}Wi.empty=new In([""],0);function JH(i){let e=-1;for(let t of i)e+=t.length+1;return e}function fu(i,e,t=0,n=1e9){for(let s=0,a=0,r=!0;a<i.length&&s<=n;a++){let o=i[a],l=s+o.length;l>=t&&(l>n&&(o=o.slice(0,n-s)),s<t&&(o=o.slice(t-s)),r?(e[e.length-1]+=o,r=!1):e.push(o)),s=l+1}return e}function hy(i,e,t){return fu(i,[""],e,t)}class $c{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof In?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,s=this.nodes[n],a=this.offsets[n],r=a>>1,o=s instanceof In?s.text.length:s.children.length;if(r==(t>0?o:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((a&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof In){let l=s.text[r+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=s.children[r+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof In?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Bk{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new $c(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=n?s:t<0?s.slice(s.length-n):s.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Rk{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Wi.prototype[Symbol.iterator]=function(){return this.iter()},$c.prototype[Symbol.iterator]=Bk.prototype[Symbol.iterator]=Rk.prototype[Symbol.iterator]=function(){return this});class QH{constructor(e,t,n,s){this.from=e,this.to=t,this.number=n,this.text=s}get length(){return this.to-this.from}}function Rl(i,e,t){return e=Math.max(0,Math.min(i.length,e)),[e,Math.max(e,Math.min(i.length,t))]}function ts(i,e,t=!0,n=!0){return KH(i,e,t,n)}function e7(i){return i>=56320&&i<57344}function t7(i){return i>=55296&&i<56320}function Bs(i,e){let t=i.charCodeAt(e);if(!t7(t)||e+1==i.length)return t;let n=i.charCodeAt(e+1);return e7(n)?(t-55296<<10)+(n-56320)+65536:t}function Gg(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}function Ha(i){return i<65536?1:2}const cv=/\r\n?|\n/;var ys=function(i){return i[i.Simple=0]="Simple",i[i.TrackDel=1]="TrackDel",i[i.TrackBefore=2]="TrackBefore",i[i.TrackAfter=3]="TrackAfter",i}(ys||(ys={}));class Ua{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,s=0;t<this.sections.length;){let a=this.sections[t++],r=this.sections[t++];r<0?(e(n,s,a),s+=a):s+=r,n+=a}}iterChangedRanges(e,t=!1){dv(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],s=this.sections[t++];s<0?e.push(n,s):e.push(s,n)}return new Ua(e)}composeDesc(e){return this.empty?e:e.empty?this:zk(this,e)}mapDesc(e,t=!1){return e.empty?this:hv(this,e,t)}mapPos(e,t=-1,n=ys.Simple){let s=0,a=0;for(let r=0;r<this.sections.length;){let o=this.sections[r++],l=this.sections[r++],d=s+o;if(l<0){if(d>e)return a+(e-s);a+=o}else{if(n!=ys.Simple&&d>=e&&(n==ys.TrackDel&&s<e&&d>e||n==ys.TrackBefore&&s<e||n==ys.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!o)return e==s||t<0?a:a+l;a+=l}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return a}touchesRange(e,t=e){for(let n=0,s=0;n<this.sections.length&&s<=t;){let a=this.sections[n++],r=this.sections[n++],o=s+a;if(r>=0&&s<=t&&o>=e)return s<e&&o>t?"cover":!0;s=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+n+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Ua(e)}static create(e){return new Ua(e)}}class Wn extends Ua{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return dv(this,(t,n,s,a,r)=>e=e.replace(s,s+(n-t),r),!1),e}mapDesc(e,t=!1){return hv(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let s=0,a=0;s<t.length;s+=2){let r=t[s],o=t[s+1];if(o>=0){t[s]=o,t[s+1]=r;let l=s>>1;for(;n.length<l;)n.push(Wi.empty);n.push(r?e.slice(a,a+r):Wi.empty)}a+=r}return new Wn(t,n)}compose(e){return this.empty?e:e.empty?this:zk(this,e,!0)}map(e,t=!1){return e.empty?this:hv(this,e,t,!0)}iterChanges(e,t=!1){dv(this,e,t)}get desc(){return Ua.create(this.sections)}filter(e){let t=[],n=[],s=[],a=new ld(this);e:for(let r=0,o=0;;){let l=r==e.length?1e9:e[r++];for(;o<l||o==l&&a.len==0;){if(a.done)break e;let h=Math.min(a.len,l-o);ls(s,h,-1);let m=a.ins==-1?-1:a.off==0?a.ins:0;ls(t,h,m),m>0&&$r(n,t,a.text),a.forward(h),o+=h}let d=e[r++];for(;o<d;){if(a.done)break e;let h=Math.min(a.len,d-o);ls(t,h,-1),ls(s,h,a.ins==-1?-1:a.off==0?a.ins:0),a.forward(h),o+=h}}return{changes:new Wn(t,n),filtered:Ua.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],s=this.sections[t+1];s<0?e.push(n):s==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let s=[],a=[],r=0,o=null;function l(h=!1){if(!h&&!s.length)return;r<t&&ls(s,t-r,-1);let m=new Wn(s,a);o=o?o.compose(m.map(o)):m,s=[],a=[],r=0}function d(h){if(Array.isArray(h))for(let m of h)d(m);else if(h instanceof Wn){if(h.length!=t)throw new RangeError(`Mismatched change set length (got ${h.length}, expected ${t})`);l(),o=o?o.compose(h.map(o)):h}else{let{from:m,to:v=m,insert:b}=h;if(m>v||m<0||v>t)throw new RangeError(`Invalid change range ${m} to ${v} (in doc of length ${t})`);let y=b?typeof b=="string"?Wi.of(b.split(n||cv)):b:Wi.empty,x=y.length;if(m==v&&x==0)return;m<r&&l(),m>r&&ls(s,m-r,-1),ls(s,v-m,x),$r(a,s,y),r=v}}return d(e),l(!o),o}static empty(e){return new Wn(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")t.push(a,-1);else{if(!Array.isArray(a)||typeof a[0]!="number"||a.some((r,o)=>o&&typeof r!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(a.length==1)t.push(a[0],0);else{for(;n.length<s;)n.push(Wi.empty);n[s]=Wi.of(a.slice(1)),t.push(a[0],n[s].length)}}}return new Wn(t,n)}static createSet(e,t){return new Wn(e,t)}}function ls(i,e,t,n=!1){if(e==0&&t<=0)return;let s=i.length-2;s>=0&&t<=0&&t==i[s+1]?i[s]+=e:s>=0&&e==0&&i[s]==0?i[s+1]+=t:n?(i[s]+=e,i[s+1]+=t):i.push(e,t)}function $r(i,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<i.length)i[i.length-1]=i[i.length-1].append(t);else{for(;i.length<n;)i.push(Wi.empty);i.push(t)}}function dv(i,e,t){let n=i.inserted;for(let s=0,a=0,r=0;r<i.sections.length;){let o=i.sections[r++],l=i.sections[r++];if(l<0)s+=o,a+=o;else{let d=s,h=a,m=Wi.empty;for(;d+=o,h+=l,l&&n&&(m=m.append(n[r-2>>1])),!(t||r==i.sections.length||i.sections[r+1]<0);)o=i.sections[r++],l=i.sections[r++];e(s,d,a,h,m),s=d,a=h}}}function hv(i,e,t,n=!1){let s=[],a=n?[]:null,r=new ld(i),o=new ld(e);for(let l=-1;;){if(r.done&&o.len||o.done&&r.len)throw new Error("Mismatched change set lengths");if(r.ins==-1&&o.ins==-1){let d=Math.min(r.len,o.len);ls(s,d,-1),r.forward(d),o.forward(d)}else if(o.ins>=0&&(r.ins<0||l==r.i||r.off==0&&(o.len<r.len||o.len==r.len&&!t))){let d=o.len;for(ls(s,o.ins,-1);d;){let h=Math.min(r.len,d);r.ins>=0&&l<r.i&&r.len<=h&&(ls(s,0,r.ins),a&&$r(a,s,r.text),l=r.i),r.forward(h),d-=h}o.next()}else if(r.ins>=0){let d=0,h=r.len;for(;h;)if(o.ins==-1){let m=Math.min(h,o.len);d+=m,h-=m,o.forward(m)}else if(o.ins==0&&o.len<h)h-=o.len,o.next();else break;ls(s,d,l<r.i?r.ins:0),a&&l<r.i&&$r(a,s,r.text),l=r.i,r.forward(r.len-h)}else{if(r.done&&o.done)return a?Wn.createSet(s,a):Ua.create(s);throw new Error("Mismatched change set lengths")}}}function zk(i,e,t=!1){let n=[],s=t?[]:null,a=new ld(i),r=new ld(e);for(let o=!1;;){if(a.done&&r.done)return s?Wn.createSet(n,s):Ua.create(n);if(a.ins==0)ls(n,a.len,0,o),a.next();else if(r.len==0&&!r.done)ls(n,0,r.ins,o),s&&$r(s,n,r.text),r.next();else{if(a.done||r.done)throw new Error("Mismatched change set lengths");{let l=Math.min(a.len2,r.len),d=n.length;if(a.ins==-1){let h=r.ins==-1?-1:r.off?0:r.ins;ls(n,l,h,o),s&&h&&$r(s,n,r.text)}else r.ins==-1?(ls(n,a.off?0:a.len,l,o),s&&$r(s,n,a.textBit(l))):(ls(n,a.off?0:a.len,r.off?0:r.ins,o),s&&!r.off&&$r(s,n,r.text));o=(a.ins>l||r.ins>=0&&r.len>l)&&(o||n.length>d),a.forward2(l),r.forward(l)}}}}class ld{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Wi.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Wi.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class To{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,s;return this.empty?n=s=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),n==this.from&&s==this.to?this:new To(n,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return je.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return je.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return je.range(e.anchor,e.head)}static create(e,t,n){return new To(e,t,n)}}class je{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:je.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new je([this.main],0)}addRange(e,t=!0){return je.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,je.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new je(e.ranges.map(t=>To.fromJSON(t)),e.main)}static single(e,t=e){return new je([je.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,s=0;s<e.length;s++){let a=e[s];if(a.empty?a.from<=n:a.from<n)return je.normalized(e.slice(),t);n=a.to}return new je(e,t)}static cursor(e,t=0,n,s){return To.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(s??16777215)<<6)}static range(e,t,n,s){let a=(n??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?To.create(t,e,48|a):To.create(e,t,(t>e?8:0)|a)}static normalized(e,t=0){let n=e[t];e.sort((s,a)=>s.from-a.from),t=e.indexOf(n);for(let s=1;s<e.length;s++){let a=e[s],r=e[s-1];if(a.empty?a.from<=r.to:a.from<r.to){let o=r.from,l=Math.max(a.to,r.to);s<=t&&t--,e.splice(--s,2,a.anchor>a.head?je.range(l,o):je.range(o,l))}}return new je(e,t)}}function Nk(i,e){for(let t of i.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Zg=0;class Mt{constructor(e,t,n,s,a){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=s,this.id=Zg++,this.default=e([]),this.extensions=typeof a=="function"?a(this):a}get reader(){return this}static define(e={}){return new Mt(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Yg),!!e.static,e.enables)}of(e){return new pu([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new pu(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new pu(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Yg(i,e){return i==e||i.length==e.length&&i.every((t,n)=>t===e[n])}class pu{constructor(e,t,n,s){this.dependencies=e,this.facet=t,this.type=n,this.value=s,this.id=Zg++}dynamicSlot(e){var t;let n=this.value,s=this.facet.compareInput,a=this.id,r=e[a]>>1,o=this.type==2,l=!1,d=!1,h=[];for(let m of this.dependencies)m=="doc"?l=!0:m=="selection"?d=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&h.push(e[m.id]);return{create(m){return m.values[r]=n(m),1},update(m,v){if(l&&v.docChanged||d&&(v.docChanged||v.selection)||uv(m,h)){let b=n(m);if(o?!uy(b,m.values[r],s):!s(b,m.values[r]))return m.values[r]=b,1}return 0},reconfigure:(m,v)=>{let b,y=v.config.address[a];if(y!=null){let x=Zu(v,y);if(this.dependencies.every(k=>k instanceof Mt?v.facet(k)===m.facet(k):k instanceof is?v.field(k,!1)==m.field(k,!1):!0)||(o?uy(b=n(m),x,s):s(b=n(m),x)))return m.values[r]=x,0}else b=n(m);return m.values[r]=b,1}}}}function uy(i,e,t){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!t(i[n],e[n]))return!1;return!0}function uv(i,e){let t=!1;for(let n of e)Vc(i,n)&1&&(t=!0);return t}function i7(i,e,t){let n=t.map(l=>i[l.id]),s=t.map(l=>l.type),a=n.filter(l=>!(l&1)),r=i[e.id]>>1;function o(l){let d=[];for(let h=0;h<n.length;h++){let m=Zu(l,n[h]);if(s[h]==2)for(let v of m)d.push(v);else d.push(m)}return e.combine(d)}return{create(l){for(let d of n)Vc(l,d);return l.values[r]=o(l),1},update(l,d){if(!uv(l,a))return 0;let h=o(l);return e.compare(h,l.values[r])?0:(l.values[r]=h,1)},reconfigure(l,d){let h=uv(l,n),m=d.config.facets[e.id],v=d.facet(e);if(m&&!h&&Yg(t,m))return l.values[r]=v,0;let b=o(l);return e.compare(b,v)?(l.values[r]=v,0):(l.values[r]=b,1)}}}const Dh=Mt.define({static:!0});class is{constructor(e,t,n,s,a){this.id=e,this.createF=t,this.updateF=n,this.compareF=s,this.spec=a,this.provides=void 0}static define(e){let t=new is(Zg++,e.create,e.update,e.compare||((n,s)=>n===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Dh).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,s)=>{let a=n.values[t],r=this.updateF(a,s);return this.compareF(a,r)?0:(n.values[t]=r,1)},reconfigure:(n,s)=>{let a=n.facet(Dh),r=s.facet(Dh),o;return(o=a.find(l=>l.field==this))&&o!=r.find(l=>l.field==this)?(n.values[t]=o.create(n),1):s.config.address[this.id]!=null?(n.values[t]=s.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,Dh.of({field:this,create:e})]}get extension(){return this}}const Co={lowest:4,low:3,default:2,high:1,highest:0};function mc(i){return e=>new Fk(e,i)}const Xo={highest:mc(Co.highest),high:mc(Co.high),default:mc(Co.default),low:mc(Co.low),lowest:mc(Co.lowest)};class Fk{constructor(e,t){this.inner=e,this.prec=t}}class Hf{of(e){return new fv(this,e)}reconfigure(e){return Hf.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class fv{constructor(e,t){this.compartment=e,this.inner=t}}class Gu{constructor(e,t,n,s,a,r){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=s,this.staticValues=a,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let s=[],a=Object.create(null),r=new Map;for(let v of n7(e,t,r))v instanceof is?s.push(v):(a[v.facet.id]||(a[v.facet.id]=[])).push(v);let o=Object.create(null),l=[],d=[];for(let v of s)o[v.id]=d.length<<1,d.push(b=>v.slot(b));let h=n==null?void 0:n.config.facets;for(let v in a){let b=a[v],y=b[0].facet,x=h&&h[v]||[];if(b.every(k=>k.type==0))if(o[y.id]=l.length<<1|1,Yg(x,b))l.push(n.facet(y));else{let k=y.combine(b.map(C=>C.value));l.push(n&&y.compare(k,n.facet(y))?n.facet(y):k)}else{for(let k of b)k.type==0?(o[k.id]=l.length<<1|1,l.push(k.value)):(o[k.id]=d.length<<1,d.push(C=>k.dynamicSlot(C)));o[y.id]=d.length<<1,d.push(k=>i7(k,y,b))}}let m=d.map(v=>v(o));return new Gu(e,r,m,o,l,a)}}function n7(i,e,t){let n=[[],[],[],[],[]],s=new Map;function a(r,o){let l=s.get(r);if(l!=null){if(l<=o)return;let d=n[l].indexOf(r);d>-1&&n[l].splice(d,1),r instanceof fv&&t.delete(r.compartment)}if(s.set(r,o),Array.isArray(r))for(let d of r)a(d,o);else if(r instanceof fv){if(t.has(r.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(r.compartment)||r.inner;t.set(r.compartment,d),a(d,o)}else if(r instanceof Fk)a(r.inner,r.prec);else if(r instanceof is)n[o].push(r),r.provides&&a(r.provides,o);else if(r instanceof pu)n[o].push(r),r.facet.extensions&&a(r.facet.extensions,Co.default);else{let d=r.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${r}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);a(d,o)}}return a(i,Co.default),n.reduce((r,o)=>r.concat(o))}function Vc(i,e){if(e&1)return 2;let t=e>>1,n=i.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;i.status[t]=4;let s=i.computeSlot(i,i.config.dynamicSlots[t]);return i.status[t]=2|s}function Zu(i,e){return e&1?i.config.staticValues[e>>1]:i.values[e>>1]}const Hk=Mt.define(),pv=Mt.define({combine:i=>i.some(e=>e),static:!0}),jk=Mt.define({combine:i=>i.length?i[0]:void 0,static:!0}),$k=Mt.define(),Vk=Mt.define(),Wk=Mt.define(),qk=Mt.define({combine:i=>i.length?i[0]:!1});class Cr{constructor(e,t){this.type=e,this.value=t}static define(){return new s7}}class s7{of(e){return new Cr(this,e)}}class a7{constructor(e){this.map=e}of(e){return new _i(this,e)}}class _i{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new _i(this.type,t)}is(e){return this.type==e}static define(e={}){return new a7(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let s of e){let a=s.map(t);a&&n.push(a)}return n}}_i.reconfigure=_i.define();_i.appendConfig=_i.define();class Un{constructor(e,t,n,s,a,r){this.startState=e,this.changes=t,this.selection=n,this.effects=s,this.annotations=a,this.scrollIntoView=r,this._doc=null,this._state=null,n&&Nk(n,t.newLength),a.some(o=>o.type==Un.time)||(this.annotations=a.concat(Un.time.of(Date.now())))}static create(e,t,n,s,a,r){return new Un(e,t,n,s,a,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Un.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Un.time=Cr.define();Un.userEvent=Cr.define();Un.addToHistory=Cr.define();Un.remote=Cr.define();function r7(i,e){let t=[];for(let n=0,s=0;;){let a,r;if(n<i.length&&(s==e.length||e[s]>=i[n]))a=i[n++],r=i[n++];else if(s<e.length)a=e[s++],r=e[s++];else return t;!t.length||t[t.length-1]<a?t.push(a,r):t[t.length-1]<r&&(t[t.length-1]=r)}}function Uk(i,e,t){var n;let s,a,r;return t?(s=e.changes,a=Wn.empty(e.changes.length),r=i.changes.compose(e.changes)):(s=e.changes.map(i.changes),a=i.changes.mapDesc(e.changes,!0),r=i.changes.compose(s)),{changes:r,selection:e.selection?e.selection.map(a):(n=i.selection)===null||n===void 0?void 0:n.map(s),effects:_i.mapEffects(i.effects,s).concat(_i.mapEffects(e.effects,a)),annotations:i.annotations.length?i.annotations.concat(e.annotations):e.annotations,scrollIntoView:i.scrollIntoView||e.scrollIntoView}}function mv(i,e,t){let n=e.selection,s=bl(e.annotations);return e.userEvent&&(s=s.concat(Un.userEvent.of(e.userEvent))),{changes:e.changes instanceof Wn?e.changes:Wn.of(e.changes||[],t,i.facet(jk)),selection:n&&(n instanceof je?n:je.single(n.anchor,n.head)),effects:bl(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Gk(i,e,t){let n=mv(i,e.length?e[0]:{},i.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let a=1;a<e.length;a++){e[a].filter===!1&&(t=!1);let r=!!e[a].sequential;n=Uk(n,mv(i,e[a],r?n.changes.newLength:i.doc.length),r)}let s=Un.create(i,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return l7(t?o7(s):s)}function o7(i){let e=i.startState,t=!0;for(let s of e.facet($k)){let a=s(i);if(a===!1){t=!1;break}Array.isArray(a)&&(t=t===!0?a:r7(t,a))}if(t!==!0){let s,a;if(t===!1)a=i.changes.invertedDesc,s=Wn.empty(e.doc.length);else{let r=i.changes.filter(t);s=r.changes,a=r.filtered.mapDesc(r.changes).invertedDesc}i=Un.create(e,s,i.selection&&i.selection.map(a),_i.mapEffects(i.effects,a),i.annotations,i.scrollIntoView)}let n=e.facet(Vk);for(let s=n.length-1;s>=0;s--){let a=n[s](i);a instanceof Un?i=a:Array.isArray(a)&&a.length==1&&a[0]instanceof Un?i=a[0]:i=Gk(e,bl(a),!1)}return i}function l7(i){let e=i.startState,t=e.facet(Wk),n=i;for(let s=t.length-1;s>=0;s--){let a=t[s](i);a&&Object.keys(a).length&&(n=Uk(n,mv(e,a,i.changes.newLength),!0))}return n==i?i:Un.create(e,i.changes,i.selection,n.effects,n.annotations,n.scrollIntoView)}const c7=[];function bl(i){return i==null?c7:Array.isArray(i)?i:[i]}var kn=function(i){return i[i.Word=0]="Word",i[i.Space=1]="Space",i[i.Other=2]="Other",i}(kn||(kn={}));const d7=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let vv;try{vv=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function h7(i){if(vv)return vv.test(i);for(let e=0;e<i.length;e++){let t=i[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||d7.test(t)))return!0}return!1}function u7(i){return e=>{if(!/\S/.test(e))return kn.Space;if(h7(e))return kn.Word;for(let t=0;t<i.length;t++)if(e.indexOf(i[t])>-1)return kn.Word;return kn.Other}}class ji{constructor(e,t,n,s,a,r){this.config=e,this.doc=t,this.selection=n,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=a,r&&(r._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Vc(this,o<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Vc(this,n),Zu(this,n)}update(...e){return Gk(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:s}=t;for(let o of e.effects)o.is(Hf.reconfigure)?(t&&(s=new Map,t.compartments.forEach((l,d)=>s.set(d,l)),t=null),s.set(o.value.compartment,o.value.extension)):o.is(_i.reconfigure)?(t=null,n=o.value):o.is(_i.appendConfig)&&(t=null,n=bl(n).concat(o.value));let a;t?a=e.startState.values.slice():(t=Gu.resolve(n,s,this),a=new ji(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,d)=>d.reconfigure(l,this),null).values);let r=e.startState.facet(pv)?e.newSelection:e.newSelection.asSingle();new ji(t,e.newDoc,r,a,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:je.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),s=this.changes(n.changes),a=[n.range],r=bl(n.effects);for(let o=1;o<t.ranges.length;o++){let l=e(t.ranges[o]),d=this.changes(l.changes),h=d.map(s);for(let v=0;v<o;v++)a[v]=a[v].map(h);let m=s.mapDesc(d,!0);a.push(l.range.map(m)),s=s.compose(h),r=_i.mapEffects(r,h).concat(_i.mapEffects(bl(l.effects),m))}return{changes:s,selection:je.create(a,t.mainIndex),effects:r}}changes(e=[]){return e instanceof Wn?e:Wn.of(e,this.doc.length,this.facet(ji.lineSeparator))}toText(e){return Wi.of(e.split(this.facet(ji.lineSeparator)||cv))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Vc(this,t),Zu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let s=e[n];s instanceof is&&this.config.address[s.id]!=null&&(t[n]=s.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(n){for(let a in n)if(Object.prototype.hasOwnProperty.call(e,a)){let r=n[a],o=e[a];s.push(r.init(l=>r.spec.fromJSON(o,l)))}}return ji.create({doc:e.doc,selection:je.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=Gu.resolve(e.extensions||[],new Map),n=e.doc instanceof Wi?e.doc:Wi.of((e.doc||"").split(t.staticFacet(ji.lineSeparator)||cv)),s=e.selection?e.selection instanceof je?e.selection:je.single(e.selection.anchor,e.selection.head):je.single(0);return Nk(s,n.length),t.staticFacet(pv)||(s=s.asSingle()),new ji(t,n,s,t.dynamicSlots.map(()=>null),(a,r)=>r.create(a),null)}get tabSize(){return this.facet(ji.tabSize)}get lineBreak(){return this.facet(ji.lineSeparator)||`
`}get readOnly(){return this.facet(qk)}phrase(e,...t){for(let n of this.facet(ji.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,s)=>{if(s=="$")return"$";let a=+(s||1);return!a||a>t.length?n:t[a-1]})),e}languageDataAt(e,t,n=-1){let s=[];for(let a of this.facet(Hk))for(let r of a(this,t,n))Object.prototype.hasOwnProperty.call(r,e)&&s.push(r[e]);return s}charCategorizer(e){return u7(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:s}=this.doc.lineAt(e),a=this.charCategorizer(e),r=e-n,o=e-n;for(;r>0;){let l=ts(t,r,!1);if(a(t.slice(l,r))!=kn.Word)break;r=l}for(;o<s;){let l=ts(t,o);if(a(t.slice(o,l))!=kn.Word)break;o=l}return r==o?null:je.range(r+n,o+n)}}ji.allowMultipleSelections=pv;ji.tabSize=Mt.define({combine:i=>i.length?i[0]:4});ji.lineSeparator=jk;ji.readOnly=qk;ji.phrases=Mt.define({compare(i,e){let t=Object.keys(i),n=Object.keys(e);return t.length==n.length&&t.every(s=>i[s]==e[s])}});ji.languageData=Hk;ji.changeFilter=$k;ji.transactionFilter=Vk;ji.transactionExtender=Wk;Hf.reconfigure=_i.define();function Xa(i,e,t={}){let n={};for(let s of i)for(let a of Object.keys(s)){let r=s[a],o=n[a];if(o===void 0)n[a]=r;else if(!(o===r||r===void 0))if(Object.hasOwnProperty.call(t,a))n[a]=t[a](o,r);else throw new Error("Config merge conflict for field "+a)}for(let s in e)n[s]===void 0&&(n[s]=e[s]);return n}class Ho{eq(e){return this==e}range(e,t=e){return gv.create(e,t,this)}}Ho.prototype.startSide=Ho.prototype.endSide=0;Ho.prototype.point=!1;Ho.prototype.mapMode=ys.TrackDel;let gv=class Zk{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Zk(e,t,n)}};function _v(i,e){return i.from-e.from||i.value.startSide-e.value.startSide}class Kg{constructor(e,t,n,s){this.from=e,this.to=t,this.value=n,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,s=0){let a=n?this.to:this.from;for(let r=s,o=a.length;;){if(r==o)return r;let l=r+o>>1,d=a[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==r)return d>=0?r:o;d>=0?o=l:r=l+1}}between(e,t,n,s){for(let a=this.findIndex(t,-1e9,!0),r=this.findIndex(n,1e9,!1,a);a<r;a++)if(s(this.from[a]+e,this.to[a]+e,this.value[a])===!1)return!1}map(e,t){let n=[],s=[],a=[],r=-1,o=-1;for(let l=0;l<this.value.length;l++){let d=this.value[l],h=this.from[l]+e,m=this.to[l]+e,v,b;if(h==m){let y=t.mapPos(h,d.startSide,d.mapMode);if(y==null||(v=b=y,d.startSide!=d.endSide&&(b=t.mapPos(h,d.endSide),b<v)))continue}else if(v=t.mapPos(h,d.startSide),b=t.mapPos(m,d.endSide),v>b||v==b&&d.startSide>0&&d.endSide<=0)continue;(b-v||d.endSide-d.startSide)<0||(r<0&&(r=v),d.point&&(o=Math.max(o,b-v)),n.push(d),s.push(v-r),a.push(b-r))}return{mapped:n.length?new Kg(s,a,n,o):null,pos:r}}}class Ni{constructor(e,t,n,s){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=s}static create(e,t,n,s){return new Ni(e,t,n,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:s=0,filterTo:a=this.length}=e,r=e.filter;if(t.length==0&&!r)return this;if(n&&(t=t.slice().sort(_v)),this.isEmpty)return t.length?Ni.of(t):this;let o=new Yk(this,null,-1).goto(0),l=0,d=[],h=new yr;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let m=t[l++];h.addInner(m.from,m.to,m.value)||d.push(m)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!r||s>this.chunkEnd(o.chunkIndex)||a<this.chunkPos[o.chunkIndex])&&h.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!r||s>o.to||a<o.from||r(o.from,o.to,o.value))&&(h.addInner(o.from,o.to,o.value)||d.push(gv.create(o.from,o.to,o.value))),o.next());return h.finishInner(this.nextLayer.isEmpty&&!d.length?Ni.empty:this.nextLayer.update({add:d,filter:r,filterFrom:s,filterTo:a}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],s=-1;for(let r=0;r<this.chunk.length;r++){let o=this.chunkPos[r],l=this.chunk[r],d=e.touchesRange(o,o+l.length);if(d===!1)s=Math.max(s,l.maxPoint),t.push(l),n.push(e.mapPos(o));else if(d===!0){let{mapped:h,pos:m}=l.map(o,e);h&&(s=Math.max(s,h.maxPoint),t.push(h),n.push(m))}}let a=this.nextLayer.map(e);return t.length==0?a:new Ni(n,t,a||Ni.empty,s)}between(e,t,n){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let a=this.chunkPos[s],r=this.chunk[s];if(t>=a&&e<=a+r.length&&r.between(a,e-a,t-a,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return cd.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return cd.from(e).goto(t)}static compare(e,t,n,s,a=-1){let r=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=a),o=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=a),l=fy(r,o,n),d=new vc(r,l,a),h=new vc(o,l,a);n.iterGaps((m,v,b)=>py(d,m,h,v,b,s)),n.empty&&n.length==0&&py(d,0,h,0,0,s)}static eq(e,t,n=0,s){s==null&&(s=999999999);let a=e.filter(h=>!h.isEmpty&&t.indexOf(h)<0),r=t.filter(h=>!h.isEmpty&&e.indexOf(h)<0);if(a.length!=r.length)return!1;if(!a.length)return!0;let o=fy(a,r),l=new vc(a,o,0).goto(n),d=new vc(r,o,0).goto(n);for(;;){if(l.to!=d.to||!bv(l.active,d.active)||l.point&&(!d.point||!l.point.eq(d.point)))return!1;if(l.to>s)return!0;l.next(),d.next()}}static spans(e,t,n,s,a=-1){let r=new vc(e,null,a).goto(t),o=t,l=r.openStart;for(;;){let d=Math.min(r.to,n);if(r.point){let h=r.activeForPoint(r.to),m=r.pointFrom<t?h.length+1:r.point.startSide<0?h.length:Math.min(h.length,l);s.point(o,d,r.point,h,m,r.pointRank),l=Math.min(r.openEnd(d),h.length)}else d>o&&(s.span(o,d,r.active,l),l=r.openEnd(d));if(r.to>n)return l+(r.point&&r.to>n?1:0);o=r.to,r.next()}}static of(e,t=!1){let n=new yr;for(let s of e instanceof gv?[e]:t?f7(e):e)n.add(s.from,s.to,s.value);return n.finish()}static join(e){if(!e.length)return Ni.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let s=e[n];s!=Ni.empty;s=s.nextLayer)t=new Ni(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ni.empty=new Ni([],[],null,-1);function f7(i){if(i.length>1)for(let e=i[0],t=1;t<i.length;t++){let n=i[t];if(_v(e,n)>0)return i.slice().sort(_v);e=n}return i}Ni.empty.nextLayer=Ni.empty;class yr{finishChunk(e){this.chunks.push(new Kg(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new yr)).add(e,t,n)}addInner(e,t,n){let s=e-this.lastTo||n.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Ni.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ni.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function fy(i,e,t){let n=new Map;for(let a of i)for(let r=0;r<a.chunk.length;r++)a.chunk[r].maxPoint<=0&&n.set(a.chunk[r],a.chunkPos[r]);let s=new Set;for(let a of e)for(let r=0;r<a.chunk.length;r++){let o=n.get(a.chunk[r]);o!=null&&(t?t.mapPos(o):o)==a.chunkPos[r]&&!(t!=null&&t.touchesRange(o,o+a.chunk[r].length))&&s.add(a.chunk[r])}return s}class Yk{constructor(e,t,n,s=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class cd{constructor(e){this.heap=e}static from(e,t=null,n=-1){let s=[];for(let a=0;a<e.length;a++)for(let r=e[a];!r.isEmpty;r=r.nextLayer)r.maxPoint>=n&&s.push(new Yk(r,t,n,a));return s.length==1?s[0]:new cd(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)Xp(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)Xp(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Xp(this.heap,0)}}}function Xp(i,e){for(let t=i[e];;){let n=(e<<1)+1;if(n>=i.length)break;let s=i[n];if(n+1<i.length&&s.compare(i[n+1])>=0&&(s=i[n+1],n++),t.compare(s)<0)break;i[n]=t,i[e]=s,e=n}}class vc{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=cd.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Eh(this.active,e),Eh(this.activeTo,e),Eh(this.activeRank,e),this.minActive=my(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:s,rank:a}=this.cursor;for(;t<this.activeRank.length&&(a-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ih(this.active,t,n),Ih(this.activeTo,t,s),Ih(this.activeRank,t,a),e&&Ih(e,t,this.cursor.from),this.minActive=my(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),n&&Eh(n,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let a=this.cursor.value;if(!a.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=a,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=a.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let s=n.length-1;s>=0&&n[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function py(i,e,t,n,s,a){i.goto(e),t.goto(n);let r=n+s,o=n,l=n-e;for(;;){let d=i.to+l-t.to,h=d||i.endSide-t.endSide,m=h<0?i.to+l:t.to,v=Math.min(m,r);if(i.point||t.point?i.point&&t.point&&(i.point==t.point||i.point.eq(t.point))&&bv(i.activeForPoint(i.to),t.activeForPoint(t.to))||a.comparePoint(o,v,i.point,t.point):v>o&&!bv(i.active,t.active)&&a.compareRange(o,v,i.active,t.active),m>r)break;(d||i.openEnd!=t.openEnd)&&a.boundChange&&a.boundChange(m),o=m,h<=0&&i.next(),h>=0&&t.next()}}function bv(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(i[t]!=e[t]&&!i[t].eq(e[t]))return!1;return!0}function Eh(i,e){for(let t=e,n=i.length-1;t<n;t++)i[t]=i[t+1];i.pop()}function Ih(i,e,t){for(let n=i.length-1;n>=e;n--)i[n+1]=i[n];i[e]=t}function my(i,e){let t=-1,n=1e9;for(let s=0;s<e.length;s++)(e[s]-n||i[s].endSide-i[t].endSide)<0&&(t=s,n=e[s]);return t}function Kl(i,e,t=i.length){let n=0;for(let s=0;s<t&&s<i.length;)i.charCodeAt(s)==9?(n+=e-n%e,s++):(n++,s=ts(i,s));return n}function yv(i,e,t,n){for(let s=0,a=0;;){if(a>=e)return s;if(s==i.length)break;a+=i.charCodeAt(s)==9?t-a%t:1,s=ts(i,s)}return n===!0?-1:i.length}const xv="ͼ",vy=typeof Symbol>"u"?"__"+xv:Symbol.for(xv),wv=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),gy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class eo{constructor(e,t){this.rules=[];let{finish:n}=t||{};function s(r){return/^@/.test(r)?[r]:r.split(/,\s*/)}function a(r,o,l,d){let h=[],m=/^@(\w+)\b/.exec(r[0]),v=m&&m[1]=="keyframes";if(m&&o==null)return l.push(r[0]+";");for(let b in o){let y=o[b];if(/&/.test(b))a(b.split(/,\s*/).map(x=>r.map(k=>x.replace(/&/,k))).reduce((x,k)=>x.concat(k)),y,l);else if(y&&typeof y=="object"){if(!m)throw new RangeError("The value of a property ("+b+") should be a primitive value.");a(s(b),y,h,v)}else y!=null&&h.push(b.replace(/_.*/,"").replace(/[A-Z]/g,x=>"-"+x.toLowerCase())+": "+y+";")}(h.length||v)&&l.push((n&&!m&&!d?r.map(n):r).join(", ")+" {"+h.join(" ")+"}")}for(let r in e)a(s(r),e[r],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=gy[vy]||1;return gy[vy]=e+1,xv+e.toString(36)}static mount(e,t,n){let s=e[wv],a=n&&n.nonce;s?a&&s.setNonce(a):s=new p7(e,a),s.mount(Array.isArray(t)?t:[t],e)}}let _y=new Map;class p7{constructor(e,t){let n=e.ownerDocument||e,s=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let a=_y.get(n);if(a)return e[wv]=a;this.sheet=new s.CSSStyleSheet,_y.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[wv]=this}mount(e,t){let n=this.sheet,s=0,a=0;for(let r=0;r<e.length;r++){let o=e[r],l=this.modules.indexOf(o);if(l<a&&l>-1&&(this.modules.splice(l,1),a--,l=-1),l==-1){if(this.modules.splice(a++,0,o),n)for(let d=0;d<o.rules.length;d++)n.insertRule(o.rules[d],s++)}else{for(;a<l;)s+=this.modules[a++].rules.length;s+=o.rules.length,a++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let r="";for(let l=0;l<this.modules.length;l++)r+=this.modules[l].getRules()+`
`;this.styleTag.textContent=r;let o=t.head||t;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var to={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},dd={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},m7=typeof navigator<"u"&&/Mac/.test(navigator.platform),v7=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Jn=0;Jn<10;Jn++)to[48+Jn]=to[96+Jn]=String(Jn);for(var Jn=1;Jn<=24;Jn++)to[Jn+111]="F"+Jn;for(var Jn=65;Jn<=90;Jn++)to[Jn]=String.fromCharCode(Jn+32),dd[Jn]=String.fromCharCode(Jn);for(var Jp in to)dd.hasOwnProperty(Jp)||(dd[Jp]=to[Jp]);function g7(i){var e=m7&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||v7&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",t=!e&&i.key||(i.shiftKey?dd:to)[i.keyCode]||i.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function rn(){var i=arguments[0];typeof i=="string"&&(i=document.createElement(i));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var s=t[n];typeof s=="string"?i.setAttribute(n,s):s!=null&&(i[n]=s)}e++}for(;e<arguments.length;e++)Kk(i,arguments[e]);return i}function Kk(i,e){if(typeof e=="string")i.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)i.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)Kk(i,e[t]);else throw new RangeError("Unsupported child node: "+e)}function hd(i){let e;return i.nodeType==11?e=i.getSelection?i:i.ownerDocument:e=i,e.getSelection()}function kv(i,e){return e?i==e||i.contains(e.nodeType!=1?e.parentNode:e):!1}function mu(i,e){if(!e.anchorNode)return!1;try{return kv(i,e.anchorNode)}catch{return!1}}function ud(i){return i.nodeType==3?$o(i,0,i.nodeValue.length).getClientRects():i.nodeType==1?i.getClientRects():[]}function Wc(i,e,t,n){return t?by(i,e,t,n,-1)||by(i,e,t,n,1):!1}function jo(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e}function Yu(i){return i.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(i.nodeName)}function by(i,e,t,n,s){for(;;){if(i==t&&e==n)return!0;if(e==(s<0?0:Ka(i))){if(i.nodeName=="DIV")return!1;let a=i.parentNode;if(!a||a.nodeType!=1)return!1;e=jo(i)+(s<0?0:1),i=a}else if(i.nodeType==1){if(i=i.childNodes[e+(s<0?-1:0)],i.nodeType==1&&i.contentEditable=="false")return!1;e=s<0?Ka(i):0}else return!1}}function Ka(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function jf(i,e){let t=e?i.left:i.right;return{left:t,right:t,top:i.top,bottom:i.bottom}}function _7(i){let e=i.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.innerWidth,top:0,bottom:i.innerHeight}}function Xk(i,e){let t=e.width/i.offsetWidth,n=e.height/i.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-i.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-i.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function b7(i,e,t,n,s,a,r,o){let l=i.ownerDocument,d=l.defaultView||window;for(let h=i,m=!1;h&&!m;)if(h.nodeType==1){let v,b=h==l.body,y=1,x=1;if(b)v=_7(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(m=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let A=h.getBoundingClientRect();({scaleX:y,scaleY:x}=Xk(h,A)),v={left:A.left,right:A.left+h.clientWidth*y,top:A.top,bottom:A.top+h.clientHeight*x}}let k=0,C=0;if(s=="nearest")e.top<v.top?(C=e.top-(v.top+r),t>0&&e.bottom>v.bottom+C&&(C=e.bottom-v.bottom+r)):e.bottom>v.bottom&&(C=e.bottom-v.bottom+r,t<0&&e.top-C<v.top&&(C=e.top-(v.top+r)));else{let A=e.bottom-e.top,T=v.bottom-v.top;C=(s=="center"&&A<=T?e.top+A/2-T/2:s=="start"||s=="center"&&t<0?e.top-r:e.bottom-T+r)-v.top}if(n=="nearest"?e.left<v.left?(k=e.left-(v.left+a),t>0&&e.right>v.right+k&&(k=e.right-v.right+a)):e.right>v.right&&(k=e.right-v.right+a,t<0&&e.left<v.left+k&&(k=e.left-(v.left+a))):k=(n=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:n=="start"==o?e.left-a:e.right-(v.right-v.left)+a)-v.left,k||C)if(b)d.scrollBy(k,C);else{let A=0,T=0;if(C){let I=h.scrollTop;h.scrollTop+=C/x,T=(h.scrollTop-I)*x}if(k){let I=h.scrollLeft;h.scrollLeft+=k/y,A=(h.scrollLeft-I)*y}e={left:e.left-A,top:e.top-T,right:e.right-A,bottom:e.bottom-T},A&&Math.abs(A-k)<1&&(n="nearest"),T&&Math.abs(T-C)<1&&(s="nearest")}if(b)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),h=h.assignedSlot||h.parentNode}else if(h.nodeType==11)h=h.host;else break}function y7(i){let e=i.ownerDocument,t,n;for(let s=i.parentNode;s&&!(s==e.body||t&&n);)if(s.nodeType==1)!n&&s.scrollHeight>s.clientHeight&&(n=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:n}}class x7{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Ka(t):0),n,Math.min(e.focusOffset,n?Ka(n):0))}set(e,t,n,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=s}}let cl=null;function Jk(i){if(i.setActive)return i.setActive();if(cl)return i.focus(cl);let e=[];for(let t=i;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(i.focus(cl==null?{get preventScroll(){return cl={preventScroll:!0},!0}}:void 0),!cl){cl=!1;for(let t=0;t<e.length;){let n=e[t++],s=e[t++],a=e[t++];n.scrollTop!=s&&(n.scrollTop=s),n.scrollLeft!=a&&(n.scrollLeft=a)}}}let yy;function $o(i,e,t=e){let n=yy||(yy=document.createRange());return n.setEnd(i,t),n.setStart(i,e),n}function yl(i,e,t,n){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=n);let a=new KeyboardEvent("keydown",s);a.synthetic=!0,i.dispatchEvent(a);let r=new KeyboardEvent("keyup",s);return r.synthetic=!0,i.dispatchEvent(r),a.defaultPrevented||r.defaultPrevented}function w7(i){for(;i;){if(i&&(i.nodeType==9||i.nodeType==11&&i.host))return i;i=i.assignedSlot||i.parentNode}return null}function Qk(i){for(;i.attributes.length;)i.removeAttributeNode(i.attributes[0])}function k7(i,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,Ka(t));;)if(n){if(t.nodeType!=1)return!1;let s=t.childNodes[n-1];s.contentEditable=="false"?n--:(t=s,n=Ka(t))}else{if(t==i)return!0;n=jo(t),t=t.parentNode}}function e2(i){return i.scrollTop>Math.max(1,i.scrollHeight-i.clientHeight-4)}function t2(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=Ka(t)}else if(t.parentNode&&!Yu(t))n=jo(t),t=t.parentNode;else return null}}function i2(i,e){for(let t=i,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!Yu(t))n=jo(t)+1,t=t.parentNode;else return null}}class cs{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new cs(e.parentNode,jo(e),t)}static after(e,t){return new cs(e.parentNode,jo(e)+1,t)}}const Xg=[];class ln{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,s=null,a;for(let r of this.children){if(r.flags&7){if(!r.dom&&(a=s?s.nextSibling:n.firstChild)){let o=ln.get(a);(!o||!o.parent&&o.canReuseDOM(r))&&r.reuseDOM(a)}r.sync(e,t),r.flags&=-8}if(a=s?s.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&a!=r.dom&&(t.written=!0),r.dom.parentNode==n)for(;a&&a!=r.dom;)a=xy(a);else n.insertBefore(r.dom,a);s=r.dom}for(a=s?s.nextSibling:n.firstChild,a&&t&&t.node==n&&(t.written=!0);a;)a=xy(a)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let s=Ka(e)==0?0:t==0?-1:1;for(;;){let a=e.parentNode;if(a==this.dom)break;s==0&&a.firstChild!=a.lastChild&&(e==a.firstChild?s=-1:s=1),e=a}s<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ln.get(n);)n=n.nextSibling;if(!n)return this.length;for(let s=0,a=0;;s++){let r=this.children[s];if(r.dom==n)return a;a+=r.length+r.breakAfter}}domBoundsAround(e,t,n=0){let s=-1,a=-1,r=-1,o=-1;for(let l=0,d=n,h=n;l<this.children.length;l++){let m=this.children[l],v=d+m.length;if(d<e&&v>t)return m.domBoundsAround(e,t,d);if(v>=e&&s==-1&&(s=l,a=d),d>t&&m.dom.parentNode==this.dom){r=l,o=h;break}h=v,d=v+m.breakAfter}return{from:a,to:o<0?n+this.length:o,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=Xg){this.markDirty();for(let s=e;s<t;s++){let a=this.children[s];a.parent==this&&n.indexOf(a)<0&&a.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let s=0;s<n.length;s++)n[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new n2(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,s,a,r){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ln.prototype.breakAfter=0;function xy(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}class n2{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function s2(i,e,t,n,s,a,r,o,l){let{children:d}=i,h=d.length?d[e]:null,m=a.length?a[a.length-1]:null,v=m?m.breakAfter:r;if(!(e==n&&h&&!r&&!v&&a.length<2&&h.merge(t,s,a.length?m:null,t==0,o,l))){if(n<d.length){let b=d[n];b&&(s<b.length||b.breakAfter&&(m!=null&&m.breakAfter))?(e==n&&(b=b.split(s),s=0),!v&&m&&b.merge(0,s,m,!0,0,l)?a[a.length-1]=b:((s||b.children.length&&!b.children[0].length)&&b.merge(0,s,null,!1,0,l),a.push(b))):b!=null&&b.breakAfter&&(m?m.breakAfter=1:r=1),n++}for(h&&(h.breakAfter=r,t>0&&(!r&&a.length&&h.merge(t,h.length,a[0],!1,o,0)?h.breakAfter=a.shift().breakAfter:(t<h.length||h.children.length&&h.children[h.children.length-1].length==0)&&h.merge(t,h.length,null,!1,o,0),e++));e<n&&a.length;)if(d[n-1].become(a[a.length-1]))n--,a.pop(),l=a.length?0:o;else if(d[e].become(a[0]))e++,a.shift(),o=a.length?0:l;else break;!a.length&&e&&n<d.length&&!d[e-1].breakAfter&&d[n].merge(0,0,d[e-1],!1,o,l)&&e--,(e<n||a.length)&&i.replaceChildren(e,n,a)}}function a2(i,e,t,n,s,a){let r=i.childCursor(),{i:o,off:l}=r.findPos(t,1),{i:d,off:h}=r.findPos(e,-1),m=e-t;for(let v of n)m+=v.length;i.length+=m,s2(i,d,h,o,l,n,0,s,a)}let Rs=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Sv=typeof document<"u"?document:{documentElement:{style:{}}};const Cv=/Edge\/(\d+)/.exec(Rs.userAgent),r2=/MSIE \d/.test(Rs.userAgent),Mv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rs.userAgent),$f=!!(r2||Mv||Cv),wy=!$f&&/gecko\/(\d+)/i.test(Rs.userAgent),Qp=!$f&&/Chrome\/(\d+)/.exec(Rs.userAgent),S7="webkitFontSmoothing"in Sv.documentElement.style,o2=!$f&&/Apple Computer/.test(Rs.vendor),ky=o2&&(/Mobile\/\w+/.test(Rs.userAgent)||Rs.maxTouchPoints>2);var At={mac:ky||/Mac/.test(Rs.platform),windows:/Win/.test(Rs.platform),linux:/Linux|X11/.test(Rs.platform),ie:$f,ie_version:r2?Sv.documentMode||6:Mv?+Mv[1]:Cv?+Cv[1]:0,gecko:wy,gecko_version:wy?+(/Firefox\/(\d+)/.exec(Rs.userAgent)||[0,0])[1]:0,chrome:!!Qp,chrome_version:Qp?+Qp[1]:0,ios:ky,android:/Android\b/.test(Rs.userAgent),safari:o2,webkit_version:S7?+(/\bAppleWebKit\/(\d+)/.exec(Rs.userAgent)||[0,0])[1]:0,tabSize:Sv.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const C7=256;class ba extends ln{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof ba)||this.length-(t-e)+n.length>C7||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ba(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new cs(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return M7(this.dom,e,t)}}class xr extends ln{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let s of t)s.setParent(this)}setAttrs(e){if(Qk(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,s,a,r){return n&&(!(n instanceof xr&&n.mark.eq(this.mark))||e&&a<=0||t<this.length&&r<=0)?!1:(a2(this,e,t,n?n.children.slice():[],a-1,r-1),this.markDirty(),!0)}split(e){let t=[],n=0,s=-1,a=0;for(let o of this.children){let l=n+o.length;l>e&&t.push(n<e?o.split(e-n):o),s<0&&n>=e&&(s=a),n=l,a++}let r=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new xr(this.mark,t,r)}domAtPos(e){return l2(this,e)}coordsAt(e,t){return d2(this,e,t)}}function M7(i,e,t){let n=i.nodeValue.length;e>n&&(e=n);let s=e,a=e,r=0;e==0&&t<0||e==n&&t>=0?At.chrome||At.gecko||(e?(s--,r=1):a<n&&(a++,r=-1)):t<0?s--:a<n&&a++;let o=$o(i,s,a).getClientRects();if(!o.length)return null;let l=o[(r?r<0:t>=0)?0:o.length-1];return At.safari&&!r&&l.width==0&&(l=Array.prototype.find.call(o,d=>d.width)||l),r?jf(l,r<0):l||null}class Vr extends ln{static create(e,t,n){return new Vr(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=Vr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,s,a,r){return n&&(!(n instanceof Vr)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&r<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Vr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Wi.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,s=this.posAtStart;return n?n.slice(s,s+this.length):Wi.empty}domAtPos(e){return(this.length?e==0:this.side>0)?cs.before(this.dom):cs.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let s=this.dom.getClientRects(),a=null;if(!s.length)return null;let r=this.side?this.side<0:e>0;for(let o=r?s.length-1:0;a=s[o],!(e>0?o==0:o==s.length-1||a.top<a.bottom);o+=r?-1:1);return jf(a,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class zl extends ln{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof zl&&e.side==this.side}split(){return new zl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?cs.before(this.dom):cs.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Wi.empty}get isHidden(){return!0}}ba.prototype.children=Vr.prototype.children=zl.prototype.children=Xg;function l2(i,e){let t=i.dom,{children:n}=i,s=0;for(let a=0;s<n.length;s++){let r=n[s],o=a+r.length;if(!(o==a&&r.getSide()<=0)){if(e>a&&e<o&&r.dom.parentNode==t)return r.domAtPos(e-a);if(e<=a)break;a=o}}for(let a=s;a>0;a--){let r=n[a-1];if(r.dom.parentNode==t)return r.domAtPos(r.length)}for(let a=s;a<n.length;a++){let r=n[a];if(r.dom.parentNode==t)return r.domAtPos(0)}return new cs(t,0)}function c2(i,e,t){let n,{children:s}=i;t>0&&e instanceof xr&&s.length&&(n=s[s.length-1])instanceof xr&&n.mark.eq(e.mark)?c2(n,e.children[0],t-1):(s.push(e),e.setParent(i)),i.length+=e.length}function d2(i,e,t){let n=null,s=-1,a=null,r=-1;function o(d,h){for(let m=0,v=0;m<d.children.length&&v<=h;m++){let b=d.children[m],y=v+b.length;y>=h&&(b.children.length?o(b,h-v):(!a||a.isHidden&&(t>0||A7(a,b)))&&(y>h||v==y&&b.getSide()>0)?(a=b,r=h-v):(v<h||v==y&&b.getSide()<0&&!b.isHidden)&&(n=b,s=h-v)),v=y}}o(i,e);let l=(t<0?n:a)||n||a;return l?l.coordsAt(Math.max(0,l==n?s:r),t):P7(i)}function P7(i){let e=i.dom.lastChild;if(!e)return i.dom.getBoundingClientRect();let t=ud(e);return t[t.length-1]||null}function A7(i,e){let t=i.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function Pv(i,e){for(let t in i)t=="class"&&e.class?e.class+=" "+i.class:t=="style"&&e.style?e.style+=";"+i.style:e[t]=i[t];return e}const Sy=Object.create(null);function Ku(i,e,t){if(i==e)return!0;i||(i=Sy),e||(e=Sy);let n=Object.keys(i),s=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let a of n)if(a!=t&&(s.indexOf(a)==-1||i[a]!==e[a]))return!1;return!0}function Av(i,e,t){let n=!1;if(e)for(let s in e)t&&s in t||(n=!0,s=="style"?i.style.cssText="":i.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(n=!0,s=="style"?i.style.cssText=t[s]:i.setAttribute(s,t[s]));return n}function T7(i){let e=Object.create(null);for(let t=0;t<i.attributes.length;t++){let n=i.attributes[t];e[n.name]=n.value}return e}class lo{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var ws=function(i){return i[i.Text=0]="Text",i[i.WidgetBefore=1]="WidgetBefore",i[i.WidgetAfter=2]="WidgetAfter",i[i.WidgetRange=3]="WidgetRange",i}(ws||(ws={}));class ni extends Ho{constructor(e,t,n,s){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=s}get heightRelevant(){return!1}static mark(e){return new Hd(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new io(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,s;if(e.isBlockGap)n=-5e8,s=4e8;else{let{start:a,end:r}=h2(e,t);n=(a?t?-3e8:-1:5e8)-1,s=(r?t?2e8:1:-6e8)+1}return new io(e,n,s,t,e.widget||null,!0)}static line(e){return new jd(e)}static set(e,t=!1){return Ni.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ni.none=Ni.empty;class Hd extends ni{constructor(e){let{start:t,end:n}=h2(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Hd&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Ku(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Hd.prototype.point=!1;class jd extends ni{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof jd&&this.spec.class==e.spec.class&&Ku(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}jd.prototype.mapMode=ys.TrackBefore;jd.prototype.point=!0;class io extends ni{constructor(e,t,n,s,a,r){super(t,n,a,e),this.block=s,this.isReplace=r,this.mapMode=s?t<=0?ys.TrackBefore:ys.TrackAfter:ys.TrackDel}get type(){return this.startSide!=this.endSide?ws.WidgetRange:this.startSide<=0?ws.WidgetBefore:ws.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof io&&L7(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}io.prototype.point=!0;function h2(i,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=i;return t==null&&(t=i.inclusive),n==null&&(n=i.inclusive),{start:t??e,end:n??e}}function L7(i,e){return i==e||!!(i&&e&&i.compare(e))}function vu(i,e,t,n=0){let s=t.length-1;s>=0&&t[s]+n>=i?t[s]=Math.max(t[s],e):t.push(i,e)}class Nn extends ln{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,s,a,r){if(n){if(!(n instanceof Nn))return!1;this.dom||n.transferDOM(this)}return s&&this.setDeco(n?n.attrs:null),a2(this,e,t,n?n.children.slice():[],a,r),!0}split(e){let t=new Nn;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:s}=this.childPos(e);s&&(t.append(this.children[n].split(s),0),this.children[n].merge(s,this.children[n].length,null,!1,0,0),n++);for(let a=n;a<this.children.length;a++)t.append(this.children[a],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ku(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){c2(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Pv(t,this.attrs||{})),n&&(this.attrs=Pv({class:n},this.attrs||{}))}domAtPos(e){return l2(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(Qk(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Av(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&ln.get(s)instanceof xr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((n=ln.get(s))===null||n===void 0?void 0:n.isEditable)==!1&&(!At.ios||!this.children.some(a=>a instanceof ba))){let a=document.createElement("BR");a.cmIgnore=!0,this.dom.appendChild(a)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof ba)||/[^ -~]/.test(n.text))return null;let s=ud(n.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=d2(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:s}=this.parent.view.viewState,a=n.bottom-n.top;if(Math.abs(a-s.lineHeight)<2&&s.textHeight<a){let r=(a-s.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return e instanceof Nn&&this.children.length==0&&e.children.length==0&&Ku(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,s=0;n<e.children.length;n++){let a=e.children[n],r=s+a.length;if(r>=t){if(a instanceof Nn)return a;if(r>t)break}s=r+a.breakAfter}return null}}class _r extends ln{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,s,a,r){return n&&(!(n instanceof _r)||!this.widget.compare(n.widget)||e>0&&a<=0||t<this.length&&r<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?cs.before(this.dom):cs.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new _r(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Xg}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Wi.empty}domBoundsAround(){return null}become(e){return e instanceof _r&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof Tv?null:jf(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class Tv extends lo{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class qc{constructor(e,t,n,s){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof _r&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Nn),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Oh(new zl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof _r)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:r,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(r){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Oh(new ba(this.text.slice(this.textOff,this.textOff+s)),t),n),this.atCursorPos=!0,this.textOff+=s,e-=s,n=0}}span(e,t,n,s){this.buildText(t-e,n,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,n,s,a,r){if(this.disallowBlockEffectsFor[r]&&n instanceof io){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof io)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new _r(n.widget||Nl.block,o,n));else{let l=Vr.create(n.widget||Nl.inline,o,o?0:n.startSide),d=this.atCursorPos&&!l.isEditable&&a<=s.length&&(e<t||n.startSide>0),h=!l.isEditable&&(e<t||a>s.length||n.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!d&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),d&&(m.append(Oh(new zl(1),s),a),a=s.length+Math.max(0,a-s.length)),m.append(Oh(l,s),a),this.atCursorPos=h,this.pendingBuffer=h?e<t||a>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=a)}static build(e,t,n,s,a){let r=new qc(e,t,n,a);return r.openEnd=Ni.spans(s,t,n,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function Oh(i,e){for(let t of e)i=new xr(t,[i],i.length);return i}class Nl extends lo{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Nl.inline=new Nl("span");Nl.block=new Nl("div");var _n=function(i){return i[i.LTR=0]="LTR",i[i.RTL=1]="RTL",i}(_n||(_n={}));const Vo=_n.LTR,Jg=_n.RTL;function u2(i){let e=[];for(let t=0;t<i.length;t++)e.push(1<<+i[t]);return e}const D7=u2("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),E7=u2("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Lv=Object.create(null),La=[];for(let i of["()","[]","{}"]){let e=i.charCodeAt(0),t=i.charCodeAt(1);Lv[e]=t,Lv[t]=-e}function f2(i){return i<=247?D7[i]:1424<=i&&i<=1524?2:1536<=i&&i<=1785?E7[i-1536]:1774<=i&&i<=2220?4:8192<=i&&i<=8204?256:64336<=i&&i<=65023?4:1}const I7=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Wr{get dir(){return this.level%2?Jg:Vo}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,s){let a=-1;for(let r=0;r<e.length;r++){let o=e[r];if(o.from<=t&&o.to>=t){if(o.level==n)return r;(a<0||(s!=0?s<0?o.from<t:o.to>t:e[a].level>o.level))&&(a=r)}}if(a<0)throw new RangeError("Index out of range");return a}}function p2(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++){let n=i[t],s=e[t];if(n.from!=s.from||n.to!=s.to||n.direction!=s.direction||!p2(n.inner,s.inner))return!1}return!0}const on=[];function O7(i,e,t,n,s){for(let a=0;a<=n.length;a++){let r=a?n[a-1].to:e,o=a<n.length?n[a].from:t,l=a?256:s;for(let d=r,h=l,m=l;d<o;d++){let v=f2(i.charCodeAt(d));v==512?v=h:v==8&&m==4&&(v=16),on[d]=v==4?2:v,v&7&&(m=v),h=v}for(let d=r,h=l,m=l;d<o;d++){let v=on[d];if(v==128)d<o-1&&h==on[d+1]&&h&24?v=on[d]=h:on[d]=256;else if(v==64){let b=d+1;for(;b<o&&on[b]==64;)b++;let y=d&&h==8||b<t&&on[b]==8?m==1?1:8:256;for(let x=d;x<b;x++)on[x]=y;d=b-1}else v==8&&m==1&&(on[d]=1);h=v,v&7&&(m=v)}}}function B7(i,e,t,n,s){let a=s==1?2:1;for(let r=0,o=0,l=0;r<=n.length;r++){let d=r?n[r-1].to:e,h=r<n.length?n[r].from:t;for(let m=d,v,b,y;m<h;m++)if(b=Lv[v=i.charCodeAt(m)])if(b<0){for(let x=o-3;x>=0;x-=3)if(La[x+1]==-b){let k=La[x+2],C=k&2?s:k&4?k&1?a:s:0;C&&(on[m]=on[La[x]]=C),o=x;break}}else{if(La.length==189)break;La[o++]=m,La[o++]=v,La[o++]=l}else if((y=on[m])==2||y==1){let x=y==s;l=x?0:1;for(let k=o-3;k>=0;k-=3){let C=La[k+2];if(C&2)break;if(x)La[k+2]|=2;else{if(C&4)break;La[k+2]|=4}}}}}function R7(i,e,t,n){for(let s=0,a=n;s<=t.length;s++){let r=s?t[s-1].to:i,o=s<t.length?t[s].from:e;for(let l=r;l<o;){let d=on[l];if(d==256){let h=l+1;for(;;)if(h==o){if(s==t.length)break;h=t[s++].to,o=s<t.length?t[s].from:e}else if(on[h]==256)h++;else break;let m=a==1,v=(h<e?on[h]:n)==1,b=m==v?m?1:2:n;for(let y=h,x=s,k=x?t[x-1].to:i;y>l;)y==k&&(y=t[--x].from,k=x?t[x-1].to:i),on[--y]=b;l=h}else a=d,l++}}}function Dv(i,e,t,n,s,a,r){let o=n%2?2:1;if(n%2==s%2)for(let l=e,d=0;l<t;){let h=!0,m=!1;if(d==a.length||l<a[d].from){let x=on[l];x!=o&&(h=!1,m=x==16)}let v=!h&&o==1?[]:null,b=h?n:n+1,y=l;e:for(;;)if(d<a.length&&y==a[d].from){if(m)break e;let x=a[d];if(!h)for(let k=x.to,C=d+1;;){if(k==t)break e;if(C<a.length&&a[C].from==k)k=a[C++].to;else{if(on[k]==o)break e;break}}if(d++,v)v.push(x);else{x.from>l&&r.push(new Wr(l,x.from,b));let k=x.direction==Vo!=!(b%2);Ev(i,k?n+1:n,s,x.inner,x.from,x.to,r),l=x.to}y=x.to}else{if(y==t||(h?on[y]!=o:on[y]==o))break;y++}v?Dv(i,l,y,n+1,s,v,r):l<y&&r.push(new Wr(l,y,b)),l=y}else for(let l=t,d=a.length;l>e;){let h=!0,m=!1;if(!d||l>a[d-1].to){let x=on[l-1];x!=o&&(h=!1,m=x==16)}let v=!h&&o==1?[]:null,b=h?n:n+1,y=l;e:for(;;)if(d&&y==a[d-1].to){if(m)break e;let x=a[--d];if(!h)for(let k=x.from,C=d;;){if(k==e)break e;if(C&&a[C-1].to==k)k=a[--C].from;else{if(on[k-1]==o)break e;break}}if(v)v.push(x);else{x.to<l&&r.push(new Wr(x.to,l,b));let k=x.direction==Vo!=!(b%2);Ev(i,k?n+1:n,s,x.inner,x.from,x.to,r),l=x.from}y=x.from}else{if(y==e||(h?on[y-1]!=o:on[y-1]==o))break;y--}v?Dv(i,y,l,n+1,s,v,r):y<l&&r.push(new Wr(y,l,b)),l=y}}function Ev(i,e,t,n,s,a,r){let o=e%2?2:1;O7(i,s,a,n,o),B7(i,s,a,n,o),R7(s,a,n,o),Dv(i,s,a,e,t,n,r)}function z7(i,e,t){if(!i)return[new Wr(0,0,e==Jg?1:0)];if(e==Vo&&!t.length&&!I7.test(i))return m2(i.length);if(t.length)for(;i.length>on.length;)on[on.length]=256;let n=[],s=e==Vo?0:1;return Ev(i,s,s,t,0,i.length,n),n}function m2(i){return[new Wr(0,i,0)]}let v2="";function N7(i,e,t,n,s){var a;let r=n.head-i.from,o=Wr.find(e,r,(a=n.bidiLevel)!==null&&a!==void 0?a:-1,n.assoc),l=e[o],d=l.side(s,t);if(r==d){let v=o+=s?1:-1;if(v<0||v>=e.length)return null;l=e[o=v],r=l.side(!s,t),d=l.side(s,t)}let h=ts(i.text,r,l.forward(s,t));(h<l.from||h>l.to)&&(h=d),v2=i.text.slice(Math.min(r,h),Math.max(r,h));let m=o==(s?e.length-1:0)?null:e[o+(s?1:-1)];return m&&h==d&&m.level+(s?0:1)<l.level?je.cursor(m.side(!s,t)+i.from,m.forward(s,t)?1:-1,m.level):je.cursor(h+i.from,l.forward(s,t)?-1:1,l.level)}function F7(i,e,t){for(let n=e;n<t;n++){let s=f2(i.charCodeAt(n));if(s==1)return Vo;if(s==2||s==4)return Jg}return Vo}const g2=Mt.define(),_2=Mt.define(),b2=Mt.define(),y2=Mt.define(),Iv=Mt.define(),x2=Mt.define(),w2=Mt.define(),Qg=Mt.define(),e_=Mt.define(),k2=Mt.define({combine:i=>i.some(e=>e)}),S2=Mt.define({combine:i=>i.some(e=>e)}),C2=Mt.define();class xl{constructor(e,t="nearest",n="nearest",s=5,a=5,r=!1){this.range=e,this.y=t,this.x=n,this.yMargin=s,this.xMargin=a,this.isSnapshot=r}map(e){return e.empty?this:new xl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new xl(je.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Bh=_i.define({map:(i,e)=>i.map(e)}),M2=_i.define();function Hs(i,e,t){let n=i.facet(y2);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const hr=Mt.define({combine:i=>i.length?i[0]:!0});let H7=0;const ul=Mt.define({combine(i){return i.filter((e,t)=>{for(let n=0;n<t;n++)if(i[n].plugin==e.plugin)return!1;return!0})}});class jn{constructor(e,t,n,s,a){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=s,this.baseExtensions=a(this),this.extension=this.baseExtensions.concat(ul.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ul.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:s,provide:a,decorations:r}=t||{};return new jn(H7++,e,n,s,o=>{let l=[];return r&&l.push(fd.of(d=>{let h=d.plugin(o);return h?r(h):ni.none})),a&&l.push(a(o)),l})}static fromClass(e,t){return jn.define((n,s)=>new e(n,s),t)}}class em{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Hs(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Hs(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Hs(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const P2=Mt.define(),t_=Mt.define(),fd=Mt.define(),A2=Mt.define(),i_=Mt.define(),T2=Mt.define();function Cy(i,e){let t=i.state.facet(T2);if(!t.length)return t;let n=t.map(a=>a instanceof Function?a(i):a),s=[];return Ni.spans(n,e.from,e.to,{point(){},span(a,r,o,l){let d=a-e.from,h=r-e.from,m=s;for(let v=o.length-1;v>=0;v--,l--){let b=o[v].spec.bidiIsolate,y;if(b==null&&(b=F7(e.text,d,h)),l>0&&m.length&&(y=m[m.length-1]).to==d&&y.direction==b)y.to=h,m=y.inner;else{let x={from:d,to:h,direction:b,inner:[]};m.push(x),m=x.inner}}}}),s}const L2=Mt.define();function n_(i){let e=0,t=0,n=0,s=0;for(let a of i.state.facet(L2)){let r=a(i);r&&(r.left!=null&&(e=Math.max(e,r.left)),r.right!=null&&(t=Math.max(t,r.right)),r.top!=null&&(n=Math.max(n,r.top)),r.bottom!=null&&(s=Math.max(s,r.bottom)))}return{left:e,right:t,top:n,bottom:s}}const Lc=Mt.define();class aa{constructor(e,t,n,s){this.fromA=e,this.toA=t,this.fromB=n,this.toB=s}join(e){return new aa(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>n.toA)){if(s.toA<n.fromA)break;n=n.join(s),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let s=0,a=0,r=0,o=0;;s++){let l=s==e.length?null:e[s],d=r-o,h=l?l.fromB:1e9;for(;a<t.length&&t[a]<h;){let m=t[a],v=t[a+1],b=Math.max(o,m),y=Math.min(h,v);if(b<=y&&new aa(b+d,y+d,b,y).addToSet(n),v>h)break;a+=2}if(!l)return n;new aa(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),r=l.toA,o=l.toB}}}class Xu{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Wn.empty(this.startState.doc.length);for(let a of n)this.changes=this.changes.compose(a.changes);let s=[];this.changes.iterChangedRanges((a,r,o,l)=>s.push(new aa(a,r,o,l))),this.changedRanges=s}static create(e,t,n){return new Xu(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class My extends ln{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ni.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new Nn],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new aa(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:d,toA:h})=>h<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!G7(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let a=s>-1?$7(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:h}=this.hasComposition;n=new aa(d,h,e.changes.mapPos(d,-1),e.changes.mapPos(h,1)).addToSet(n.slice())}this.hasComposition=a?{from:a.range.fromB,to:a.range.toB}:null,(At.ie||At.chrome)&&!a&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let r=this.decorations,o=this.updateDeco(),l=q7(r,o,e.changes);return n=aa.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,a),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let r=At.chrome||At.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,r),this.flags&=-8,r&&(r.written||s.selectionRange.focusNode!=r.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(r=>r.flags&=-9);let a=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let r of this.children)r instanceof _r&&r.widget instanceof Tv&&a.push(r.dom);s.updateGaps(a)}updateChildren(e,t,n){let s=n?n.range.addToSet(e.slice()):e,a=this.childCursor(t);for(let r=s.length-1;;r--){let o=r>=0?s[r]:null;if(!o)break;let{fromA:l,toA:d,fromB:h,toB:m}=o,v,b,y,x;if(n&&n.range.fromB<m&&n.range.toB>h){let I=qc.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),D=qc.build(this.view.state.doc,n.range.toB,m,this.decorations,this.dynamicDecorationMap);b=I.breakAtStart,y=I.openStart,x=D.openEnd;let N=this.compositionView(n);D.breakAtStart?N.breakAfter=1:D.content.length&&N.merge(N.length,N.length,D.content[0],!1,D.openStart,0)&&(N.breakAfter=D.content[0].breakAfter,D.content.shift()),I.content.length&&N.merge(0,0,I.content[I.content.length-1],!0,0,I.openEnd)&&I.content.pop(),v=I.content.concat(N).concat(D.content)}else({content:v,breakAtStart:b,openStart:y,openEnd:x}=qc.build(this.view.state.doc,h,m,this.decorations,this.dynamicDecorationMap));let{i:k,off:C}=a.findPos(d,1),{i:A,off:T}=a.findPos(l,-1);s2(this,A,T,k,C,v,b,y,x)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(M2)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new ba(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new xr(s,[t],t.length);let n=new Nn;return n.append(t,0),n}fixCompositionDOM(e){let t=(a,r)=>{r.flags|=8|(r.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(r);let o=ln.get(a);o&&o!=r&&(o.dom=null),r.setDOM(a)},n=this.childPos(e.range.fromB,1),s=this.children[n.i];t(e.line,s);for(let a=e.marks.length-1;a>=-1;a--)n=s.childPos(n.off,1),s=s.children[n.i],t(a>=0?e.marks[a].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,s=n==this.dom,a=!s&&!(this.view.state.facet(hr)||this.dom.tabIndex>-1)&&mu(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(s||t||a))return;let r=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(o.anchor)),d=o.empty?l:this.moveToLine(this.domAtPos(o.head));if(At.gecko&&o.empty&&!this.hasComposition&&j7(l)){let m=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(m,l.node.childNodes[l.offset]||null)),l=d=new cs(m,0),r=!0}let h=this.view.observer.selectionRange;(r||!h.focusNode||(!Wc(l.node,l.offset,h.anchorNode,h.anchorOffset)||!Wc(d.node,d.offset,h.focusNode,h.focusOffset))&&!this.suppressWidgetCursorChange(h,o))&&(this.view.observer.ignore(()=>{At.android&&At.chrome&&this.dom.contains(h.focusNode)&&U7(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=hd(this.view.root);if(m)if(o.empty){if(At.gecko){let v=V7(l.node,l.offset);if(v&&v!=3){let b=(v==1?t2:i2)(l.node,l.offset);b&&(l=new cs(b.node,b.offset))}}m.collapse(l.node,l.offset),o.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=o.bidiLevel)}else if(m.extend){m.collapse(l.node,l.offset);try{m.extend(d.node,d.offset)}catch{}}else{let v=document.createRange();o.anchor>o.head&&([l,d]=[d,l]),v.setEnd(d.node,d.offset),v.setStart(l.node,l.offset),m.removeAllRanges(),m.addRange(v)}a&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,d)),this.impreciseAnchor=l.precise?null:new cs(h.anchorNode,h.anchorOffset),this.impreciseHead=d.precise?null:new cs(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Wc(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=hd(e.root),{anchorNode:s,anchorOffset:a}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let r=Nn.find(this,t.head);if(!r)return;let o=r.posAtStart;if(t.head==o||t.head==o+r.length)return;let l=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!l||!d||l.bottom>d.top)return;let h=this.domAtPos(t.head+t.assoc);n.collapse(h.node,h.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&n.collapse(s,a)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let s=e.offset;!n&&s<t.childNodes.length;s++){let a=ln.get(t.childNodes[s]);a instanceof Nn&&(n=a.domAtPos(0))}for(let s=e.offset-1;!n&&s>=0;s--){let a=ln.get(t.childNodes[s]);a instanceof Nn&&(n=a.domAtPos(a.length))}return n?new cs(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=ln.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(n<s.length||s instanceof Nn)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,s=0;for(let a=this.length,r=this.children.length-1;r>=0;r--){let o=this.children[r],l=a-o.breakAfter,d=l-o.length;if(l<e)break;if(d<=e&&(d<e||o.covers(-1))&&(l>e||o.covers(1))&&(!n||o instanceof Nn&&!(n instanceof Nn&&t>=0)))n=o,s=d;else if(n&&d==e&&l==e&&o instanceof _r&&Math.abs(t)<2){if(o.deco.startSide<0)break;r&&(n=null)}a=d}return n?n.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),s=this.children[t];if(!(s instanceof Nn))return null;for(;s.children.length;){let{i:o,off:l}=s.childPos(n,1);for(;;o++){if(o==s.children.length)return null;if((s=s.children[o]).length)break}n=l}if(!(s instanceof ba))return null;let a=ts(s.text,n);if(a==n)return null;let r=$o(s.dom,n,a).getClientRects();for(let o=0;o<r.length;o++){let l=r[o];if(o==r.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:s}=e,a=this.view.contentDOM.clientWidth,r=a>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,l=this.view.textDirection==_n.LTR;for(let d=0,h=0;h<this.children.length;h++){let m=this.children[h],v=d+m.length;if(v>s)break;if(d>=n){let b=m.dom.getBoundingClientRect();if(t.push(b.height),r){let y=m.dom.lastChild,x=y?ud(y):[];if(x.length){let k=x[x.length-1],C=l?k.right-b.left:b.right-k.left;C>o&&(o=C,this.minWidth=a,this.minWidthFrom=d,this.minWidthTo=v)}}}d=v+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?_n.RTL:_n.LTR}measureTextSize(){for(let a of this.children)if(a instanceof Nn){let r=a.measureTextSize();if(r)return r}let e=document.createElement("div"),t,n,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let a=ud(e.firstChild)[0];t=e.getBoundingClientRect().height,n=a?a.width/27:7,s=a?a.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new n2(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,s=0;;s++){let a=s==t.viewports.length?null:t.viewports[s],r=a?a.from-1:this.length;if(r>n){let o=(t.lineBlockAt(r).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(ni.replace({widget:new Tv(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,r))}if(!a)break;n=a.to+1}return ni.set(e)}updateDeco(){let e=1,t=this.view.state.facet(fd).map(a=>(this.dynamicDecorationMap[e++]=typeof a=="function")?a(this.view):a),n=!1,s=this.view.state.facet(A2).map((a,r)=>{let o=typeof a=="function";return o&&(n=!0),o?a(this.view):a});for(s.length&&(this.dynamicDecorationMap[e++]=n,t.push(Ni.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(C2))try{if(d(this.view,e.range,e))return!0}catch(h){Hs(this.view.state,h,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!n)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,s.left),top:Math.min(n.top,s.top),right:Math.max(n.right,s.right),bottom:Math.max(n.bottom,s.bottom)});let a=n_(this.view),r={left:n.left-a.left,top:n.top-a.top,right:n.right+a.right,bottom:n.bottom+a.bottom},{offsetWidth:o,offsetHeight:l}=this.view.scrollDOM;b7(this.view.scrollDOM,r,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==_n.LTR)}}function j7(i){return i.node.nodeType==1&&i.node.firstChild&&(i.offset==0||i.node.childNodes[i.offset-1].contentEditable=="false")&&(i.offset==i.node.childNodes.length||i.node.childNodes[i.offset].contentEditable=="false")}function D2(i,e){let t=i.observer.selectionRange;if(!t.focusNode)return null;let n=t2(t.focusNode,t.focusOffset),s=i2(t.focusNode,t.focusOffset),a=n||s;if(s&&n&&s.node!=n.node){let o=ln.get(s.node);if(!o||o instanceof ba&&o.text!=s.node.nodeValue)a=s;else if(i.docView.lastCompositionAfterCursor){let l=ln.get(n.node);!l||l instanceof ba&&l.text!=n.node.nodeValue||(a=s)}}if(i.docView.lastCompositionAfterCursor=a!=n,!a)return null;let r=e-a.offset;return{from:r,to:r+a.node.nodeValue.length,node:a.node}}function $7(i,e,t){let n=D2(i,t);if(!n)return null;let{node:s,from:a,to:r}=n,o=s.nodeValue;if(/[\n\r]/.test(o)||i.state.doc.sliceString(n.from,n.to)!=o)return null;let l=e.invertedDesc,d=new aa(l.mapPos(a),l.mapPos(r),a,r),h=[];for(let m=s.parentNode;;m=m.parentNode){let v=ln.get(m);if(v instanceof xr)h.push({node:m,deco:v.mark});else{if(v instanceof Nn||m.nodeName=="DIV"&&m.parentNode==i.contentDOM)return{range:d,text:s,marks:h,line:m};if(m!=i.contentDOM)h.push({node:m,deco:new Hd({inclusive:!0,attributes:T7(m),tagName:m.tagName.toLowerCase()})});else return null}}}function V7(i,e){return i.nodeType!=1?0:(e&&i.childNodes[e-1].contentEditable=="false"?1:0)|(e<i.childNodes.length&&i.childNodes[e].contentEditable=="false"?2:0)}let W7=class{constructor(){this.changes=[]}compareRange(e,t){vu(e,t,this.changes)}comparePoint(e,t){vu(e,t,this.changes)}boundChange(e){vu(e,e,this.changes)}};function q7(i,e,t){let n=new W7;return Ni.compare(i,e,t,n),n.changes}function U7(i,e){for(let t=i;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function G7(i,e){let t=!1;return e&&i.iterChangedRanges((n,s)=>{n<e.to&&s>e.from&&(t=!0)}),t}function Z7(i,e,t=1){let n=i.charCategorizer(e),s=i.doc.lineAt(e),a=e-s.from;if(s.length==0)return je.cursor(e);a==0?t=1:a==s.length&&(t=-1);let r=a,o=a;t<0?r=ts(s.text,a,!1):o=ts(s.text,a);let l=n(s.text.slice(r,o));for(;r>0;){let d=ts(s.text,r,!1);if(n(s.text.slice(d,r))!=l)break;r=d}for(;o<s.length;){let d=ts(s.text,o);if(n(s.text.slice(o,d))!=l)break;o=d}return je.range(r+s.from,o+s.from)}function Y7(i,e){return e.left>i?e.left-i:Math.max(0,i-e.right)}function K7(i,e){return e.top>i?e.top-i:Math.max(0,i-e.bottom)}function tm(i,e){return i.top<e.bottom-1&&i.bottom>e.top+1}function Py(i,e){return e<i.top?{top:e,left:i.left,right:i.right,bottom:i.bottom}:i}function Ay(i,e){return e>i.bottom?{top:i.top,left:i.left,right:i.right,bottom:e}:i}function Ov(i,e,t){let n,s,a,r,o=!1,l,d,h,m;for(let y=i.firstChild;y;y=y.nextSibling){let x=ud(y);for(let k=0;k<x.length;k++){let C=x[k];s&&tm(s,C)&&(C=Py(Ay(C,s.bottom),s.top));let A=Y7(e,C),T=K7(t,C);if(A==0&&T==0)return y.nodeType==3?Ty(y,e,t):Ov(y,e,t);if(!n||r>T||r==T&&a>A){n=y,s=C,a=A,r=T;let I=T?t<C.top?-1:1:A?e<C.left?-1:1:0;o=!I||(I>0?k<x.length-1:k>0)}A==0?t>C.bottom&&(!h||h.bottom<C.bottom)?(l=y,h=C):t<C.top&&(!m||m.top>C.top)&&(d=y,m=C):h&&tm(h,C)?h=Ay(h,C.bottom):m&&tm(m,C)&&(m=Py(m,C.top))}}if(h&&h.bottom>=t?(n=l,s=h):m&&m.top<=t&&(n=d,s=m),!n)return{node:i,offset:0};let v=Math.max(s.left,Math.min(s.right,e));if(n.nodeType==3)return Ty(n,v,t);if(o&&n.contentEditable!="false")return Ov(n,v,t);let b=Array.prototype.indexOf.call(i.childNodes,n)+(e>=(s.left+s.right)/2?1:0);return{node:i,offset:b}}function Ty(i,e,t){let n=i.nodeValue.length,s=-1,a=1e9,r=0;for(let o=0;o<n;o++){let l=$o(i,o,o+1).getClientRects();for(let d=0;d<l.length;d++){let h=l[d];if(h.top==h.bottom)continue;r||(r=e-h.left);let m=(h.top>t?h.top-t:t-h.bottom)-1;if(h.left-1<=e&&h.right+1>=e&&m<a){let v=e>=(h.left+h.right)/2,b=v;if((At.chrome||At.gecko)&&$o(i,o).getBoundingClientRect().left==h.right&&(b=!v),m<=0)return{node:i,offset:o+(b?1:0)};s=o+(b?1:0),a=m}}}return{node:i,offset:s>-1?s:r>0?i.nodeValue.length:0}}function E2(i,e,t,n=-1){var s,a;let r=i.contentDOM.getBoundingClientRect(),o=r.top+i.viewState.paddingTop,l,{docHeight:d}=i.viewState,{x:h,y:m}=e,v=m-o;if(v<0)return 0;if(v>d)return i.state.doc.length;for(let I=i.viewState.heightOracle.textHeight/2,D=!1;l=i.elementAtHeight(v),l.type!=ws.Text;)for(;v=n>0?l.bottom+I:l.top-I,!(v>=0&&v<=d);){if(D)return t?null:0;D=!0,n=-n}m=o+v;let b=l.from;if(b<i.viewport.from)return i.viewport.from==0?0:t?null:Ly(i,r,l,h,m);if(b>i.viewport.to)return i.viewport.to==i.state.doc.length?i.state.doc.length:t?null:Ly(i,r,l,h,m);let y=i.dom.ownerDocument,x=i.root.elementFromPoint?i.root:y,k=x.elementFromPoint(h,m);k&&!i.contentDOM.contains(k)&&(k=null),k||(h=Math.max(r.left+1,Math.min(r.right-1,h)),k=x.elementFromPoint(h,m),k&&!i.contentDOM.contains(k)&&(k=null));let C,A=-1;if(k&&((s=i.docView.nearest(k))===null||s===void 0?void 0:s.isEditable)!=!1){if(y.caretPositionFromPoint){let I=y.caretPositionFromPoint(h,m);I&&({offsetNode:C,offset:A}=I)}else if(y.caretRangeFromPoint){let I=y.caretRangeFromPoint(h,m);I&&({startContainer:C,startOffset:A}=I,(!i.contentDOM.contains(C)||At.safari&&X7(C,A,h)||At.chrome&&J7(C,A,h))&&(C=void 0))}C&&(A=Math.min(Ka(C),A))}if(!C||!i.docView.dom.contains(C)){let I=Nn.find(i.docView,b);if(!I)return v>l.top+l.height/2?l.to:l.from;({node:C,offset:A}=Ov(I.dom,h,m))}let T=i.docView.nearest(C);if(!T)return null;if(T.isWidget&&((a=T.dom)===null||a===void 0?void 0:a.nodeType)==1){let I=T.dom.getBoundingClientRect();return e.y<I.top||e.y<=I.bottom&&e.x<=(I.left+I.right)/2?T.posAtStart:T.posAtEnd}else return T.localPosFromDOM(C,A)+T.posAtStart}function Ly(i,e,t,n,s){let a=Math.round((n-e.left)*i.defaultCharacterWidth);if(i.lineWrapping&&t.height>i.defaultLineHeight*1.5){let o=i.viewState.heightOracle.textHeight,l=Math.floor((s-t.top-(i.defaultLineHeight-o)*.5)/o);a+=l*i.viewState.heightOracle.lineLength}let r=i.state.sliceDoc(t.from,t.to);return t.from+yv(r,a,i.state.tabSize)}function X7(i,e,t){let n;if(i.nodeType!=3||e!=(n=i.nodeValue.length))return!1;for(let s=i.nextSibling;s;s=s.nextSibling)if(s.nodeType!=1||s.nodeName!="BR")return!1;return $o(i,n-1,n).getBoundingClientRect().left>t}function J7(i,e,t){if(e!=0)return!1;for(let s=i;;){let a=s.parentNode;if(!a||a.nodeType!=1||a.firstChild!=s)return!1;if(a.classList.contains("cm-line"))break;s=a}let n=i.nodeType==1?i.getBoundingClientRect():$o(i,0,Math.max(i.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function Bv(i,e,t){let n=i.lineBlockAt(e);if(Array.isArray(n.type)){let s;for(let a of n.type){if(a.from>e)break;if(!(a.to<e)){if(a.from<e&&a.to>e)return a;(!s||a.type==ws.Text&&(s.type!=a.type||(t<0?a.from<e:a.to>e)))&&(s=a)}}return s||n}return n}function Q7(i,e,t,n){let s=Bv(i,e.head,e.assoc||-1),a=!n||s.type!=ws.Text||!(i.lineWrapping||s.widgetLineBreaks)?null:i.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(a){let r=i.dom.getBoundingClientRect(),o=i.textDirectionAt(s.from),l=i.posAtCoords({x:t==(o==_n.LTR)?r.right-1:r.left+1,y:(a.top+a.bottom)/2});if(l!=null)return je.cursor(l,t?-1:1)}return je.cursor(t?s.to:s.from,t?-1:1)}function Dy(i,e,t,n){let s=i.state.doc.lineAt(e.head),a=i.bidiSpans(s),r=i.textDirectionAt(s.from);for(let o=e,l=null;;){let d=N7(s,a,r,o,t),h=v2;if(!d){if(s.number==(t?i.state.doc.lines:1))return o;h=`
`,s=i.state.doc.line(s.number+(t?1:-1)),a=i.bidiSpans(s),d=i.visualLineSide(s,!t)}if(l){if(!l(h))return o}else{if(!n)return d;l=n(h)}o=d}}function ej(i,e,t){let n=i.state.charCategorizer(e),s=n(t);return a=>{let r=n(a);return s==kn.Space&&(s=r),s==r}}function tj(i,e,t,n){let s=e.head,a=t?1:-1;if(s==(t?i.state.doc.length:0))return je.cursor(s,e.assoc);let r=e.goalColumn,o,l=i.contentDOM.getBoundingClientRect(),d=i.coordsAtPos(s,e.assoc||-1),h=i.documentTop;if(d)r==null&&(r=d.left-l.left),o=a<0?d.top:d.bottom;else{let b=i.viewState.lineBlockAt(s);r==null&&(r=Math.min(l.right-l.left,i.defaultCharacterWidth*(s-b.from))),o=(a<0?b.top:b.bottom)+h}let m=l.left+r,v=n??i.viewState.heightOracle.textHeight>>1;for(let b=0;;b+=10){let y=o+(v+b)*a,x=E2(i,{x:m,y},!1,a);if(y<l.top||y>l.bottom||(a<0?x<s:x>s)){let k=i.docView.coordsForChar(x),C=!k||y<k.top?-1:1;return je.cursor(x,C,void 0,r)}}}function gu(i,e,t){for(;;){let n=0;for(let s of i)s.between(e-1,e+1,(a,r,o)=>{if(e>a&&e<r){let l=n||t||(e-a<r-e?-1:1);e=l<0?a:r,n=l}});if(!n)return e}}function im(i,e,t){let n=gu(i.state.facet(i_).map(s=>s(i)),t.from,e.head>t.from?-1:1);return n==t.from?t:je.cursor(n,n<t.from?1:-1)}const Dc="￿";class ij{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ji.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Dc}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let s=e;;){this.findPointBefore(n,s);let a=this.text.length;this.readNode(s);let r=s.nextSibling;if(r==t)break;let o=ln.get(s),l=ln.get(r);(o&&l?o.breakAfter:(o?o.breakAfter:Yu(s))||Yu(r)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>a)&&this.lineBreak(),s=r}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let a=-1,r=1,o;if(this.lineSeparator?(a=t.indexOf(this.lineSeparator,n),r=this.lineSeparator.length):(o=s.exec(t))&&(a=o.index,r=o[0].length),this.append(t.slice(n,a<0?t.length:a)),a<0)break;if(this.lineBreak(),r>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=r-1);n=a+r}}readNode(e){if(e.cmIgnore)return;let t=ln.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let s=n.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(nj(e,n.node,n.offset)?t:0))}}function nj(i,e,t){for(;;){if(!e||t<Ka(e))return!1;if(e==i)return!0;t=jo(e)+1,e=e.parentNode}}class Ey{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class sj{constructor(e,t,n,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:a,impreciseAnchor:r}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let o=a||r?[]:oj(e),l=new ij(o,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=lj(o,this.bounds.from)}else{let o=e.observer.selectionRange,l=a&&a.node==o.focusNode&&a.offset==o.focusOffset||!kv(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),d=r&&r.node==o.anchorNode&&r.offset==o.anchorOffset||!kv(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),h=e.viewport;if((At.ios||At.chrome)&&e.state.selection.main.empty&&l!=d&&(h.from>0||h.to<e.state.doc.length)){let m=Math.min(l,d),v=Math.max(l,d),b=h.from-m,y=h.to-v;(b==0||b==1||m==0)&&(y==0||y==-1||v==e.state.doc.length)&&(l=0,d=e.state.doc.length)}this.newSel=je.single(d,l)}}}function I2(i,e){let t,{newSel:n}=e,s=i.state.selection.main,a=i.inputState.lastKeyTime>Date.now()-100?i.inputState.lastKeyCode:-1;if(e.bounds){let{from:r,to:o}=e.bounds,l=s.from,d=null;(a===8||At.android&&e.text.length<o-r)&&(l=s.to,d="end");let h=rj(i.state.doc.sliceString(r,o,Dc),e.text,l-r,d);h&&(At.chrome&&a==13&&h.toB==h.from+2&&e.text.slice(h.from,h.toB)==Dc+Dc&&h.toB--,t={from:r+h.from,to:r+h.toA,insert:Wi.of(e.text.slice(h.from,h.toB).split(Dc))})}else n&&(!i.hasFocus&&i.state.facet(hr)||n.main.eq(s))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!s.empty&&n&&n.main.empty?t={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,s.to)}:(At.mac||At.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&i.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=je.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:Wi.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:i.state.doc.slice(s.from,t.from).append(t.insert).append(i.state.doc.slice(t.to,s.to))}:At.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&i.lineWrapping&&(n&&(n=je.single(n.main.anchor-1,n.main.head-1)),t={from:s.from,to:s.to,insert:Wi.of([" "])}),t)return s_(i,t,n,a);if(n&&!n.main.eq(s)){let r=!1,o="select";return i.inputState.lastSelectionTime>Date.now()-50&&(i.inputState.lastSelectionOrigin=="select"&&(r=!0),o=i.inputState.lastSelectionOrigin),i.dispatch({selection:n,scrollIntoView:r,userEvent:o}),!0}else return!1}function s_(i,e,t,n=-1){if(At.ios&&i.inputState.flushIOSKey(e))return!0;let s=i.state.selection.main;if(At.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&i.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&yl(i.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&yl(i.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&yl(i.contentDOM,"Delete",46)))return!0;let a=e.insert.toString();i.inputState.composing>=0&&i.inputState.composing++;let r,o=()=>r||(r=aj(i,e,t));return i.state.facet(x2).some(l=>l(i,e.from,e.to,a,o))||i.dispatch(o()),!0}function aj(i,e,t){let n,s=i.state,a=s.selection.main;if(e.from>=a.from&&e.to<=a.to&&e.to-e.from>=(a.to-a.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&i.inputState.composing<0){let o=a.from<e.from?s.sliceDoc(a.from,e.from):"",l=a.to>e.to?s.sliceDoc(e.to,a.to):"";n=s.replaceSelection(i.state.toText(o+e.insert.sliceString(0,void 0,i.state.lineBreak)+l))}else{let o=s.changes(e),l=t&&t.main.to<=o.newLength?t.main:void 0;if(s.selection.ranges.length>1&&i.inputState.composing>=0&&e.to<=a.to&&e.to>=a.to-10){let d=i.state.sliceDoc(e.from,e.to),h,m=t&&D2(i,t.main.head);if(m){let y=e.insert.length-(e.to-e.from);h={from:m.from,to:m.to-y}}else h=i.state.doc.lineAt(a.head);let v=a.to-e.to,b=a.to-a.from;n=s.changeByRange(y=>{if(y.from==a.from&&y.to==a.to)return{changes:o,range:l||y.map(o)};let x=y.to-v,k=x-d.length;if(y.to-y.from!=b||i.state.sliceDoc(k,x)!=d||y.to>=h.from&&y.from<=h.to)return{range:y};let C=s.changes({from:k,to:x,insert:e.insert}),A=y.to-a.to;return{changes:C,range:l?je.range(Math.max(0,l.anchor+A),Math.max(0,l.head+A)):y.map(C)}})}else n={changes:o,selection:l&&s.selection.replaceRange(l)}}let r="input.type";return(i.composing||i.inputState.compositionPendingChange&&i.inputState.compositionEndedAt>Date.now()-50)&&(i.inputState.compositionPendingChange=!1,r+=".compose",i.inputState.compositionFirstChange&&(r+=".start",i.inputState.compositionFirstChange=!1)),s.update(n,{userEvent:r,scrollIntoView:!0})}function rj(i,e,t,n){let s=Math.min(i.length,e.length),a=0;for(;a<s&&i.charCodeAt(a)==e.charCodeAt(a);)a++;if(a==s&&i.length==e.length)return null;let r=i.length,o=e.length;for(;r>0&&o>0&&i.charCodeAt(r-1)==e.charCodeAt(o-1);)r--,o--;if(n=="end"){let l=Math.max(0,a-Math.min(r,o));t-=r+l-a}if(r<a&&i.length<e.length){let l=t<=a&&t>=r?a-t:0;a-=l,o=a+(o-r),r=a}else if(o<a){let l=t<=a&&t>=o?a-t:0;a-=l,r=a+(r-o),o=a}return{from:a,toA:r,toB:o}}function oj(i){let e=[];if(i.root.activeElement!=i.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:a}=i.observer.selectionRange;return t&&(e.push(new Ey(t,n)),(s!=t||a!=n)&&e.push(new Ey(s,a))),e}function lj(i,e){if(i.length==0)return null;let t=i[0].pos,n=i.length==2?i[1].pos:t;return t>-1&&n>-1?je.single(t+e,n+e):null}class cj{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,At.safari&&e.contentDOM.addEventListener("input",()=>null),At.gecko&&Cj(e.contentDOM.ownerDocument)}handleEvent(e){!gj(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let s of n.observers)s(this.view,t);for(let s of n.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=dj(e),n=this.handlers,s=this.view.contentDOM;for(let a in t)if(a!="scroll"){let r=!t[a].handlers.length,o=n[a];o&&r!=!o.handlers.length&&(s.removeEventListener(a,this.handleEvent),o=null),o||s.addEventListener(a,this.handleEvent,{passive:r})}for(let a in n)a!="scroll"&&!t[a]&&s.removeEventListener(a,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&B2.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),At.android&&At.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return At.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=O2.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||hj.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,yl(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:At.safari&&!At.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Iy(i,e){return(t,n)=>{try{return e.call(i,n,t)}catch(s){Hs(t.state,s)}}}function dj(i){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of i){let s=n.spec,a=s&&s.plugin.domEventHandlers,r=s&&s.plugin.domEventObservers;if(a)for(let o in a){let l=a[o];l&&t(o).handlers.push(Iy(n.value,l))}if(r)for(let o in r){let l=r[o];l&&t(o).observers.push(Iy(n.value,l))}}for(let n in ya)t(n).handlers.push(ya[n]);for(let n in ca)t(n).observers.push(ca[n]);return e}const O2=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],hj="dthko",B2=[16,17,18,20,91,92,224,225],Rh=6;function zh(i){return Math.max(0,i)*.7+8}function uj(i,e){return Math.max(Math.abs(i.clientX-e.clientX),Math.abs(i.clientY-e.clientY))}class fj{constructor(e,t,n,s){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=y7(e.contentDOM),this.atoms=e.state.facet(i_).map(r=>r(e));let a=e.contentDOM.ownerDocument;a.addEventListener("mousemove",this.move=this.move.bind(this)),a.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ji.allowMultipleSelections)&&pj(e,t),this.dragging=vj(e,t)&&N2(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&uj(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,s=0,a=0,r=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:r}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:a,bottom:o}=this.scrollParents.y.getBoundingClientRect());let l=n_(this.view);e.clientX-l.left<=s+Rh?t=-zh(s-e.clientX):e.clientX+l.right>=r-Rh&&(t=zh(e.clientX-r)),e.clientY-l.top<=a+Rh?n=-zh(a-e.clientY):e.clientY+l.bottom>=o-Rh&&(n=zh(e.clientY-o)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let s=e.ranges[n],a=null;if(s.empty){let r=gu(this.atoms,s.from,0);r!=s.from&&(a=je.cursor(r,-1))}else{let r=gu(this.atoms,s.from,-1),o=gu(this.atoms,s.to,1);(r!=s.from||o!=s.to)&&(a=je.range(s.from==s.anchor?r:o,s.from==s.head?r:o))}a&&(t||(t=e.ranges.slice()),t[n]=a)}return t?je.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function pj(i,e){let t=i.state.facet(g2);return t.length?t[0](e):At.mac?e.metaKey:e.ctrlKey}function mj(i,e){let t=i.state.facet(_2);return t.length?t[0](e):At.mac?!e.altKey:!e.ctrlKey}function vj(i,e){let{main:t}=i.state.selection;if(t.empty)return!1;let n=hd(i.root);if(!n||n.rangeCount==0)return!0;let s=n.getRangeAt(0).getClientRects();for(let a=0;a<s.length;a++){let r=s[a];if(r.left<=e.clientX&&r.right>=e.clientX&&r.top<=e.clientY&&r.bottom>=e.clientY)return!0}return!1}function gj(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=i.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=ln.get(t))&&n.ignoreEvent(e))return!1;return!0}const ya=Object.create(null),ca=Object.create(null),R2=At.ie&&At.ie_version<15||At.ios&&At.webkit_version<604;function _j(i){let e=i.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{i.focus(),t.remove(),z2(i,t.value)},50)}function Vf(i,e,t){for(let n of i.facet(e))t=n(t,i);return t}function z2(i,e){e=Vf(i.state,Qg,e);let{state:t}=i,n,s=1,a=t.toText(e),r=a.lines==t.selection.ranges.length;if(Rv!=null&&t.selection.ranges.every(l=>l.empty)&&Rv==a.toString()){let l=-1;n=t.changeByRange(d=>{let h=t.doc.lineAt(d.from);if(h.from==l)return{range:d};l=h.from;let m=t.toText((r?a.line(s++).text:e)+t.lineBreak);return{changes:{from:h.from,insert:m},range:je.cursor(d.from+m.length)}})}else r?n=t.changeByRange(l=>{let d=a.line(s++);return{changes:{from:l.from,to:l.to,insert:d.text},range:je.cursor(l.from+d.length)}}):n=t.replaceSelection(a);i.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}ca.scroll=i=>{i.inputState.lastScrollTop=i.scrollDOM.scrollTop,i.inputState.lastScrollLeft=i.scrollDOM.scrollLeft};ya.keydown=(i,e)=>(i.inputState.setSelectionOrigin("select"),e.keyCode==27&&i.inputState.tabFocusMode!=0&&(i.inputState.tabFocusMode=Date.now()+2e3),!1);ca.touchstart=(i,e)=>{i.inputState.lastTouchTime=Date.now(),i.inputState.setSelectionOrigin("select.pointer")};ca.touchmove=i=>{i.inputState.setSelectionOrigin("select.pointer")};ya.mousedown=(i,e)=>{if(i.observer.flush(),i.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of i.state.facet(b2))if(t=n(i,e),t)break;if(!t&&e.button==0&&(t=xj(i,e)),t){let n=!i.hasFocus;i.inputState.startMouseSelection(new fj(i,e,t,n)),n&&i.observer.ignore(()=>{Jk(i.contentDOM);let a=i.root.activeElement;a&&!a.contains(i.contentDOM)&&a.blur()});let s=i.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}return!1};function Oy(i,e,t,n){if(n==1)return je.cursor(e,t);if(n==2)return Z7(i.state,e,t);{let s=Nn.find(i.docView,e),a=i.state.doc.lineAt(s?s.posAtEnd:e),r=s?s.posAtStart:a.from,o=s?s.posAtEnd:a.to;return o<i.state.doc.length&&o==a.to&&o++,je.range(r,o)}}let By=(i,e,t)=>e>=t.top&&e<=t.bottom&&i>=t.left&&i<=t.right;function bj(i,e,t,n){let s=Nn.find(i.docView,e);if(!s)return 1;let a=e-s.posAtStart;if(a==0)return 1;if(a==s.length)return-1;let r=s.coordsAt(a,-1);if(r&&By(t,n,r))return-1;let o=s.coordsAt(a,1);return o&&By(t,n,o)?1:r&&r.bottom>=n?-1:1}function Ry(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:bj(i,t,e.clientX,e.clientY)}}const yj=At.ie&&At.ie_version<=11;let zy=null,Ny=0,Fy=0;function N2(i){if(!yj)return i.detail;let e=zy,t=Fy;return zy=i,Fy=Date.now(),Ny=!e||t>Date.now()-400&&Math.abs(e.clientX-i.clientX)<2&&Math.abs(e.clientY-i.clientY)<2?(Ny+1)%3:1}function xj(i,e){let t=Ry(i,e),n=N2(e),s=i.state.selection;return{update(a){a.docChanged&&(t.pos=a.changes.mapPos(t.pos),s=s.map(a.changes))},get(a,r,o){let l=Ry(i,a),d,h=Oy(i,l.pos,l.bias,n);if(t.pos!=l.pos&&!r){let m=Oy(i,t.pos,t.bias,n),v=Math.min(m.from,h.from),b=Math.max(m.to,h.to);h=v<h.from?je.range(v,b):je.range(b,v)}return r?s.replaceRange(s.main.extend(h.from,h.to)):o&&n==1&&s.ranges.length>1&&(d=wj(s,l.pos))?d:o?s.addRange(h):je.create([h])}}}function wj(i,e){for(let t=0;t<i.ranges.length;t++){let{from:n,to:s}=i.ranges[t];if(n<=e&&s>=e)return je.create(i.ranges.slice(0,t).concat(i.ranges.slice(t+1)),i.mainIndex==t?0:i.mainIndex-(i.mainIndex>t?1:0))}return null}ya.dragstart=(i,e)=>{let{selection:{main:t}}=i.state;if(e.target.draggable){let s=i.docView.nearest(e.target);if(s&&s.isWidget){let a=s.posAtStart,r=a+s.length;(a>=t.to||r<=t.from)&&(t=je.range(a,r))}}let{inputState:n}=i;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Vf(i.state,e_,i.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};ya.dragend=i=>(i.inputState.draggedContent=null,!1);function Hy(i,e,t,n){if(t=Vf(i.state,Qg,t),!t)return;let s=i.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:a}=i.inputState,r=n&&a&&mj(i,e)?{from:a.from,to:a.to}:null,o={from:s,insert:t},l=i.state.changes(r?[r,o]:o);i.focus(),i.dispatch({changes:l,selection:{anchor:l.mapPos(s,-1),head:l.mapPos(s,1)},userEvent:r?"move.drop":"input.drop"}),i.inputState.draggedContent=null}ya.drop=(i,e)=>{if(!e.dataTransfer)return!1;if(i.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),s=0,a=()=>{++s==t.length&&Hy(i,e,n.filter(r=>r!=null).join(i.state.lineBreak),!1)};for(let r=0;r<t.length;r++){let o=new FileReader;o.onerror=a,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(n[r]=o.result),a()},o.readAsText(t[r])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return Hy(i,e,n,!0),!0}return!1};ya.paste=(i,e)=>{if(i.state.readOnly)return!0;i.observer.flush();let t=R2?null:e.clipboardData;return t?(z2(i,t.getData("text/plain")||t.getData("text/uri-list")),!0):(_j(i),!1)};function kj(i,e){let t=i.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),i.focus()},50)}function Sj(i){let e=[],t=[],n=!1;for(let s of i.selection.ranges)s.empty||(e.push(i.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:a}of i.selection.ranges){let r=i.doc.lineAt(a);r.number>s&&(e.push(r.text),t.push({from:r.from,to:Math.min(i.doc.length,r.to+1)})),s=r.number}n=!0}return{text:Vf(i,e_,e.join(i.lineBreak)),ranges:t,linewise:n}}let Rv=null;ya.copy=ya.cut=(i,e)=>{let{text:t,ranges:n,linewise:s}=Sj(i.state);if(!t&&!s)return!1;Rv=s?t:null,e.type=="cut"&&!i.state.readOnly&&i.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let a=R2?null:e.clipboardData;return a?(a.clearData(),a.setData("text/plain",t),!0):(kj(i,t),!1)};const F2=Cr.define();function H2(i,e){let t=[];for(let n of i.facet(w2)){let s=n(i,e);s&&t.push(s)}return t.length?i.update({effects:t,annotations:F2.of(!0)}):null}function j2(i){setTimeout(()=>{let e=i.hasFocus;if(e!=i.inputState.notifiedFocused){let t=H2(i.state,e);t?i.dispatch(t):i.update([])}},10)}ca.focus=i=>{i.inputState.lastFocusTime=Date.now(),!i.scrollDOM.scrollTop&&(i.inputState.lastScrollTop||i.inputState.lastScrollLeft)&&(i.scrollDOM.scrollTop=i.inputState.lastScrollTop,i.scrollDOM.scrollLeft=i.inputState.lastScrollLeft),j2(i)};ca.blur=i=>{i.observer.clearSelectionRange(),j2(i)};ca.compositionstart=ca.compositionupdate=i=>{i.observer.editContext||(i.inputState.compositionFirstChange==null&&(i.inputState.compositionFirstChange=!0),i.inputState.composing<0&&(i.inputState.composing=0))};ca.compositionend=i=>{i.observer.editContext||(i.inputState.composing=-1,i.inputState.compositionEndedAt=Date.now(),i.inputState.compositionPendingKey=!0,i.inputState.compositionPendingChange=i.observer.pendingRecords().length>0,i.inputState.compositionFirstChange=null,At.chrome&&At.android?i.observer.flushSoon():i.inputState.compositionPendingChange?Promise.resolve().then(()=>i.observer.flush()):setTimeout(()=>{i.inputState.composing<0&&i.docView.hasComposition&&i.update([])},50))};ca.contextmenu=i=>{i.inputState.lastContextMenu=Date.now()};ya.beforeinput=(i,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&i.observer.editContext){let a=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),r=e.getTargetRanges();if(a&&r.length){let o=r[0],l=i.posAtDOM(o.startContainer,o.startOffset),d=i.posAtDOM(o.endContainer,o.endOffset);return s_(i,{from:l,to:d,insert:i.state.toText(a)},null),!0}}let s;if(At.chrome&&At.android&&(s=O2.find(a=>a.inputType==e.inputType))&&(i.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let a=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var r;(((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0)>a+10&&i.hasFocus&&(i.contentDOM.blur(),i.focus())},100)}return At.ios&&e.inputType=="deleteContentForward"&&i.observer.flushSoon(),At.safari&&e.inputType=="insertText"&&i.inputState.composing>=0&&setTimeout(()=>ca.compositionend(i,e),20),!1};const jy=new Set;function Cj(i){jy.has(i)||(jy.add(i),i.addEventListener("copy",()=>{}),i.addEventListener("cut",()=>{}))}const $y=["pre-wrap","normal","pre-line","break-spaces"];let Fl=!1;function Vy(){Fl=!1}class Mj{constructor(e){this.lineWrapping=e,this.doc=Wi.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $y.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let s=e[n];s<0?n++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,n,s,a,r){let o=$y.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.textHeight=s,this.lineLength=a,l){this.heightSamples={};for(let d=0;d<r.length;d++){let h=r[d];h<0?d++:this.heightSamples[Math.floor(h*10)]=!0}}return l}}class Pj{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ja{constructor(e,t,n,s,a){this.from=e,this.length=t,this.top=n,this.height=s,this._content=a}get type(){return typeof this._content=="number"?ws.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof io?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ja(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var vn=function(i){return i[i.ByPos=0]="ByPos",i[i.ByHeight=1]="ByHeight",i[i.ByPosNoHeight=2]="ByPosNoHeight",i}(vn||(vn={}));const _u=.001;class ks{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>_u&&(Fl=!0),this.height=e)}replace(e,t,n){return ks.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,s){let a=this,r=n.doc;for(let o=s.length-1;o>=0;o--){let{fromA:l,toA:d,fromB:h,toB:m}=s[o],v=a.lineAt(l,vn.ByPosNoHeight,n.setDoc(t),0,0),b=v.to>=d?v:a.lineAt(d,vn.ByPosNoHeight,n,0,0);for(m+=b.to-d,d=b.to;o>0&&v.from<=s[o-1].toA;)l=s[o-1].fromA,h=s[o-1].fromB,o--,l<v.from&&(v=a.lineAt(l,vn.ByPosNoHeight,n,0,0));h+=v.from-l,l=v.from;let y=a_.build(n.setDoc(r),e,h,m);a=Ju(a,a.replace(l,d,y))}return a.updateHeight(n,0)}static empty(){return new Zs(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,s=0,a=0;for(;;)if(t==n)if(s>a*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),n+=1+o.break,s-=o.size}else if(a>s*2){let o=e[n];o.break?e.splice(n,1,o.left,null,o.right):e.splice(n,1,o.left,o.right),n+=2+o.break,a-=o.size}else break;else if(s<a){let o=e[t++];o&&(s+=o.size)}else{let o=e[--n];o&&(a+=o.size)}let r=0;return e[t-1]==null?(r=1,t--):e[t]==null&&(r=1,n++),new Aj(ks.of(e.slice(0,t)),r,ks.of(e.slice(n)))}}function Ju(i,e){return i==e?i:(i.constructor!=e.constructor&&(Fl=!0),e)}ks.prototype.size=1;class $2 extends ks{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,s){return new ja(s,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,s,a){return this.blockAt(0,n,s,a)}forEachLine(e,t,n,s,a,r){e<=a+this.length&&t>=a&&r(this.blockAt(0,n,s,a))}updateHeight(e,t=0,n=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Zs extends $2{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,s){return new ja(s,this.length,n,this.height,this.breaks)}replace(e,t,n){let s=n[0];return n.length==1&&(s instanceof Zs||s instanceof Xn&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Xn?s=new Zs(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):ks.of(n)}updateHeight(e,t=0,n=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xn extends ks{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,a=s-n+1,r,o=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*a);r=l/a,this.length>a+1&&(o=(this.height-l)/(this.length-a-1))}else r=this.height/a;return{firstLine:n,lastLine:s,perLine:r,perChar:o}}blockAt(e,t,n,s){let{firstLine:a,lastLine:r,perLine:o,perChar:l}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),h=t.doc.lineAt(d),m=o+h.length*l,v=Math.max(n,e-m/2);return new ja(h.from,h.length,v,m,0)}else{let d=Math.max(0,Math.min(r-a,Math.floor((e-n)/o))),{from:h,length:m}=t.doc.line(a+d);return new ja(h,m,n+o*d,o,0)}}lineAt(e,t,n,s,a){if(t==vn.ByHeight)return this.blockAt(e,n,s,a);if(t==vn.ByPosNoHeight){let{from:b,to:y}=n.doc.lineAt(e);return new ja(b,y-b,0,0,0)}let{firstLine:r,perLine:o,perChar:l}=this.heightMetrics(n,a),d=n.doc.lineAt(e),h=o+d.length*l,m=d.number-r,v=s+o*m+l*(d.from-a-m);return new ja(d.from,d.length,Math.max(s,Math.min(v,s+this.height-h)),h,0)}forEachLine(e,t,n,s,a,r){e=Math.max(e,a),t=Math.min(t,a+this.length);let{firstLine:o,perLine:l,perChar:d}=this.heightMetrics(n,a);for(let h=e,m=s;h<=t;){let v=n.doc.lineAt(h);if(h==e){let y=v.number-o;m+=l*y+d*(e-a-y)}let b=l+d*v.length;r(new ja(v.from,v.length,m,b,0)),m+=b,h=v.to+1}}replace(e,t,n){let s=this.length-t;if(s>0){let a=n[n.length-1];a instanceof Xn?n[n.length-1]=new Xn(a.length+s):n.push(null,new Xn(s-1))}if(e>0){let a=n[0];a instanceof Xn?n[0]=new Xn(e+a.length):n.unshift(new Xn(e-1),null)}return ks.of(n)}decomposeLeft(e,t){t.push(new Xn(e-1),null)}decomposeRight(e,t){t.push(null,new Xn(this.length-e-1))}updateHeight(e,t=0,n=!1,s){let a=t+this.length;if(s&&s.from<=t+this.length&&s.more){let r=[],o=Math.max(t,s.from),l=-1;for(s.from>t&&r.push(new Xn(s.from-t-1).updateHeight(e,t));o<=a&&s.more;){let h=e.doc.lineAt(o).length;r.length&&r.push(null);let m=s.heights[s.index++];l==-1?l=m:Math.abs(m-l)>=_u&&(l=-2);let v=new Zs(h,m);v.outdated=!1,r.push(v),o+=h+1}o<=a&&r.push(null,new Xn(a-o).updateHeight(e,o));let d=ks.of(r);return(l<0||Math.abs(d.height-this.height)>=_u||Math.abs(l-this.heightMetrics(e,t).perLine)>=_u)&&(Fl=!0),Ju(this,d)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class Aj extends ks{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,s){let a=n+this.left.height;return e<a?this.left.blockAt(e,t,n,s):this.right.blockAt(e,t,a,s+this.left.length+this.break)}lineAt(e,t,n,s,a){let r=s+this.left.height,o=a+this.left.length+this.break,l=t==vn.ByHeight?e<r:e<o,d=l?this.left.lineAt(e,t,n,s,a):this.right.lineAt(e,t,n,r,o);if(this.break||(l?d.to<o:d.from>o))return d;let h=t==vn.ByPosNoHeight?vn.ByPosNoHeight:vn.ByPos;return l?d.join(this.right.lineAt(o,h,n,r,o)):this.left.lineAt(o,h,n,s,a).join(d)}forEachLine(e,t,n,s,a,r){let o=s+this.left.height,l=a+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,s,a,r),t>=l&&this.right.forEachLine(e,t,n,o,l,r);else{let d=this.lineAt(l,vn.ByPos,n,s,a);e<d.from&&this.left.forEachLine(e,d.from-1,n,s,a,r),d.to>=e&&d.from<=t&&r(d),t>d.to&&this.right.forEachLine(d.to+1,t,n,o,l,r)}}replace(e,t,n){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,n));let a=[];e>0&&this.decomposeLeft(e,a);let r=a.length;for(let o of n)a.push(o);if(e>0&&Wy(a,r-1),t<this.length){let o=a.length;this.decomposeRight(t,a),Wy(a,o)}return ks.of(a)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,s=n+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?ks.of(this.break?[e,null,t]:[e,t]):(this.left=Ju(this.left,e),this.right=Ju(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,s){let{left:a,right:r}=this,o=t+a.length+this.break,l=null;return s&&s.from<=t+a.length&&s.more?l=a=a.updateHeight(e,t,n,s):a.updateHeight(e,t,n),s&&s.from<=o+r.length&&s.more?l=r=r.updateHeight(e,o,n,s):r.updateHeight(e,o,n),l?this.balanced(a,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Wy(i,e){let t,n;i[e]==null&&(t=i[e-1])instanceof Xn&&(n=i[e+1])instanceof Xn&&i.splice(e-1,3,new Xn(t.length+1+n.length))}const Tj=5;class a_{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof Zs?s.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Zs(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let s=n.widget?n.widget.estimatedHeight:0,a=n.widget?n.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let r=t-e;n.block?this.addBlock(new $2(r,s,n)):(r||a||s>=Tj)&&this.addLineDeco(s,a,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Zs(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Xn(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Zs)return e;let t=new Zs(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let s=this.ensureLine();s.length+=n,s.collapsed+=n,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Zs)&&!this.isCovered?this.nodes.push(new Zs(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let s of this.nodes)s instanceof Zs&&s.updateHeight(this.oracle,n),n+=s?s.length:1;return this.nodes}static build(e,t,n,s){let a=new a_(n,e);return Ni.spans(t,n,s,a,0),a.finish(n)}}function Lj(i,e,t){let n=new Dj;return Ni.compare(i,e,t,n,0),n.changes}class Dj{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,s){(e<t||n&&n.heightRelevant||s&&s.heightRelevant)&&vu(e,t,this.changes,5)}}function Ej(i,e){let t=i.getBoundingClientRect(),n=i.ownerDocument,s=n.defaultView||window,a=Math.max(0,t.left),r=Math.min(s.innerWidth,t.right),o=Math.max(0,t.top),l=Math.min(s.innerHeight,t.bottom);for(let d=i.parentNode;d&&d!=n.body;)if(d.nodeType==1){let h=d,m=window.getComputedStyle(h);if((h.scrollHeight>h.clientHeight||h.scrollWidth>h.clientWidth)&&m.overflow!="visible"){let v=h.getBoundingClientRect();a=Math.max(a,v.left),r=Math.min(r,v.right),o=Math.max(o,v.top),l=Math.min(d==i.parentNode?s.innerHeight:l,v.bottom)}d=m.position=="absolute"||m.position=="fixed"?h.offsetParent:h.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:a-t.left,right:Math.max(a,r)-t.left,top:o-(t.top+e),bottom:Math.max(o,l)-(t.top+e)}}function Ij(i){let e=i.getBoundingClientRect(),t=i.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function Oj(i,e){let t=i.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class nm{constructor(e,t,n,s){this.from=e,this.to=t,this.size=n,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let s=e[n],a=t[n];if(s.from!=a.from||s.to!=a.to||s.size!=a.size)return!1}return!0}draw(e,t){return ni.replace({widget:new Bj(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Bj extends lo{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class qy{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Uy,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=_n.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(t_).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new Mj(t),this.stateDeco=e.facet(fd).filter(n=>typeof n!="function"),this.heightMap=ks.empty().applyChanges(this.stateDeco,Wi.empty,this.heightOracle.setDoc(e.doc),[new aa(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ni.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let s=n?t.head:t.anchor;if(!e.some(({from:a,to:r})=>s>=a&&s<=r)){let{from:a,to:r}=this.lineBlockAt(s);e.push(new Nh(a,r))}}return this.viewports=e.sort((n,s)=>n.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Uy:new r_(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ec(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(fd).filter(h=>typeof h!="function");let s=e.changedRanges,a=aa.extendWithRanges(s,Lj(n,this.stateDeco,e?e.changes:Wn.empty(this.state.doc.length))),r=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Vy(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),a),(this.heightMap.height!=r||Fl)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=r);let l=a.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let d=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(S2)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),s=this.heightOracle,a=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?_n.RTL:_n.LTR;let r=this.heightOracle.mustRefreshForWrapping(a),o=t.getBoundingClientRect(),l=r||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let d=0,h=0;if(o.width&&o.height){let{scaleX:I,scaleY:D}=Xk(t,o);(I>.005&&Math.abs(this.scaleX-I)>.005||D>.005&&Math.abs(this.scaleY-D)>.005)&&(this.scaleX=I,this.scaleY=D,d|=16,r=l=!0)}let m=(parseInt(n.paddingTop)||0)*this.scaleY,v=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let b=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=b&&(this.scrollAnchorHeight=-1,this.scrollTop=b),this.scrolledToBottom=e2(e.scrollDOM);let y=(this.printing?Oj:Ej)(t,this.paddingTop),x=y.top-this.pixelViewport.top,k=y.bottom-this.pixelViewport.bottom;this.pixelViewport=y;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(l=!0)),!this.inView&&!this.scrollTarget&&!Ij(e.dom))return 0;let A=o.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),l){let I=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(I)&&(r=!0),r||s.lineWrapping&&Math.abs(A-this.contentDOMWidth)>s.charWidth){let{lineHeight:D,charWidth:N,textHeight:z}=e.docView.measureTextSize();r=D>0&&s.refresh(a,D,N,z,A/N,I),r&&(e.docView.minWidth=0,d|=16)}x>0&&k>0?h=Math.max(x,k):x<0&&k<0&&(h=Math.min(x,k)),Vy();for(let D of this.viewports){let N=D.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(D);this.heightMap=(r?ks.empty().applyChanges(this.stateDeco,Wi.empty,this.heightOracle,[new aa(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,r,new Pj(D.from,N))}Fl&&(d|=2)}let T=!this.viewportIsAppropriate(this.viewport,h)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(h,this.scrollTarget),d|=this.updateForViewport()),(d&2||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,a=this.heightOracle,{visibleTop:r,visibleBottom:o}=this,l=new Nh(s.lineAt(r-n*1e3,vn.ByHeight,a,0,0).from,s.lineAt(o+(1-n)*1e3,vn.ByHeight,a,0,0).to);if(t){let{head:d}=t.range;if(d<l.from||d>l.to){let h=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(d,vn.ByPos,a,0,0),v;t.y=="center"?v=(m.top+m.bottom)/2-h/2:t.y=="start"||t.y=="nearest"&&d<l.from?v=m.top:v=m.bottom-h,l=new Nh(s.lineAt(v-1e3/2,vn.ByHeight,a,0,0).from,s.lineAt(v+h+1e3/2,vn.ByHeight,a,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Nh(this.heightMap.lineAt(n,vn.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,vn.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,vn.ByPos,this.heightOracle,0,0),{bottom:a}=this.heightMap.lineAt(t,vn.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:o}=this;return(e==0||s<=r-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||a>=o+Math.max(10,Math.min(n,250)))&&s>r-2*1e3&&a<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let s of e)t.touchesRange(s.from,s.to)||n.push(new nm(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,s=n?1e4:2e3,a=s>>1,r=s<<1;if(this.defaultTextDirection!=_n.LTR&&!n)return[];let o=[],l=(h,m,v,b)=>{if(m-h<a)return;let y=this.state.selection.main,x=[y.from];y.empty||x.push(y.to);for(let C of x)if(C>h&&C<m){l(h,C-10,v,b),l(C+10,m,v,b);return}let k=zj(e,C=>C.from>=v.from&&C.to<=v.to&&Math.abs(C.from-h)<a&&Math.abs(C.to-m)<a&&!x.some(A=>C.from<A&&C.to>A));if(!k){if(m<v.to&&t&&n&&t.visibleRanges.some(T=>T.from<=m&&T.to>=m)){let T=t.moveToLineBoundary(je.cursor(m),!1,!0).head;T>h&&(m=T)}let C=this.gapSize(v,h,m,b),A=n||C<2e6?C:2e6;k=new nm(h,m,C,A)}o.push(k)},d=h=>{if(h.length<r||h.type!=ws.Text)return;let m=Rj(h.from,h.to,this.stateDeco);if(m.total<r)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,b,y;if(n){let x=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,C;if(v!=null){let A=Hh(m,v),T=((this.visibleBottom-this.visibleTop)/2+x)/h.height;k=A-T,C=A+T}else k=(this.visibleTop-h.top-x)/h.height,C=(this.visibleBottom-h.top+x)/h.height;b=Fh(m,k),y=Fh(m,C)}else{let x=m.total*this.heightOracle.charWidth,k=s*this.heightOracle.charWidth,C=0;if(x>2e6)for(let N of e)N.from>=h.from&&N.from<h.to&&N.size!=N.displaySize&&N.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=N.size-N.displaySize);let A=this.pixelViewport.left+C,T=this.pixelViewport.right+C,I,D;if(v!=null){let N=Hh(m,v),z=((T-A)/2+k)/x;I=N-z,D=N+z}else I=(A-k)/x,D=(T+k)/x;b=Fh(m,I),y=Fh(m,D)}b>h.from&&l(h.from,b,h,m),y<h.to&&l(y,h.to,h,m)};for(let h of this.viewportLines)Array.isArray(h.type)?h.type.forEach(d):d(h);return o}gapSize(e,t,n,s){let a=Hh(s,n)-Hh(s,t);return this.heightOracle.lineWrapping?e.height*a:s.total*this.heightOracle.charWidth*a}updateLineGaps(e){nm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ni.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Ni.spans(t,this.viewport.from,this.viewport.to,{span(a,r){n.push({from:a,to:r})},point(){}},20);let s=0;if(n.length!=this.visibleRanges.length)s=12;else for(let a=0;a<n.length&&!(s&8);a++){let r=this.visibleRanges[a],o=n[a];(r.from!=o.from||r.to!=o.to)&&(s|=4,e&&e.mapPos(r.from,-1)==o.from&&e.mapPos(r.to,1)==o.to||(s|=8))}return this.visibleRanges=n,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ec(this.heightMap.lineAt(e,vn.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ec(this.heightMap.lineAt(this.scaler.fromDOM(e),vn.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ec(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Nh{constructor(e,t){this.from=e,this.to=t}}function Rj(i,e,t){let n=[],s=i,a=0;return Ni.spans(t,i,e,{span(){},point(r,o){r>s&&(n.push({from:s,to:r}),a+=r-s),s=o}},20),s<e&&(n.push({from:s,to:e}),a+=e-s),{total:a,ranges:n}}function Fh({total:i,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(i*t);for(let s=0;;s++){let{from:a,to:r}=e[s],o=r-a;if(n<=o)return a+n;n-=o}}function Hh(i,e){let t=0;for(let{from:n,to:s}of i.ranges){if(e<=s){t+=e-n;break}t+=s-n}return t/i.total}function zj(i,e){for(let t of i)if(e(t))return t}const Uy={toDOM(i){return i},fromDOM(i){return i},scale:1,eq(i){return i==this}};class r_{constructor(e,t,n){let s=0,a=0,r=0;this.viewports=n.map(({from:o,to:l})=>{let d=t.lineAt(o,vn.ByPos,e,0,0).top,h=t.lineAt(l,vn.ByPos,e,0,0).bottom;return s+=h-d,{from:o,to:l,top:d,bottom:h,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let o of this.viewports)o.domTop=r+(o.top-a)*this.scale,r=o.domBottom=o.domTop+(o.bottom-o.top),a=o.bottom}toDOM(e){for(let t=0,n=0,s=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.top)return s+(e-n)*this.scale;if(e<=a.bottom)return a.domTop+(e-a.top);n=a.bottom,s=a.domBottom}}fromDOM(e){for(let t=0,n=0,s=0;;t++){let a=t<this.viewports.length?this.viewports[t]:null;if(!a||e<a.domTop)return n+(e-s)/this.scale;if(e<=a.domBottom)return a.top+(e-a.domTop);n=a.bottom,s=a.domBottom}}eq(e){return e instanceof r_?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function Ec(i,e){if(e.scale==1)return i;let t=e.toDOM(i.top),n=e.toDOM(i.bottom);return new ja(i.from,i.length,t,n-t,Array.isArray(i._content)?i._content.map(s=>Ec(s,e)):i._content)}const jh=Mt.define({combine:i=>i.join(" ")}),zv=Mt.define({combine:i=>i.indexOf(!0)>-1}),Nv=eo.newName(),V2=eo.newName(),W2=eo.newName(),q2={"&light":"."+V2,"&dark":"."+W2};function Fv(i,e,t){return new eo(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,s=>{if(s=="&")return i;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):i+" "+n}})}const Nj=Fv("."+Nv,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},q2),Fj={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},sm=At.ie&&At.ie_version<=11;class Hj{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new x7,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(At.ie&&At.ie_version<=11||At.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(At.chrome&&At.chrome_version<126)&&(this.editContext=new $j(e),e.state.facet(hr)&&(e.contentDOM.editContext=this.editContext.editContext)),sm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,s=this.selectionRange;if(n.state.facet(hr)?n.root.activeElement!=this.dom:!mu(this.dom,s))return;let a=s.anchorNode&&n.docView.nearest(s.anchorNode);if(a&&a.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(At.ie&&At.ie_version<=11||At.android&&At.chrome)&&!n.state.selection.main.empty&&s.focusNode&&Wc(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=hd(e.root);if(!t)return!1;let n=At.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&jj(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let s=mu(this.dom,n);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&k7(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Fj),sm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),sm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let s=()=>{let a=this.delayedAndroidKey;a&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=a.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&a.force&&yl(this.dom,a.key,a.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,s=!1;for(let a of e){let r=this.readMutation(a);r&&(r.typeOver&&(s=!0),t==-1?{from:t,to:n}=r:(t=Math.min(r.from,t),n=Math.max(r.to,n)))}return{from:t,to:n,typeOver:s}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),s=this.selectionChanged&&mu(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let a=new sj(this.view,e,t,n);return this.view.docView.domChanged={newSel:a.newSel?a.newSel.main:null},a}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,s=I2(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=Gy(t,e.previousSibling||e.target.previousSibling,-1),s=Gy(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(hr)!=e.state.facet(hr)&&(e.view.contentDOM.editContext=e.state.facet(hr)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Gy(i,e,t){for(;e;){let n=ln.get(e);if(n&&n.parent==i)return n;let s=e.parentNode;e=s!=i.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function Zy(i,e){let t=e.startContainer,n=e.startOffset,s=e.endContainer,a=e.endOffset,r=i.docView.domAtPos(i.state.selection.main.anchor);return Wc(r.node,r.offset,s,a)&&([t,n,s,a]=[s,a,t,n]),{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:a}}function jj(i,e){if(e.getComposedRanges){let s=e.getComposedRanges(i.root)[0];if(s)return Zy(i,s)}let t=null;function n(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return i.contentDOM.addEventListener("beforeinput",n,!0),i.dom.ownerDocument.execCommand("indent"),i.contentDOM.removeEventListener("beforeinput",n,!0),t?Zy(i,t):null}class $j{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let s=e.state.selection.main,{anchor:a,head:r}=s,o=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:o,drifted:!1});let d={from:o,to:l,insert:Wi.of(n.text.split(`
`))};if(d.from==this.from&&a<this.from?d.from=a:d.to==this.to&&a>this.to&&(d.to=a),d.from==d.to&&!d.insert.length){let h=je.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));h.main.eq(s)||e.dispatch({selection:h,userEvent:"select"});return}if((At.mac||At.android)&&d.from==r-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(d={from:o,to:l,insert:Wi.of([n.text.replace("."," ")])}),this.pendingContextChange=d,!e.state.readOnly){let h=this.to-this.from+(d.to-d.from+d.insert.length);s_(e,d,je.single(this.toEditorPos(n.selectionStart,h),this.toEditorPos(n.selectionEnd,h)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let s=[],a=null;for(let r=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);r<o;r++){let l=e.coordsForChar(r);a=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||a||new DOMRect,s.push(a)}t.updateCharacterBounds(n.rangeStart,s)},this.handlers.textformatupdate=n=>{let s=[];for(let a of n.getTextFormats()){let r=a.underlineStyle,o=a.underlineThickness;if(r!="None"&&o!="None"){let l=this.toEditorPos(a.rangeStart),d=this.toEditorPos(a.rangeEnd);if(l<d){let h=`text-decoration: underline ${r=="Dashed"?"dashed ":r=="Squiggle"?"wavy ":""}${o=="Thin"?1:2}px`;s.push(ni.mark({attributes:{style:h}}).range(l,d))}}}e.dispatch({effects:M2.of(ni.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let s=hd(n.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,s=this.pendingContextChange;return e.changes.iterChanges((a,r,o,l,d)=>{if(n)return;let h=d.length-(r-a);if(s&&r>=s.to)if(s.from==a&&s.to==r&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=h,this.to+=h;return}else s=null,this.revertPending(e.state);if(a+=t,r+=t,r<=this.from)this.from+=h,this.to+=h;else if(a<this.to){if(a<this.from||r>this.to||this.to-this.from+d.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(a),this.toContextPos(r),d.toString()),this.to+=h}t+=h}),s&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(n,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ct{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(s=>s.forEach(a=>n(a,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||w7(e.parent)||document,this.viewState=new qy(e.state||ji.create(e)),e.scrollTo&&e.scrollTo.is(Bh)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ul).map(s=>new em(s));for(let s of this.plugins)s.update(this);this.observer=new Hj(this),this.inputState=new cj(this),this.inputState.ensureHandlers(this.plugins),this.docView=new My(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Un?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,s,a=this.state;for(let v of e){if(v.startState!=a)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");a=v.state}if(this.destroyed){this.viewState.state=a;return}let r=this.hasFocus,o=0,l=null;e.some(v=>v.annotation(F2))?(this.inputState.notifiedFocused=r,o=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,l=H2(a,r),l||(o=1));let d=this.observer.delayedAndroidKey,h=null;if(d?(this.observer.clearDelayedAndroidKey(),h=this.observer.readChange(),(h&&!this.state.doc.eq(a.doc)||!this.state.selection.eq(a.selection))&&(h=null)):this.observer.clear(),a.facet(ji.phrases)!=this.state.facet(ji.phrases))return this.setState(a);s=Xu.create(this,a,e),s.flags|=o;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(m&&(m=m.map(v.changes)),v.scrollIntoView){let{main:b}=v.state.selection;m=new xl(b.empty?b:je.cursor(b.head,b.head>b.anchor?-1:1))}for(let b of v.effects)b.is(Bh)&&(m=b.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=Qu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Lc)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(jh)!=s.state.facet(jh)&&(this.viewState.mustMeasureContent=!0),(t||n||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let v of this.state.facet(Iv))try{v(s)}catch(b){Hs(this.state,b,"update listener")}(l||h)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),h&&!I2(this,h)&&d.force&&yl(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new qy(e),this.plugins=e.facet(ul).map(n=>new em(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new My(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ul),n=e.state.facet(ul);if(t!=n){let s=[];for(let a of n){let r=t.indexOf(a);if(r<0)s.push(new em(a));else{let o=this.plugins[r];o.mustUpdate=e,s.push(o)}}for(let a of this.plugins)a.mustUpdate!=e&&a.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){Hs(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,s=n.scrollTop*this.scaleY,{scrollAnchorPos:a,scrollAnchorHeight:r}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(r<0)if(e2(n))a=-1,r=this.viewState.heightMap.height;else{let b=this.viewState.scrollAnchorAt(s);a=b.from,r=b.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];l&4||([this.measureRequests,d]=[d,this.measureRequests]);let h=d.map(b=>{try{return b.read(this)}catch(y){return Hs(this.state,y),Yy}}),m=Xu.create(this,this.state,[]),v=!1;m.flags|=l,t?t.flags|=l:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),v=this.docView.update(m),v&&this.docViewUpdate());for(let b=0;b<d.length;b++)if(h[b]!=Yy)try{let y=d[b];y.write&&y.write(h[b],this)}catch(y){Hs(this.state,y)}if(v&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}else{let y=(a<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(a).top)-r;if(y>1||y<-1){s=s+y,n.scrollTop=s/this.scaleY,r=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(Iv))o(t)}get themeClasses(){return Nv+" "+(this.state.facet(zv)?W2:V2)+" "+this.state.facet(jh)}updateAttrs(){let e=Ky(this,P2,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(hr)?"true":"false",class:"cm-content",style:`${At.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),Ky(this,t_,t);let n=this.observer.ignore(()=>{let s=Av(this.contentDOM,this.contentAttrs,t),a=Av(this.dom,this.editorAttrs,e);return s||a});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let s of n.effects)if(s.is(Ct.announce)){t&&(this.announceDOM.textContent=""),t=!1;let a=this.announceDOM.appendChild(document.createElement("div"));a.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Lc);let e=this.state.facet(Ct.cspNonce);eo.mount(this.root,this.styleModules.concat(Nj).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return im(this,e,Dy(this,e,t,n))}moveByGroup(e,t){return im(this,e,Dy(this,e,t,n=>ej(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),s=this.textDirectionAt(e.from),a=n[t?n.length-1:0];return je.cursor(a.side(t,s)+e.from,a.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,n=!0){return Q7(this,e,t,n)}moveVertically(e,t,n){return im(this,e,tj(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),E2(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let s=this.state.doc.lineAt(e),a=this.bidiSpans(s),r=a[Wr.find(a,e-s.from,-1,t)];return jf(n,r.dir==_n.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(k2)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Vj)return m2(e.length);let t=this.textDirectionAt(e.from),n;for(let a of this.bidiCache)if(a.from==e.from&&a.dir==t&&(a.fresh||p2(a.isolates,n=Cy(this,e))))return a.order;n||(n=Cy(this,e));let s=z7(e.text,t,n);return this.bidiCache.push(new Qu(e.from,e.to,t,n,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||At.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Jk(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Bh.of(new xl(typeof e=="number"?je.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Bh.of(new xl(je.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return jn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return jn.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=eo.newName(),s=[jh.of(n),Lc.of(Fv(`.${n}`,e))];return t&&t.dark&&s.push(zv.of(!0)),s}static baseTheme(e){return Xo.lowest(Lc.of(Fv("."+Nv,e,q2)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),s=n&&ln.get(n)||ln.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Ct.styleModule=Lc;Ct.inputHandler=x2;Ct.clipboardInputFilter=Qg;Ct.clipboardOutputFilter=e_;Ct.scrollHandler=C2;Ct.focusChangeEffect=w2;Ct.perLineTextDirection=k2;Ct.exceptionSink=y2;Ct.updateListener=Iv;Ct.editable=hr;Ct.mouseSelectionStyle=b2;Ct.dragMovesSelection=_2;Ct.clickAddsSelectionRange=g2;Ct.decorations=fd;Ct.outerDecorations=A2;Ct.atomicRanges=i_;Ct.bidiIsolatedRanges=T2;Ct.scrollMargins=L2;Ct.darkTheme=zv;Ct.cspNonce=Mt.define({combine:i=>i.length?i[0]:""});Ct.contentAttributes=t_;Ct.editorAttributes=P2;Ct.lineWrapping=Ct.contentAttributes.of({class:"cm-lineWrapping"});Ct.announce=_i.define();const Vj=4096,Yy={};class Qu{constructor(e,t,n,s,a,r){this.from=e,this.to=t,this.dir=n,this.isolates=s,this.fresh=a,this.order=r}static update(e,t){if(t.empty&&!e.some(a=>a.fresh))return e;let n=[],s=e.length?e[e.length-1].dir:_n.LTR;for(let a=Math.max(0,e.length-10);a<e.length;a++){let r=e[a];r.dir==s&&!t.touchesRange(r.from,r.to)&&n.push(new Qu(t.mapPos(r.from,1),t.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return n}}function Ky(i,e,t){for(let n=i.state.facet(e),s=n.length-1;s>=0;s--){let a=n[s],r=typeof a=="function"?a(i):a;r&&Pv(r,t)}return t}const Wj=At.mac?"mac":At.windows?"win":At.linux?"linux":"key";function qj(i,e){const t=i.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let s,a,r,o;for(let l=0;l<t.length-1;++l){const d=t[l];if(/^(cmd|meta|m)$/i.test(d))o=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))a=!0;else if(/^s(hift)?$/i.test(d))r=!0;else if(/^mod$/i.test(d))e=="mac"?o=!0:a=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(n="Alt-"+n),a&&(n="Ctrl-"+n),o&&(n="Meta-"+n),r&&(n="Shift-"+n),n}function $h(i,e,t){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),t!==!1&&e.shiftKey&&(i="Shift-"+i),i}const Uj=Xo.default(Ct.domEventHandlers({keydown(i,e){return G2(U2(e.state),i,e,"editor")}})),o_=Mt.define({enables:Uj}),Xy=new WeakMap;function U2(i){let e=i.facet(o_),t=Xy.get(e);return t||Xy.set(e,t=Yj(e.reduce((n,s)=>n.concat(s),[]))),t}function Gj(i,e,t){return G2(U2(i.state),e,i,t)}let Br=null;const Zj=4e3;function Yj(i,e=Wj){let t=Object.create(null),n=Object.create(null),s=(r,o)=>{let l=n[r];if(l==null)n[r]=o;else if(l!=o)throw new Error("Key binding "+r+" is used both as a regular binding and as a multi-stroke prefix")},a=(r,o,l,d,h)=>{var m,v;let b=t[r]||(t[r]=Object.create(null)),y=o.split(/ (?!$)/).map(C=>qj(C,e));for(let C=1;C<y.length;C++){let A=y.slice(0,C).join(" ");s(A,!0),b[A]||(b[A]={preventDefault:!0,stopPropagation:!1,run:[T=>{let I=Br={view:T,prefix:A,scope:r};return setTimeout(()=>{Br==I&&(Br=null)},Zj),!0}]})}let x=y.join(" ");s(x,!1);let k=b[x]||(b[x]={preventDefault:!1,stopPropagation:!1,run:((v=(m=b._any)===null||m===void 0?void 0:m.run)===null||v===void 0?void 0:v.slice())||[]});l&&k.run.push(l),d&&(k.preventDefault=!0),h&&(k.stopPropagation=!0)};for(let r of i){let o=r.scope?r.scope.split(" "):["editor"];if(r.any)for(let d of o){let h=t[d]||(t[d]=Object.create(null));h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=r;for(let v in h)h[v].run.push(b=>m(b,Hv))}let l=r[e]||r.key;if(l)for(let d of o)a(d,l,r.run,r.preventDefault,r.stopPropagation),r.shift&&a(d,"Shift-"+l,r.shift,r.preventDefault,r.stopPropagation)}return t}let Hv=null;function G2(i,e,t,n){Hv=e;let s=g7(e),a=Bs(s,0),r=Ha(a)==s.length&&s!=" ",o="",l=!1,d=!1,h=!1;Br&&Br.view==t&&Br.scope==n&&(o=Br.prefix+" ",B2.indexOf(e.keyCode)<0&&(d=!0,Br=null));let m=new Set,v=k=>{if(k){for(let C of k.run)if(!m.has(C)&&(m.add(C),C(t)))return k.stopPropagation&&(h=!0),!0;k.preventDefault&&(k.stopPropagation&&(h=!0),d=!0)}return!1},b=i[n],y,x;return b&&(v(b[o+$h(s,e,!r)])?l=!0:r&&(e.altKey||e.metaKey||e.ctrlKey)&&!(At.windows&&e.ctrlKey&&e.altKey)&&(y=to[e.keyCode])&&y!=s?(v(b[o+$h(y,e,!0)])||e.shiftKey&&(x=dd[e.keyCode])!=s&&x!=y&&v(b[o+$h(x,e,!1)]))&&(l=!0):r&&e.shiftKey&&v(b[o+$h(s,e,!0)])&&(l=!0),!l&&v(b._any)&&(l=!0)),d&&(l=!0),l&&h&&e.stopPropagation(),Hv=null,l}class $d{constructor(e,t,n,s,a){this.className=e,this.left=t,this.top=n,this.width=s,this.height=a}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let s=e.coordsAtPos(n.head,n.assoc||1);if(!s)return[];let a=Z2(e);return[new $d(t,s.left-a.left,s.top-a.top,null,s.bottom-s.top)]}else return Kj(e,t,n)}}function Z2(i){let e=i.scrollDOM.getBoundingClientRect();return{left:(i.textDirection==_n.LTR?e.left:e.right-i.scrollDOM.clientWidth*i.scaleX)-i.scrollDOM.scrollLeft*i.scaleX,top:e.top-i.scrollDOM.scrollTop*i.scaleY}}function Jy(i,e,t,n){let s=i.coordsAtPos(e,t*2);if(!s)return n;let a=i.dom.getBoundingClientRect(),r=(s.top+s.bottom)/2,o=i.posAtCoords({x:a.left+1,y:r}),l=i.posAtCoords({x:a.right-1,y:r});return o==null||l==null?n:{from:Math.max(n.from,Math.min(o,l)),to:Math.min(n.to,Math.max(o,l))}}function Kj(i,e,t){if(t.to<=i.viewport.from||t.from>=i.viewport.to)return[];let n=Math.max(t.from,i.viewport.from),s=Math.min(t.to,i.viewport.to),a=i.textDirection==_n.LTR,r=i.contentDOM,o=r.getBoundingClientRect(),l=Z2(i),d=r.querySelector(".cm-line"),h=d&&window.getComputedStyle(d),m=o.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),v=o.right-(h?parseInt(h.paddingRight):0),b=Bv(i,n,1),y=Bv(i,s,-1),x=b.type==ws.Text?b:null,k=y.type==ws.Text?y:null;if(x&&(i.lineWrapping||b.widgetLineBreaks)&&(x=Jy(i,n,1,x)),k&&(i.lineWrapping||y.widgetLineBreaks)&&(k=Jy(i,s,-1,k)),x&&k&&x.from==k.from&&x.to==k.to)return A(T(t.from,t.to,x));{let D=x?T(t.from,null,x):I(b,!1),N=k?T(null,t.to,k):I(y,!0),z=[];return(x||b).to<(k||y).from-(x&&k?1:0)||b.widgetLineBreaks>1&&D.bottom+i.defaultLineHeight/2<N.top?z.push(C(m,D.bottom,v,N.top)):D.bottom<N.top&&i.elementAtHeight((D.bottom+N.top)/2).type==ws.Text&&(D.bottom=N.top=(D.bottom+N.top)/2),A(D).concat(z).concat(A(N))}function C(D,N,z,H){return new $d(e,D-l.left,N-l.top,z-D,H-N)}function A({top:D,bottom:N,horizontal:z}){let H=[];for(let j=0;j<z.length;j+=2)H.push(C(z[j],D,z[j+1],N));return H}function T(D,N,z){let H=1e9,j=-1e9,re=[];function V(ee,W,ne,ye,ie){let Z=i.coordsAtPos(ee,ee==z.to?-2:2),$=i.coordsAtPos(ne,ne==z.from?2:-2);!Z||!$||(H=Math.min(Z.top,$.top,H),j=Math.max(Z.bottom,$.bottom,j),ie==_n.LTR?re.push(a&&W?m:Z.left,a&&ye?v:$.right):re.push(!a&&ye?m:$.left,!a&&W?v:Z.right))}let q=D??z.from,le=N??z.to;for(let ee of i.visibleRanges)if(ee.to>q&&ee.from<le)for(let W=Math.max(ee.from,q),ne=Math.min(ee.to,le);;){let ye=i.state.doc.lineAt(W);for(let ie of i.bidiSpans(ye)){let Z=ie.from+ye.from,$=ie.to+ye.from;if(Z>=ne)break;$>W&&V(Math.max(Z,W),D==null&&Z<=q,Math.min($,ne),N==null&&$>=le,ie.dir)}if(W=ye.to+1,W>=ne)break}return re.length==0&&V(q,D==null,le,N==null,i.textDirection),{top:H,bottom:j,horizontal:re}}function I(D,N){let z=o.top+(N?D.top:D.bottom);return{top:z,bottom:z,horizontal:[]}}}function Xj(i,e){return i.constructor==e.constructor&&i.eq(e)}class Jj{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(bu)!=e.state.facet(bu)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(bu);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!Xj(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[n].constructor&&s.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const bu=Mt.define();function Y2(i){return[jn.define(e=>new Jj(e,i)),bu.of(i)]}const pd=Mt.define({combine(i){return Xa(i,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Qj(i={}){return[pd.of(i),e$,t$,i$,S2.of(!0)]}function K2(i){return i.startState.facet(pd)!=i.state.facet(pd)}const e$=Y2({above:!0,markers(i){let{state:e}=i,t=e.facet(pd),n=[];for(let s of e.selection.ranges){let a=s==e.selection.main;if(s.empty||t.drawRangeCursor){let r=a?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=s.empty?s:je.cursor(s.head,s.head>s.anchor?-1:1);for(let l of $d.forRange(i,r,o))n.push(l)}}return n},update(i,e){i.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=K2(i);return t&&Qy(i.state,e),i.docChanged||i.selectionSet||t},mount(i,e){Qy(e.state,i)},class:"cm-cursorLayer"});function Qy(i,e){e.style.animationDuration=i.facet(pd).cursorBlinkRate+"ms"}const t$=Y2({above:!1,markers(i){return i.state.selection.ranges.map(e=>e.empty?[]:$d.forRange(i,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(i,e){return i.docChanged||i.selectionSet||i.viewportChanged||K2(i)},class:"cm-selectionLayer"}),i$=Xo.highest(Ct.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),X2=_i.define({map(i,e){return i==null?null:e.mapPos(i)}}),Ic=is.define({create(){return null},update(i,e){return i!=null&&(i=e.changes.mapPos(i)),e.effects.reduce((t,n)=>n.is(X2)?n.value:t,i)}}),n$=jn.fromClass(class{constructor(i){this.view=i,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(i){var e;let t=i.state.field(Ic);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(i.startState.field(Ic)!=t||i.docChanged||i.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:i}=this,e=i.state.field(Ic),t=e!=null&&i.coordsAtPos(e);if(!t)return null;let n=i.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+i.scrollDOM.scrollLeft*i.scaleX,top:t.top-n.top+i.scrollDOM.scrollTop*i.scaleY,height:t.bottom-t.top}}drawCursor(i){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;i?(this.cursor.style.left=i.left/e+"px",this.cursor.style.top=i.top/t+"px",this.cursor.style.height=i.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(i){this.view.state.field(Ic)!=i&&this.view.dispatch({effects:X2.of(i)})}},{eventObservers:{dragover(i){this.setDropPos(this.view.posAtCoords({x:i.clientX,y:i.clientY}))},dragleave(i){(i.target==this.view.contentDOM||!this.view.contentDOM.contains(i.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function s$(){return[Ic,n$]}function e1(i,e,t,n,s){e.lastIndex=0;for(let a=i.iterRange(t,n),r=t,o;!a.next().done;r+=a.value.length)if(!a.lineBreak)for(;o=e.exec(a.value);)s(r+o.index,o)}function a$(i,e){let t=i.visibleRanges;if(t.length==1&&t[0].from==i.viewport.from&&t[0].to==i.viewport.to)return t;let n=[];for(let{from:s,to:a}of t)s=Math.max(i.state.doc.lineAt(s).from,s-e),a=Math.min(i.state.doc.lineAt(a).to,a+e),n.length&&n[n.length-1].to>=s?n[n.length-1].to=a:n.push({from:s,to:a});return n}class r${constructor(e){const{regexp:t,decoration:n,decorate:s,boundary:a,maxLength:r=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,s)this.addMatch=(o,l,d,h)=>s(h,d,d+o[0].length,o,l);else if(typeof n=="function")this.addMatch=(o,l,d,h)=>{let m=n(o,l,d);m&&h(d,d+o[0].length,m)};else if(n)this.addMatch=(o,l,d,h)=>h(d,d+o[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=a,this.maxLength=r}createDeco(e){let t=new yr,n=t.add.bind(t);for(let{from:s,to:a}of a$(e,this.maxLength))e1(e.state.doc,this.regexp,s,a,(r,o)=>this.addMatch(o,e,r,n));return t.finish()}updateDeco(e,t){let n=1e9,s=-1;return e.docChanged&&e.changes.iterChanges((a,r,o,l)=>{l>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),s=Math.max(l,s))}),e.viewportMoved||s-n>1e3?this.createDeco(e.view):s>-1?this.updateRange(e.view,t.map(e.changes),n,s):t}updateRange(e,t,n,s){for(let a of e.visibleRanges){let r=Math.max(a.from,n),o=Math.min(a.to,s);if(o>=r){let l=e.state.doc.lineAt(r),d=l.to<o?e.state.doc.lineAt(o):l,h=Math.max(a.from,l.from),m=Math.min(a.to,d.to);if(this.boundary){for(;r>l.from;r--)if(this.boundary.test(l.text[r-1-l.from])){h=r;break}for(;o<d.to;o++)if(this.boundary.test(d.text[o-d.from])){m=o;break}}let v=[],b,y=(x,k,C)=>v.push(C.range(x,k));if(l==d)for(this.regexp.lastIndex=h-l.from;(b=this.regexp.exec(l.text))&&b.index<m-l.from;)this.addMatch(b,e,b.index+l.from,y);else e1(e.state.doc,this.regexp,h,m,(x,k)=>this.addMatch(k,e,x,y));t=t.update({filterFrom:h,filterTo:m,filter:(x,k)=>x<h||k>m,add:v})}}return t}}const jv=/x/.unicode!=null?"gu":"g",o$=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,jv),l$={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let am=null;function c$(){var i;if(am==null&&typeof document<"u"&&document.body){let e=document.body.style;am=((i=e.tabSize)!==null&&i!==void 0?i:e.MozTabSize)!=null}return am||!1}const yu=Mt.define({combine(i){let e=Xa(i,{render:null,specialChars:o$,addSpecialChars:null});return(e.replaceTabs=!c$())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,jv)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,jv)),e}});function d$(i={}){return[yu.of(i),h$()]}let t1=null;function h$(){return t1||(t1=jn.fromClass(class{constructor(i){this.view=i,this.decorations=ni.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(i.state.facet(yu)),this.decorations=this.decorator.createDeco(i)}makeDecorator(i){return new r$({regexp:i.specialChars,decoration:(e,t,n)=>{let{doc:s}=t.state,a=Bs(e[0],0);if(a==9){let r=s.lineAt(n),o=t.state.tabSize,l=Kl(r.text,o,n-r.from);return ni.replace({widget:new m$((o-l%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[a]||(this.decorationCache[a]=ni.replace({widget:new p$(i,a)}))},boundary:i.replaceTabs?void 0:/[^]/})}update(i){let e=i.state.facet(yu);i.startState.facet(yu)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(i.view)):this.decorations=this.decorator.updateDeco(i,this.decorations)}},{decorations:i=>i.decorations}))}const u$="•";function f$(i){return i>=32?u$:i==10?"␤":String.fromCharCode(9216+i)}class p$ extends lo{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=f$(this.code),n=e.state.phrase("Control character")+" "+(l$[this.code]||"0x"+this.code.toString(16)),s=this.options.render&&this.options.render(this.code,n,t);if(s)return s;let a=document.createElement("span");return a.textContent=t,a.title=n,a.setAttribute("aria-label",n),a.className="cm-specialChar",a}ignoreEvent(){return!1}}class m$ extends lo{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function v$(){return _$}const g$=ni.line({class:"cm-activeLine"}),_$=jn.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.docChanged||i.selectionSet)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=-1,t=[];for(let n of i.state.selection.ranges){let s=i.lineBlockAt(n.head);s.from>e&&(t.push(g$.range(s.from)),e=s.from)}return ni.set(t)}},{decorations:i=>i.decorations}),$v=2e3;function b$(i,e,t){let n=Math.min(e.line,t.line),s=Math.max(e.line,t.line),a=[];if(e.off>$v||t.off>$v||e.col<0||t.col<0){let r=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let l=n;l<=s;l++){let d=i.doc.line(l);d.length<=o&&a.push(je.range(d.from+r,d.to+o))}}else{let r=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let l=n;l<=s;l++){let d=i.doc.line(l),h=yv(d.text,r,i.tabSize,!0);if(h<0)a.push(je.cursor(d.to));else{let m=yv(d.text,o,i.tabSize);a.push(je.range(d.from+h,d.from+m))}}}return a}function y$(i,e){let t=i.coordsAtPos(i.viewport.from);return t?Math.round(Math.abs((t.left-e)/i.defaultCharacterWidth)):-1}function i1(i,e){let t=i.posAtCoords({x:e.clientX,y:e.clientY},!1),n=i.state.doc.lineAt(t),s=t-n.from,a=s>$v?-1:s==n.length?y$(i,e.clientX):Kl(n.text,i.state.tabSize,t-n.from);return{line:n.number,col:a,off:s}}function x$(i,e){let t=i1(i,e),n=i.state.selection;return t?{update(s){if(s.docChanged){let a=s.changes.mapPos(s.startState.doc.line(t.line).from),r=s.state.doc.lineAt(a);t={line:r.number,col:t.col,off:Math.min(t.off,r.length)},n=n.map(s.changes)}},get(s,a,r){let o=i1(i,s);if(!o)return n;let l=b$(i.state,t,o);return l.length?r?je.create(l.concat(n.ranges)):je.create(l):n}}:null}function w$(i){let e=t=>t.altKey&&t.button==0;return Ct.mouseSelectionStyle.of((t,n)=>e(n)?x$(t,n):null)}const k$={Alt:[18,i=>!!i.altKey],Control:[17,i=>!!i.ctrlKey],Shift:[16,i=>!!i.shiftKey],Meta:[91,i=>!!i.metaKey]},S$={style:"cursor: crosshair"};function C$(i={}){let[e,t]=k$[i.key||"Alt"],n=jn.fromClass(class{constructor(s){this.view=s,this.isDown=!1}set(s){this.isDown!=s&&(this.isDown=s,this.view.update([]))}},{eventObservers:{keydown(s){this.set(s.keyCode==e||t(s))},keyup(s){(s.keyCode==e||!t(s))&&this.set(!1)},mousemove(s){this.set(t(s))}}});return[n,Ct.contentAttributes.of(s=>{var a;return!((a=s.plugin(n))===null||a===void 0)&&a.isDown?S$:null})]}const gc="-10000px";class J2{constructor(e,t,n,s){this.facet=t,this.createTooltipView=n,this.removeTooltipView=s,this.input=e.state.facet(t),this.tooltips=this.input.filter(r=>r);let a=null;this.tooltipViews=this.tooltips.map(r=>a=n(r,a))}update(e,t){var n;let s=e.state.facet(this.facet),a=s.filter(l=>l);if(s===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let r=[],o=t?[]:null;for(let l=0;l<a.length;l++){let d=a[l],h=-1;if(d){for(let m=0;m<this.tooltips.length;m++){let v=this.tooltips[m];v&&v.create==d.create&&(h=m)}if(h<0)r[l]=this.createTooltipView(d,l?r[l-1]:null),o&&(o[l]=!!d.above);else{let m=r[l]=this.tooltipViews[h];o&&(o[l]=t[h]),m.update&&m.update(e)}}}for(let l of this.tooltipViews)r.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(o.forEach((l,d)=>t[d]=l),t.length=o.length),this.input=s,this.tooltips=a,this.tooltipViews=r,!0}}function M$(i){let e=i.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const rm=Mt.define({combine:i=>{var e,t,n;return{position:At.ios?"absolute":((e=i.find(s=>s.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=i.find(s=>s.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=i.find(s=>s.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||M$}}}),n1=new WeakMap,l_=jn.fromClass(class{constructor(i){this.view=i,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=i.state.facet(rm);this.position=e.position,this.parent=e.parent,this.classes=i.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new J2(i,c_,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),i.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let i of this.manager.tooltipViews)this.intersectionObserver.observe(i.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(i){i.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(i,this.above);e&&this.observeIntersection();let t=e||i.geometryChanged,n=i.state.facet(rm);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let s of this.manager.tooltipViews)s.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let s of this.manager.tooltipViews)this.container.appendChild(s.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(i,e){let t=i.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),i.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let s=document.createElement("div");s.className="cm-tooltip-arrow",t.dom.appendChild(s)}return t.dom.style.position=this.position,t.dom.style.top=gc,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var i,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(i=n.destroy)===null||i===void 0||i.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let i=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:a}=this.manager.tooltipViews[0];if(At.gecko)t=a.offsetParent!=this.container.ownerDocument.body;else if(a.style.top==gc&&a.style.left=="0px"){let r=a.getBoundingClientRect();t=Math.abs(r.top+1e4)>1||Math.abs(r.left)>1}}if(t||this.position=="absolute")if(this.parent){let a=this.parent.getBoundingClientRect();a.width&&a.height&&(i=a.width/this.parent.offsetWidth,e=a.height/this.parent.offsetHeight)}else({scaleX:i,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),s=n_(this.view);return{visible:{left:n.left+s.left,top:n.top+s.top,right:n.right-s.right,bottom:n.bottom-s.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((a,r)=>{let o=this.manager.tooltipViews[r];return o.getCoords?o.getCoords(a.pos):this.view.coordsAtPos(a.pos)}),size:this.manager.tooltipViews.map(({dom:a})=>a.getBoundingClientRect()),space:this.view.state.facet(rm).tooltipSpace(this.view),scaleX:i,scaleY:e,makeAbsolute:t}}writeMeasure(i){var e;if(i.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{visible:t,space:n,scaleX:s,scaleY:a}=i,r=[];for(let o=0;o<this.manager.tooltips.length;o++){let l=this.manager.tooltips[o],d=this.manager.tooltipViews[o],{dom:h}=d,m=i.pos[o],v=i.size[o];if(!m||l.clip!==!1&&(m.bottom<=Math.max(t.top,n.top)||m.top>=Math.min(t.bottom,n.bottom)||m.right<Math.max(t.left,n.left)-.1||m.left>Math.min(t.right,n.right)+.1)){h.style.top=gc;continue}let b=l.arrow?d.dom.querySelector(".cm-tooltip-arrow"):null,y=b?7:0,x=v.right-v.left,k=(e=n1.get(d))!==null&&e!==void 0?e:v.bottom-v.top,C=d.offset||A$,A=this.view.textDirection==_n.LTR,T=v.width>n.right-n.left?A?n.left:n.right-v.width:A?Math.max(n.left,Math.min(m.left-(b?14:0)+C.x,n.right-x)):Math.min(Math.max(n.left,m.left-x+(b?14:0)-C.x),n.right-x),I=this.above[o];!l.strictSide&&(I?m.top-k-y-C.y<n.top:m.bottom+k+y+C.y>n.bottom)&&I==n.bottom-m.bottom>m.top-n.top&&(I=this.above[o]=!I);let D=(I?m.top-n.top:n.bottom-m.bottom)-y;if(D<k&&d.resize!==!1){if(D<this.view.defaultLineHeight){h.style.top=gc;continue}n1.set(d,k),h.style.height=(k=D)/a+"px"}else h.style.height&&(h.style.height="");let N=I?m.top-k-y-C.y:m.bottom+y+C.y,z=T+x;if(d.overlap!==!0)for(let H of r)H.left<z&&H.right>T&&H.top<N+k&&H.bottom>N&&(N=I?H.top-k-2-y:H.bottom+y+2);if(this.position=="absolute"?(h.style.top=(N-i.parent.top)/a+"px",s1(h,(T-i.parent.left)/s)):(h.style.top=N/a+"px",s1(h,T/s)),b){let H=m.left+(A?C.x:-C.x)-(T+14-7);b.style.left=H/s+"px"}d.overlap!==!0&&r.push({left:T,top:N,right:z,bottom:N+k}),h.classList.toggle("cm-tooltip-above",I),h.classList.toggle("cm-tooltip-below",!I),d.positioned&&d.positioned(i.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let i of this.manager.tooltipViews)i.dom.style.top=gc}},{eventObservers:{scroll(){this.maybeMeasure()}}});function s1(i,e){let t=parseInt(i.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(i.style.left=e+"px")}const P$=Ct.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),A$={x:0,y:0},c_=Mt.define({enables:[l_,P$]}),ef=Mt.define({combine:i=>i.reduce((e,t)=>e.concat(t),[])});class Wf{static create(e){return new Wf(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new J2(e,ef,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let s=n[e];if(s!==void 0){if(t===void 0)t=s;else if(t!==s)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const T$=c_.compute([ef],i=>{let e=i.facet(ef);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:Wf.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class L${constructor(e,t,n,s,a){this.view=e,this.source=t,this.field=n,this.setHover=s,this.hoverTime=a,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let s,a=1;if(n instanceof Vr)s=n.posAtStart;else{if(s=e.posAtCoords(t),s==null)return;let o=e.coordsAtPos(s);if(!o||t.y<o.top||t.y>o.bottom||t.x<o.left-e.defaultCharacterWidth||t.x>o.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(s)).find(h=>h.from<=s&&h.to>=s),d=l&&l.dir==_n.RTL?-1:1;a=t.x<o.left?-d:d}let r=this.source(e,s,a);if(r!=null&&r.then){let o=this.pending={pos:s};r.then(l=>{this.pending==o&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Hs(e.state,l,"hover tooltip"))}else r&&!(Array.isArray(r)&&!r.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(r)?r:[r])})}get tooltip(){let e=this.view.plugin(l_),t=e?e.manager.tooltips.findIndex(n=>n.create==Wf.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:s,tooltip:a}=this;if(s.length&&a&&!D$(a.dom,e)||this.pending){let{pos:r}=s[0]||this.pending,o=(n=(t=s[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:r;(r==o?this.view.posAtCoords(this.lastMove)!=r:!E$(this.view,r,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Vh=4;function D$(i,e){let{left:t,right:n,top:s,bottom:a}=i.getBoundingClientRect(),r;if(r=i.querySelector(".cm-tooltip-arrow")){let o=r.getBoundingClientRect();s=Math.min(o.top,s),a=Math.max(o.bottom,a)}return e.clientX>=t-Vh&&e.clientX<=n+Vh&&e.clientY>=s-Vh&&e.clientY<=a+Vh}function E$(i,e,t,n,s,a){let r=i.scrollDOM.getBoundingClientRect(),o=i.documentTop+i.documentPadding.top+i.contentHeight;if(r.left>n||r.right<n||r.top>s||Math.min(r.bottom,o)<s)return!1;let l=i.posAtCoords({x:n,y:s},!1);return l>=e&&l<=t}function I$(i,e={}){let t=_i.define(),n=is.define({create(){return[]},update(s,a){if(s.length&&(e.hideOnChange&&(a.docChanged||a.selection)?s=[]:e.hideOn&&(s=s.filter(r=>!e.hideOn(a,r))),a.docChanged)){let r=[];for(let o of s){let l=a.changes.mapPos(o.pos,-1,ys.TrackDel);if(l!=null){let d=Object.assign(Object.create(null),o);d.pos=l,d.end!=null&&(d.end=a.changes.mapPos(d.end)),r.push(d)}}s=r}for(let r of a.effects)r.is(t)&&(s=r.value),r.is(O$)&&(s=[]);return s},provide:s=>ef.from(s)});return{active:n,extension:[n,jn.define(s=>new L$(s,i,n,t,e.hoverTime||300)),T$]}}function Q2(i,e){let t=i.plugin(l_);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const O$=_i.define(),a1=Mt.define({combine(i){let e,t;for(let n of i)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function md(i,e){let t=i.plugin(eS),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const eS=jn.fromClass(class{constructor(i){this.input=i.state.facet(vd),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(i));let e=i.state.facet(a1);this.top=new Wh(i,!0,e.topContainer),this.bottom=new Wh(i,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(i){let e=i.state.facet(a1);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Wh(i.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Wh(i.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=i.state.facet(vd);if(t!=this.input){let n=t.filter(l=>l),s=[],a=[],r=[],o=[];for(let l of n){let d=this.specs.indexOf(l),h;d<0?(h=l(i.view),o.push(h)):(h=this.panels[d],h.update&&h.update(i)),s.push(h),(h.top?a:r).push(h)}this.specs=n,this.panels=s,this.top.sync(a),this.bottom.sync(r);for(let l of o)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(i)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:i=>Ct.scrollMargins.of(e=>{let t=e.plugin(i);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Wh{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=r1(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=r1(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function r1(i){let e=i.nextSibling;return i.remove(),e}const vd=Mt.define({enables:eS});class wr extends Ho{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}wr.prototype.elementClass="";wr.prototype.toDOM=void 0;wr.prototype.mapMode=ys.TrackBefore;wr.prototype.startSide=wr.prototype.endSide=-1;wr.prototype.point=!0;const xu=Mt.define(),B$=Mt.define(),R$={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ni.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Uc=Mt.define();function z$(i){return[tS(),Uc.of({...R$,...i})]}const o1=Mt.define({combine:i=>i.some(e=>e)});function tS(i){return[N$]}const N$=jn.fromClass(class{constructor(i){this.view=i,this.prevViewport=i.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=i.state.facet(Uc).map(e=>new c1(i,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!i.state.facet(o1),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),i.scrollDOM.insertBefore(this.dom,i.contentDOM)}update(i){if(this.updateGutters(i)){let e=this.prevViewport,t=i.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}i.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(o1)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=i.view.viewport}syncGutters(i){let e=this.dom.nextSibling;i&&this.dom.remove();let t=Ni.iter(this.view.state.facet(xu),this.view.viewport.from),n=[],s=this.gutters.map(a=>new F$(a,this.view.viewport,-this.view.documentPadding.top));for(let a of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(a.type)){let r=!0;for(let o of a.type)if(o.type==ws.Text&&r){Vv(t,n,o.from);for(let l of s)l.line(this.view,o,n);r=!1}else if(o.widget)for(let l of s)l.widget(this.view,o)}else if(a.type==ws.Text){Vv(t,n,a.from);for(let r of s)r.line(this.view,a,n)}else if(a.widget)for(let r of s)r.widget(this.view,a);for(let a of s)a.finish();i&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(i){let e=i.startState.facet(Uc),t=i.state.facet(Uc),n=i.docChanged||i.heightChanged||i.viewportChanged||!Ni.eq(i.startState.facet(xu),i.state.facet(xu),i.view.viewport.from,i.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(i)&&(n=!0);else{n=!0;let s=[];for(let a of t){let r=e.indexOf(a);r<0?s.push(new c1(this.view,a)):(this.gutters[r].update(i),s.push(this.gutters[r]))}for(let a of this.gutters)a.dom.remove(),s.indexOf(a)<0&&a.destroy();for(let a of s)this.dom.appendChild(a.dom);this.gutters=s}return n}destroy(){for(let i of this.gutters)i.destroy();this.dom.remove()}},{provide:i=>Ct.scrollMargins.of(e=>{let t=e.plugin(i);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==_n.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function l1(i){return Array.isArray(i)?i:[i]}function Vv(i,e,t){for(;i.value&&i.from<=t;)i.from==t&&e.push(i.value),i.next()}class F${constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Ni.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:s}=this,a=(t.top-this.height)/e.scaleY,r=t.height/e.scaleY;if(this.i==s.elements.length){let o=new iS(e,r,a,n);s.elements.push(o),s.dom.appendChild(o.dom)}else s.elements[this.i].update(e,r,a,n);this.height=t.bottom,this.i++}line(e,t,n){let s=[];Vv(this.cursor,s,t.from),n.length&&(s=s.concat(n));let a=this.gutter.config.lineMarker(e,t,s);a&&s.unshift(a);let r=this.gutter;s.length==0&&!r.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),s=n?[n]:null;for(let a of e.state.facet(B$)){let r=a(e,t.widget,t);r&&(s||(s=[])).push(r)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class c1{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,s=>{let a=s.target,r;if(a!=this.dom&&this.dom.contains(a)){for(;a.parentNode!=this.dom;)a=a.parentNode;let l=a.getBoundingClientRect();r=(l.top+l.bottom)/2}else r=s.clientY;let o=e.lineBlockAtHeight(r-e.documentTop);t.domEventHandlers[n](e,o,s)&&s.preventDefault()});this.markers=l1(t.markers(e)),t.initialSpacer&&(this.spacer=new iS(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=l1(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let n=e.view.viewport;return!Ni.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class iS{constructor(e,t,n,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,s)}update(e,t,n,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),H$(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let n="cm-gutterElement",s=this.dom.firstChild;for(let a=0,r=0;;){let o=r,l=a<t.length?t[a++]:null,d=!1;if(l){let h=l.elementClass;h&&(n+=" "+h);for(let m=r;m<this.markers.length;m++)if(this.markers[m].compare(l)){o=m,d=!0;break}}else o=this.markers.length;for(;r<o;){let h=this.markers[r++];if(h.toDOM){h.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!l)break;l.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(l.toDOM(e),s)),d&&r++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function H$(i,e){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!i[t].compare(e[t]))return!1;return!0}const j$=Mt.define(),$$=Mt.define(),fl=Mt.define({combine(i){return Xa(i,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let s in t){let a=n[s],r=t[s];n[s]=a?(o,l,d)=>a(o,l,d)||r(o,l,d):r}return n}})}});class om extends wr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function lm(i,e){return i.state.facet(fl).formatNumber(e,i.state)}const V$=Uc.compute([fl],i=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(j$)},lineMarker(e,t,n){return n.some(s=>s.toDOM)?null:new om(lm(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let s of e.state.facet($$)){let a=s(e,t,n);if(a)return a}return null},lineMarkerChange:e=>e.startState.facet(fl)!=e.state.facet(fl),initialSpacer(e){return new om(lm(e,d1(e.state.doc.lines)))},updateSpacer(e,t){let n=lm(t.view,d1(t.view.state.doc.lines));return n==e.number?e:new om(n)},domEventHandlers:i.facet(fl).domEventHandlers}));function W$(i={}){return[fl.of(i),tS(),V$]}function d1(i){let e=9;for(;e<i;)e=e*10+9;return e}const q$=new class extends wr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},U$=xu.compute(["selection"],i=>{let e=[],t=-1;for(let n of i.selection.ranges){let s=i.doc.lineAt(n.head).from;s>t&&(t=s,e.push(q$.range(s)))}return Ni.of(e)});function G$(){return U$}const Z$=1024;let Y$=0;class cm{constructor(e,t){this.from=e,this.to=t}}class Ei{constructor(e={}){this.id=Y$++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Vs.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Ei.closedBy=new Ei({deserialize:i=>i.split(" ")});Ei.openedBy=new Ei({deserialize:i=>i.split(" ")});Ei.group=new Ei({deserialize:i=>i.split(" ")});Ei.isolate=new Ei({deserialize:i=>{if(i&&i!="rtl"&&i!="ltr"&&i!="auto")throw new RangeError("Invalid value for isolate: "+i);return i||"auto"}});Ei.contextHash=new Ei({perNode:!0});Ei.lookAhead=new Ei({perNode:!0});Ei.mounted=new Ei({perNode:!0});class tf{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Ei.mounted.id]}}const K$=Object.create(null);class Vs{constructor(e,t,n,s=0){this.name=e,this.props=t,this.id=n,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):K$,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Vs(e.name||"",t,e.id,n);if(e.props){for(let a of e.props)if(Array.isArray(a)||(a=a(s)),a){if(a[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[a[0].id]=a[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ei.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let s of n.split(" "))t[s]=e[n];return n=>{for(let s=n.prop(Ei.group),a=-1;a<(s?s.length:0);a++){let r=t[a<0?n.name:s[a]];if(r)return r}}}}Vs.none=new Vs("",Object.create(null),0,8);class d_{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let s=null;for(let a of e){let r=a(n);r&&(s||(s=Object.assign({},n.props)),s[r[0].id]=r[1])}t.push(s?new Vs(n.name,s,n.id,n.flags):n)}return new d_(t)}}const qh=new WeakMap,h1=new WeakMap;var Qn;(function(i){i[i.ExcludeBuffers=1]="ExcludeBuffers",i[i.IncludeAnonymous=2]="IncludeAnonymous",i[i.IgnoreMounts=4]="IgnoreMounts",i[i.IgnoreOverlays=8]="IgnoreOverlays"})(Qn||(Qn={}));class An{constructor(e,t,n,s,a){if(this.type=e,this.children=t,this.positions=n,this.length=s,this.props=null,a&&a.length){this.props=Object.create(null);for(let[r,o]of a)this.props[typeof r=="number"?r:r.id]=o}}toString(){let e=tf.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let s=n.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new qv(this.topNode,e)}cursorAt(e,t=0,n=0){let s=qh.get(this)||this.topNode,a=new qv(s);return a.moveTo(e,t),qh.set(this,a._tree),a}get topNode(){return new ra(this,0,0,null)}resolve(e,t=0){let n=gd(qh.get(this)||this.topNode,e,t,!1);return qh.set(this,n),n}resolveInner(e,t=0){let n=gd(h1.get(this)||this.topNode,e,t,!0);return h1.set(this,n),n}resolveStack(e,t=0){return Q$(this,e,t)}iterate(e){let{enter:t,leave:n,from:s=0,to:a=this.length}=e,r=e.mode||0,o=(r&Qn.IncludeAnonymous)>0;for(let l=this.cursor(r|Qn.IncludeAnonymous);;){let d=!1;if(l.from<=a&&l.to>=s&&(!o&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;d=!0}for(;d&&n&&(o||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:f_(Vs.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,s)=>new An(this.type,t,n,s,this.propValues),e.makeTree||((t,n,s)=>new An(Vs.none,t,n,s)))}static build(e){return eV(e)}}An.empty=new An(Vs.none,[],[],0);class h_{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new h_(this.buffer,this.index)}}class no{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Vs.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],s=this.set.types[t],a=s.name;if(/\W/.test(a)&&!s.isError&&(a=JSON.stringify(a)),e+=4,n==e)return a;let r=[];for(;e<n;)r.push(this.childString(e)),e=this.buffer[e+3];return a+"("+r.join(",")+")"}findChild(e,t,n,s,a){let{buffer:r}=this,o=-1;for(let l=e;l!=t&&!(nS(a,s,r[l+1],r[l+2])&&(o=l,n>0));l=r[l+3]);return o}slice(e,t,n){let s=this.buffer,a=new Uint16Array(t-e),r=0;for(let o=e,l=0;o<t;){a[l++]=s[o++],a[l++]=s[o++]-n;let d=a[l++]=s[o++]-n;a[l++]=s[o++]-e,r=Math.max(r,d)}return new no(a,r,this.set)}}function nS(i,e,t,n){switch(i){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function gd(i,e,t,n){for(var s;i.from==i.to||(t<1?i.from>=e:i.from>e)||(t>-1?i.to<=e:i.to<e);){let r=!n&&i instanceof ra&&i.index<0?null:i.parent;if(!r)return i;i=r}let a=n?0:Qn.IgnoreOverlays;if(n)for(let r=i,o=r.parent;o;r=o,o=r.parent)r instanceof ra&&r.index<0&&((s=o.enter(e,t,a))===null||s===void 0?void 0:s.from)!=r.from&&(i=o);for(;;){let r=i.enter(e,t,a);if(!r)return i;i=r}}class sS{cursor(e=0){return new qv(this,e)}getChild(e,t=null,n=null){let s=u1(this,e,t,n);return s.length?s[0]:null}getChildren(e,t=null,n=null){return u1(this,e,t,n)}resolve(e,t=0){return gd(this,e,t,!1)}resolveInner(e,t=0){return gd(this,e,t,!0)}matchContext(e){return Wv(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(n=t,t=s.prevSibling):t=s}return n}get node(){return this}get next(){return this.parent}}class ra extends sS{constructor(e,t,n,s){super(),this._tree=e,this.from=t,this.index=n,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,s,a=0){for(let r=this;;){for(let{children:o,positions:l}=r._tree,d=t>0?o.length:-1;e!=d;e+=t){let h=o[e],m=l[e]+r.from;if(nS(s,n,m,m+h.length)){if(h instanceof no){if(a&Qn.ExcludeBuffers)continue;let v=h.findChild(0,h.buffer.length,t,n-m,s);if(v>-1)return new qr(new X$(r,h,e,m),null,v)}else if(a&Qn.IncludeAnonymous||!h.type.isAnonymous||u_(h)){let v;if(!(a&Qn.IgnoreMounts)&&(v=tf.get(h))&&!v.overlay)return new ra(v.tree,m,e,r);let b=new ra(h,m,e,r);return a&Qn.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?h.children.length-1:0,t,n,s)}}}if(a&Qn.IncludeAnonymous||!r.type.isAnonymous||(r.index>=0?e=r.index+t:e=t<0?-1:r._parent._tree.children.length,r=r._parent,!r))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let s;if(!(n&Qn.IgnoreOverlays)&&(s=tf.get(this._tree))&&s.overlay){let a=e-this.from;for(let{from:r,to:o}of s.overlay)if((t>0?r<=a:r<a)&&(t<0?o>=a:o>a))return new ra(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function u1(i,e,t,n){let s=i.cursor(),a=[];if(!s.firstChild())return a;if(t!=null){for(let r=!1;!r;)if(r=s.type.is(t),!s.nextSibling())return a}for(;;){if(n!=null&&s.type.is(n))return a;if(s.type.is(e)&&a.push(s.node),!s.nextSibling())return n==null?a:[]}}function Wv(i,e,t=e.length-1){for(let n=i;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class X${constructor(e,t,n,s){this.parent=e,this.buffer=t,this.index=n,this.start=s}}class qr extends sS{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,n);return a<0?null:new qr(this.context,this,a)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Qn.ExcludeBuffers)return null;let{buffer:s}=this.context,a=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return a<0?null:new qr(this.context,this,a)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new qr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,s=this.index+4,a=n.buffer[this.index+3];if(a>s){let r=n.buffer[this.index+1];e.push(n.slice(s,a,r)),t.push(0)}return new An(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function aS(i){if(!i.length)return null;let e=0,t=i[0];for(let a=1;a<i.length;a++){let r=i[a];(r.from>t.from||r.to<t.to)&&(t=r,e=a)}let n=t instanceof ra&&t.index<0?null:t.parent,s=i.slice();return n?s[e]=n:s.splice(e,1),new J$(s,t)}class J${constructor(e,t){this.heads=e,this.node=t}get next(){return aS(this.heads)}}function Q$(i,e,t){let n=i.resolveInner(e,t),s=null;for(let a=n instanceof ra?n:n.context.parent;a;a=a.parent)if(a.index<0){let r=a.parent;(s||(s=[n])).push(r.resolve(e,t)),a=r}else{let r=tf.get(a.tree);if(r&&r.overlay&&r.overlay[0].from<=e&&r.overlay[r.overlay.length-1].to>=e){let o=new ra(r.tree,r.overlay[0].from+a.from,-1,a);(s||(s=[n])).push(gd(o,e,t,!1))}}return s?aS(s):n}class qv{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ra)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=n+s.buffer[e+1],this.to=n+s.buffer[e+2],!0}yield(e){return e?e instanceof ra?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:s}=this.buffer,a=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,n);return a<0?!1:(this.stack.push(this.index),this.yieldBuf(a))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Qn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Qn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Qn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let s=n<0?0:this.stack[n]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(s)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let a=0;a<this.index;a++)if(s.buffer.buffer[a+3]<this.index)return!1;({index:t,parent:n}=s)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let a=t+e,r=e<0?-1:n._tree.children.length;a!=r;a+=e){let o=n._tree.children[a];if(this.mode&Qn.IncludeAnonymous||o instanceof no||!o.type.isAnonymous||u_(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let s=this.index,a=this.stack.length;a>=0;){for(let r=e;r;r=r._parent)if(r.index==s){if(s==this.index)return r;t=r,n=a+1;break e}s=this.stack[--a]}for(let s=n;s<this.stack.length;s++)t=new qr(this.buffer,t,this.stack[s]);return this.bufferNode=new qr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,s=!0}}}matchContext(e){if(!this.buffer)return Wv(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let s=e.length-1,a=this.stack.length-1;s>=0;a--){if(a<0)return Wv(this._tree,e,s);let r=n[t.buffer[this.stack[a]]];if(!r.isAnonymous){if(e[s]&&e[s]!=r.name)return!1;s--}}return!0}}function u_(i){return i.children.some(e=>e instanceof no||!e.type.isAnonymous||u_(e))}function eV(i){var e;let{buffer:t,nodeSet:n,maxBufferLength:s=Z$,reused:a=[],minRepeatType:r=n.types.length}=i,o=Array.isArray(t)?new h_(t,t.length):t,l=n.types,d=0,h=0;function m(D,N,z,H,j,re){let{id:V,start:q,end:le,size:ee}=o,W=h,ne=d;for(;ee<0;)if(o.next(),ee==-1){let X=a[V];z.push(X),H.push(q-D);return}else if(ee==-3){d=V;return}else if(ee==-4){h=V;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let ye=l[V],ie,Z,$=q-D;if(le-q<=s&&(Z=k(o.pos-N,j))){let X=new Uint16Array(Z.size-Z.skip),Y=o.pos-Z.size,te=X.length;for(;o.pos>Y;)te=C(Z.start,X,te);ie=new no(X,le-Z.start,n),$=Z.start-D}else{let X=o.pos-ee;o.next();let Y=[],te=[],K=V>=r?V:-1,F=0,R=le;for(;o.pos>X;)K>=0&&o.id==K&&o.size>=0?(o.end<=R-s&&(y(Y,te,q,F,o.end,R,K,W,ne),F=Y.length,R=o.end),o.next()):re>2500?v(q,X,Y,te):m(q,X,Y,te,K,re+1);if(K>=0&&F>0&&F<Y.length&&y(Y,te,q,F,q,R,K,W,ne),Y.reverse(),te.reverse(),K>-1&&F>0){let J=b(ye,ne);ie=f_(ye,Y,te,0,Y.length,0,le-q,J,J)}else ie=x(ye,Y,te,le-q,W-le,ne)}z.push(ie),H.push($)}function v(D,N,z,H){let j=[],re=0,V=-1;for(;o.pos>N;){let{id:q,start:le,end:ee,size:W}=o;if(W>4)o.next();else{if(V>-1&&le<V)break;V<0&&(V=ee-s),j.push(q,le,ee),re++,o.next()}}if(re){let q=new Uint16Array(re*4),le=j[j.length-2];for(let ee=j.length-3,W=0;ee>=0;ee-=3)q[W++]=j[ee],q[W++]=j[ee+1]-le,q[W++]=j[ee+2]-le,q[W++]=W;z.push(new no(q,j[2]-le,n)),H.push(le-D)}}function b(D,N){return(z,H,j)=>{let re=0,V=z.length-1,q,le;if(V>=0&&(q=z[V])instanceof An){if(!V&&q.type==D&&q.length==j)return q;(le=q.prop(Ei.lookAhead))&&(re=H[V]+q.length+le)}return x(D,z,H,j,re,N)}}function y(D,N,z,H,j,re,V,q,le){let ee=[],W=[];for(;D.length>H;)ee.push(D.pop()),W.push(N.pop()+z-j);D.push(x(n.types[V],ee,W,re-j,q-re,le)),N.push(j-z)}function x(D,N,z,H,j,re,V){if(re){let q=[Ei.contextHash,re];V=V?[q].concat(V):[q]}if(j>25){let q=[Ei.lookAhead,j];V=V?[q].concat(V):[q]}return new An(D,N,z,H,V)}function k(D,N){let z=o.fork(),H=0,j=0,re=0,V=z.end-s,q={size:0,start:0,skip:0};e:for(let le=z.pos-D;z.pos>le;){let ee=z.size;if(z.id==N&&ee>=0){q.size=H,q.start=j,q.skip=re,re+=4,H+=4,z.next();continue}let W=z.pos-ee;if(ee<0||W<le||z.start<V)break;let ne=z.id>=r?4:0,ye=z.start;for(z.next();z.pos>W;){if(z.size<0)if(z.size==-3)ne+=4;else break e;else z.id>=r&&(ne+=4);z.next()}j=ye,H+=ee,re+=ne}return(N<0||H==D)&&(q.size=H,q.start=j,q.skip=re),q.size>4?q:void 0}function C(D,N,z){let{id:H,start:j,end:re,size:V}=o;if(o.next(),V>=0&&H<r){let q=z;if(V>4){let le=o.pos-(V-4);for(;o.pos>le;)z=C(D,N,z)}N[--z]=q,N[--z]=re-D,N[--z]=j-D,N[--z]=H}else V==-3?d=H:V==-4&&(h=H);return z}let A=[],T=[];for(;o.pos>0;)m(i.start||0,i.bufferStart||0,A,T,-1,0);let I=(e=i.length)!==null&&e!==void 0?e:A.length?T[0]+A[0].length:0;return new An(l[i.topID],A.reverse(),T.reverse(),I)}const f1=new WeakMap;function wu(i,e){if(!i.isAnonymous||e instanceof no||e.type!=i)return 1;let t=f1.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=i||!(n instanceof An)){t=1;break}t+=wu(i,n)}f1.set(e,t)}return t}function f_(i,e,t,n,s,a,r,o,l){let d=0;for(let y=n;y<s;y++)d+=wu(i,e[y]);let h=Math.ceil(d*1.5/8),m=[],v=[];function b(y,x,k,C,A){for(let T=k;T<C;){let I=T,D=x[T],N=wu(i,y[T]);for(T++;T<C;T++){let z=wu(i,y[T]);if(N+z>=h)break;N+=z}if(T==I+1){if(N>h){let z=y[I];b(z.children,z.positions,0,z.children.length,x[I]+A);continue}m.push(y[I])}else{let z=x[T-1]+y[T-1].length-D;m.push(f_(i,y,x,I,T,D,z,null,l))}v.push(D+A-a)}}return b(e,t,n,s,0),(o||l)(m,v,r)}class Oo{constructor(e,t,n,s,a=!1,r=!1){this.from=e,this.to=t,this.tree=n,this.offset=s,this.open=(a?1:0)|(r?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let s=[new Oo(0,e.length,e,0,!1,n)];for(let a of t)a.to>e.length&&s.push(a);return s}static applyChanges(e,t,n=128){if(!t.length)return e;let s=[],a=1,r=e.length?e[0]:null;for(let o=0,l=0,d=0;;o++){let h=o<t.length?t[o]:null,m=h?h.fromA:1e9;if(m-l>=n)for(;r&&r.from<m;){let v=r;if(l>=v.from||m<=v.to||d){let b=Math.max(v.from,l)-d,y=Math.min(v.to,m)-d;v=b>=y?null:new Oo(b,y,v.tree,v.offset+d,o>0,!!h)}if(v&&s.push(v),r.to>m)break;r=a<e.length?e[a++]:null}if(!h)break;l=h.toA,d=h.toA-h.toB}return s}}class rS{startParse(e,t,n){return typeof e=="string"&&(e=new tV(e)),n=n?n.length?n.map(s=>new cm(s.from,s.to)):[new cm(0,0)]:[new cm(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let s=this.startParse(e,t,n);for(;;){let a=s.advance();if(a)return a}}}class tV{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ei({perNode:!0});let iV=0;class ia{constructor(e,t,n,s){this.name=e,this.set=t,this.base=n,this.modified=s,this.id=iV++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof ia&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new ia(n,[],null,[]);if(s.set.push(s),t)for(let a of t.set)s.set.push(a);return s}static defineModifier(e){let t=new nf(e);return n=>n.modified.indexOf(t)>-1?n:nf.get(n.base||n,n.modified.concat(t).sort((s,a)=>s.id-a.id))}}let nV=0;class nf{constructor(e){this.name=e,this.instances=[],this.id=nV++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(o=>o.base==e&&sV(t,o.modified));if(n)return n;let s=[],a=new ia(e.name,s,e,t);for(let o of t)o.instances.push(a);let r=aV(t);for(let o of e.set)if(!o.modified.length)for(let l of r)s.push(nf.get(o,l));return a}}function sV(i,e){return i.length==e.length&&i.every((t,n)=>t==e[n])}function aV(i){let e=[[]];for(let t=0;t<i.length;t++)for(let n=0,s=e.length;n<s;n++)e.push(e[n].concat(i[t]));return e.sort((t,n)=>n.length-t.length)}function rV(i){let e=Object.create(null);for(let t in i){let n=i[t];Array.isArray(n)||(n=[n]);for(let s of t.split(" "))if(s){let a=[],r=2,o=s;for(let m=0;;){if(o=="..."&&m>0&&m+3==s.length){r=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!v)throw new RangeError("Invalid path: "+s);if(a.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),m+=v[0].length,m==s.length)break;let b=s[m++];if(m==s.length&&b=="!"){r=0;break}if(b!="/")throw new RangeError("Invalid path: "+s);o=s.slice(m)}let l=a.length-1,d=a[l];if(!d)throw new RangeError("Invalid path: "+s);let h=new sf(n,r,l>0?a.slice(0,l):null);e[d]=h.sort(e[d])}}return oS.add(e)}const oS=new Ei;class sf{constructor(e,t,n,s){this.tags=e,this.mode=t,this.context=n,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}sf.empty=new sf([],2,null);function lS(i,e){let t=Object.create(null);for(let a of i)if(!Array.isArray(a.tag))t[a.tag.id]=a.class;else for(let r of a.tag)t[r.id]=a.class;let{scope:n,all:s=null}=e||{};return{style:a=>{let r=s;for(let o of a)for(let l of o.set){let d=t[l.id];if(d){r=r?r+" "+d:d;break}}return r},scope:n}}function oV(i,e){let t=null;for(let n of i){let s=n.style(e);s&&(t=t?t+" "+s:s)}return t}function lV(i,e,t,n=0,s=i.length){let a=new cV(n,Array.isArray(e)?e:[e],t);a.highlightRange(i.cursor(),n,s,"",a.highlighters),a.flush(s)}class cV{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,s,a){let{type:r,from:o,to:l}=e;if(o>=n||l<=t)return;r.isTop&&(a=this.highlighters.filter(b=>!b.scope||b.scope(r)));let d=s,h=dV(e)||sf.empty,m=oV(a,h.tags);if(m&&(d&&(d+=" "),d+=m,h.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,o),d),h.opaque)return;let v=e.tree&&e.tree.prop(Ei.mounted);if(v&&v.overlay){let b=e.node.enter(v.overlay[0].from+o,1),y=this.highlighters.filter(k=>!k.scope||k.scope(v.tree.type)),x=e.firstChild();for(let k=0,C=o;;k++){let A=k<v.overlay.length?v.overlay[k]:null,T=A?A.from+o:l,I=Math.max(t,C),D=Math.min(n,T);if(I<D&&x)for(;e.from<D&&(this.highlightRange(e,I,D,s,a),this.startSpan(Math.min(D,e.to),d),!(e.to>=T||!e.nextSibling())););if(!A||T>n)break;C=A.to+o,C>t&&(this.highlightRange(b.cursor(),Math.max(t,A.from+o),Math.min(n,C),"",y),this.startSpan(Math.min(n,C),d))}x&&e.parent()}else if(e.firstChild()){v&&(s="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,s,a),this.startSpan(Math.min(n,e.to),d)}while(e.nextSibling());e.parent()}}}function dV(i){let e=i.type.prop(oS);for(;e&&e.context&&!i.matchContext(e.context);)e=e.next;return e||null}const ht=ia.define,Uh=ht(),Ir=ht(),p1=ht(Ir),m1=ht(Ir),Or=ht(),Gh=ht(Or),dm=ht(Or),Oa=ht(),xo=ht(Oa),Da=ht(),Ea=ht(),Uv=ht(),_c=ht(Uv),Zh=ht(),Ne={comment:Uh,lineComment:ht(Uh),blockComment:ht(Uh),docComment:ht(Uh),name:Ir,variableName:ht(Ir),typeName:p1,tagName:ht(p1),propertyName:m1,attributeName:ht(m1),className:ht(Ir),labelName:ht(Ir),namespace:ht(Ir),macroName:ht(Ir),literal:Or,string:Gh,docString:ht(Gh),character:ht(Gh),attributeValue:ht(Gh),number:dm,integer:ht(dm),float:ht(dm),bool:ht(Or),regexp:ht(Or),escape:ht(Or),color:ht(Or),url:ht(Or),keyword:Da,self:ht(Da),null:ht(Da),atom:ht(Da),unit:ht(Da),modifier:ht(Da),operatorKeyword:ht(Da),controlKeyword:ht(Da),definitionKeyword:ht(Da),moduleKeyword:ht(Da),operator:Ea,derefOperator:ht(Ea),arithmeticOperator:ht(Ea),logicOperator:ht(Ea),bitwiseOperator:ht(Ea),compareOperator:ht(Ea),updateOperator:ht(Ea),definitionOperator:ht(Ea),typeOperator:ht(Ea),controlOperator:ht(Ea),punctuation:Uv,separator:ht(Uv),bracket:_c,angleBracket:ht(_c),squareBracket:ht(_c),paren:ht(_c),brace:ht(_c),content:Oa,heading:xo,heading1:ht(xo),heading2:ht(xo),heading3:ht(xo),heading4:ht(xo),heading5:ht(xo),heading6:ht(xo),contentSeparator:ht(Oa),list:ht(Oa),quote:ht(Oa),emphasis:ht(Oa),strong:ht(Oa),link:ht(Oa),monospace:ht(Oa),strikethrough:ht(Oa),inserted:ht(),deleted:ht(),changed:ht(),invalid:ht(),meta:Zh,documentMeta:ht(Zh),annotation:ht(Zh),processingInstruction:ht(Zh),definition:ia.defineModifier("definition"),constant:ia.defineModifier("constant"),function:ia.defineModifier("function"),standard:ia.defineModifier("standard"),local:ia.defineModifier("local"),special:ia.defineModifier("special")};for(let i in Ne){let e=Ne[i];e instanceof ia&&(e.name=i)}lS([{tag:Ne.link,class:"tok-link"},{tag:Ne.heading,class:"tok-heading"},{tag:Ne.emphasis,class:"tok-emphasis"},{tag:Ne.strong,class:"tok-strong"},{tag:Ne.keyword,class:"tok-keyword"},{tag:Ne.atom,class:"tok-atom"},{tag:Ne.bool,class:"tok-bool"},{tag:Ne.url,class:"tok-url"},{tag:Ne.labelName,class:"tok-labelName"},{tag:Ne.inserted,class:"tok-inserted"},{tag:Ne.deleted,class:"tok-deleted"},{tag:Ne.literal,class:"tok-literal"},{tag:Ne.string,class:"tok-string"},{tag:Ne.number,class:"tok-number"},{tag:[Ne.regexp,Ne.escape,Ne.special(Ne.string)],class:"tok-string2"},{tag:Ne.variableName,class:"tok-variableName"},{tag:Ne.local(Ne.variableName),class:"tok-variableName tok-local"},{tag:Ne.definition(Ne.variableName),class:"tok-variableName tok-definition"},{tag:Ne.special(Ne.variableName),class:"tok-variableName2"},{tag:Ne.definition(Ne.propertyName),class:"tok-propertyName tok-definition"},{tag:Ne.typeName,class:"tok-typeName"},{tag:Ne.namespace,class:"tok-namespace"},{tag:Ne.className,class:"tok-className"},{tag:Ne.macroName,class:"tok-macroName"},{tag:Ne.propertyName,class:"tok-propertyName"},{tag:Ne.operator,class:"tok-operator"},{tag:Ne.comment,class:"tok-comment"},{tag:Ne.meta,class:"tok-meta"},{tag:Ne.invalid,class:"tok-invalid"},{tag:Ne.punctuation,class:"tok-punctuation"}]);var hm;const pl=new Ei;function hV(i){return Mt.define({combine:i?e=>e.concat(i):void 0})}const uV=new Ei;class ma{constructor(e,t,n=[],s=""){this.data=e,this.name=s,ji.prototype.hasOwnProperty("tree")||Object.defineProperty(ji.prototype,"tree",{get(){return us(this)}}),this.parser=t,this.extension=[so.of(this),ji.languageData.of((a,r,o)=>{let l=v1(a,r,o),d=l.type.prop(pl);if(!d)return[];let h=a.facet(d),m=l.type.prop(uV);if(m){let v=l.resolve(r-l.from,o);for(let b of m)if(b.test(v,a)){let y=a.facet(b.facet);return b.type=="replace"?y:y.concat(h)}}return h})].concat(n)}isActiveAt(e,t,n=-1){return v1(e,t,n).type.prop(pl)==this.data}findRegions(e){let t=e.facet(so);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],s=(a,r)=>{if(a.prop(pl)==this.data){n.push({from:r,to:r+a.length});return}let o=a.prop(Ei.mounted);if(o){if(o.tree.prop(pl)==this.data){if(o.overlay)for(let l of o.overlay)n.push({from:l.from+r,to:l.to+r});else n.push({from:r,to:r+a.length});return}else if(o.overlay){let l=n.length;if(s(o.tree,o.overlay[0].from+r),n.length>l)return}}for(let l=0;l<a.children.length;l++){let d=a.children[l];d instanceof An&&s(d,a.positions[l]+r)}};return s(us(e),0),n}get allowsNesting(){return!0}}ma.setState=_i.define();function v1(i,e,t){let n=i.facet(so),s=us(i).topNode;if(!n||n.allowsNesting)for(let a=s;a;a=a.enter(e,t,Qn.ExcludeBuffers))a.type.isTop&&(s=a);return s}function us(i){let e=i.field(ma.state,!1);return e?e.tree:An.empty}class fV{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let bc=null;class Hl{constructor(e,t,n=[],s,a,r,o,l){this.parser=e,this.state=t,this.fragments=n,this.tree=s,this.treeLen=a,this.viewport=r,this.skipped=o,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Hl(e,t,[],An.empty,0,n,[],null)}startParse(){return this.parser.startParse(new fV(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=An.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Oo.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Oo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=bc;bc=this;try{return e()}finally{bc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=g1(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:s,treeLen:a,viewport:r,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((d,h,m,v)=>l.push({fromA:d,toA:h,fromB:m,toB:v})),n=Oo.applyChanges(n,l),s=An.empty,a=0,r={from:e.mapPos(r.from,-1),to:e.mapPos(r.to,1)},this.skipped.length){o=[];for(let d of this.skipped){let h=e.mapPos(d.from,1),m=e.mapPos(d.to,-1);h<m&&o.push({from:h,to:m})}}}return new Hl(this.parser,t,n,s,a,r,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:s,to:a}=this.skipped[n];s<e.to&&a>e.from&&(this.fragments=g1(this.fragments,s,a),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends rS{createParse(t,n,s){let a=s[0].from,r=s[s.length-1].to;return{parsedPos:a,advance(){let l=bc;if(l){for(let d of s)l.tempSkipped.push(d);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=r,new An(Vs.none,[],[],r-a)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return bc}}function g1(i,e,t){return Oo.applyChanges(i,[{fromA:e,toA:t,fromB:e,toB:t}])}class jl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new jl(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=Hl.create(e.facet(so).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new jl(n)}}ma.state=is.define({create:jl.init,update(i,e){for(let t of e.effects)if(t.is(ma.setState))return t.value;return e.startState.facet(so)!=e.state.facet(so)?jl.init(e.state):i.apply(e)}});let cS=i=>{let e=setTimeout(()=>i(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(cS=i=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(i,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const um=typeof navigator<"u"&&(!((hm=navigator.scheduling)===null||hm===void 0)&&hm.isInputPending)?()=>navigator.scheduling.isInputPending():null,pV=jn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ma.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ma.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=cS(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:s}}=this.view,a=n.field(ma.state);if(a.tree==a.context.tree&&a.context.isDone(s+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,e&&!um?Math.max(25,e.timeRemaining()-5):1e9),o=a.context.treeLen<s&&n.doc.length>s+1e3,l=a.context.work(()=>um&&um()||Date.now()>r,s+(o?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(a.context.takeTree(),this.view.dispatch({effects:ma.setState.of(new jl(a.context))})),this.chunkBudget>0&&!(l&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(a.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Hs(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),so=Mt.define({combine(i){return i.length?i[0]:null},enables:i=>[ma.state,pV,Ct.contentAttributes.compute([i],e=>{let t=e.facet(i);return t&&t.name?{"data-language":t.name}:{}})]}),mV=Mt.define(),p_=Mt.define({combine:i=>{if(!i.length)return"  ";let e=i[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(i[0]));return e}});function Wo(i){let e=i.facet(p_);return e.charCodeAt(0)==9?i.tabSize*e.length:e.length}function _d(i,e){let t="",n=i.tabSize,s=i.facet(p_)[0];if(s=="	"){for(;e>=n;)t+="	",e-=n;s=" "}for(let a=0;a<e;a++)t+=s;return t}function m_(i,e){i instanceof ji&&(i=new qf(i));for(let n of i.state.facet(mV)){let s=n(i,e);if(s!==void 0)return s}let t=us(i.state);return t.length>=e?vV(i,t,e):null}class qf{constructor(e,t={}){this.state=e,this.options=t,this.unit=Wo(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:a}=this.options;return s!=null&&s>=n.from&&s<=n.to?a&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:n.text.slice(s-n.from),from:s}:{text:n.text.slice(0,s-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:s}=this.lineAt(e,t);return n.slice(e-s,Math.min(n.length,e+100-s))}column(e,t=1){let{text:n,from:s}=this.lineAt(e,t),a=this.countColumn(n,e-s),r=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return r>-1&&(a+=r-this.countColumn(n,n.search(/\S|$/))),a}countColumn(e,t=e.length){return Kl(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:s}=this.lineAt(e,t),a=this.options.overrideIndentation;if(a){let r=a(s);if(r>-1)return r}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const dS=new Ei;function vV(i,e,t){let n=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=n.node){let a=[];for(let r=s;r&&!(r.from<n.node.from||r.to>n.node.to||r.from==n.node.from&&r.type==n.node.type);r=r.parent)a.push(r);for(let r=a.length-1;r>=0;r--)n={node:a[r],next:n}}return hS(n,i,t)}function hS(i,e,t){for(let n=i;n;n=n.next){let s=_V(n.node);if(s)return s(v_.create(e,t,n))}return 0}function gV(i){return i.pos==i.options.simulateBreak&&i.options.simulateDoubleBreak}function _V(i){let e=i.type.prop(dS);if(e)return e;let t=i.firstChild,n;if(t&&(n=t.type.prop(Ei.closedBy))){let s=i.lastChild,a=s&&n.indexOf(s.name)>-1;return r=>wV(r,!0,1,void 0,a&&!gV(r)?s.from:void 0)}return i.parent==null?bV:null}function bV(){return 0}class v_ extends qf{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new v_(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(yV(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return hS(this.context.next,this.base,this.pos)}}function yV(i,e){for(let t=e;t;t=t.parent)if(i==t)return!0;return!1}function xV(i){let e=i.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let s=i.options.simulateBreak,a=i.state.doc.lineAt(t.from),r=s==null||s<=a.from?a.to:Math.min(a.to,s);for(let o=t.to;;){let l=e.childAfter(o);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=r)return null;let d=/^ */.exec(a.text.slice(t.to-a.from))[0].length;return{from:t.from,to:t.to+d}}o=l.to}}function wV(i,e,t,n,s){let a=i.textAfter,r=a.match(/^\s*/)[0].length,o=n&&a.slice(r,r+n.length)==n||s==i.pos+r,l=xV(i);return l?o?i.column(l.from):i.column(l.to):i.baseIndent+(o?0:i.unit*t)}const kV=200;function SV(){return ji.transactionFilter.of(i=>{if(!i.docChanged||!i.isUserEvent("input.type")&&!i.isUserEvent("input.complete"))return i;let e=i.startState.languageDataAt("indentOnInput",i.startState.selection.main.head);if(!e.length)return i;let t=i.newDoc,{head:n}=i.newSelection.main,s=t.lineAt(n);if(n>s.from+kV)return i;let a=t.sliceString(s.from,n);if(!e.some(d=>d.test(a)))return i;let{state:r}=i,o=-1,l=[];for(let{head:d}of r.selection.ranges){let h=r.doc.lineAt(d);if(h.from==o)continue;o=h.from;let m=m_(r,h.from);if(m==null)continue;let v=/^\s*/.exec(h.text)[0],b=_d(r,m);v!=b&&l.push({from:h.from,to:h.from+v.length,insert:b})}return l.length?[i,{changes:l,sequential:!0}]:i})}const CV=Mt.define(),MV=new Ei;function PV(i,e,t){let n=us(i);if(n.length<t)return null;let s=n.resolveStack(t,1),a=null;for(let r=s;r;r=r.next){let o=r.node;if(o.to<=t||o.from>t)continue;if(a&&o.from<e)break;let l=o.type.prop(MV);if(l&&(o.to<n.length-50||n.length==i.doc.length||!AV(o))){let d=l(o,i);d&&d.from<=t&&d.from>=e&&d.to>t&&(a=d)}}return a}function AV(i){let e=i.lastChild;return e&&e.to==i.to&&e.type.isError}function af(i,e,t){for(let n of i.facet(CV)){let s=n(i,e,t);if(s)return s}return PV(i,e,t)}function uS(i,e){let t=e.mapPos(i.from,1),n=e.mapPos(i.to,-1);return t>=n?void 0:{from:t,to:n}}const Uf=_i.define({map:uS}),Vd=_i.define({map:uS});function fS(i){let e=[];for(let{head:t}of i.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(i.lineBlockAt(t));return e}const qo=is.define({create(){return ni.none},update(i,e){i=i.map(e.changes);for(let t of e.effects)if(t.is(Uf)&&!TV(i,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(vS),s=n?ni.replace({widget:new RV(n(e.state,t.value))}):_1;i=i.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(Vd)&&(i=i.update({filter:(n,s)=>t.value.from!=n||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;i.between(n,n,(s,a)=>{s<n&&a>n&&(t=!0)}),t&&(i=i.update({filterFrom:n,filterTo:n,filter:(s,a)=>a<=n||s>=n}))}return i},provide:i=>Ct.decorations.from(i),toJSON(i,e){let t=[];return i.between(0,e.doc.length,(n,s)=>{t.push(n,s)}),t},fromJSON(i){if(!Array.isArray(i)||i.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<i.length;){let n=i[t++],s=i[t++];if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(_1.range(n,s))}return ni.set(e,!0)}});function rf(i,e,t){var n;let s=null;return(n=i.field(qo,!1))===null||n===void 0||n.between(e,t,(a,r)=>{(!s||s.from>a)&&(s={from:a,to:r})}),s}function TV(i,e,t){let n=!1;return i.between(e,e,(s,a)=>{s==e&&a==t&&(n=!0)}),n}function pS(i,e){return i.field(qo,!1)?e:e.concat(_i.appendConfig.of(gS()))}const LV=i=>{for(let e of fS(i)){let t=af(i.state,e.from,e.to);if(t)return i.dispatch({effects:pS(i.state,[Uf.of(t),mS(i,t)])}),!0}return!1},DV=i=>{if(!i.state.field(qo,!1))return!1;let e=[];for(let t of fS(i)){let n=rf(i.state,t.from,t.to);n&&e.push(Vd.of(n),mS(i,n,!1))}return e.length&&i.dispatch({effects:e}),e.length>0};function mS(i,e,t=!0){let n=i.state.doc.lineAt(e.from).number,s=i.state.doc.lineAt(e.to).number;return Ct.announce.of(`${i.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${i.state.phrase("to")} ${s}.`)}const EV=i=>{let{state:e}=i,t=[];for(let n=0;n<e.doc.length;){let s=i.lineBlockAt(n),a=af(e,s.from,s.to);a&&t.push(Uf.of(a)),n=(a?i.lineBlockAt(a.to):s).to+1}return t.length&&i.dispatch({effects:pS(i.state,t)}),!!t.length},IV=i=>{let e=i.state.field(qo,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,i.state.doc.length,(n,s)=>{t.push(Vd.of({from:n,to:s}))}),i.dispatch({effects:t}),!0},OV=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:LV},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:DV},{key:"Ctrl-Alt-[",run:EV},{key:"Ctrl-Alt-]",run:IV}],BV={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},vS=Mt.define({combine(i){return Xa(i,BV)}});function gS(i){return[qo,FV]}function _S(i,e){let{state:t}=i,n=t.facet(vS),s=r=>{let o=i.lineBlockAt(i.posAtDOM(r.target)),l=rf(i.state,o.from,o.to);l&&i.dispatch({effects:Vd.of(l)}),r.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(i,s,e);let a=document.createElement("span");return a.textContent=n.placeholderText,a.setAttribute("aria-label",t.phrase("folded code")),a.title=t.phrase("unfold"),a.className="cm-foldPlaceholder",a.onclick=s,a}const _1=ni.replace({widget:new class extends lo{toDOM(i){return _S(i,null)}}});class RV extends lo{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return _S(e,this.value)}}const zV={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class fm extends wr{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function NV(i={}){let e={...zV,...i},t=new fm(e,!0),n=new fm(e,!1),s=jn.fromClass(class{constructor(r){this.from=r.viewport.from,this.markers=this.buildMarkers(r)}update(r){(r.docChanged||r.viewportChanged||r.startState.facet(so)!=r.state.facet(so)||r.startState.field(qo,!1)!=r.state.field(qo,!1)||us(r.startState)!=us(r.state)||e.foldingChanged(r))&&(this.markers=this.buildMarkers(r.view))}buildMarkers(r){let o=new yr;for(let l of r.viewportLineBlocks){let d=rf(r.state,l.from,l.to)?n:af(r.state,l.from,l.to)?t:null;d&&o.add(l.from,l.from,d)}return o.finish()}}),{domEventHandlers:a}=e;return[s,z$({class:"cm-foldGutter",markers(r){var o;return((o=r.plugin(s))===null||o===void 0?void 0:o.markers)||Ni.empty},initialSpacer(){return new fm(e,!1)},domEventHandlers:{...a,click:(r,o,l)=>{if(a.click&&a.click(r,o,l))return!0;let d=rf(r.state,o.from,o.to);if(d)return r.dispatch({effects:Vd.of(d)}),!0;let h=af(r.state,o.from,o.to);return h?(r.dispatch({effects:Uf.of(h)}),!0):!1}}}),gS()]}const FV=Ct.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Wd{constructor(e,t){this.specs=e;let n;function s(o){let l=eo.newName();return(n||(n=Object.create(null)))["."+l]=o,l}const a=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,r=t.scope;this.scope=r instanceof ma?o=>o.prop(pl)==r.data:r?o=>o==r:void 0,this.style=lS(e.map(o=>({tag:o.tag,class:o.class||s(Object.assign({},o,{tag:null}))})),{all:a}).style,this.module=n?new eo(n):null,this.themeType=t.themeType}static define(e,t){return new Wd(e,t||{})}}const Gv=Mt.define(),bS=Mt.define({combine(i){return i.length?[i[0]]:null}});function pm(i){let e=i.facet(Gv);return e.length?e:i.facet(bS)}function yS(i,e){let t=[jV],n;return i instanceof Wd&&(i.module&&t.push(Ct.styleModule.of(i.module)),n=i.themeType),e!=null&&e.fallback?t.push(bS.of(i)):n?t.push(Gv.computeN([Ct.darkTheme],s=>s.facet(Ct.darkTheme)==(n=="dark")?[i]:[])):t.push(Gv.of(i)),t}class HV{constructor(e){this.markCache=Object.create(null),this.tree=us(e.state),this.decorations=this.buildDeco(e,pm(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=us(e.state),n=pm(e.state),s=n!=pm(e.startState),{viewport:a}=e.view,r=e.changes.mapPos(this.decoratedTo,1);t.length<a.to&&!s&&t.type==this.tree.type&&r>=a.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=r):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=a.to)}buildDeco(e,t){if(!t||!this.tree.length)return ni.none;let n=new yr;for(let{from:s,to:a}of e.visibleRanges)lV(this.tree,t,(r,o,l)=>{n.add(r,o,this.markCache[l]||(this.markCache[l]=ni.mark({class:l})))},s,a);return n.finish()}}const jV=Xo.high(jn.fromClass(HV,{decorations:i=>i.decorations})),$V=Wd.define([{tag:Ne.meta,color:"#404740"},{tag:Ne.link,textDecoration:"underline"},{tag:Ne.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ne.emphasis,fontStyle:"italic"},{tag:Ne.strong,fontWeight:"bold"},{tag:Ne.strikethrough,textDecoration:"line-through"},{tag:Ne.keyword,color:"#708"},{tag:[Ne.atom,Ne.bool,Ne.url,Ne.contentSeparator,Ne.labelName],color:"#219"},{tag:[Ne.literal,Ne.inserted],color:"#164"},{tag:[Ne.string,Ne.deleted],color:"#a11"},{tag:[Ne.regexp,Ne.escape,Ne.special(Ne.string)],color:"#e40"},{tag:Ne.definition(Ne.variableName),color:"#00f"},{tag:Ne.local(Ne.variableName),color:"#30a"},{tag:[Ne.typeName,Ne.namespace],color:"#085"},{tag:Ne.className,color:"#167"},{tag:[Ne.special(Ne.variableName),Ne.macroName],color:"#256"},{tag:Ne.definition(Ne.propertyName),color:"#00c"},{tag:Ne.comment,color:"#940"},{tag:Ne.invalid,color:"#f00"}]),VV=Ct.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),xS=1e4,wS="()[]{}",kS=Mt.define({combine(i){return Xa(i,{afterCursor:!0,brackets:wS,maxScanDistance:xS,renderMatch:UV})}}),WV=ni.mark({class:"cm-matchingBracket"}),qV=ni.mark({class:"cm-nonmatchingBracket"});function UV(i){let e=[],t=i.matched?WV:qV;return e.push(t.range(i.start.from,i.start.to)),i.end&&e.push(t.range(i.end.from,i.end.to)),e}const GV=is.define({create(){return ni.none},update(i,e){if(!e.docChanged&&!e.selection)return i;let t=[],n=e.state.facet(kS);for(let s of e.state.selection.ranges){if(!s.empty)continue;let a=Va(e.state,s.head,-1,n)||s.head>0&&Va(e.state,s.head-1,1,n)||n.afterCursor&&(Va(e.state,s.head,1,n)||s.head<e.state.doc.length&&Va(e.state,s.head+1,-1,n));a&&(t=t.concat(n.renderMatch(a,e.state)))}return ni.set(t,!0)},provide:i=>Ct.decorations.from(i)}),ZV=[GV,VV];function YV(i={}){return[kS.of(i),ZV]}const KV=new Ei;function Zv(i,e,t){let n=i.prop(e<0?Ei.openedBy:Ei.closedBy);if(n)return n;if(i.name.length==1){let s=t.indexOf(i.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Yv(i){let e=i.type.prop(KV);return e?e(i.node):i}function Va(i,e,t,n={}){let s=n.maxScanDistance||xS,a=n.brackets||wS,r=us(i),o=r.resolveInner(e,t);for(let l=o;l;l=l.parent){let d=Zv(l.type,t,a);if(d&&l.from<l.to){let h=Yv(l);if(h&&(t>0?e>=h.from&&e<h.to:e>h.from&&e<=h.to))return XV(i,e,t,l,h,d,a)}}return JV(i,e,t,r,o.type,s,a)}function XV(i,e,t,n,s,a,r){let o=n.parent,l={from:s.from,to:s.to},d=0,h=o==null?void 0:o.cursor();if(h&&(t<0?h.childBefore(n.from):h.childAfter(n.to)))do if(t<0?h.to<=n.from:h.from>=n.to){if(d==0&&a.indexOf(h.type.name)>-1&&h.from<h.to){let m=Yv(h);return{start:l,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(Zv(h.type,t,r))d++;else if(Zv(h.type,-t,r)){if(d==0){let m=Yv(h);return{start:l,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}d--}}while(t<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}function JV(i,e,t,n,s,a,r){let o=t<0?i.sliceDoc(e-1,e):i.sliceDoc(e,e+1),l=r.indexOf(o);if(l<0||l%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},h=i.doc.iterRange(e,t>0?i.doc.length:0),m=0;for(let v=0;!h.next().done&&v<=a;){let b=h.value;t<0&&(v+=b.length);let y=e+v*t;for(let x=t>0?0:b.length-1,k=t>0?b.length:-1;x!=k;x+=t){let C=r.indexOf(b[x]);if(!(C<0||n.resolveInner(y+x,1).type!=s))if(C%2==0==t>0)m++;else{if(m==1)return{start:d,end:{from:y+x,to:y+x+1},matched:C>>1==l>>1};m--}}t>0&&(v+=b.length)}return h.done?{start:d,matched:!1}:null}function b1(i,e,t,n=0,s=0){e==null&&(e=i.search(/[^\s\u00a0]/),e==-1&&(e=i.length));let a=s;for(let r=n;r<e;r++)i.charCodeAt(r)==9?a+=t-a%t:a++;return a}class SS{constructor(e,t,n,s){this.string=e,this.tabSize=t,this.indentUnit=n,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),n;if(typeof e=="string"?n=t==e:n=t&&(e instanceof RegExp?e.test(t):e(t)),n)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=b1(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:b1(this.string,null,this.tabSize)}match(e,t,n){if(typeof e=="string"){let s=r=>n?r.toLowerCase():r,a=this.string.substr(this.pos,e.length);return s(a)==s(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function QV(i){return{name:i.name||"",token:i.token,blankLine:i.blankLine||(()=>{}),startState:i.startState||(()=>!0),copyState:i.copyState||eW,indent:i.indent||(()=>null),languageData:i.languageData||{},tokenTable:i.tokenTable||b_,mergeTokens:i.mergeTokens!==!1}}function eW(i){if(typeof i!="object")return i;let e={};for(let t in i){let n=i[t];e[t]=n instanceof Array?n.slice():n}return e}const y1=new WeakMap;class g_ extends ma{constructor(e){let t=hV(e.languageData),n=QV(e),s,a=new class extends rS{createParse(r,o,l){return new iW(s,r,o,l)}};super(t,a,[],e.name),this.topNode=aW(t,this),s=this,this.streamParser=n,this.stateAfter=new Ei({perNode:!0}),this.tokenTable=e.tokenTable?new AS(n.tokenTable):sW}static define(e){return new g_(e)}getIndent(e){let t,{overrideIndentation:n}=e.options;n&&(t=y1.get(e.state),t!=null&&t<e.pos-1e4&&(t=void 0));let s=__(this,e.node.tree,e.node.from,e.node.from,t??e.pos),a,r;if(s?(r=s.state,a=s.pos+1):(r=this.streamParser.startState(e.unit),a=e.node.from),e.pos-a>1e4)return null;for(;a<e.pos;){let l=e.state.doc.lineAt(a),d=Math.min(e.pos,l.to);if(l.length){let h=n?n(l.from):-1,m=new SS(l.text,e.state.tabSize,e.unit,h<0?void 0:h);for(;m.pos<d-l.from;)MS(this.streamParser.token,m,r)}else this.streamParser.blankLine(r,e.unit);if(d==e.pos)break;a=l.to+1}let o=e.lineAt(e.pos);return n&&t==null&&y1.set(e.state,o.from),this.streamParser.indent(r,/^\s*(.*)/.exec(o.text)[1],e)}get allowsNesting(){return!1}}function __(i,e,t,n,s){let a=t>=n&&t+e.length<=s&&e.prop(i.stateAfter);if(a)return{state:i.streamParser.copyState(a),pos:t+e.length};for(let r=e.children.length-1;r>=0;r--){let o=e.children[r],l=t+e.positions[r],d=o instanceof An&&l<s&&__(i,o,l,n,s);if(d)return d}return null}function CS(i,e,t,n,s){if(s&&t<=0&&n>=e.length)return e;!s&&t==0&&e.type==i.topNode&&(s=!0);for(let a=e.children.length-1;a>=0;a--){let r=e.positions[a],o=e.children[a],l;if(r<n&&o instanceof An){if(!(l=CS(i,o,t-r,n-r,s)))break;return s?new An(e.type,e.children.slice(0,a).concat(l),e.positions.slice(0,a+1),r+l.length):l}}return null}function tW(i,e,t,n,s){for(let a of e){let r=a.from+(a.openStart?25:0),o=a.to-(a.openEnd?25:0),l=r<=t&&o>t&&__(i,a.tree,0-a.offset,t,o),d;if(l&&l.pos<=n&&(d=CS(i,a.tree,t+a.offset,l.pos+a.offset,!1)))return{state:l.state,tree:d}}return{state:i.streamParser.startState(s?Wo(s):4),tree:An.empty}}class iW{constructor(e,t,n,s){this.lang=e,this.input=t,this.fragments=n,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let a=Hl.get(),r=s[0].from,{state:o,tree:l}=tW(e,n,r,this.to,a==null?void 0:a.state);this.state=o,this.parsedPos=this.chunkStart=r+l.length;for(let d=0;d<l.children.length;d++)this.chunks.push(l.children[d]),this.chunkPos.push(l.positions[d]);a&&this.parsedPos<a.viewport.from-1e5&&s.some(d=>d.from<=a.viewport.from&&d.to>=a.viewport.from)&&(this.state=this.lang.streamParser.startState(Wo(a.state)),a.skipUntilInView(this.parsedPos,a.viewport.from),this.parsedPos=a.viewport.from),this.moveRangeIndex()}advance(){let e=Hl.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),n=Math.min(t,this.chunkStart+2048);for(e&&(n=Math.min(n,e.viewport.to));this.parsedPos<n;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let n=t.indexOf(`
`);n>-1&&(t=t.slice(0,n))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),n=e+t.length;for(let s=this.rangeIndex;;){let a=this.ranges[s].to;if(a>=n||(t=t.slice(0,a-(n-t.length)),s++,s==this.ranges.length))break;let r=this.ranges[s].from,o=this.lineAfter(r);t+=o,n=r+o.length}return{line:t,end:n}}skipGapsTo(e,t,n){for(;;){let s=this.ranges[this.rangeIndex].to,a=e+t;if(n>0?s>a:s>=a)break;let r=this.ranges[++this.rangeIndex].from;t+=r-s}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,n,s){let a=4;if(this.ranges.length>1){s=this.skipGapsTo(t,s,1),t+=s;let o=this.chunk.length;s=this.skipGapsTo(n,s,-1),n+=s,a+=this.chunk.length-o}let r=this.chunk.length-4;return this.lang.streamParser.mergeTokens&&a==4&&r>=0&&this.chunk[r]==e&&this.chunk[r+2]==t?this.chunk[r+2]=n:this.chunk.push(e,t,n,a),s}parseLine(e){let{line:t,end:n}=this.nextLine(),s=0,{streamParser:a}=this.lang,r=new SS(t,e?e.state.tabSize:4,e?Wo(e.state):2);if(r.eol())a.blankLine(this.state,r.indentUnit);else for(;!r.eol();){let o=MS(a.token,r,this.state);if(o&&(s=this.emitToken(this.lang.tokenTable.resolve(o),this.parsedPos+r.start,this.parsedPos+r.pos,s)),r.start>1e4)break}this.parsedPos=n,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=An.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:nW,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new An(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new An(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function MS(i,e,t){e.start=e.pos;for(let n=0;n<10;n++){let s=i(e,t);if(e.pos>e.start)return s}throw new Error("Stream parser failed to advance stream.")}const b_=Object.create(null),bd=[Vs.none],nW=new d_(bd),x1=[],w1=Object.create(null),PS=Object.create(null);for(let[i,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])PS[i]=TS(b_,e);class AS{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),PS)}resolve(e){return e?this.table[e]||(this.table[e]=TS(this.extra,e)):0}}const sW=new AS(b_);function mm(i,e){x1.indexOf(i)>-1||(x1.push(i),console.warn(e))}function TS(i,e){let t=[];for(let o of e.split(" ")){let l=[];for(let d of o.split(".")){let h=i[d]||Ne[d];h?typeof h=="function"?l.length?l=l.map(h):mm(d,`Modifier ${d} used at start of tag`):l.length?mm(d,`Tag ${d} used as modifier`):l=Array.isArray(h)?h:[h]:mm(d,`Unknown highlighting tag ${d}`)}for(let d of l)t.push(d)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),s=n+" "+t.map(o=>o.id),a=w1[s];if(a)return a.id;let r=w1[s]=Vs.define({id:bd.length,name:n,props:[rV({[n]:t})]});return bd.push(r),r.id}function aW(i,e){let t=Vs.define({id:bd.length,name:"Document",props:[pl.add(()=>i),dS.add(()=>n=>e.getIndent(n))],top:!0});return bd.push(t),t}_n.RTL,_n.LTR;const rW=i=>{let{state:e}=i,t=e.doc.lineAt(e.selection.main.from),n=x_(i.state,t.from);return n.line?oW(i):n.block?cW(i):!1};function y_(i,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let s=i(e,t);return s?(n(t.update(s)),!0):!1}}const oW=y_(uW,0),lW=y_(LS,0),cW=y_((i,e)=>LS(i,e,hW(e)),0);function x_(i,e){let t=i.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const yc=50;function dW(i,{open:e,close:t},n,s){let a=i.sliceDoc(n-yc,n),r=i.sliceDoc(s,s+yc),o=/\s*$/.exec(a)[0].length,l=/^\s*/.exec(r)[0].length,d=a.length-o;if(a.slice(d-e.length,d)==e&&r.slice(l,l+t.length)==t)return{open:{pos:n-o,margin:o&&1},close:{pos:s+l,margin:l&&1}};let h,m;s-n<=2*yc?h=m=i.sliceDoc(n,s):(h=i.sliceDoc(n,n+yc),m=i.sliceDoc(s-yc,s));let v=/^\s*/.exec(h)[0].length,b=/\s*$/.exec(m)[0].length,y=m.length-b-t.length;return h.slice(v,v+e.length)==e&&m.slice(y,y+t.length)==t?{open:{pos:n+v+e.length,margin:/\s/.test(h.charAt(v+e.length))?1:0},close:{pos:s-b-t.length,margin:/\s/.test(m.charAt(y-1))?1:0}}:null}function hW(i){let e=[];for(let t of i.selection.ranges){let n=i.doc.lineAt(t.from),s=t.to<=n.to?n:i.doc.lineAt(t.to);s.from>n.from&&s.from==t.to&&(s=t.to==n.to+1?n:i.doc.lineAt(t.to-1));let a=e.length-1;a>=0&&e[a].to>n.from?e[a].to=s.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:s.to})}return e}function LS(i,e,t=e.selection.ranges){let n=t.map(a=>x_(e,a.from).block);if(!n.every(a=>a))return null;let s=t.map((a,r)=>dW(e,n[r],a.from,a.to));if(i!=2&&!s.every(a=>a))return{changes:e.changes(t.map((a,r)=>s[r]?[]:[{from:a.from,insert:n[r].open+" "},{from:a.to,insert:" "+n[r].close}]))};if(i!=1&&s.some(a=>a)){let a=[];for(let r=0,o;r<s.length;r++)if(o=s[r]){let l=n[r],{open:d,close:h}=o;a.push({from:d.pos-l.open.length,to:d.pos+d.margin},{from:h.pos-h.margin,to:h.pos+l.close.length})}return{changes:a}}return null}function uW(i,e,t=e.selection.ranges){let n=[],s=-1;for(let{from:a,to:r}of t){let o=n.length,l=1e9,d=x_(e,a).line;if(d){for(let h=a;h<=r;){let m=e.doc.lineAt(h);if(m.from>s&&(a==r||r>m.from)){s=m.from;let v=/^\s*/.exec(m.text)[0].length,b=v==m.length,y=m.text.slice(v,v+d.length)==d?v:-1;v<m.text.length&&v<l&&(l=v),n.push({line:m,comment:y,token:d,indent:v,empty:b,single:!1})}h=m.to+1}if(l<1e9)for(let h=o;h<n.length;h++)n[h].indent<n[h].line.text.length&&(n[h].indent=l);n.length==o+1&&(n[o].single=!0)}}if(i!=2&&n.some(a=>a.comment<0&&(!a.empty||a.single))){let a=[];for(let{line:o,token:l,indent:d,empty:h,single:m}of n)(m||!h)&&a.push({from:o.from+d,insert:l+" "});let r=e.changes(a);return{changes:r,selection:e.selection.map(r,1)}}else if(i!=1&&n.some(a=>a.comment>=0)){let a=[];for(let{line:r,comment:o,token:l}of n)if(o>=0){let d=r.from+o,h=d+l.length;r.text[h-r.from]==" "&&h++,a.push({from:d,to:h})}return{changes:a}}return null}const Kv=Cr.define(),fW=Cr.define(),pW=Mt.define(),DS=Mt.define({combine(i){return Xa(i,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,s)=>e(n,s)||t(n,s)})}}),ES=is.define({create(){return Wa.empty},update(i,e){let t=e.state.facet(DS),n=e.annotation(Kv);if(n){let l=js.fromTransaction(e,n.selection),d=n.side,h=d==0?i.undone:i.done;return l?h=of(h,h.length,t.minDepth,l):h=BS(h,e.startState.selection),new Wa(d==0?n.rest:h,d==0?h:n.rest)}let s=e.annotation(fW);if((s=="full"||s=="before")&&(i=i.isolate()),e.annotation(Un.addToHistory)===!1)return e.changes.empty?i:i.addMapping(e.changes.desc);let a=js.fromTransaction(e),r=e.annotation(Un.time),o=e.annotation(Un.userEvent);return a?i=i.addChanges(a,r,o,t,e):e.selection&&(i=i.addSelection(e.startState.selection,r,o,t.newGroupDelay)),(s=="full"||s=="after")&&(i=i.isolate()),i},toJSON(i){return{done:i.done.map(e=>e.toJSON()),undone:i.undone.map(e=>e.toJSON())}},fromJSON(i){return new Wa(i.done.map(js.fromJSON),i.undone.map(js.fromJSON))}});function mW(i={}){return[ES,DS.of(i),Ct.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?IS:e.inputType=="historyRedo"?Xv:null;return n?(e.preventDefault(),n(t)):!1}})]}function Gf(i,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let s=t.field(ES,!1);if(!s)return!1;let a=s.pop(i,t,e);return a?(n(a),!0):!1}}const IS=Gf(0,!1),Xv=Gf(1,!1),vW=Gf(0,!0),gW=Gf(1,!0);class js{constructor(e,t,n,s,a){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=s,this.selectionsAfter=a}setSelAfter(e){return new js(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new js(e.changes&&Wn.fromJSON(e.changes),[],e.mapped&&Ua.fromJSON(e.mapped),e.startSelection&&je.fromJSON(e.startSelection),e.selectionsAfter.map(je.fromJSON))}static fromTransaction(e,t){let n=na;for(let s of e.startState.facet(pW)){let a=s(e);a.length&&(n=n.concat(a))}return!n.length&&e.changes.empty?null:new js(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,na)}static selection(e){return new js(void 0,na,void 0,void 0,e)}}function of(i,e,t,n){let s=e+1>t+20?e-t-1:0,a=i.slice(s,e);return a.push(n),a}function _W(i,e){let t=[],n=!1;return i.iterChangedRanges((s,a)=>t.push(s,a)),e.iterChangedRanges((s,a,r,o)=>{for(let l=0;l<t.length;){let d=t[l++],h=t[l++];o>=d&&r<=h&&(n=!0)}}),n}function bW(i,e){return i.ranges.length==e.ranges.length&&i.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function OS(i,e){return i.length?e.length?i.concat(e):i:e}const na=[],yW=200;function BS(i,e){if(i.length){let t=i[i.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-yW));return n.length&&n[n.length-1].eq(e)?i:(n.push(e),of(i,i.length-1,1e9,t.setSelAfter(n)))}else return[js.selection([e])]}function xW(i){let e=i[i.length-1],t=i.slice();return t[i.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function vm(i,e){if(!i.length)return i;let t=i.length,n=na;for(;t;){let s=wW(i[t-1],e,n);if(s.changes&&!s.changes.empty||s.effects.length){let a=i.slice(0,t);return a[t-1]=s,a}else e=s.mapped,t--,n=s.selectionsAfter}return n.length?[js.selection(n)]:na}function wW(i,e,t){let n=OS(i.selectionsAfter.length?i.selectionsAfter.map(o=>o.map(e)):na,t);if(!i.changes)return js.selection(n);let s=i.changes.map(e),a=e.mapDesc(i.changes,!0),r=i.mapped?i.mapped.composeDesc(a):a;return new js(s,_i.mapEffects(i.effects,e),r,i.startSelection.map(a),n)}const kW=/^(input\.type|delete)($|\.)/;class Wa{constructor(e,t,n=0,s=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=s}isolate(){return this.prevTime?new Wa(this.done,this.undone):this}addChanges(e,t,n,s,a){let r=this.done,o=r[r.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!n||kW.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(a,_W(o.changes,e.changes))||n=="input.type.compose")?r=of(r,r.length-1,s.minDepth,new js(e.changes.compose(o.changes),OS(_i.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,na)):r=of(r,r.length,s.minDepth,e),new Wa(r,na,t,n)}addSelection(e,t,n,s){let a=this.done.length?this.done[this.done.length-1].selectionsAfter:na;return a.length>0&&t-this.prevTime<s&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&bW(a[a.length-1],e)?this:new Wa(BS(this.done,e),this.undone,t,n)}addMapping(e){return new Wa(vm(this.done,e),vm(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let s=e==0?this.done:this.undone;if(s.length==0)return null;let a=s[s.length-1],r=a.selectionsAfter[0]||t.selection;if(n&&a.selectionsAfter.length)return t.update({selection:a.selectionsAfter[a.selectionsAfter.length-1],annotations:Kv.of({side:e,rest:xW(s),selection:r}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(a.changes){let o=s.length==1?na:s.slice(0,s.length-1);return a.mapped&&(o=vm(o,a.mapped)),t.update({changes:a.changes,selection:a.startSelection,effects:a.effects,annotations:Kv.of({side:e,rest:o,selection:r}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Wa.empty=new Wa(na,na);const SW=[{key:"Mod-z",run:IS,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Xv,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Xv,preventDefault:!0},{key:"Mod-u",run:vW,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:gW,preventDefault:!0}];function Xl(i,e){return je.create(i.ranges.map(e),i.mainIndex)}function Ja(i,e){return i.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function xa({state:i,dispatch:e},t){let n=Xl(i.selection,t);return n.eq(i.selection,!0)?!1:(e(Ja(i,n)),!0)}function Zf(i,e){return je.cursor(e?i.to:i.from)}function RS(i,e){return xa(i,t=>t.empty?i.moveByChar(t,e):Zf(t,e))}function fs(i){return i.textDirectionAt(i.state.selection.main.head)==_n.LTR}const zS=i=>RS(i,!fs(i)),NS=i=>RS(i,fs(i));function FS(i,e){return xa(i,t=>t.empty?i.moveByGroup(t,e):Zf(t,e))}const CW=i=>FS(i,!fs(i)),MW=i=>FS(i,fs(i));function PW(i,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(i.sliceDoc(e.from,e.to)))||e.firstChild}function Yf(i,e,t){let n=us(i).resolveInner(e.head),s=t?Ei.closedBy:Ei.openedBy;for(let l=e.head;;){let d=t?n.childAfter(l):n.childBefore(l);if(!d)break;PW(i,d,s)?n=d:l=t?d.to:d.from}let a=n.type.prop(s),r,o;return a&&(r=t?Va(i,n.from,1):Va(i,n.to,-1))&&r.matched?o=t?r.end.to:r.end.from:o=t?n.to:n.from,je.cursor(o,t?-1:1)}const AW=i=>xa(i,e=>Yf(i.state,e,!fs(i))),TW=i=>xa(i,e=>Yf(i.state,e,fs(i)));function HS(i,e){return xa(i,t=>{if(!t.empty)return Zf(t,e);let n=i.moveVertically(t,e);return n.head!=t.head?n:i.moveToLineBoundary(t,e)})}const jS=i=>HS(i,!1),$S=i=>HS(i,!0);function VS(i){let e=i.scrollDOM.clientHeight<i.scrollDOM.scrollHeight-2,t=0,n=0,s;if(e){for(let a of i.state.facet(Ct.scrollMargins)){let r=a(i);r!=null&&r.top&&(t=Math.max(r==null?void 0:r.top,t)),r!=null&&r.bottom&&(n=Math.max(r==null?void 0:r.bottom,n))}s=i.scrollDOM.clientHeight-t-n}else s=(i.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(i.defaultLineHeight,s-5)}}function WS(i,e){let t=VS(i),{state:n}=i,s=Xl(n.selection,r=>r.empty?i.moveVertically(r,e,t.height):Zf(r,e));if(s.eq(n.selection))return!1;let a;if(t.selfScroll){let r=i.coordsAtPos(n.selection.main.head),o=i.scrollDOM.getBoundingClientRect(),l=o.top+t.marginTop,d=o.bottom-t.marginBottom;r&&r.top>l&&r.bottom<d&&(a=Ct.scrollIntoView(s.main.head,{y:"start",yMargin:r.top-l}))}return i.dispatch(Ja(n,s),{effects:a}),!0}const k1=i=>WS(i,!1),Jv=i=>WS(i,!0);function co(i,e,t){let n=i.lineBlockAt(e.head),s=i.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?n.to:n.from)&&(s=i.moveToLineBoundary(e,t,!1)),!t&&s.head==n.from&&n.length){let a=/^\s*/.exec(i.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;a&&e.head!=n.from+a&&(s=je.cursor(n.from+a))}return s}const LW=i=>xa(i,e=>co(i,e,!0)),DW=i=>xa(i,e=>co(i,e,!1)),EW=i=>xa(i,e=>co(i,e,!fs(i))),IW=i=>xa(i,e=>co(i,e,fs(i))),OW=i=>xa(i,e=>je.cursor(i.lineBlockAt(e.head).from,1)),BW=i=>xa(i,e=>je.cursor(i.lineBlockAt(e.head).to,-1));function RW(i,e,t){let n=!1,s=Xl(i.selection,a=>{let r=Va(i,a.head,-1)||Va(i,a.head,1)||a.head>0&&Va(i,a.head-1,1)||a.head<i.doc.length&&Va(i,a.head+1,-1);if(!r||!r.end)return a;n=!0;let o=r.start.from==a.head?r.end.to:r.end.from;return je.cursor(o)});return n?(e(Ja(i,s)),!0):!1}const zW=({state:i,dispatch:e})=>RW(i,e);function da(i,e){let t=Xl(i.state.selection,n=>{let s=e(n);return je.range(n.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(i.state.selection)?!1:(i.dispatch(Ja(i.state,t)),!0)}function qS(i,e){return da(i,t=>i.moveByChar(t,e))}const US=i=>qS(i,!fs(i)),GS=i=>qS(i,fs(i));function ZS(i,e){return da(i,t=>i.moveByGroup(t,e))}const NW=i=>ZS(i,!fs(i)),FW=i=>ZS(i,fs(i)),HW=i=>da(i,e=>Yf(i.state,e,!fs(i))),jW=i=>da(i,e=>Yf(i.state,e,fs(i)));function YS(i,e){return da(i,t=>i.moveVertically(t,e))}const KS=i=>YS(i,!1),XS=i=>YS(i,!0);function JS(i,e){return da(i,t=>i.moveVertically(t,e,VS(i).height))}const S1=i=>JS(i,!1),C1=i=>JS(i,!0),$W=i=>da(i,e=>co(i,e,!0)),VW=i=>da(i,e=>co(i,e,!1)),WW=i=>da(i,e=>co(i,e,!fs(i))),qW=i=>da(i,e=>co(i,e,fs(i))),UW=i=>da(i,e=>je.cursor(i.lineBlockAt(e.head).from)),GW=i=>da(i,e=>je.cursor(i.lineBlockAt(e.head).to)),M1=({state:i,dispatch:e})=>(e(Ja(i,{anchor:0})),!0),P1=({state:i,dispatch:e})=>(e(Ja(i,{anchor:i.doc.length})),!0),A1=({state:i,dispatch:e})=>(e(Ja(i,{anchor:i.selection.main.anchor,head:0})),!0),T1=({state:i,dispatch:e})=>(e(Ja(i,{anchor:i.selection.main.anchor,head:i.doc.length})),!0),ZW=({state:i,dispatch:e})=>(e(i.update({selection:{anchor:0,head:i.doc.length},userEvent:"select"})),!0),YW=({state:i,dispatch:e})=>{let t=Kf(i).map(({from:n,to:s})=>je.range(n,Math.min(s+1,i.doc.length)));return e(i.update({selection:je.create(t),userEvent:"select"})),!0},KW=({state:i,dispatch:e})=>{let t=Xl(i.selection,n=>{let s=us(i),a=s.resolveStack(n.from,1);if(n.empty){let r=s.resolveStack(n.from,-1);r.node.from>=a.node.from&&r.node.to<=a.node.to&&(a=r)}for(let r=a;r;r=r.next){let{node:o}=r;if((o.from<n.from&&o.to>=n.to||o.to>n.to&&o.from<=n.from)&&r.next)return je.range(o.to,o.from)}return n});return t.eq(i.selection)?!1:(e(Ja(i,t)),!0)},XW=({state:i,dispatch:e})=>{let t=i.selection,n=null;return t.ranges.length>1?n=je.create([t.main]):t.main.empty||(n=je.create([je.cursor(t.main.head)])),n?(e(Ja(i,n)),!0):!1};function qd(i,e){if(i.state.readOnly)return!1;let t="delete.selection",{state:n}=i,s=n.changeByRange(a=>{let{from:r,to:o}=a;if(r==o){let l=e(a);l<r?(t="delete.backward",l=Yh(i,l,!1)):l>r&&(t="delete.forward",l=Yh(i,l,!0)),r=Math.min(r,l),o=Math.max(o,l)}else r=Yh(i,r,!1),o=Yh(i,o,!0);return r==o?{range:a}:{changes:{from:r,to:o},range:je.cursor(r,r<a.head?-1:1)}});return s.changes.empty?!1:(i.dispatch(n.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ct.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Yh(i,e,t){if(i instanceof Ct)for(let n of i.state.facet(Ct.atomicRanges).map(s=>s(i)))n.between(e,e,(s,a)=>{s<e&&a>e&&(e=t?a:s)});return e}const QS=(i,e,t)=>qd(i,n=>{let s=n.from,{state:a}=i,r=a.doc.lineAt(s),o,l;if(t&&!e&&s>r.from&&s<r.from+200&&!/[^ \t]/.test(o=r.text.slice(0,s-r.from))){if(o[o.length-1]=="	")return s-1;let d=Kl(o,a.tabSize),h=d%Wo(a)||Wo(a);for(let m=0;m<h&&o[o.length-1-m]==" ";m++)s--;l=s}else l=ts(r.text,s-r.from,e,e)+r.from,l==s&&r.number!=(e?a.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(r.text.slice(l-r.from,s-r.from))&&(l=ts(r.text,l-r.from,!1,!1)+r.from);return l}),Qv=i=>QS(i,!1,!0),eC=i=>QS(i,!0,!1),tC=(i,e)=>qd(i,t=>{let n=t.head,{state:s}=i,a=s.doc.lineAt(n),r=s.charCategorizer(n);for(let o=null;;){if(n==(e?a.to:a.from)){n==t.head&&a.number!=(e?s.doc.lines:1)&&(n+=e?1:-1);break}let l=ts(a.text,n-a.from,e)+a.from,d=a.text.slice(Math.min(n,l)-a.from,Math.max(n,l)-a.from),h=r(d);if(o!=null&&h!=o)break;(d!=" "||n!=t.head)&&(o=h),n=l}return n}),iC=i=>tC(i,!1),JW=i=>tC(i,!0),QW=i=>qd(i,e=>{let t=i.lineBlockAt(e.head).to;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),eq=i=>qd(i,e=>{let t=i.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),tq=i=>qd(i,e=>{let t=i.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(i.state.doc.length,e.head+1)}),iq=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Wi.of(["",""])},range:je.cursor(n.from)}));return e(i.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},nq=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=i.changeByRange(n=>{if(!n.empty||n.from==0||n.from==i.doc.length)return{range:n};let s=n.from,a=i.doc.lineAt(s),r=s==a.from?s-1:ts(a.text,s-a.from,!1)+a.from,o=s==a.to?s+1:ts(a.text,s-a.from,!0)+a.from;return{changes:{from:r,to:o,insert:i.doc.slice(s,o).append(i.doc.slice(r,s))},range:je.cursor(o)}});return t.changes.empty?!1:(e(i.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Kf(i){let e=[],t=-1;for(let n of i.selection.ranges){let s=i.doc.lineAt(n.from),a=i.doc.lineAt(n.to);if(!n.empty&&n.to==a.from&&(a=i.doc.lineAt(n.to-1)),t>=s.number){let r=e[e.length-1];r.to=a.to,r.ranges.push(n)}else e.push({from:s.from,to:a.to,ranges:[n]});t=a.number+1}return e}function nC(i,e,t){if(i.readOnly)return!1;let n=[],s=[];for(let a of Kf(i)){if(t?a.to==i.doc.length:a.from==0)continue;let r=i.doc.lineAt(t?a.to+1:a.from-1),o=r.length+1;if(t){n.push({from:a.to,to:r.to},{from:a.from,insert:r.text+i.lineBreak});for(let l of a.ranges)s.push(je.range(Math.min(i.doc.length,l.anchor+o),Math.min(i.doc.length,l.head+o)))}else{n.push({from:r.from,to:a.from},{from:a.to,insert:i.lineBreak+r.text});for(let l of a.ranges)s.push(je.range(l.anchor-o,l.head-o))}}return n.length?(e(i.update({changes:n,scrollIntoView:!0,selection:je.create(s,i.selection.mainIndex),userEvent:"move.line"})),!0):!1}const sq=({state:i,dispatch:e})=>nC(i,e,!1),aq=({state:i,dispatch:e})=>nC(i,e,!0);function sC(i,e,t){if(i.readOnly)return!1;let n=[];for(let s of Kf(i))t?n.push({from:s.from,insert:i.doc.slice(s.from,s.to)+i.lineBreak}):n.push({from:s.to,insert:i.lineBreak+i.doc.slice(s.from,s.to)});return e(i.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const rq=({state:i,dispatch:e})=>sC(i,e,!1),oq=({state:i,dispatch:e})=>sC(i,e,!0),lq=i=>{if(i.state.readOnly)return!1;let{state:e}=i,t=e.changes(Kf(e).map(({from:s,to:a})=>(s>0?s--:a<e.doc.length&&a++,{from:s,to:a}))),n=Xl(e.selection,s=>{let a;if(i.lineWrapping){let r=i.lineBlockAt(s.head),o=i.coordsAtPos(s.head,s.assoc||1);o&&(a=r.bottom+i.documentTop-o.bottom+i.defaultLineHeight/2)}return i.moveVertically(s,!0,a)}).map(t);return i.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function cq(i,e){if(/\(\)|\[\]|\{\}/.test(i.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=us(i).resolveInner(e),n=t.childBefore(e),s=t.childAfter(e),a;return n&&s&&n.to<=e&&s.from>=e&&(a=n.type.prop(Ei.closedBy))&&a.indexOf(s.name)>-1&&i.doc.lineAt(n.to).from==i.doc.lineAt(s.from).from&&!/\S/.test(i.sliceDoc(n.to,s.from))?{from:n.to,to:s.from}:null}const L1=aC(!1),dq=aC(!0);function aC(i){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(s=>{let{from:a,to:r}=s,o=e.doc.lineAt(a),l=!i&&a==r&&cq(e,a);i&&(a=r=(r<=o.to?o:e.doc.lineAt(r)).to);let d=new qf(e,{simulateBreak:a,simulateDoubleBreak:!!l}),h=m_(d,a);for(h==null&&(h=Kl(/^\s*/.exec(e.doc.lineAt(a).text)[0],e.tabSize));r<o.to&&/\s/.test(o.text[r-o.from]);)r++;l?{from:a,to:r}=l:a>o.from&&a<o.from+100&&!/\S/.test(o.text.slice(0,a))&&(a=o.from);let m=["",_d(e,h)];return l&&m.push(_d(e,d.lineIndent(o.from,-1))),{changes:{from:a,to:r,insert:Wi.of(m)},range:je.cursor(a+1+m[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function w_(i,e){let t=-1;return i.changeByRange(n=>{let s=[];for(let r=n.from;r<=n.to;){let o=i.doc.lineAt(r);o.number>t&&(n.empty||n.to>o.from)&&(e(o,s,n),t=o.number),r=o.to+1}let a=i.changes(s);return{changes:s,range:je.range(a.mapPos(n.anchor,1),a.mapPos(n.head,1))}})}const hq=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let t=Object.create(null),n=new qf(i,{overrideIndentation:a=>{let r=t[a];return r??-1}}),s=w_(i,(a,r,o)=>{let l=m_(n,a.from);if(l==null)return;/\S/.test(a.text)||(l=0);let d=/^\s*/.exec(a.text)[0],h=_d(i,l);(d!=h||o.from<a.from+d.length)&&(t[a.from]=l,r.push({from:a.from,to:a.from+d.length,insert:h}))});return s.changes.empty||e(i.update(s,{userEvent:"indent"})),!0},uq=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(w_(i,(t,n)=>{n.push({from:t.from,insert:i.facet(p_)})}),{userEvent:"input.indent"})),!0),fq=({state:i,dispatch:e})=>i.readOnly?!1:(e(i.update(w_(i,(t,n)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let a=Kl(s,i.tabSize),r=0,o=_d(i,Math.max(0,a-Wo(i)));for(;r<s.length&&r<o.length&&s.charCodeAt(r)==o.charCodeAt(r);)r++;n.push({from:t.from+r,to:t.from+s.length,insert:o.slice(r)})}),{userEvent:"delete.dedent"})),!0),pq=i=>(i.setTabFocusMode(),!0),mq=[{key:"Ctrl-b",run:zS,shift:US,preventDefault:!0},{key:"Ctrl-f",run:NS,shift:GS},{key:"Ctrl-p",run:jS,shift:KS},{key:"Ctrl-n",run:$S,shift:XS},{key:"Ctrl-a",run:OW,shift:UW},{key:"Ctrl-e",run:BW,shift:GW},{key:"Ctrl-d",run:eC},{key:"Ctrl-h",run:Qv},{key:"Ctrl-k",run:QW},{key:"Ctrl-Alt-h",run:iC},{key:"Ctrl-o",run:iq},{key:"Ctrl-t",run:nq},{key:"Ctrl-v",run:Jv}],vq=[{key:"ArrowLeft",run:zS,shift:US,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:CW,shift:NW,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:EW,shift:WW,preventDefault:!0},{key:"ArrowRight",run:NS,shift:GS,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:MW,shift:FW,preventDefault:!0},{mac:"Cmd-ArrowRight",run:IW,shift:qW,preventDefault:!0},{key:"ArrowUp",run:jS,shift:KS,preventDefault:!0},{mac:"Cmd-ArrowUp",run:M1,shift:A1},{mac:"Ctrl-ArrowUp",run:k1,shift:S1},{key:"ArrowDown",run:$S,shift:XS,preventDefault:!0},{mac:"Cmd-ArrowDown",run:P1,shift:T1},{mac:"Ctrl-ArrowDown",run:Jv,shift:C1},{key:"PageUp",run:k1,shift:S1},{key:"PageDown",run:Jv,shift:C1},{key:"Home",run:DW,shift:VW,preventDefault:!0},{key:"Mod-Home",run:M1,shift:A1},{key:"End",run:LW,shift:$W,preventDefault:!0},{key:"Mod-End",run:P1,shift:T1},{key:"Enter",run:L1,shift:L1},{key:"Mod-a",run:ZW},{key:"Backspace",run:Qv,shift:Qv},{key:"Delete",run:eC},{key:"Mod-Backspace",mac:"Alt-Backspace",run:iC},{key:"Mod-Delete",mac:"Alt-Delete",run:JW},{mac:"Mod-Backspace",run:eq},{mac:"Mod-Delete",run:tq}].concat(mq.map(i=>({mac:i.key,run:i.run,shift:i.shift}))),gq=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:AW,shift:HW},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:TW,shift:jW},{key:"Alt-ArrowUp",run:sq},{key:"Shift-Alt-ArrowUp",run:rq},{key:"Alt-ArrowDown",run:aq},{key:"Shift-Alt-ArrowDown",run:oq},{key:"Escape",run:XW},{key:"Mod-Enter",run:dq},{key:"Alt-l",mac:"Ctrl-l",run:YW},{key:"Mod-i",run:KW,preventDefault:!0},{key:"Mod-[",run:fq},{key:"Mod-]",run:uq},{key:"Mod-Alt-\\",run:hq},{key:"Shift-Mod-k",run:lq},{key:"Shift-Mod-\\",run:zW},{key:"Mod-/",run:rW},{key:"Alt-A",run:lW},{key:"Ctrl-m",mac:"Shift-Alt-m",run:pq}].concat(vq),D1=typeof String.prototype.normalize=="function"?i=>i.normalize("NFKD"):i=>i;class $l{constructor(e,t,n=0,s=e.length,a,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,s),this.bufferStart=n,this.normalize=a?o=>a(D1(o)):D1,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Bs(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=Gg(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=Ha(e);let s=this.normalize(t);if(s.length)for(let a=0,r=n;;a++){let o=s.charCodeAt(a),l=this.match(o,r,this.bufferPos+this.bufferStart);if(a==s.length-1){if(l)return this.value=l,this;break}r==n&&a<t.length&&t.charCodeAt(a)==o&&r++}}}match(e,t,n){let s=null;for(let a=0;a<this.matches.length;a+=2){let r=this.matches[a],o=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?s={from:this.matches[a+1],to:n}:(this.matches[a]++,o=!0)),o||(this.matches.splice(a,2),a-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?s={from:t,to:n}:this.matches.push(1,t)),s&&this.test&&!this.test(s.from,s.to,this.buffer,this.bufferStart)&&(s=null),s}}typeof Symbol<"u"&&($l.prototype[Symbol.iterator]=function(){return this});const rC={from:-1,to:-1,match:/.*/.exec("")},k_="gm"+(/x/.unicode==null?"":"u");class oC{constructor(e,t,n,s=0,a=e.length){if(this.text=e,this.to=a,this.curLine="",this.done=!1,this.value=rC,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new lC(e,t,n,s,a);this.re=new RegExp(t,k_+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let r=e.lineAt(s);this.curLineStart=r.from,this.matchPos=lf(e,s),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,s=n+t[0].length;if(this.matchPos=lf(this.text,s+(n==s?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<s||n>this.value.to)&&(!this.test||this.test(n,s,t)))return this.value={from:n,to:s,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const gm=new WeakMap;class wl{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let s=gm.get(e);if(!s||s.from>=n||s.to<=t){let o=new wl(t,e.sliceString(t,n));return gm.set(e,o),o}if(s.from==t&&s.to==n)return s;let{text:a,from:r}=s;return r>t&&(a=e.sliceString(t,r)+a,r=t),s.to<n&&(a+=e.sliceString(s.to,n)),gm.set(e,new wl(r,a)),new wl(t,a.slice(t-r,n-r))}}class lC{constructor(e,t,n,s,a){this.text=e,this.to=a,this.done=!1,this.value=rC,this.matchPos=lf(e,s),this.re=new RegExp(t,k_+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=wl.get(e,s,this.chunkEnd(s+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,s=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,s,t)))return this.value={from:n,to:s,match:t},this.matchPos=lf(this.text,s+(n==s?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=wl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(oC.prototype[Symbol.iterator]=lC.prototype[Symbol.iterator]=function(){return this});function _q(i){try{return new RegExp(i,k_),!0}catch{return!1}}function lf(i,e){if(e>=i.length)return e;let t=i.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function eg(i){let e=String(i.state.doc.lineAt(i.state.selection.main.head).number),t=rn("input",{class:"cm-textfield",name:"line",value:e}),n=rn("form",{class:"cm-gotoLine",onkeydown:a=>{a.keyCode==27?(a.preventDefault(),i.dispatch({effects:Gc.of(!1)}),i.focus()):a.keyCode==13&&(a.preventDefault(),s())},onsubmit:a=>{a.preventDefault(),s()}},rn("label",i.state.phrase("Go to line"),": ",t)," ",rn("button",{class:"cm-button",type:"submit"},i.state.phrase("go")),rn("button",{name:"close",onclick:()=>{i.dispatch({effects:Gc.of(!1)}),i.focus()},"aria-label":i.state.phrase("close"),type:"button"},["×"]));function s(){let a=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!a)return;let{state:r}=i,o=r.doc.lineAt(r.selection.main.head),[,l,d,h,m]=a,v=h?+h.slice(1):0,b=d?+d:o.number;if(d&&m){let k=b/100;l&&(k=k*(l=="-"?-1:1)+o.number/r.doc.lines),b=Math.round(r.doc.lines*k)}else d&&l&&(b=b*(l=="-"?-1:1)+o.number);let y=r.doc.line(Math.max(1,Math.min(r.doc.lines,b))),x=je.cursor(y.from+Math.max(0,Math.min(v,y.length)));i.dispatch({effects:[Gc.of(!1),Ct.scrollIntoView(x.from,{y:"center"})],selection:x}),i.focus()}return{dom:n}}const Gc=_i.define(),E1=is.define({create(){return!0},update(i,e){for(let t of e.effects)t.is(Gc)&&(i=t.value);return i},provide:i=>vd.from(i,e=>e?eg:null)}),bq=i=>{let e=md(i,eg);if(!e){let t=[Gc.of(!0)];i.state.field(E1,!1)==null&&t.push(_i.appendConfig.of([E1,yq])),i.dispatch({effects:t}),e=md(i,eg)}return e&&e.dom.querySelector("input").select(),!0},yq=Ct.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),xq={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},wq=Mt.define({combine(i){return Xa(i,xq,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function kq(i){return[Aq,Pq]}const Sq=ni.mark({class:"cm-selectionMatch"}),Cq=ni.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function I1(i,e,t,n){return(t==0||i(e.sliceDoc(t-1,t))!=kn.Word)&&(n==e.doc.length||i(e.sliceDoc(n,n+1))!=kn.Word)}function Mq(i,e,t,n){return i(e.sliceDoc(t,t+1))==kn.Word&&i(e.sliceDoc(n-1,n))==kn.Word}const Pq=jn.fromClass(class{constructor(i){this.decorations=this.getDeco(i)}update(i){(i.selectionSet||i.docChanged||i.viewportChanged)&&(this.decorations=this.getDeco(i.view))}getDeco(i){let e=i.state.facet(wq),{state:t}=i,n=t.selection;if(n.ranges.length>1)return ni.none;let s=n.main,a,r=null;if(s.empty){if(!e.highlightWordAroundCursor)return ni.none;let l=t.wordAt(s.head);if(!l)return ni.none;r=t.charCategorizer(s.head),a=t.sliceDoc(l.from,l.to)}else{let l=s.to-s.from;if(l<e.minSelectionLength||l>200)return ni.none;if(e.wholeWords){if(a=t.sliceDoc(s.from,s.to),r=t.charCategorizer(s.head),!(I1(r,t,s.from,s.to)&&Mq(r,t,s.from,s.to)))return ni.none}else if(a=t.sliceDoc(s.from,s.to),!a)return ni.none}let o=[];for(let l of i.visibleRanges){let d=new $l(t.doc,a,l.from,l.to);for(;!d.next().done;){let{from:h,to:m}=d.value;if((!r||I1(r,t,h,m))&&(s.empty&&h<=s.from&&m>=s.to?o.push(Cq.range(h,m)):(h>=s.to||m<=s.from)&&o.push(Sq.range(h,m)),o.length>e.maxMatches))return ni.none}}return ni.set(o)}},{decorations:i=>i.decorations}),Aq=Ct.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Tq=({state:i,dispatch:e})=>{let{selection:t}=i,n=je.create(t.ranges.map(s=>i.wordAt(s.head)||je.cursor(s.head)),t.mainIndex);return n.eq(t)?!1:(e(i.update({selection:n})),!0)};function Lq(i,e){let{main:t,ranges:n}=i.selection,s=i.wordAt(t.head),a=s&&s.from==t.from&&s.to==t.to;for(let r=!1,o=new $l(i.doc,e,n[n.length-1].to);;)if(o.next(),o.done){if(r)return null;o=new $l(i.doc,e,0,Math.max(0,n[n.length-1].from-1)),r=!0}else{if(r&&n.some(l=>l.from==o.value.from))continue;if(a){let l=i.wordAt(o.value.from);if(!l||l.from!=o.value.from||l.to!=o.value.to)continue}return o.value}}const Dq=({state:i,dispatch:e})=>{let{ranges:t}=i.selection;if(t.some(a=>a.from===a.to))return Tq({state:i,dispatch:e});let n=i.sliceDoc(t[0].from,t[0].to);if(i.selection.ranges.some(a=>i.sliceDoc(a.from,a.to)!=n))return!1;let s=Lq(i,n);return s?(e(i.update({selection:i.selection.addRange(je.range(s.from,s.to),!1),effects:Ct.scrollIntoView(s.to)})),!0):!1},Jl=Mt.define({combine(i){return Xa(i,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new Vq(e),scrollToMatch:e=>Ct.scrollIntoView(e)})}});class cC{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||_q(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Bq(this):new Iq(this)}getCursor(e,t=0,n){let s=e.doc?e:ji.create({doc:e});return n==null&&(n=s.doc.length),this.regexp?hl(this,s,t,n):dl(this,s,t,n)}}class dC{constructor(e){this.spec=e}}function dl(i,e,t,n){return new $l(e.doc,i.unquoted,t,n,i.caseSensitive?void 0:s=>s.toLowerCase(),i.wholeWord?Eq(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function Eq(i,e){return(t,n,s,a)=>((a>t||a+s.length<n)&&(a=Math.max(0,t-2),s=i.sliceString(a,Math.min(i.length,n+2))),(e(cf(s,t-a))!=kn.Word||e(df(s,t-a))!=kn.Word)&&(e(df(s,n-a))!=kn.Word||e(cf(s,n-a))!=kn.Word))}class Iq extends dC{constructor(e){super(e)}nextMatch(e,t,n){let s=dl(this.spec,e,n,e.doc.length).nextOverlapping();if(s.done){let a=Math.min(e.doc.length,t+this.spec.unquoted.length);s=dl(this.spec,e,0,a).nextOverlapping()}return s.done||s.value.from==t&&s.value.to==n?null:s.value}prevMatchInRange(e,t,n){for(let s=n;;){let a=Math.max(t,s-1e4-this.spec.unquoted.length),r=dl(this.spec,e,a,s),o=null;for(;!r.nextOverlapping().done;)o=r.value;if(o)return o;if(a==t)return null;s-=1e4}}prevMatch(e,t,n){let s=this.prevMatchInRange(e,0,t);return s||(s=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),s&&(s.from!=t||s.to!=n)?s:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=dl(this.spec,e,0,e.doc.length),s=[];for(;!n.next().done;){if(s.length>=t)return null;s.push(n.value)}return s}highlight(e,t,n,s){let a=dl(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}function hl(i,e,t,n){return new oC(e.doc,i.search,{ignoreCase:!i.caseSensitive,test:i.wholeWord?Oq(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function cf(i,e){return i.slice(ts(i,e,!1),e)}function df(i,e){return i.slice(e,ts(i,e))}function Oq(i){return(e,t,n)=>!n[0].length||(i(cf(n.input,n.index))!=kn.Word||i(df(n.input,n.index))!=kn.Word)&&(i(df(n.input,n.index+n[0].length))!=kn.Word||i(cf(n.input,n.index+n[0].length))!=kn.Word)}class Bq extends dC{nextMatch(e,t,n){let s=hl(this.spec,e,n,e.doc.length).next();return s.done&&(s=hl(this.spec,e,0,t).next()),s.done?null:s.value}prevMatchInRange(e,t,n){for(let s=1;;s++){let a=Math.max(t,n-s*1e4),r=hl(this.spec,e,a,n),o=null;for(;!r.next().done;)o=r.value;if(o&&(a==t||o.from>a+10))return o;if(a==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let s=n.length;s>0;s--){let a=+n.slice(0,s);if(a>0&&a<e.match.length)return e.match[a]+n.slice(s)}return t})}matchAll(e,t){let n=hl(this.spec,e,0,e.doc.length),s=[];for(;!n.next().done;){if(s.length>=t)return null;s.push(n.value)}return s}highlight(e,t,n,s){let a=hl(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!a.next().done;)s(a.value.from,a.value.to)}}const yd=_i.define(),S_=_i.define(),Zr=is.define({create(i){return new _m(tg(i).create(),null)},update(i,e){for(let t of e.effects)t.is(yd)?i=new _m(t.value.create(),i.panel):t.is(S_)&&(i=new _m(i.query,t.value?C_:null));return i},provide:i=>vd.from(i,e=>e.panel)});class _m{constructor(e,t){this.query=e,this.panel=t}}const Rq=ni.mark({class:"cm-searchMatch"}),zq=ni.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Nq=jn.fromClass(class{constructor(i){this.view=i,this.decorations=this.highlight(i.state.field(Zr))}update(i){let e=i.state.field(Zr);(e!=i.startState.field(Zr)||i.docChanged||i.selectionSet||i.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:i,panel:e}){if(!e||!i.spec.valid)return ni.none;let{view:t}=this,n=new yr;for(let s=0,a=t.visibleRanges,r=a.length;s<r;s++){let{from:o,to:l}=a[s];for(;s<r-1&&l>a[s+1].from-2*250;)l=a[++s].to;i.highlight(t.state,o,l,(d,h)=>{let m=t.state.selection.ranges.some(v=>v.from==d&&v.to==h);n.add(d,h,m?zq:Rq)})}return n.finish()}},{decorations:i=>i.decorations});function Ud(i){return e=>{let t=e.state.field(Zr,!1);return t&&t.query.spec.valid?i(e,t):fC(e)}}const hf=Ud((i,{query:e})=>{let{to:t}=i.state.selection.main,n=e.nextMatch(i.state,t,t);if(!n)return!1;let s=je.single(n.from,n.to),a=i.state.facet(Jl);return i.dispatch({selection:s,effects:[M_(i,n),a.scrollToMatch(s.main,i)],userEvent:"select.search"}),uC(i),!0}),uf=Ud((i,{query:e})=>{let{state:t}=i,{from:n}=t.selection.main,s=e.prevMatch(t,n,n);if(!s)return!1;let a=je.single(s.from,s.to),r=i.state.facet(Jl);return i.dispatch({selection:a,effects:[M_(i,s),r.scrollToMatch(a.main,i)],userEvent:"select.search"}),uC(i),!0}),Fq=Ud((i,{query:e})=>{let t=e.matchAll(i.state,1e3);return!t||!t.length?!1:(i.dispatch({selection:je.create(t.map(n=>je.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),Hq=({state:i,dispatch:e})=>{let t=i.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:s}=t.main,a=[],r=0;for(let o=new $l(i.doc,i.sliceDoc(n,s));!o.next().done;){if(a.length>1e3)return!1;o.value.from==n&&(r=a.length),a.push(je.range(o.value.from,o.value.to))}return e(i.update({selection:je.create(a,r),userEvent:"select.search.matches"})),!0},O1=Ud((i,{query:e})=>{let{state:t}=i,{from:n,to:s}=t.selection.main;if(t.readOnly)return!1;let a=e.nextMatch(t,n,n);if(!a)return!1;let r=a,o=[],l,d,h=[];r.from==n&&r.to==s&&(d=t.toText(e.getReplacement(r)),o.push({from:r.from,to:r.to,insert:d}),r=e.nextMatch(t,r.from,r.to),h.push(Ct.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+".")));let m=i.state.changes(o);return r&&(l=je.single(r.from,r.to).map(m),h.push(M_(i,r)),h.push(t.facet(Jl).scrollToMatch(l.main,i))),i.dispatch({changes:m,selection:l,effects:h,userEvent:"input.replace"}),!0}),jq=Ud((i,{query:e})=>{if(i.state.readOnly)return!1;let t=e.matchAll(i.state,1e9).map(s=>{let{from:a,to:r}=s;return{from:a,to:r,insert:e.getReplacement(s)}});if(!t.length)return!1;let n=i.state.phrase("replaced $ matches",t.length)+".";return i.dispatch({changes:t,effects:Ct.announce.of(n),userEvent:"input.replace.all"}),!0});function C_(i){return i.state.facet(Jl).createPanel(i)}function tg(i,e){var t,n,s,a,r;let o=i.selection.main,l=o.empty||o.to>o.from+100?"":i.sliceDoc(o.from,o.to);if(e&&!l)return e;let d=i.facet(Jl);return new cC({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:d.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:d.caseSensitive,literal:(s=e==null?void 0:e.literal)!==null&&s!==void 0?s:d.literal,regexp:(a=e==null?void 0:e.regexp)!==null&&a!==void 0?a:d.regexp,wholeWord:(r=e==null?void 0:e.wholeWord)!==null&&r!==void 0?r:d.wholeWord})}function hC(i){let e=md(i,C_);return e&&e.dom.querySelector("[main-field]")}function uC(i){let e=hC(i);e&&e==i.root.activeElement&&e.select()}const fC=i=>{let e=i.state.field(Zr,!1);if(e&&e.panel){let t=hC(i);if(t&&t!=i.root.activeElement){let n=tg(i.state,e.query.spec);n.valid&&i.dispatch({effects:yd.of(n)}),t.focus(),t.select()}}else i.dispatch({effects:[S_.of(!0),e?yd.of(tg(i.state,e.query.spec)):_i.appendConfig.of(qq)]});return!0},pC=i=>{let e=i.state.field(Zr,!1);if(!e||!e.panel)return!1;let t=md(i,C_);return t&&t.dom.contains(i.root.activeElement)&&i.focus(),i.dispatch({effects:S_.of(!1)}),!0},$q=[{key:"Mod-f",run:fC,scope:"editor search-panel"},{key:"F3",run:hf,shift:uf,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:hf,shift:uf,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:pC,scope:"editor search-panel"},{key:"Mod-Shift-l",run:Hq},{key:"Mod-Alt-g",run:bq},{key:"Mod-d",run:Dq,preventDefault:!0}];class Vq{constructor(e){this.view=e;let t=this.query=e.state.field(Zr).query.spec;this.commit=this.commit.bind(this),this.searchField=rn("input",{value:t.search,placeholder:qs(e,"Find"),"aria-label":qs(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=rn("input",{value:t.replace,placeholder:qs(e,"Replace"),"aria-label":qs(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=rn("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=rn("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=rn("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(s,a,r){return rn("button",{class:"cm-button",name:s,onclick:a,type:"button"},r)}this.dom=rn("div",{onkeydown:s=>this.keydown(s),class:"cm-search"},[this.searchField,n("next",()=>hf(e),[qs(e,"next")]),n("prev",()=>uf(e),[qs(e,"previous")]),n("select",()=>Fq(e),[qs(e,"all")]),rn("label",null,[this.caseField,qs(e,"match case")]),rn("label",null,[this.reField,qs(e,"regexp")]),rn("label",null,[this.wordField,qs(e,"by word")]),...e.state.readOnly?[]:[rn("br"),this.replaceField,n("replace",()=>O1(e),[qs(e,"replace")]),n("replaceAll",()=>jq(e),[qs(e,"replace all")])],rn("button",{name:"close",onclick:()=>pC(e),"aria-label":qs(e,"close"),type:"button"},["×"])])}commit(){let e=new cC({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:yd.of(e)}))}keydown(e){Gj(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?uf:hf)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),O1(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(yd)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Jl).top}}function qs(i,e){return i.state.phrase(e)}const Kh=30,Xh=/[\s\.,:;?!]/;function M_(i,{from:e,to:t}){let n=i.state.doc.lineAt(e),s=i.state.doc.lineAt(t).to,a=Math.max(n.from,e-Kh),r=Math.min(s,t+Kh),o=i.state.sliceDoc(a,r);if(a!=n.from){for(let l=0;l<Kh;l++)if(!Xh.test(o[l+1])&&Xh.test(o[l])){o=o.slice(l);break}}if(r!=s){for(let l=o.length-1;l>o.length-Kh;l--)if(!Xh.test(o[l-1])&&Xh.test(o[l])){o=o.slice(0,l);break}}return Ct.announce.of(`${i.state.phrase("current match")}. ${o} ${i.state.phrase("on line")} ${n.number}.`)}const Wq=Ct.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),qq=[Zr,Xo.low(Nq),Wq];class mC{constructor(e,t,n,s){this.state=e,this.pos=t,this.explicit=n,this.view=s,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=us(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),s=t.text.slice(n-t.from,this.pos-t.from),a=s.search(vC(e,!1));return a<0?null:{from:n+a,to:this.pos,text:s.slice(a)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function B1(i){let e=Object.keys(i).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Uq(i){let e=Object.create(null),t=Object.create(null);for(let{label:s}of i){e[s[0]]=!0;for(let a=1;a<s.length;a++)t[s[a]]=!0}let n=B1(e)+B1(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function Gq(i){let e=i.map(s=>typeof s=="string"?{label:s}:s),[t,n]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:Uq(e);return s=>{let a=s.matchBefore(n);return a||s.explicit?{from:a?a.from:s.pos,options:e,validFor:t}:null}}class R1{constructor(e,t,n,s){this.completion=e,this.source=t,this.match=n,this.score=s}}function Bo(i){return i.selection.main.from}function vC(i,e){var t;let{source:n}=i,s=e&&n[0]!="^",a=n[n.length-1]!="$";return!s&&!a?i:new RegExp(`${s?"^":""}(?:${n})${a?"$":""}`,(t=i.flags)!==null&&t!==void 0?t:i.ignoreCase?"i":"")}const gC=Cr.define();function Zq(i,e,t,n){let{main:s}=i.selection,a=t-s.from,r=n-s.from;return Object.assign(Object.assign({},i.changeByRange(o=>{if(o!=s&&t!=n&&i.sliceDoc(o.from+a,o.from+r)!=i.sliceDoc(t,n))return{range:o};let l=i.toText(e);return{changes:{from:o.from+a,to:n==s.from?o.to:o.from+r,insert:l},range:je.cursor(o.from+a+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const z1=new WeakMap;function Yq(i){if(!Array.isArray(i))return i;let e=z1.get(i);return e||z1.set(i,e=Gq(i)),e}const ff=_i.define(),xd=_i.define();class Kq{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Bs(e,t),s=Ha(n);this.chars.push(n);let a=e.slice(t,t+s),r=a.toUpperCase();this.folded.push(Bs(r==a?a.toLowerCase():r,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:s,precise:a,byWord:r}=this;if(t.length==1){let A=Bs(e,0),T=Ha(A),I=T==e.length?0:-100;if(A!=t[0])if(A==n[0])I+=-200;else return null;return this.ret(I,[0,T])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,d=0;if(o<0){for(let A=0,T=Math.min(e.length,200);A<T&&d<l;){let I=Bs(e,A);(I==t[d]||I==n[d])&&(s[d++]=A),A+=Ha(I)}if(d<l)return null}let h=0,m=0,v=!1,b=0,y=-1,x=-1,k=/[a-z]/.test(e),C=!0;for(let A=0,T=Math.min(e.length,200),I=0;A<T&&m<l;){let D=Bs(e,A);o<0&&(h<l&&D==t[h]&&(a[h++]=A),b<l&&(D==t[b]||D==n[b]?(b==0&&(y=A),x=A+1,b++):b=0));let N,z=D<255?D>=48&&D<=57||D>=97&&D<=122?2:D>=65&&D<=90?1:0:(N=Gg(D))!=N.toLowerCase()?1:N!=N.toUpperCase()?2:0;(!A||z==1&&k||I==0&&z!=0)&&(t[m]==D||n[m]==D&&(v=!0)?r[m++]=A:r.length&&(C=!1)),I=z,A+=Ha(D)}return m==l&&r[0]==0&&C?this.result(-100+(v?-200:0),r,e):b==l&&y==0?this.ret(-200-e.length+(x==e.length?0:-100),[0,x]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):b==l?this.ret(-900-e.length,[y,x]):m==l?this.result(-100+(v?-200:0)+-700+(C?0:-1100),r,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,n){let s=[],a=0;for(let r of t){let o=r+(this.astral?Ha(Bs(n,r)):1);a&&s[a-1]==r?s[a-1]=o:(s[a++]=r,s[a++]=o)}return this.ret(e-n.length,s)}}class Xq{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const Yn=Mt.define({combine(i){return Xa(i,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Jq,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>N1(e(n),t(n)),optionClass:(e,t)=>n=>N1(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function N1(i,e){return i?e?i+" "+e:i:e}function Jq(i,e,t,n,s,a){let r=i.textDirection==_n.RTL,o=r,l=!1,d="top",h,m,v=e.left-s.left,b=s.right-e.right,y=n.right-n.left,x=n.bottom-n.top;if(o&&v<Math.min(y,b)?o=!1:!o&&b<Math.min(y,v)&&(o=!0),y<=(o?v:b))h=Math.max(s.top,Math.min(t.top,s.bottom-x))-e.top,m=Math.min(400,o?v:b);else{l=!0,m=Math.min(400,(r?e.right:s.right-e.left)-30);let A=s.bottom-e.bottom;A>=x||A>e.top?h=t.bottom-e.top:(d="bottom",h=e.bottom-t.top)}let k=(e.bottom-e.top)/a.offsetHeight,C=(e.right-e.left)/a.offsetWidth;return{style:`${d}: ${h/k}px; max-width: ${m/C}px`,class:"cm-completionInfo-"+(l?r?"left-narrow":"right-narrow":o?"left":"right")}}function Qq(i){let e=i.addToOptions.slice();return i.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,s,a){let r=document.createElement("span");r.className="cm-completionLabel";let o=t.displayLabel||t.label,l=0;for(let d=0;d<a.length;){let h=a[d++],m=a[d++];h>l&&r.appendChild(document.createTextNode(o.slice(l,h)));let v=r.appendChild(document.createElement("span"));v.appendChild(document.createTextNode(o.slice(h,m))),v.className="cm-completionMatchedText",l=m}return l<o.length&&r.appendChild(document.createTextNode(o.slice(l))),r},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function bm(i,e,t){if(i<=t)return{from:0,to:i};if(e<0&&(e=0),e<=i>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let n=Math.floor((i-e)/t);return{from:i-(n+1)*t,to:i-n*t}}class eU{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:a,selected:r}=s.open,o=e.state.facet(Yn);this.optionContent=Qq(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=bm(a.length,r,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:d}=e.state.field(t).open;for(let h=l.target,m;h&&h!=this.dom;h=h.parentNode)if(h.nodeName=="LI"&&(m=/-(\d+)$/.exec(h.id))&&+m[1]<d.length){this.applyCompletion(e,d[+m[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let d=e.state.field(this.stateField,!1);d&&d.tooltip&&e.state.facet(Yn).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:xd.of(null)})}),this.showOptions(a,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=s){let{options:a,selected:r,disabled:o}=n.open;(!s.open||s.open.options!=a)&&(this.range=bm(a.length,r,e.state.facet(Yn).maxRenderedOptions),this.showOptions(a,n.id)),this.updateSel(),o!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=bm(t.options.length,t.selected,this.view.state.facet(Yn).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:s}=n;if(!s)return;let a=typeof s=="string"?document.createTextNode(s):s(n);if(!a)return;"then"in a?a.then(r=>{r&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(r,n)}).catch(r=>Hs(this.view.state,r,"completion info")):this.addInfoPane(a,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:a}=e;n.appendChild(s),this.infoDestroy=a||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,s=this.range.from;n;n=n.nextSibling,s++)n.nodeName!="LI"||!n.id?s--:s==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&iU(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),a=this.space;if(!a){let r=this.dom.ownerDocument.documentElement;a={left:0,top:0,right:r.clientWidth,bottom:r.clientHeight}}return s.top>Math.min(a.bottom,t.bottom)-10||s.bottom<Math.max(a.top,t.top)+10?null:this.view.state.facet(Yn).positionInfo(this.view,t,s,n,a,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions")),s.addEventListener("mousedown",r=>{r.target==s&&r.preventDefault()});let a=null;for(let r=n.from;r<n.to;r++){let{completion:o,match:l}=e[r],{section:d}=o;if(d){let v=typeof d=="string"?d:d.name;if(v!=a&&(r>n.from||n.from==0))if(a=v,typeof d!="string"&&d.header)s.appendChild(d.header(d));else{let b=s.appendChild(document.createElement("completion-section"));b.textContent=v}}const h=s.appendChild(document.createElement("li"));h.id=t+"-"+r,h.setAttribute("role","option");let m=this.optionClass(o);m&&(h.className=m);for(let v of this.optionContent){let b=v(o,this.view.state,this.view,l);b&&h.appendChild(b)}}return n.from&&s.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function tU(i,e){return t=>new eU(t,i,e)}function iU(i,e){let t=i.getBoundingClientRect(),n=e.getBoundingClientRect(),s=t.height/i.offsetHeight;n.top<t.top?i.scrollTop-=(t.top-n.top)/s:n.bottom>t.bottom&&(i.scrollTop+=(n.bottom-t.bottom)/s)}function F1(i){return(i.boost||0)*100+(i.apply?10:0)+(i.info?5:0)+(i.type?1:0)}function nU(i,e){let t=[],n=null,s=d=>{t.push(d);let{section:h}=d.completion;if(h){n||(n=[]);let m=typeof h=="string"?h:h.name;n.some(v=>v.name==m)||n.push(typeof h=="string"?{name:m}:h)}},a=e.facet(Yn);for(let d of i)if(d.hasResult()){let h=d.result.getMatch;if(d.result.filter===!1)for(let m of d.result.options)s(new R1(m,d.source,h?h(m):[],1e9-t.length));else{let m=e.sliceDoc(d.from,d.to),v,b=a.filterStrict?new Xq(m):new Kq(m);for(let y of d.result.options)if(v=b.match(y.label)){let x=y.displayLabel?h?h(y,v.matched):[]:v.matched;s(new R1(y,d.source,x,v.score+(y.boost||0)))}}}if(n){let d=Object.create(null),h=0,m=(v,b)=>{var y,x;return((y=v.rank)!==null&&y!==void 0?y:1e9)-((x=b.rank)!==null&&x!==void 0?x:1e9)||(v.name<b.name?-1:1)};for(let v of n.sort(m))h-=1e5,d[v.name]=h;for(let v of t){let{section:b}=v.completion;b&&(v.score+=d[typeof b=="string"?b:b.name])}}let r=[],o=null,l=a.compareCompletions;for(let d of t.sort((h,m)=>m.score-h.score||l(h.completion,m.completion))){let h=d.completion;!o||o.label!=h.label||o.detail!=h.detail||o.type!=null&&h.type!=null&&o.type!=h.type||o.apply!=h.apply||o.boost!=h.boost?r.push(d):F1(d.completion)>F1(o)&&(r[r.length-1]=d),o=d.completion}return r}class ml{constructor(e,t,n,s,a,r){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=s,this.selected=a,this.disabled=r}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ml(this.options,H1(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,s,a,r){if(s&&!r&&e.some(d=>d.isPending))return s.setDisabled();let o=nU(e,t);if(!o.length)return s&&e.some(d=>d.isPending)?s.setDisabled():null;let l=t.facet(Yn).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let d=s.options[s.selected].completion;for(let h=0;h<o.length;h++)if(o[h].completion==d){l=h;break}}return new ml(o,H1(n,l),{pos:e.reduce((d,h)=>h.hasResult()?Math.min(d,h.from):d,1e8),create:cU,above:a.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new ml(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ml(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class pf{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new pf(oU,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(Yn),a=(n.override||t.languageDataAt("autocomplete",Bo(t)).map(Yq)).map(l=>(this.active.find(h=>h.source==l)||new sa(l,this.active.some(h=>h.state!=0)?1:0)).update(e,n));a.length==this.active.length&&a.every((l,d)=>l==this.active[d])&&(a=this.active);let r=this.open,o=e.effects.some(l=>l.is(P_));r&&e.docChanged&&(r=r.map(e.changes)),e.selection||a.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!sU(a,this.active)||o?r=ml.build(a,t,this.id,r,n,o):r&&r.disabled&&!a.some(l=>l.isPending)&&(r=null),!r&&a.every(l=>!l.isPending)&&a.some(l=>l.hasResult())&&(a=a.map(l=>l.hasResult()?new sa(l.source,0):l));for(let l of e.effects)l.is(bC)&&(r=r&&r.setSelected(l.value,this.id));return a==this.active&&r==this.open?this:new pf(a,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?aU:rU}}function sU(i,e){if(i==e)return!0;for(let t=0,n=0;;){for(;t<i.length&&!i[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let s=t==i.length,a=n==e.length;if(s||a)return s==a;if(i[t++].result!=e[n++].result)return!1}}const aU={"aria-autocomplete":"list"},rU={};function H1(i,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":i};return e>-1&&(t["aria-activedescendant"]=i+"-"+e),t}const oU=[];function _C(i,e){if(i.isUserEvent("input.complete")){let n=i.annotation(gC);if(n&&e.activateOnCompletion(n))return 12}let t=i.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:i.isUserEvent("delete.backward")?2:i.selection?8:i.docChanged?16:0}class sa{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=_C(e,t),s=this;(n&8||n&16&&this.touches(e))&&(s=new sa(s.source,0)),n&4&&s.state==0&&(s=new sa(this.source,1)),s=s.updateFor(e,n);for(let a of e.effects)if(a.is(ff))s=new sa(s.source,1,a.value);else if(a.is(xd))s=new sa(s.source,0);else if(a.is(P_))for(let r of a.value)r.source==s.source&&(s=r);return s}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Bo(e.state))}}class kl extends sa{constructor(e,t,n,s,a,r){super(e,3,t),this.limit=n,this.result=s,this.from=a,this.to=r}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let a=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),o=Bo(e.state);if(o>r||!s||t&2&&(Bo(e.startState)==this.from||o<this.limit))return new sa(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return lU(s.validFor,e.state,a,r)?new kl(this.source,this.explicit,l,s,a,r):s.update&&(s=s.update(s,a,r,new mC(e.state,o,!1)))?new kl(this.source,this.explicit,l,s,s.from,(n=s.to)!==null&&n!==void 0?n:Bo(e.state)):new sa(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new kl(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new sa(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function lU(i,e,t,n){if(!i)return!1;let s=e.sliceDoc(t,n);return typeof i=="function"?i(s,t,n,e):vC(i,!0).test(s)}const P_=_i.define({map(i,e){return i.map(t=>t.map(e))}}),bC=_i.define(),zs=is.define({create(){return pf.start()},update(i,e){return i.update(e)},provide:i=>[c_.from(i,e=>e.tooltip),Ct.contentAttributes.from(i,e=>e.attrs)]});function A_(i,e){const t=e.completion.apply||e.completion.label;let n=i.state.field(zs).active.find(s=>s.source==e.source);return n instanceof kl?(typeof t=="string"?i.dispatch(Object.assign(Object.assign({},Zq(i.state,t,n.from,n.to)),{annotations:gC.of(e.completion)})):t(i,e.completion,n.from,n.to),!0):!1}const cU=tU(zs,A_);function Jh(i,e="option"){return t=>{let n=t.state.field(zs,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(Yn).interactionDelay)return!1;let s=1,a;e=="page"&&(a=Q2(t,n.open.tooltip))&&(s=Math.max(2,Math.floor(a.dom.offsetHeight/a.dom.querySelector("li").offsetHeight)-1));let{length:r}=n.open.options,o=n.open.selected>-1?n.open.selected+s*(i?1:-1):i?0:r-1;return o<0?o=e=="page"?0:r-1:o>=r&&(o=e=="page"?r-1:0),t.dispatch({effects:bC.of(o)}),!0}}const dU=i=>{let e=i.state.field(zs,!1);return i.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<i.state.facet(Yn).interactionDelay?!1:A_(i,e.open.options[e.open.selected])},j1=i=>i.state.field(zs,!1)?(i.dispatch({effects:ff.of(!0)}),!0):!1,hU=i=>{let e=i.state.field(zs,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(i.dispatch({effects:xd.of(null)}),!0)};class uU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const fU=50,pU=1e3,mU=jn.fromClass(class{constructor(i){this.view=i,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of i.state.field(zs).active)e.isPending&&this.startQuery(e)}update(i){let e=i.state.field(zs),t=i.state.facet(Yn);if(!i.selectionSet&&!i.docChanged&&i.startState.field(zs)==e)return;let n=i.transactions.some(a=>{let r=_C(a,t);return r&8||(a.selection||a.docChanged)&&!(r&3)});for(let a=0;a<this.running.length;a++){let r=this.running[a];if(n||r.context.abortOnDocChange&&i.docChanged||r.updates.length+i.transactions.length>fU&&Date.now()-r.time>pU){for(let o of r.context.abortListeners)try{o()}catch(l){Hs(this.view.state,l)}r.context.abortListeners=null,this.running.splice(a--,1)}else r.updates.push(...i.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),i.transactions.some(a=>a.effects.some(r=>r.is(ff)))&&(this.pendingStart=!0);let s=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(a=>a.isPending&&!this.running.some(r=>r.active.source==a.source))?setTimeout(()=>this.startUpdate(),s):-1,this.composing!=0)for(let a of i.transactions)a.isUserEvent("input.type")?this.composing=2:this.composing==2&&a.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:i}=this.view,e=i.field(zs);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yn).updateSyncTime))}startQuery(i){let{state:e}=this.view,t=Bo(e),n=new mC(e,t,i.explicit,this.view),s=new uU(i,n);this.running.push(s),Promise.resolve(i.source(n)).then(a=>{s.context.aborted||(s.done=a||null,this.scheduleAccept())},a=>{this.view.dispatch({effects:xd.of(null)}),Hs(this.view.state,a)})}scheduleAccept(){this.running.every(i=>i.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Yn).updateSyncTime))}accept(){var i;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(Yn),n=this.view.state.field(zs);for(let s=0;s<this.running.length;s++){let a=this.running[s];if(a.done===void 0)continue;if(this.running.splice(s--,1),a.done){let o=Bo(a.updates.length?a.updates[0].startState:this.view.state),l=Math.min(o,a.done.from+(a.active.explicit?0:1)),d=new kl(a.active.source,a.active.explicit,l,a.done,a.done.from,(i=a.done.to)!==null&&i!==void 0?i:o);for(let h of a.updates)d=d.update(h,t);if(d.hasResult()){e.push(d);continue}}let r=n.active.find(o=>o.source==a.active.source);if(r&&r.isPending)if(a.done==null){let o=new sa(a.active.source,0);for(let l of a.updates)o=o.update(l,t);o.isPending||e.push(o)}else this.startQuery(r)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:P_.of(e)})}},{eventHandlers:{blur(i){let e=this.view.state.field(zs,!1);if(e&&e.tooltip&&this.view.state.facet(Yn).closeOnBlur){let t=e.open&&Q2(this.view,e.open.tooltip);(!t||!t.dom.contains(i.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:xd.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:ff.of(!1)}),20),this.composing=0}}}),vU=typeof navigator=="object"&&/Win/.test(navigator.platform),gU=Xo.highest(Ct.domEventHandlers({keydown(i,e){let t=e.state.field(zs,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||i.key.length>1||i.ctrlKey&&!(vU&&i.altKey)||i.metaKey)return!1;let n=t.open.options[t.open.selected],s=t.active.find(r=>r.source==n.source),a=n.completion.commitCharacters||s.result.commitCharacters;return a&&a.indexOf(i.key)>-1&&A_(e,n),!1}})),_U=Ct.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),wd={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Lo=_i.define({map(i,e){let t=e.mapPos(i,-1,ys.TrackAfter);return t??void 0}}),T_=new class extends Ho{};T_.startSide=1;T_.endSide=-1;const yC=is.define({create(){return Ni.empty},update(i,e){if(i=i.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);i=i.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(Lo)&&(i=i.update({add:[T_.range(t.value,t.value+1)]}));return i}});function bU(){return[xU,yC]}const ym="()[]{}<>«»»«［］｛｝";function xC(i){for(let e=0;e<ym.length;e+=2)if(ym.charCodeAt(e)==i)return ym.charAt(e+1);return Gg(i<128?i:i+1)}function wC(i,e){return i.languageDataAt("closeBrackets",e)[0]||wd}const yU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),xU=Ct.inputHandler.of((i,e,t,n)=>{if((yU?i.composing:i.compositionStarted)||i.state.readOnly)return!1;let s=i.state.selection.main;if(n.length>2||n.length==2&&Ha(Bs(n,0))==1||e!=s.from||t!=s.to)return!1;let a=SU(i.state,n);return a?(i.dispatch(a),!0):!1}),wU=({state:i,dispatch:e})=>{if(i.readOnly)return!1;let n=wC(i,i.selection.main.head).brackets||wd.brackets,s=null,a=i.changeByRange(r=>{if(r.empty){let o=CU(i.doc,r.head);for(let l of n)if(l==o&&Xf(i.doc,r.head)==xC(Bs(l,0)))return{changes:{from:r.head-l.length,to:r.head+l.length},range:je.cursor(r.head-l.length)}}return{range:s=r}});return s||e(i.update(a,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},kU=[{key:"Backspace",run:wU}];function SU(i,e){let t=wC(i,i.selection.main.head),n=t.brackets||wd.brackets;for(let s of n){let a=xC(Bs(s,0));if(e==s)return a==s?AU(i,s,n.indexOf(s+s+s)>-1,t):MU(i,s,a,t.before||wd.before);if(e==a&&kC(i,i.selection.main.from))return PU(i,s,a)}return null}function kC(i,e){let t=!1;return i.field(yC).between(0,i.doc.length,n=>{n==e&&(t=!0)}),t}function Xf(i,e){let t=i.sliceString(e,e+2);return t.slice(0,Ha(Bs(t,0)))}function CU(i,e){let t=i.sliceString(e-2,e);return Ha(Bs(t,0))==t.length?t:t.slice(1)}function MU(i,e,t,n){let s=null,a=i.changeByRange(r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:t,from:r.to}],effects:Lo.of(r.to+e.length),range:je.range(r.anchor+e.length,r.head+e.length)};let o=Xf(i.doc,r.head);return!o||/\s/.test(o)||n.indexOf(o)>-1?{changes:{insert:e+t,from:r.head},effects:Lo.of(r.head+e.length),range:je.cursor(r.head+e.length)}:{range:s=r}});return s?null:i.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function PU(i,e,t){let n=null,s=i.changeByRange(a=>a.empty&&Xf(i.doc,a.head)==t?{changes:{from:a.head,to:a.head+t.length,insert:t},range:je.cursor(a.head+t.length)}:n={range:a});return n?null:i.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function AU(i,e,t,n){let s=n.stringPrefixes||wd.stringPrefixes,a=null,r=i.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Lo.of(o.to+e.length),range:je.range(o.anchor+e.length,o.head+e.length)};let l=o.head,d=Xf(i.doc,l),h;if(d==e){if($1(i,l))return{changes:{insert:e+e,from:l},effects:Lo.of(l+e.length),range:je.cursor(l+e.length)};if(kC(i,l)){let v=t&&i.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+v.length,insert:v},range:je.cursor(l+v.length)}}}else{if(t&&i.sliceDoc(l-2*e.length,l)==e+e&&(h=V1(i,l-2*e.length,s))>-1&&$1(i,h))return{changes:{insert:e+e+e+e,from:l},effects:Lo.of(l+e.length),range:je.cursor(l+e.length)};if(i.charCategorizer(l)(d)!=kn.Word&&V1(i,l,s)>-1&&!TU(i,l,e,s))return{changes:{insert:e+e,from:l},effects:Lo.of(l+e.length),range:je.cursor(l+e.length)}}return{range:a=o}});return a?null:i.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function $1(i,e){let t=us(i).resolveInner(e+1);return t.parent&&t.from==e}function TU(i,e,t,n){let s=us(i).resolveInner(e,-1),a=n.reduce((r,o)=>Math.max(r,o.length),0);for(let r=0;r<5;r++){let o=i.sliceDoc(s.from,Math.min(s.to,s.from+t.length+a)),l=o.indexOf(t);if(!l||l>-1&&n.indexOf(o.slice(0,l))>-1){let h=s.firstChild;for(;h&&h.from==s.from&&h.to-h.from>t.length+l;){if(i.sliceDoc(h.to-t.length,h.to)==t)return!1;h=h.firstChild}return!0}let d=s.to==e&&s.parent;if(!d)break;s=d}return!1}function V1(i,e,t){let n=i.charCategorizer(e);if(n(i.sliceDoc(e-1,e))!=kn.Word)return e;for(let s of t){let a=e-s.length;if(i.sliceDoc(a,e)==s&&n(i.sliceDoc(a-1,a))!=kn.Word)return a}return-1}function LU(i={}){return[gU,zs,Yn.of(i),mU,DU,_U]}const SC=[{key:"Ctrl-Space",run:j1},{mac:"Alt-`",run:j1},{key:"Escape",run:hU},{key:"ArrowDown",run:Jh(!0)},{key:"ArrowUp",run:Jh(!1)},{key:"PageDown",run:Jh(!0,"page")},{key:"PageUp",run:Jh(!1,"page")},{key:"Enter",run:dU}],DU=Xo.highest(o_.computeN([Yn],i=>i.facet(Yn).defaultKeymap?[SC]:[]));class W1{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class Mo{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let s=n.facet(kd).markerFilter;s&&(e=s(e,n));let a=e.slice().sort((h,m)=>h.from-m.from||h.to-m.to),r=new yr,o=[],l=0;for(let h=0;;){let m=h==a.length?null:a[h];if(!m&&!o.length)break;let v,b;for(o.length?(v=l,b=o.reduce((x,k)=>Math.min(x,k.to),m&&m.from>v?m.from:1e8)):(v=m.from,b=m.to,o.push(m),h++);h<a.length;){let x=a[h];if(x.from==v&&(x.to>x.from||x.to==v))o.push(x),h++,b=Math.min(x.to,b);else{b=Math.min(x.from,b);break}}let y=WU(o);if(o.some(x=>x.from==x.to||x.from==x.to-1&&n.doc.lineAt(x.from).to==x.from))r.add(v,v,ni.widget({widget:new HU(y),diagnostics:o.slice()}));else{let x=o.reduce((k,C)=>C.markClass?k+" "+C.markClass:k,"");r.add(v,b,ni.mark({class:"cm-lintRange cm-lintRange-"+y+x,diagnostics:o.slice(),inclusiveEnd:o.some(k=>k.to>b)}))}l=b;for(let x=0;x<o.length;x++)o[x].to<=l&&o.splice(x--,1)}let d=r.finish();return new Mo(d,t,Vl(d))}}function Vl(i,e=null,t=0){let n=null;return i.between(t,1e9,(s,a,{spec:r})=>{if(!(e&&r.diagnostics.indexOf(e)<0))if(!n)n=new W1(s,a,e||r.diagnostics[0]);else{if(r.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new W1(n.from,a,n.diagnostic)}}),n}function EU(i,e){let t=e.pos,n=e.end||t,s=i.state.facet(kd).hideOn(i,t,n);if(s!=null)return s;let a=i.startState.doc.lineAt(e.pos);return!!(i.effects.some(r=>r.is(CC))||i.changes.touchesRange(a.from,Math.max(a.to,n)))}function IU(i,e){return i.field(Ys,!1)?e:e.concat(_i.appendConfig.of(qU))}const CC=_i.define(),L_=_i.define(),MC=_i.define(),Ys=is.define({create(){return new Mo(ni.none,null,null)},update(i,e){if(e.docChanged&&i.diagnostics.size){let t=i.diagnostics.map(e.changes),n=null,s=i.panel;if(i.selected){let a=e.changes.mapPos(i.selected.from,1);n=Vl(t,i.selected.diagnostic,a)||Vl(t,null,a)}!t.size&&s&&e.state.facet(kd).autoPanel&&(s=null),i=new Mo(t,s,n)}for(let t of e.effects)if(t.is(CC)){let n=e.state.facet(kd).autoPanel?t.value.length?Sd.open:null:i.panel;i=Mo.init(t.value,n,e.state)}else t.is(L_)?i=new Mo(i.diagnostics,t.value?Sd.open:null,i.selected):t.is(MC)&&(i=new Mo(i.diagnostics,i.panel,t.value));return i},provide:i=>[vd.from(i,e=>e.panel),Ct.decorations.from(i,e=>e.diagnostics)]}),OU=ni.mark({class:"cm-lintRange cm-lintRange-active"});function BU(i,e,t){let{diagnostics:n}=i.state.field(Ys),s,a=-1,r=-1;n.between(e-(t<0?1:0),e+(t>0?1:0),(l,d,{spec:h})=>{if(e>=l&&e<=d&&(l==d||(e>l||t>0)&&(e<d||t<0)))return s=h.diagnostics,a=l,r=d,!1});let o=i.state.facet(kd).tooltipFilter;return s&&o&&(s=o(s,i.state)),s?{pos:a,end:r,above:i.state.doc.lineAt(a).to<r,create(){return{dom:RU(i,s)}}}:null}function RU(i,e){return rn("ul",{class:"cm-tooltip-lint"},e.map(t=>AC(i,t,!1)))}const zU=i=>{let e=i.state.field(Ys,!1);(!e||!e.panel)&&i.dispatch({effects:IU(i.state,[L_.of(!0)])});let t=md(i,Sd.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},q1=i=>{let e=i.state.field(Ys,!1);return!e||!e.panel?!1:(i.dispatch({effects:L_.of(!1)}),!0)},NU=i=>{let e=i.state.field(Ys,!1);if(!e)return!1;let t=i.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(i.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},FU=[{key:"Mod-Shift-m",run:zU,preventDefault:!0},{key:"F8",run:NU}],kd=Mt.define({combine(i){return Object.assign({sources:i.map(e=>e.source).filter(e=>e!=null)},Xa(i.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function PC(i){let e=[];if(i)e:for(let{name:t}of i){for(let n=0;n<t.length;n++){let s=t[n];if(/[a-zA-Z]/.test(s)&&!e.some(a=>a.toLowerCase()==s.toLowerCase())){e.push(s);continue e}}e.push("")}return e}function AC(i,e,t){var n;let s=t?PC(e.actions):[];return rn("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},rn("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(i):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((a,r)=>{let o=!1,l=v=>{if(v.preventDefault(),o)return;o=!0;let b=Vl(i.state.field(Ys).diagnostics,e);b&&a.apply(i,b.from,b.to)},{name:d}=a,h=s[r]?d.indexOf(s[r]):-1,m=h<0?d:[d.slice(0,h),rn("u",d.slice(h,h+1)),d.slice(h+1)];return rn("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${d}${h<0?"":` (access key "${s[r]})"`}.`},m)}),e.source&&rn("div",{class:"cm-diagnosticSource"},e.source))}class HU extends lo{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return rn("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class U1{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=AC(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Sd{constructor(e){this.view=e,this.items=[];let t=s=>{if(s.keyCode==27)q1(this.view),this.view.focus();else if(s.keyCode==38||s.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(s.keyCode==40||s.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(s.keyCode==36)this.moveSelection(0);else if(s.keyCode==35)this.moveSelection(this.items.length-1);else if(s.keyCode==13)this.view.focus();else if(s.keyCode>=65&&s.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:a}=this.items[this.selectedIndex],r=PC(a.actions);for(let o=0;o<r.length;o++)if(r[o].toUpperCase().charCodeAt(0)==s.keyCode){let l=Vl(this.view.state.field(Ys).diagnostics,a);l&&a.actions[o].apply(e,l.from,l.to)}}else return;s.preventDefault()},n=s=>{for(let a=0;a<this.items.length;a++)this.items[a].dom.contains(s.target)&&this.moveSelection(a)};this.list=rn("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=rn("div",{class:"cm-panel-lint"},this.list,rn("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>q1(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Ys).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Ys),n=0,s=!1,a=null,r=new Set;for(e.between(0,this.view.state.doc.length,(o,l,{spec:d})=>{for(let h of d.diagnostics){if(r.has(h))continue;r.add(h);let m=-1,v;for(let b=n;b<this.items.length;b++)if(this.items[b].diagnostic==h){m=b;break}m<0?(v=new U1(this.view,h),this.items.splice(n,0,v),s=!0):(v=this.items[m],m>n&&(this.items.splice(n,m-n),s=!0)),t&&v.diagnostic==t.diagnostic?v.dom.hasAttribute("aria-selected")||(v.dom.setAttribute("aria-selected","true"),a=v):v.dom.hasAttribute("aria-selected")&&v.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)s=!0,this.items.pop();this.items.length==0&&(this.items.push(new U1(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),s=!0),a?(this.list.setAttribute("aria-activedescendant",a.id),this.view.requestMeasure({key:this,read:()=>({sel:a.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let d=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/d:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/d)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),s&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Ys),n=Vl(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:MC.of(n)})}static open(e){return new Sd(e)}}function jU(i,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(i)}</svg>')`}function Qh(i){return jU(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${i}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const $U=Ct.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Qh("#d11")},".cm-lintRange-warning":{backgroundImage:Qh("orange")},".cm-lintRange-info":{backgroundImage:Qh("#999")},".cm-lintRange-hint":{backgroundImage:Qh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function VU(i){return i=="error"?4:i=="warning"?3:i=="info"?2:1}function WU(i){let e="hint",t=1;for(let n of i){let s=VU(n.severity);s>t&&(t=s,e=n.severity)}return e}const qU=[Ys,Ct.decorations.compute([Ys],i=>{let{selected:e,panel:t}=i.field(Ys);return!e||!t||e.from==e.to?ni.none:ni.set([OU.range(e.from,e.to)])}),I$(BU,{hideOn:EU}),$U],UU=[W$(),G$(),d$(),mW(),NV(),Qj(),s$(),ji.allowMultipleSelections.of(!0),SV(),yS($V,{fallback:!0}),YV(),bU(),LU(),w$(),C$(),v$(),kq(),o_.of([...kU,...gq,...$q,...SW,...OV,...SC,...FU])],GU="#e5c07b",G1="#e06c75",ZU="#56b6c2",YU="#ffffff",ku="#abb2bf",ig="#7d8799",KU="#61afef",XU="#98c379",Z1="#d19a66",JU="#c678dd",QU="#21252b",Y1="#2c313a",K1="#282c34",xm="#353a42",eG="#3E4451",X1="#528bff",tG=Ct.theme({"&":{color:ku,backgroundColor:K1},".cm-content":{caretColor:X1},".cm-cursor, .cm-dropCursor":{borderLeftColor:X1},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:eG},".cm-panels":{backgroundColor:QU,color:ku},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:K1,color:ig,border:"none"},".cm-activeLineGutter":{backgroundColor:Y1},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:xm},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:xm,borderBottomColor:xm},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Y1,color:ku}}},{dark:!0}),iG=Wd.define([{tag:Ne.keyword,color:JU},{tag:[Ne.name,Ne.deleted,Ne.character,Ne.propertyName,Ne.macroName],color:G1},{tag:[Ne.function(Ne.variableName),Ne.labelName],color:KU},{tag:[Ne.color,Ne.constant(Ne.name),Ne.standard(Ne.name)],color:Z1},{tag:[Ne.definition(Ne.name),Ne.separator],color:ku},{tag:[Ne.typeName,Ne.className,Ne.number,Ne.changed,Ne.annotation,Ne.modifier,Ne.self,Ne.namespace],color:GU},{tag:[Ne.operator,Ne.operatorKeyword,Ne.url,Ne.escape,Ne.regexp,Ne.link,Ne.special(Ne.string)],color:ZU},{tag:[Ne.meta,Ne.comment],color:ig},{tag:Ne.strong,fontWeight:"bold"},{tag:Ne.emphasis,fontStyle:"italic"},{tag:Ne.strikethrough,textDecoration:"line-through"},{tag:Ne.link,color:ig,textDecoration:"underline"},{tag:Ne.heading,fontWeight:"bold",color:G1},{tag:[Ne.atom,Ne.bool,Ne.special(Ne.variableName)],color:Z1},{tag:[Ne.processingInstruction,Ne.string,Ne.inserted],color:XU},{tag:Ne.invalid,color:YU}]),nG=[tG,yS(iG)];function sG(i){return new RegExp("^(?:"+i.join("|")+")","i")}function Jf(i){return new RegExp("^(?:"+i.join("|")+")$","i")}var aG=Jf(["_G","_VERSION","assert","collectgarbage","dofile","error","getfenv","getmetatable","ipairs","load","loadfile","loadstring","module","next","pairs","pcall","print","rawequal","rawget","rawset","require","select","setfenv","setmetatable","tonumber","tostring","type","unpack","xpcall","coroutine.create","coroutine.resume","coroutine.running","coroutine.status","coroutine.wrap","coroutine.yield","debug.debug","debug.getfenv","debug.gethook","debug.getinfo","debug.getlocal","debug.getmetatable","debug.getregistry","debug.getupvalue","debug.setfenv","debug.sethook","debug.setlocal","debug.setmetatable","debug.setupvalue","debug.traceback","close","flush","lines","read","seek","setvbuf","write","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.stderr","io.stdin","io.stdout","io.tmpfile","io.type","io.write","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.cos","math.cosh","math.deg","math.exp","math.floor","math.fmod","math.frexp","math.huge","math.ldexp","math.log","math.log10","math.max","math.min","math.modf","math.pi","math.pow","math.rad","math.random","math.randomseed","math.sin","math.sinh","math.sqrt","math.tan","math.tanh","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","package.cpath","package.loaded","package.loaders","package.loadlib","package.path","package.preload","package.seeall","string.byte","string.char","string.dump","string.find","string.format","string.gmatch","string.gsub","string.len","string.lower","string.match","string.rep","string.reverse","string.sub","string.upper","table.concat","table.insert","table.maxn","table.remove","table.sort"]),rG=Jf(["and","break","elseif","false","nil","not","or","return","true","function","end","if","then","else","do","while","repeat","until","for","in","local"]),oG=Jf(["function","if","repeat","do","\\(","{"]),lG=Jf(["end","until","\\)","}"]),cG=sG(["end","until","\\)","}","else","elseif"]);function J1(i){for(var e=0;i.eat("=");)++e;return i.eat("["),e}function D_(i,e){var t=i.next();return t=="-"&&i.eat("-")?i.eat("[")&&i.eat("[")?(e.cur=Q1(J1(i),"comment"))(i,e):(i.skipToEnd(),"comment"):t=='"'||t=="'"?(e.cur=dG(t))(i,e):t=="["&&/[\[=]/.test(i.peek())?(e.cur=Q1(J1(i),"string"))(i,e):/\d/.test(t)?(i.eatWhile(/[\w.%]/),"number"):/[\w_]/.test(t)?(i.eatWhile(/[\w\\\-_.]/),"variable"):null}function Q1(i,e){return function(t,n){for(var s=null,a;(a=t.next())!=null;)if(s==null)a=="]"&&(s=0);else if(a=="=")++s;else if(a=="]"&&s==i){n.cur=D_;break}else s=null;return e}}function dG(i){return function(e,t){for(var n=!1,s;(s=e.next())!=null&&!(s==i&&!n);)n=!n&&s=="\\";return n||(t.cur=D_),"string"}}const hG={name:"lua",startState:function(){return{basecol:0,indentDepth:0,cur:D_}},token:function(i,e){if(i.eatSpace())return null;var t=e.cur(i,e),n=i.current();return t=="variable"&&(rG.test(n)?t="keyword":aG.test(n)&&(t="builtin")),t!="comment"&&t!="string"&&(oG.test(n)?++e.indentDepth:lG.test(n)&&--e.indentDepth),t},indent:function(i,e,t){var n=cG.test(e);return i.basecol+t.unit*(i.indentDepth-(n?1:0))},languageData:{indentOnInput:/^\s*(?:end|until|else|\)|\})$/,commentTokens:{line:"--",block:{open:"--[[",close:"]]--"}}}};function uG(i,e,t,n,s){if(!u(e).trim()){ze(t()("pages.addons.luaexecutor.notifications.pleaseentercode"),"error");return}Ve("executeLuaCode",{code:u(e),target:u(n)}).then(({status:a,data:r})=>{a==="ok"?(ri("sounds/action.mp3"),ze(t()("pages.addons.luaexecutor.notifications.executesuccess",{values:{target:u(n)}}),"success"),setTimeout(()=>s(),100)):(ze(t()("pages.addons.luaexecutor.notifications.executefailed",{values:{error:r}}),"error"),console.error("Lua execution error:",r))})}var fG=i=>i.stopPropagation(),pG=(i,e)=>M(e,"client"),mG=(i,e)=>M(e,"server"),vG=B(`<div class="lua-modal-overlay svelte-1i3g7pz"><div><div class="lua-modal-header svelte-1i3g7pz"><h3 class="svelte-1i3g7pz"> </h3> <button class="close-btn svelte-1i3g7pz"><i class="fas fa-times"></i></button></div> <div class="lua-modal-body svelte-1i3g7pz"><div class="execution-target svelte-1i3g7pz"><label class="svelte-1i3g7pz"> </label> <div class="target-buttons svelte-1i3g7pz"><button><i class="fas fa-desktop"></i> </button> <button><i class="fas fa-server"></i> </button></div></div> <div class="code-input-container svelte-1i3g7pz"><label for="lua-code" class="svelte-1i3g7pz"> </label> <div style="--code-font: 'Fira Code', 'SFMono-Regular', 'Monaco', 'Inconsolata', 'Liberation Mono', 'Menlo', 'Courier New', monospace;"></div></div></div> <div class="lua-modal-footer svelte-1i3g7pz"><button> </button> <button><i class="fas fa-eraser"></i> </button> <button><i class="fas fa-play"></i> </button></div></div></div>`);function gG(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=Yi(e,"showLuaExecutor",15,!1),o=ae(""),l=ae("client"),d=null,h=ae(void 0);fn(()=>{r()&&(M(o,'print("Hello world!")'),setTimeout(()=>{v()},100))});function m(){r(!1),M(o,'print("Hello world!")'),d&&(d.destroy(),d=null)}function v(){if(!u(h)||d)return;const C=g_.define(hG);d=new Ct({doc:u(o),extensions:[UU,C,s().darkMode?nG:[],Ct.updateListener.of(A=>{A.docChanged&&M(o,A.state.doc.toString(),!0)}),Ct.theme({"&":{height:"100%",fontSize:"0.9rem"},".cm-content":{padding:"1.25rem",minHeight:"400px"},".cm-focused":{outline:"none"},".cm-editor":{height:"100%"},".cm-scroller":{lineHeight:"1.6"}})],parent:u(h)})}function b(){M(o,""),d&&d.dispatch({changes:{from:0,to:d.state.doc.length,insert:""}})}var y=Bi(),x=yt(y);{var k=C=>{var A=vG();A.__click=m;var T=p(A);let I;T.__click=[fG];var D=p(T),N=p(D),z=p(N),H=g(N,2);H.__click=m;var j=g(D,2),re=p(j),V=p(re),q=p(V),le=g(V,2),ee=p(le);let W;ee.__click=[pG,l];var ne=g(p(ee)),ye=g(ee,2);let ie;ye.__click=[mG,l];var Z=g(p(ye)),$=g(re,2),X=p($),Y=p(X),te=g(X,2);let K;Kr(te,Be=>M(h,Be),()=>u(h));var F=g(j,2),R=p(F);let J;R.__click=m;var U=p(R),ce=g(R,2);let fe;ce.__click=b;var ve=g(p(ce)),Me=g(ce,2);let Se;Me.__click=[uG,o,a,l,m];var Pe=g(p(Me));se((Be,ue,oe,me,Le,Oe,_e,be,Te,pe,de,ge,xe,we,Re)=>{I=G(T,1,"lua-modal svelte-1i3g7pz",null,I,Be),S(z,ue),S(q,`${oe??""}:`),W=G(ee,1,`target-btn ${u(l)==="client"?"active":""}`,"svelte-1i3g7pz",W,me),S(ne,` ${Le??""}`),ie=G(ye,1,`target-btn ${u(l)==="server"?"active":""}`,"svelte-1i3g7pz",ie,Oe),S(Z,` ${_e??""}`),S(Y,`${be??""}:`),K=G(te,1,"code-editor-wrapper lua-code-editor svelte-1i3g7pz",null,K,Te),J=G(R,1,"cancel-btn svelte-1i3g7pz",null,J,pe),S(U,de),fe=G(ce,1,"clear-btn svelte-1i3g7pz",null,fe,ge),S(ve,` ${xe??""}`),Se=G(Me,1,"execute-btn svelte-1i3g7pz",null,Se,we),S(Pe,` ${Re??""}`)},[()=>({light:!s().darkMode}),()=>a()("pages.addons.luaexecutor.title"),()=>a()("pages.addons.luaexecutor.executiontarget"),()=>({light:!s().darkMode}),()=>a()("pages.addons.luaexecutor.client"),()=>({light:!s().darkMode}),()=>a()("pages.addons.luaexecutor.server"),()=>a()("pages.addons.luaexecutor.luacode"),()=>({light:!s().darkMode}),()=>({light:!s().darkMode}),()=>a()("pages.addons.luaexecutor.buttons.cancel"),()=>({light:!s().darkMode}),()=>a()("pages.addons.luaexecutor.buttons.clear"),()=>({light:!s().darkMode}),()=>a()("pages.addons.luaexecutor.buttons.executeon",{values:{target:u(l)}})]),gt(3,T,()=>Ki,()=>({duration:200,start:.9})),gt(3,A,()=>Fi,()=>({duration:200})),E(C,A)};Q(x,C=>{r()&&C(k)})}E(i,y),Yt(),n()}hi(["click"]);function wm(i,e,t,n){e(!1),t(),M(n,{hit:!1,position:{x:0,y:0,z:0},normal:{x:0,y:0,z:0},entity:null,material:null,distance:0},!0)}function _G(i,e){M(e,!0),Ve("startRaycast").then(({status:t,data:n})=>{t==="ok"?(ri("sounds/action.mp3"),ze("Raycast mode activated. Look at your target position.","info")):(ze("Failed to start raycast mode","error"),M(e,!1))})}var bG=i=>i.stopPropagation(),yG=B('<button class="btn btn-primary svelte-okz0z1"><i class="fas fa-play"></i> </button>'),xG=B('<div class="key-hint svelte-okz0z1" title="Press E to stop raycast"><kbd class="svelte-okz0z1">E</kbd> <span>to stop raycast</span></div>'),wG=B('<div class="status-indicator active svelte-okz0z1"><i class="fas fa-circle svelte-okz0z1"></i> Raycast Active - Look at your target position</div>'),kG=B('<div class="status-indicator inactive svelte-okz0z1"><i class="fas fa-circle svelte-okz0z1"></i> Raycast Inactive</div>'),SG=(i,e,t)=>e(`${u(t).position.x.toFixed(4)}, ${u(t).position.y.toFixed(4)}, ${u(t).position.z.toFixed(4)}`),CG=(i,e,t)=>e(`${u(t).normal.x.toFixed(4)}, ${u(t).normal.y.toFixed(4)}, ${u(t).normal.z.toFixed(4)}`),MG=(i,e,t)=>e(u(t).distance.toFixed(4)),PG=(i,e,t)=>e(String(u(t).entity)),AG=B('<div class="data-item svelte-okz0z1"><label class="svelte-okz0z1">Entity:</label> <div class="simple-value svelte-okz0z1"><span class="svelte-okz0z1"> </span> <button class="copy-btn svelte-okz0z1" title="Copy entity ID"><i class="fas fa-copy"></i></button></div></div>'),TG=(i,e,t)=>e(String(u(t).material)),LG=B('<div class="data-item svelte-okz0z1"><label class="svelte-okz0z1">Material:</label> <div class="simple-value svelte-okz0z1"><span class="svelte-okz0z1"> </span> <button class="copy-btn svelte-okz0z1" title="Copy material hash"><i class="fas fa-copy"></i></button></div></div>'),DG=B('<div class="data-grid svelte-okz0z1"><div class="data-item svelte-okz0z1"><label class="svelte-okz0z1">Position:</label> <div class="coordinate-group svelte-okz0z1"><span class="coordinate svelte-okz0z1"> </span> <span class="coordinate svelte-okz0z1"> </span> <span class="coordinate svelte-okz0z1"> </span> <button class="copy-btn svelte-okz0z1" title="Copy coordinates"><i class="fas fa-copy"></i></button></div></div> <div class="data-item svelte-okz0z1"><label class="svelte-okz0z1">Normal:</label> <div class="coordinate-group svelte-okz0z1"><span class="coordinate svelte-okz0z1"> </span> <span class="coordinate svelte-okz0z1"> </span> <span class="coordinate svelte-okz0z1"> </span> <button class="copy-btn svelte-okz0z1" title="Copy normal vector"><i class="fas fa-copy"></i></button></div></div> <div class="data-item svelte-okz0z1"><label class="svelte-okz0z1">Distance:</label> <div class="simple-value svelte-okz0z1"><span class="svelte-okz0z1"> </span> <button class="copy-btn svelte-okz0z1" title="Copy distance"><i class="fas fa-copy"></i></button></div></div> <!> <!></div>'),EG=B('<div class="no-data svelte-okz0z1"><i class="fas fa-exclamation-triangle svelte-okz0z1"></i> <p class="svelte-okz0z1">No raycast hit detected</p> <p class="hint svelte-okz0z1">Activate raycast and look at your target position</p></div>'),IG=B('<div class="raycast-modal-overlay svelte-okz0z1"><div><div class="raycast-modal-header svelte-okz0z1"><h3 class="svelte-okz0z1"> </h3> <button class="close-btn svelte-okz0z1"><i class="fas fa-times"></i></button></div> <div class="raycast-modal-body svelte-okz0z1"><div class="raycast-controls"><div class="control-section svelte-okz0z1"><h4 class="svelte-okz0z1"> </h4> <div class="button-group svelte-okz0z1"><!></div> <!></div></div> <div class="raycast-data"><h4>Raycast Data</h4> <!></div></div> <div class="raycast-modal-footer svelte-okz0z1"><button>Close</button></div></div></div>');function OG(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=Yi(e,"showRaycastTool",15,!1),o=ae(Gt({hit:!1,position:{x:0,y:0,z:0},normal:{x:0,y:0,z:0},entity:null,material:null,distance:0})),l=ae(!1);la("raycastData",y=>{M(o,y,!0)}),la("raycastActive",y=>{M(l,y.isRaycastActive,!0)});function d(){u(l)&&(M(l,!1),Ve("stopRaycast").then(({status:y,data:x})=>{y==="ok"?ze("Raycast mode deactivated","info"):console.error("Failed to stop raycast mode")}))}function h(y){try{const x=document.createElement("textarea");x.value=y,x.style.position="fixed",x.style.opacity="0",x.style.pointerEvents="none",document.body.appendChild(x),x.select(),x.setSelectionRange(0,99999);const k=document.execCommand("copy");document.body.removeChild(x),k?ze("Copied to clipboard!","success"):ze("Failed to copy to clipboard","error")}catch{ze("Failed to copy to clipboard","error")}}var m=Bi(),v=yt(m);{var b=y=>{var x=IG();x.__click=[wm,r,d,o];var k=p(x);let C;k.__click=[bG];var A=p(k),T=p(A),I=p(T),D=g(T,2);D.__click=[wm,r,d,o];var N=g(A,2),z=p(N),H=p(z),j=p(H),re=p(j),V=g(j,2),q=p(V);{var le=F=>{var R=yG();R.__click=[_G,l];var J=g(p(R));se(U=>S(J,` ${U??""}`),[()=>a()("pages.addons.raycasttool.buttons.startraycast")]),E(F,R)},ee=F=>{var R=xG();E(F,R)};Q(q,F=>{u(l)?F(ee,!1):F(le)})}var W=g(V,2);{var ne=F=>{var R=wG();E(F,R)},ye=F=>{var R=kG();E(F,R)};Q(W,F=>{u(l)?F(ne):F(ye,!1)})}var ie=g(z,2),Z=g(p(ie),2);{var $=F=>{var R=DG(),J=p(R),U=g(p(J),2),ce=p(U),fe=p(ce),ve=g(ce,2),Me=p(ve),Se=g(ve,2),Pe=p(Se),Be=g(Se,2);Be.__click=[SG,h,o];var ue=g(J,2),oe=g(p(ue),2),me=p(oe),Le=p(me),Oe=g(me,2),_e=p(Oe),be=g(Oe,2),Te=p(be),pe=g(be,2);pe.__click=[CG,h,o];var de=g(ue,2),ge=g(p(de),2),xe=p(ge),we=p(xe),Re=g(xe,2);Re.__click=[MG,h,o];var qe=g(de,2);{var Ge=Je=>{var Ue=AG(),at=g(p(Ue),2),Ee=p(at),He=p(Ee),Ke=g(Ee,2);Ke.__click=[PG,h,o],se(()=>S(He,u(o).entity)),E(Je,Ue)};Q(qe,Je=>{u(o).entity&&Je(Ge)})}var tt=g(qe,2);{var Ye=Je=>{var Ue=LG(),at=g(p(Ue),2),Ee=p(at),He=p(Ee),Ke=g(Ee,2);Ke.__click=[TG,h,o],se(()=>S(He,u(o).material)),E(Je,Ue)};Q(tt,Je=>{u(o).material&&Je(Ye)})}se((Je,Ue,at,Ee,He,Ke,it)=>{S(fe,`X: ${Je??""}`),S(Me,`Y: ${Ue??""}`),S(Pe,`Z: ${at??""}`),S(Le,`X: ${Ee??""}`),S(_e,`Y: ${He??""}`),S(Te,`Z: ${Ke??""}`),S(we,`${it??""} units`)},[()=>u(o).position.x.toFixed(4),()=>u(o).position.y.toFixed(4),()=>u(o).position.z.toFixed(4),()=>u(o).normal.x.toFixed(4),()=>u(o).normal.y.toFixed(4),()=>u(o).normal.z.toFixed(4),()=>u(o).distance.toFixed(4)]),E(F,R)},X=F=>{var R=EG();E(F,R)};Q(Z,F=>{u(o).hit?F($):F(X,!1)})}var Y=g(N,2),te=p(Y);let K;te.__click=[wm,r,d,o],se((F,R,J,U)=>{C=G(k,1,"raycast-modal svelte-okz0z1",null,C,F),S(I,R),S(re,J),K=G(te,1,"cancel-btn svelte-okz0z1",null,K,U)},[()=>({light:!s().darkMode}),()=>a()("pages.addons.builtintools.raycasttool.name"),()=>a()("pages.addons.raycasttool.raycastcontrols"),()=>({light:!s().darkMode})]),gt(3,k,()=>Ki,()=>({duration:200,start:.9})),gt(3,x,()=>Fi,()=>({duration:200})),E(y,x)};Q(v,y=>{r()&&y(b)})}E(i,m),Yt(),n()}hi(["click"]);function km(i,e,t){e(!1),t()}function BG(i,e){M(e,!0),Ve("startEntityInspector").then(({status:t,data:n})=>{t==="ok"?(ri("sounds/action.mp3"),ze("Entity inspector activated. Look at entities to inspect them.","info")):(ze("Failed to start entity inspector","error"),M(e,!1))})}function RG(i,e){u(e).hasEntity&&u(e).handle&&Ve("deleteEntity",{handle:u(e).handle}).then(({status:t,data:n})=>{t==="ok"?(ze("Entity deleted successfully","success"),ri("sounds/action.mp3"),M(e,{hasEntity:!1,handle:null,model:null,modelName:"",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},health:0,maxHealth:0,type:"",isNetworked:!1,networkId:null},!0)):ze("Failed to delete entity","error")})}function zG(i,e){u(e).hasEntity&&u(e).handle&&Ve("freezeEntity",{handle:u(e).handle}).then(({status:t,data:n})=>{t==="ok"?(ze("Entity frozen/unfrozen","success"),ri("sounds/action.mp3")):ze("Failed to freeze/unfreeze entity","error")})}var NG=i=>i.stopPropagation(),FG=B('<button class="btn btn-primary svelte-1l4kdj8"><i class="fas fa-play"></i> </button>'),HG=B('<div class="key-hint svelte-1l4kdj8" title="Press E to stop raycast"><kbd class="svelte-1l4kdj8">E</kbd> <span>to stop raycast</span></div>'),jG=B('<div class="status-indicator active svelte-1l4kdj8"><i class="fas fa-circle svelte-1l4kdj8"></i> Inspector Active - Look at entities to inspect them</div>'),$G=B('<div class="status-indicator inactive svelte-1l4kdj8"><i class="fas fa-circle svelte-1l4kdj8"></i> Inspector Inactive</div>'),VG=(i,e,t)=>e(String(u(t).handle)),WG=(i,e,t)=>e(String(u(t).model)),qG=(i,e,t)=>e(u(t).modelName),UG=B('<div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Model Name:</label> <div class="simple-value svelte-1l4kdj8"><span class="svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy model name"><i class="fas fa-copy"></i></button></div></div>'),GG=(i,e,t)=>e(`${u(t).position.x.toFixed(4)}, ${u(t).position.y.toFixed(4)}, ${u(t).position.z.toFixed(4)}`),ZG=(i,e,t)=>e(`${u(t).rotation.x.toFixed(4)}, ${u(t).rotation.y.toFixed(4)}, ${u(t).rotation.z.toFixed(4)}`),YG=(i,e,t)=>e(`${u(t).velocity.x.toFixed(4)}, ${u(t).velocity.y.toFixed(4)}, ${u(t).velocity.z.toFixed(4)}`),KG=(i,e,t)=>e(String(u(t).networkId)),XG=B('<div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Network ID:</label> <div class="simple-value svelte-1l4kdj8"><span class="svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy network ID"><i class="fas fa-copy"></i></button></div></div>'),JG=(i,e,t)=>{var n,s;return e(`${((n=u(t).owner)==null?void 0:n.name)||""} (${((s=u(t).owner)==null?void 0:s.id)||""})`)},QG=B('<div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">First Owner:</label> <div class="simple-value svelte-1l4kdj8"><span class="owner-info svelte-1l4kdj8"><i class="fas fa-user svelte-1l4kdj8"></i> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy owner info"><i class="fas fa-copy"></i></button></div></div>'),eZ=B('<div class="data-grid svelte-1l4kdj8"><div class="data-section svelte-1l4kdj8"><h5 class="svelte-1l4kdj8">Basic Information</h5> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Handle:</label> <div class="simple-value svelte-1l4kdj8"><span class="svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy handle"><i class="fas fa-copy"></i></button></div></div> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Model Hash:</label> <div class="simple-value svelte-1l4kdj8"><span class="svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy model hash"><i class="fas fa-copy"></i></button></div></div> <!> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Type:</label> <div class="simple-value svelte-1l4kdj8"><span class="entity-type-badge svelte-1l4kdj8"> </span></div></div></div> <div class="data-section svelte-1l4kdj8"><h5 class="svelte-1l4kdj8">Transform</h5> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Position:</label> <div class="coordinate-group svelte-1l4kdj8"><span class="coordinate svelte-1l4kdj8"> </span> <span class="coordinate svelte-1l4kdj8"> </span> <span class="coordinate svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy position"><i class="fas fa-copy"></i></button></div></div> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Rotation:</label> <div class="coordinate-group svelte-1l4kdj8"><span class="coordinate svelte-1l4kdj8"> </span> <span class="coordinate svelte-1l4kdj8"> </span> <span class="coordinate svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy rotation"><i class="fas fa-copy"></i></button></div></div> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Velocity:</label> <div class="coordinate-group svelte-1l4kdj8"><span class="coordinate svelte-1l4kdj8"> </span> <span class="coordinate svelte-1l4kdj8"> </span> <span class="coordinate svelte-1l4kdj8"> </span> <button class="copy-btn svelte-1l4kdj8" title="Copy velocity"><i class="fas fa-copy"></i></button></div></div></div> <div class="data-section svelte-1l4kdj8"><h5 class="svelte-1l4kdj8">Status</h5> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Health:</label> <div class="health-display svelte-1l4kdj8"><span> </span> <div class="health-bar svelte-1l4kdj8"><div class="health-fill svelte-1l4kdj8"></div></div></div></div> <div class="data-item svelte-1l4kdj8"><label class="svelte-1l4kdj8">Networked:</label> <div class="simple-value svelte-1l4kdj8"><span> </span></div></div> <!> <!></div> <div class="data-section svelte-1l4kdj8"><h5 class="svelte-1l4kdj8">Actions</h5> <div class="action-buttons svelte-1l4kdj8"><button class="btn btn-warning svelte-1l4kdj8" title="Freeze/Unfreeze entity"><i class="fas fa-snowflake"></i> Freeze/Unfreeze</button> <button class="btn btn-danger svelte-1l4kdj8" title="Delete entity"><i class="fas fa-trash"></i> Delete</button></div></div></div>'),tZ=B('<div class="no-data svelte-1l4kdj8"><i class="fas fa-search svelte-1l4kdj8"></i> <p class="svelte-1l4kdj8">No entity detected</p> <p class="hint svelte-1l4kdj8">Activate inspector and look at entities in the world</p></div>'),iZ=B('<div class="entity-modal-overlay svelte-1l4kdj8"><div><div class="entity-modal-header svelte-1l4kdj8"><h3 class="svelte-1l4kdj8"> </h3> <button class="close-btn svelte-1l4kdj8"><i class="fas fa-times"></i></button></div> <div class="entity-modal-body svelte-1l4kdj8"><div class="entity-controls"><div class="control-section svelte-1l4kdj8"><h4 class="svelte-1l4kdj8"> </h4> <div class="button-group svelte-1l4kdj8"><!></div> <!></div></div> <div class="entity-data"><h4>Entity Information</h4> <!></div></div> <div class="entity-modal-footer svelte-1l4kdj8"><button>Close</button></div></div></div>');function nZ(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=Yi(e,"showEntityInspector",15,!1),o=ae(!1),l=ae(Gt({hasEntity:!1,handle:null,model:null,modelName:"",position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},health:0,maxHealth:0,type:"",isNetworked:!1,networkId:null,owner:null}));la("entityInspectorData",y=>{M(l,y,!0)}),la("entityInspectorActive",y=>{M(o,y.isEntityInspectorActive,!0)});function d(){u(o)&&(M(o,!1),Ve("stopEntityInspector").then(({status:y,data:x})=>{y==="ok"?ze("Entity inspector deactivated","info"):console.error("Failed to stop entity inspector")}))}function h(y){try{const x=document.createElement("textarea");x.value=y,x.style.position="fixed",x.style.opacity="0",x.style.pointerEvents="none",document.body.appendChild(x),x.select(),x.setSelectionRange(0,99999);const k=document.execCommand("copy");document.body.removeChild(x),k?ze("Copied to clipboard!","success"):ze("Failed to copy to clipboard","error")}catch{ze("Failed to copy to clipboard","error")}}var m=Bi(),v=yt(m);{var b=y=>{var x=iZ();x.__click=[km,r,d];var k=p(x);let C;k.__click=[NG];var A=p(k),T=p(A),I=p(T),D=g(T,2);D.__click=[km,r,d];var N=g(A,2),z=p(N),H=p(z),j=p(H),re=p(j),V=g(j,2),q=p(V);{var le=F=>{var R=FG();R.__click=[BG,o];var J=g(p(R));se(U=>S(J,` ${U??""}`),[()=>a()("pages.addons.entityinspector.buttons.startinspector")]),E(F,R)},ee=F=>{var R=HG();E(F,R)};Q(q,F=>{u(o)?F(ee,!1):F(le)})}var W=g(V,2);{var ne=F=>{var R=jG();E(F,R)},ye=F=>{var R=$G();E(F,R)};Q(W,F=>{u(o)?F(ne):F(ye,!1)})}var ie=g(z,2),Z=g(p(ie),2);{var $=F=>{var R=eZ(),J=p(R),U=g(p(J),2),ce=g(p(U),2),fe=p(ce),ve=p(fe),Me=g(fe,2);Me.__click=[VG,h,l];var Se=g(U,2),Pe=g(p(Se),2),Be=p(Pe),ue=p(Be),oe=g(Be,2);oe.__click=[WG,h,l];var me=g(Se,2);{var Le=et=>{var nt=UG(),lt=g(p(nt),2),wt=p(lt),Xt=p(wt),Ut=g(wt,2);Ut.__click=[qG,h,l],se(()=>S(Xt,u(l).modelName)),E(et,nt)};Q(me,et=>{u(l).modelName&&et(Le)})}var Oe=g(me,2),_e=g(p(Oe),2),be=p(_e),Te=p(be),pe=g(J,2),de=g(p(pe),2),ge=g(p(de),2),xe=p(ge),we=p(xe),Re=g(xe,2),qe=p(Re),Ge=g(Re,2),tt=p(Ge),Ye=g(Ge,2);Ye.__click=[GG,h,l];var Je=g(de,2),Ue=g(p(Je),2),at=p(Ue),Ee=p(at),He=g(at,2),Ke=p(He),it=g(He,2),pt=p(it),Tt=g(it,2);Tt.__click=[ZG,h,l];var mt=g(Je,2),zt=g(p(mt),2),oi=p(zt),Ai=p(oi),Kt=g(oi,2),Wt=p(Kt),Rt=g(Kt,2),di=p(Rt),Ci=g(Rt,2);Ci.__click=[YG,h,l];var Ti=g(pe,2),Qe=g(p(Ti),2),Ce=g(p(Qe),2),Ae=p(Ce),xt=p(Ae),_t=g(Ae,2),bt=p(_t),Pt=g(Qe,2),Ht=g(p(Pt),2),Nt=p(Ht),rt=p(Nt),dt=g(Pt,2);{var Qt=et=>{var nt=XG(),lt=g(p(nt),2),wt=p(lt),Xt=p(wt),Ut=g(wt,2);Ut.__click=[KG,h,l],se(()=>S(Xt,u(l).networkId)),E(et,nt)};Q(dt,et=>{u(l).networkId&&et(Qt)})}var mi=g(dt,2);{var Ii=et=>{var nt=QG(),lt=g(p(nt),2),wt=p(lt),Xt=g(p(wt)),Ut=g(wt,2);Ut.__click=[JG,h,l],se(()=>{var ut,Bt;return S(Xt,` ${((ut=u(l).owner)==null?void 0:ut.name)||"Unknown"} (ID: ${((Bt=u(l).owner)==null?void 0:Bt.id)||"Unknown"})`)}),E(et,nt)};Q(mi,et=>{u(l).owner&&et(Ii)})}var Ji=g(Ti,2),bn=g(p(Ji),2),Ri=p(bn);Ri.__click=[zG,l];var Fe=g(Ri,2);Fe.__click=[RG,l],se((et,nt,lt,wt,Xt,Ut,ut,Bt,jt,Ft)=>{S(ve,u(l).handle),S(ue,u(l).model),S(Te,u(l).type),S(we,`X: ${et??""}`),S(qe,`Y: ${nt??""}`),S(tt,`Z: ${lt??""}`),S(Ee,`X: ${wt??""}`),S(Ke,`Y: ${Xt??""}`),S(pt,`Z: ${Ut??""}`),S(Ai,`X: ${ut??""}`),S(Wt,`Y: ${Bt??""}`),S(di,`Z: ${jt??""}`),S(xt,`${u(l).health??""} / ${u(l).maxHealth??""}`),es(bt,`width: ${Ft??""}%`),G(Nt,1,`network-status ${u(l).isNetworked?"networked":"local"}`,"svelte-1l4kdj8"),S(rt,u(l).isNetworked?"Yes":"No")},[()=>u(l).position.x.toFixed(4),()=>u(l).position.y.toFixed(4),()=>u(l).position.z.toFixed(4),()=>u(l).rotation.x.toFixed(4),()=>u(l).rotation.y.toFixed(4),()=>u(l).rotation.z.toFixed(4),()=>u(l).velocity.x.toFixed(4),()=>u(l).velocity.y.toFixed(4),()=>u(l).velocity.z.toFixed(4),()=>Math.min(u(l).health/u(l).maxHealth*100,100)]),E(F,R)},X=F=>{var R=tZ();E(F,R)};Q(Z,F=>{u(l).hasEntity?F($):F(X,!1)})}var Y=g(N,2),te=p(Y);let K;te.__click=[km,r,d],se((F,R,J,U)=>{C=G(k,1,"entity-modal svelte-1l4kdj8",null,C,F),S(I,R),S(re,J),K=G(te,1,"cancel-btn svelte-1l4kdj8",null,K,U)},[()=>({light:!s().darkMode}),()=>a()("pages.addons.builtintools.entityinspector.name"),()=>a()("pages.addons.entityinspector.inspectorcontrols"),()=>({light:!s().darkMode})]),gt(3,k,()=>Ki,()=>({duration:200,start:.9})),gt(3,x,()=>Fi,()=>({duration:200})),E(y,x)};Q(v,y=>{r()&&y(b)})}E(i,m),Yt(),n()}hi(["click"]);function sZ(i,e){M(e,!0)}function aZ(i,e){M(e,!0)}function rZ(i,e){M(e,!0)}var oZ=B('<div class="status-info text-center mb-3 svelte-11uaznt"><small class="text-muted"> </small></div>'),lZ=(i,e,t)=>e(u(t),u(t).key),cZ=B('<div><div class="tool-header svelte-11uaznt"><div><i></i></div> <div class="tool-info svelte-11uaznt"><h3 class="svelte-11uaznt"> <span> </span></h3> <p class="svelte-11uaznt"> </p></div></div> <div class="tool-actions svelte-11uaznt"><button><i></i> </button></div></div>'),dZ=B('<div class="page-container svelte-11uaznt"><div class="view svelte-11uaznt"><h2 class="card-title text-center mb-4"> </h2> <!> <div class="tools-grid svelte-11uaznt"><div><div class="tool-header svelte-11uaznt"><div class="tool-icon svelte-11uaznt"><i class="fas fa-code"></i></div> <div class="tool-info svelte-11uaznt"><h3 class="svelte-11uaznt"> <span class="free-badge svelte-11uaznt"> </span></h3> <p class="svelte-11uaznt"> </p></div></div> <div class="tool-actions svelte-11uaznt"><button class="btn btn-primary svelte-11uaznt"><i class="fas fa-play"></i> </button></div></div> <div><div class="tool-header svelte-11uaznt"><div class="tool-icon raycast-icon svelte-11uaznt"><i class="fas fa-crosshairs"></i></div> <div class="tool-info svelte-11uaznt"><h3 class="svelte-11uaznt"> <span class="free-badge svelte-11uaznt"> </span></h3> <p class="svelte-11uaznt"> </p></div></div> <div class="tool-actions svelte-11uaznt"><button class="btn btn-secondary svelte-11uaznt"><i class="fas fa-crosshairs"></i> </button></div></div> <div><div class="tool-header svelte-11uaznt"><div class="tool-icon entity-icon svelte-11uaznt"><i class="fas fa-search"></i></div> <div class="tool-info svelte-11uaznt"><h3 class="svelte-11uaznt"> <span class="free-badge svelte-11uaznt"> </span></h3> <p class="svelte-11uaznt"> </p></div></div> <div class="tool-actions svelte-11uaznt"><button class="btn btn-info svelte-11uaznt"><i class="fas fa-search"></i> </button></div></div> <!></div></div></div> <!> <!> <!>',1);function hZ(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(!1),o=ae(!1),l=ae(!1),d=ae(Gt({lastUpdated:"",addons:{}}));pn(async()=>{await h(),setInterval(h,6e5)});async function h(){try{const Ee=await Ve("getAddonStates");Ee.status==="ok"&&Ee.data&&M(d,Ee.data,!0)}catch(Ee){console.error("Failed to fetch addon states:",Ee)}}const m=[{key:"vehicleEditor",name:s()("pages.addons.vehicleeditor.name"),description:s()("pages.addons.vehicleeditor.description"),icon:"fa-car",iconClass:"vehicle-icon",buttonClass:"btn-warning",onClick:b},{key:"carCustomizer",name:s()("pages.addons.carcustomizer.name"),description:s()("pages.addons.carcustomizer.description"),icon:"fa-paint-brush",iconClass:"customizer-icon",buttonClass:"btn-success",onClick:y},{key:"placer",name:s()("pages.addons.placer.name"),description:s()("pages.addons.placer.description"),icon:"fa-cube",iconClass:"placer-icon",buttonClass:"btn-placer",onClick:x,requiresPermission:"page:Placer"}];let v=qi(()=>()=>m.filter(Ee=>!Ee.requiresPermission||a().currentUserPermissions.includes(Ee.requiresPermission)).filter(Ee=>u(d).addons[Ee.key]).sort((Ee,He)=>{const Ke=u(d).addons[Ee.key],it=u(d).addons[He.key];return Ke.status==="available"&&Ke.installed&&!(it.status==="available"&&it.installed)?-1:!(Ke.status==="available"&&Ke.installed)&&it.status==="available"&&it.installed?1:Ke.status==="available"&&!Ke.installed&&it.status==="coming_soon"?-1:Ke.status==="coming_soon"&&it.status==="available"&&!it.installed?1:0}));function b(){const Ee=u(d).addons.vehicleEditor;if(!Ee||Ee.status!=="available"||!Ee.installed){C("Vehicle Editor");return}ri("sounds/click.mp3"),e.setCurrentPage("vehicleeditor")}function y(){const Ee=u(d).addons.carCustomizer;if(!Ee||Ee.status!=="available"||!Ee.installed){C("Car Customizer");return}ri("sounds/click.mp3"),e.setCurrentPage("carcustomizer")}function x(){const Ee=u(d).addons.placer;if(!Ee||Ee.status!=="available"||!Ee.installed){C("Object & Ped Placer");return}ri("sounds/click.mp3"),e.setCurrentPage("placer")}function k(Ee){const He=u(d).addons[Ee];He&&He.tebexLink&&window.open(He.tebexLink,"_blank")}function C(Ee){alert(s()("pages.addons.messages.addonnotavailable",{values:{addonName:Ee}}))}function A(Ee,He){const Ke=u(d).addons[He];if(!Ke)return s()("pages.addons.buttons.unknownstatus");if(Ke.status==="coming_soon")return s()("pages.addons.buttons.comingsoon");if(Ke.status==="available")if(Ke.installed)switch(He){case"vehicleEditor":return s()("pages.addons.buttons.openeditor");case"carCustomizer":return s()("pages.addons.buttons.opencustomizer");case"placer":return s()("pages.addons.buttons.openplacer");default:return s()("pages.addons.buttons.opentool")}else return s()("pages.addons.buttons.purchaseaddon");return s()("pages.addons.buttons.unknownstatus")}function T(Ee){const He=u(d).addons[Ee];return He?He.status==="coming_soon"?"coming-soon-badge":He.status==="available"?He.installed?"premium-badge":"locked-badge":"unknown-badge":"unknown-badge"}function I(Ee){const He=u(d).addons[Ee];return He?He.status==="coming_soon"?"COMING SOON":He.status==="available"?He.installed?"PREMIUM":"MISSING":"UNKNOWN":"UNKNOWN"}function D(Ee,He){const Ke=u(d).addons[He];Ke&&Ke.status!=="coming_soon"&&Ke.status==="available"&&(Ke.installed?Ee.onClick():k(He))}var N=dZ(),z=yt(N),H=p(z),j=p(H),re=p(j),V=g(j,2);{var q=Ee=>{var He=oZ(),Ke=p(He),it=p(Ke);se((pt,Tt)=>S(it,`${pt??""}: ${Tt??""}`),[()=>s()("pages.addons.statuslastupdated"),()=>new Date(u(d).lastUpdated).toLocaleString()]),E(Ee,He)};Q(V,Ee=>{u(d).lastUpdated&&Ee(q)})}var le=g(V,2),ee=p(le);let W;var ne=p(ee),ye=g(p(ne),2),ie=p(ye),Z=p(ie),$=g(Z),X=p($),Y=g(ie,2),te=p(Y),K=g(ne,2),F=p(K);F.__click=[sZ,r];var R=g(p(F)),J=g(ee,2);let U;var ce=p(J),fe=g(p(ce),2),ve=p(fe),Me=p(ve),Se=g(Me),Pe=p(Se),Be=g(ve,2),ue=p(Be),oe=g(ce,2),me=p(oe);me.__click=[aZ,o];var Le=g(p(me)),Oe=g(J,2);let _e;var be=p(Oe),Te=g(p(be),2),pe=p(Te),de=p(pe),ge=g(de),xe=p(ge),we=g(pe,2),Re=p(we),qe=g(be,2),Ge=p(qe);Ge.__click=[rZ,l];var tt=g(p(Ge)),Ye=g(Oe,2);Vt(Ye,17,()=>u(v)(),Ee=>Ee.key,(Ee,He)=>{var Ke=cZ();const it=qi(()=>u(d).addons[u(He).key]);let pt;var Tt=p(Ke),mt=p(Tt);let zt;var oi=p(mt),Ai=g(mt,2),Kt=p(Ai),Wt=p(Kt),Rt=g(Wt),di=p(Rt),Ci=g(Kt,2),Ti=p(Ci),Qe=g(Tt,2),Ce=p(Qe);Ce.__click=[lZ,D,He];var Ae=p(Ce),xt=g(Ae);se((_t,bt,Pt,Ht,Nt)=>{var rt,dt,Qt,mi,Ii,Ji,bn,Ri,Fe,et;pt=G(Ke,1,"tool-card svelte-11uaznt",null,pt,_t),zt=G(mt,1,`tool-icon ${u(He).iconClass??""}`,"svelte-11uaznt",zt,bt),G(oi,1,`fas ${(((rt=u(it))==null?void 0:rt.status)==="available"&&((dt=u(it))!=null&&dt.installed)?u(He).icon:((Qt=u(it))==null?void 0:Qt.status)==="coming_soon"?"fa-clock":"fa-lock")??""}`,"svelte-11uaznt"),S(Wt,`${u(He).name??""} `),G(Rt,1,Pt,"svelte-11uaznt"),S(di,Ht),S(Ti,u(He).description),G(Ce,1,`btn ${(((mi=u(it))==null?void 0:mi.status)==="available"&&((Ii=u(it))!=null&&Ii.installed)?u(He).buttonClass:((Ji=u(it))==null?void 0:Ji.status)==="coming_soon"?"btn-disabled":"btn-locked")??""}`,"svelte-11uaznt"),Ce.disabled=((bn=u(it))==null?void 0:bn.status)==="coming_soon",G(Ae,1,`fas ${(((Ri=u(it))==null?void 0:Ri.status)==="available"&&((Fe=u(it))!=null&&Fe.installed)?u(He).icon:((et=u(it))==null?void 0:et.status)==="coming_soon"?"fa-clock":"fa-shopping-cart")??""}`,"svelte-11uaznt"),S(xt,` ${Nt??""}`)},[()=>{var _t,bt,Pt;return{light:!a().darkMode,"coming-soon":((_t=u(it))==null?void 0:_t.status)==="coming_soon",locked:((bt=u(it))==null?void 0:bt.status)==="available"&&!((Pt=u(it))!=null&&Pt.installed)}},()=>{var _t,bt,Pt;return{locked:((_t=u(it))==null?void 0:_t.status)==="coming_soon"||((bt=u(it))==null?void 0:bt.status)==="available"&&!((Pt=u(it))!=null&&Pt.installed)}},()=>zo(T(u(He).key)),()=>I(u(He).key),()=>A(u(He),u(He).key)]),E(Ee,Ke)});var Je=g(z,2);gG(Je,{get showLuaExecutor(){return u(r)},set showLuaExecutor(Ee){M(r,Ee,!0)}});var Ue=g(Je,2);OG(Ue,{get showRaycastTool(){return u(o)},set showRaycastTool(Ee){M(o,Ee,!0)}});var at=g(Ue,2);nZ(at,{get showEntityInspector(){return u(l)},set showEntityInspector(Ee){M(l,Ee,!0)}}),se((Ee,He,Ke,it,pt,Tt,mt,zt,oi,Ai,Kt,Wt,Rt,di,Ci,Ti)=>{S(re,Ee),W=G(ee,1,"tool-card svelte-11uaznt",null,W,He),S(Z,`${Ke??""} `),S(X,it),S(te,pt),S(R,` ${Tt??""}`),U=G(J,1,"tool-card svelte-11uaznt",null,U,mt),S(Me,`${zt??""} `),S(Pe,oi),S(ue,Ai),S(Le,` ${Kt??""}`),_e=G(Oe,1,"tool-card svelte-11uaznt",null,_e,Wt),S(de,`${Rt??""} `),S(xe,di),S(Re,Ci),S(tt,` ${Ti??""}`)},[()=>s()("pages.addons.title"),()=>({light:!a().darkMode}),()=>s()("pages.addons.builtintools.luaexecutor.name"),()=>s()("pages.addons.badges.free"),()=>s()("pages.addons.builtintools.luaexecutor.description"),()=>s()("pages.addons.builtintools.luaexecutor.button"),()=>({light:!a().darkMode}),()=>s()("pages.addons.builtintools.raycasttool.name"),()=>s()("pages.addons.badges.free"),()=>s()("pages.addons.builtintools.raycasttool.description"),()=>s()("pages.addons.builtintools.raycasttool.button"),()=>({light:!a().darkMode}),()=>s()("pages.addons.builtintools.entityinspector.name"),()=>s()("pages.addons.badges.free"),()=>s()("pages.addons.builtintools.entityinspector.description"),()=>s()("pages.addons.builtintools.entityinspector.button")]),E(i,N),Yt(),n()}hi(["click"]);function uZ(i,e){ri("sounds/click.mp3"),e.setCurrentPage("addons")}function fZ(i,e,t,n){u(e)&&u(t).handle&&Ve("resetVehicleHandling",{handle:u(t).handle}).then(({status:s,data:a})=>{s==="ok"?(ze("Vehicle handling reset to defaults","success"),ri("sounds/action.mp3"),setTimeout(n,500)):ze("Failed to reset vehicle handling","error")})}function pZ(i,e,t,n){u(e)&&u(t).handle&&Ve("repairVehicle",{handle:u(t).handle}).then(({status:s,data:a})=>{s==="ok"?(ze("Vehicle repaired","success"),ri("sounds/action.mp3"),setTimeout(n,500)):ze("Failed to repair vehicle","error")})}function mZ(i,e,t,n){u(e)&&u(t).handle&&Ve("cleanVehicle",{handle:u(t).handle}).then(({status:s,data:a})=>{s==="ok"?(ze("Vehicle cleaned","success"),ri("sounds/action.mp3"),setTimeout(n,500)):ze("Failed to clean vehicle","error")})}var vZ=(i,e,t)=>e("mass",u(t).handling.mass,"handling"),gZ=(i,e,t)=>e("initialDragCoeff",u(t).handling.initialDragCoeff,"handling"),_Z=(i,e,t)=>e("downforceModifier",u(t).handling.downforceModifier,"handling"),bZ=(i,e,t)=>e("centreOfMassOffset",u(t).handling.centreOfMassOffset,"handling"),yZ=(i,e,t)=>e("inertiaMultiplier",u(t).handling.inertiaMultiplier,"handling"),xZ=(i,e,t)=>e("percentSubmerged",u(t).handling.percentSubmerged,"handling"),wZ=(i,e,t)=>e("initialDriveForce",u(t).handling.initialDriveForce,"handling"),kZ=(i,e,t)=>e("driveMaxFlatVel",u(t).handling.driveMaxFlatVel,"handling"),SZ=(i,e,t)=>e("driveInertia",u(t).handling.driveInertia,"handling"),CZ=(i,e,t)=>e("clutchChangeRateScaleUpShift",u(t).handling.clutchChangeRateScaleUpShift,"handling"),MZ=(i,e,t)=>e("clutchChangeRateScaleDownShift",u(t).handling.clutchChangeRateScaleDownShift,"handling"),PZ=(i,e,t)=>e("initialDriveMaxFlatVel",u(t).handling.initialDriveMaxFlatVel,"handling"),AZ=(i,e,t)=>e("brakeForce",u(t).handling.brakeForce,"handling"),TZ=(i,e,t)=>e("brakeBiasFront",u(t).handling.brakeBiasFront,"handling"),LZ=(i,e,t)=>e("brakeBiasRear",u(t).handling.brakeBiasRear,"handling"),DZ=(i,e,t)=>e("handBrakeForce",u(t).handling.handBrakeForce,"handling"),EZ=(i,e,t)=>e("steeringLock",u(t).handling.steeringLock,"handling"),IZ=(i,e,t)=>e("tractionCurveMax",u(t).handling.tractionCurveMax,"handling"),OZ=(i,e,t)=>e("tractionCurveMin",u(t).handling.tractionCurveMin,"handling"),BZ=(i,e,t)=>e("tractionCurveLateral",u(t).handling.tractionCurveLateral,"handling"),RZ=(i,e,t)=>e("tractionSpringDeltaMax",u(t).handling.tractionSpringDeltaMax,"handling"),zZ=(i,e,t)=>e("lowSpeedTractionLossMult",u(t).handling.lowSpeedTractionLossMult,"handling"),NZ=(i,e,t)=>e("suspensionForce",u(t).handling.suspensionForce,"handling"),FZ=(i,e,t)=>e("suspensionCompDamp",u(t).handling.suspensionCompDamp,"handling"),HZ=(i,e,t)=>e("suspensionReboundDamp",u(t).handling.suspensionReboundDamp,"handling"),jZ=(i,e,t)=>e("suspensionUpperLimit",u(t).handling.suspensionUpperLimit,"handling"),$Z=(i,e,t)=>e("suspensionLowerLimit",u(t).handling.suspensionLowerLimit,"handling"),VZ=(i,e,t)=>e("suspensionRaise",u(t).handling.suspensionRaise,"handling"),WZ=(i,e,t)=>e("camberStiffnesss",u(t).handling.camberStiffnesss,"handling"),qZ=(i,e,t)=>e("tractionBiasFront",u(t).handling.tractionBiasFront,"handling"),UZ=(i,e,t)=>e("tractionBiasRear",u(t).handling.tractionBiasRear,"handling"),GZ=(i,e,t)=>e("tractionLossMult",u(t).handling.tractionLossMult,"handling"),ZZ=(i,e,t)=>e("suspensionBiasFront",u(t).handling.suspensionBiasFront,"handling"),YZ=(i,e,t)=>e("suspensionBiasRear",u(t).handling.suspensionBiasRear,"handling"),KZ=(i,e,t)=>e("collisionDamageMult",u(t).handling.collisionDamageMult,"handling"),XZ=(i,e,t)=>e("weaponDamageMult",u(t).handling.weaponDamageMult,"handling"),JZ=(i,e,t)=>e("deformationDamageMult",u(t).handling.deformationDamageMult,"handling"),QZ=(i,e,t)=>e("engineDamageMult",u(t).handling.engineDamageMult,"handling"),eY=(i,e,t)=>e("petrolTankVolume",u(t).handling.petrolTankVolume,"handling"),tY=(i,e,t)=>e("oilVolume",u(t).handling.oilVolume,"handling"),iY=(i,e,t)=>e("antiRollBarForce",u(t).handling.antiRollBarForce,"handling"),nY=(i,e,t)=>e("antiRollBarBiasFront",u(t).handling.antiRollBarBiasFront,"handling"),sY=(i,e,t)=>e("antiRollBarBiasRear",u(t).handling.antiRollBarBiasRear,"handling"),aY=(i,e,t)=>e("rollCentreHeightFront",u(t).handling.rollCentreHeightFront,"handling"),rY=(i,e,t)=>e("rollCentreHeightRear",u(t).handling.rollCentreHeightRear,"handling"),oY=(i,e,t)=>e("monetaryValue",u(t).handling.monetaryValue,"handling"),lY=B('<div class="control-section svelte-43396h"><div class="controls-header svelte-43396h"><h4 class="svelte-43396h"> </h4> <div class="button-group svelte-43396h"><button class="btn btn-info btn-sm svelte-43396h" title="Refresh Data"><i class="fas fa-refresh"></i> </button> <button class="btn btn-success btn-sm svelte-43396h"><i class="fas fa-wrench"></i> </button> <button class="btn btn-info btn-sm svelte-43396h" title="Clean Vehicle"><i class="fas fa-shower"></i> Clean</button> <button class="btn btn-warning btn-sm svelte-43396h" title="Reset Handling"><i class="fas fa-undo"></i> Reset</button></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Vehicle Overview</h4> <div class="vehicle-overview svelte-43396h"><div class="info-card svelte-43396h"><div class="info-header svelte-43396h"><h5 class="svelte-43396h">Information</h5></div> <div class="info-grid svelte-43396h"><div class="info-item svelte-43396h"><span class="info-label svelte-43396h">Model:</span> <span class="info-value svelte-43396h"> </span></div> <div class="info-item svelte-43396h"><span class="info-label svelte-43396h">Plate:</span> <span class="info-value svelte-43396h"> </span></div> <div class="info-item svelte-43396h"><span class="info-label svelte-43396h">Class:</span> <span class="info-value svelte-43396h"> </span></div></div></div> <div class="info-card svelte-43396h"><div class="info-header svelte-43396h"><h5 class="svelte-43396h">Health Status</h5></div> <div class="health-grid svelte-43396h"><div class="health-item svelte-43396h"><span class="health-label svelte-43396h">Engine:</span> <div class="health-bar svelte-43396h"><div class="health-fill svelte-43396h"></div> <span class="health-value svelte-43396h"> </span></div></div> <div class="health-item svelte-43396h"><span class="health-label svelte-43396h">Body:</span> <div class="health-bar svelte-43396h"><div class="health-fill svelte-43396h"></div> <span class="health-value svelte-43396h"> </span></div></div> <div class="health-item svelte-43396h"><span class="health-label svelte-43396h">Fuel:</span> <div class="health-bar svelte-43396h"><div class="health-fill svelte-43396h"></div> <span class="health-value svelte-43396h"> </span></div></div></div></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Basic Properties</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="mass" class="svelte-43396h">Mass:</label> <input id="mass" type="number" step="10" min="500" max="5000" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="initialDragCoeff" class="svelte-43396h">Initial Drag Coefficient:</label> <input id="initialDragCoeff" type="number" step="0.1" min="0" max="50" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="downforceModifier" class="svelte-43396h">Downforce Modifier:</label> <input id="downforceModifier" type="number" step="0.1" min="0" max="10" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="centreOfMassOffset" class="svelte-43396h">Center of Mass X:</label> <input id="centreOfMassOffset" type="number" step="0.01" min="-2" max="2" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="inertiaMultiplier" class="svelte-43396h">Inertia Multiplier:</label> <input id="inertiaMultiplier" type="number" step="0.1" min="0.5" max="3" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="percentSubmerged" class="svelte-43396h">Percent Submerged:</label> <input id="percentSubmerged" type="number" step="1" min="50" max="120" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Engine & Transmission</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="initialDriveForce" class="svelte-43396h">Initial Drive Force:</label> <input id="initialDriveForce" type="number" step="0.01" min="0" max="2" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="driveMaxFlatVel" class="svelte-43396h">Drive Max Flat Velocity:</label> <input id="driveMaxFlatVel" type="number" step="1" min="50" max="300" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="driveInertia" class="svelte-43396h">Drive Inertia:</label> <input id="driveInertia" type="number" step="0.01" min="0.5" max="3" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="clutchChangeRateScaleUpShift" class="svelte-43396h">Clutch Up Shift Rate:</label> <input id="clutchChangeRateScaleUpShift" type="number" step="0.1" min="1" max="10" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="clutchChangeRateScaleDownShift" class="svelte-43396h">Clutch Down Shift Rate:</label> <input id="clutchChangeRateScaleDownShift" type="number" step="0.1" min="1" max="10" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="initialDriveMaxFlatVel" class="svelte-43396h">Initial Max Flat Vel:</label> <input id="initialDriveMaxFlatVel" type="number" step="1" min="30" max="200" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Braking</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="brakeForce" class="svelte-43396h">Brake Force:</label> <input id="brakeForce" type="number" step="0.1" min="0" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="brakeBiasFront" class="svelte-43396h">Brake Bias Front:</label> <input id="brakeBiasFront" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="brakeBiasRear" class="svelte-43396h">Brake Bias Rear:</label> <input id="brakeBiasRear" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="handBrakeForce" class="svelte-43396h">Handbrake Force:</label> <input id="handBrakeForce" type="number" step="0.1" min="0" max="5" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Steering</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="steeringLock" class="svelte-43396h">Steering Lock:</label> <input id="steeringLock" type="number" step="1" min="10" max="50" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionCurveMax" class="svelte-43396h">Traction Curve Max:</label> <input id="tractionCurveMax" type="number" step="0.1" min="1" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionCurveMin" class="svelte-43396h">Traction Curve Min:</label> <input id="tractionCurveMin" type="number" step="0.1" min="0.5" max="3" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionCurveLateral" class="svelte-43396h">Traction Curve Lateral:</label> <input id="tractionCurveLateral" type="number" step="0.1" min="10" max="30" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionSpringDeltaMax" class="svelte-43396h">Traction Spring Delta Max:</label> <input id="tractionSpringDeltaMax" type="number" step="0.01" min="0.1" max="0.3" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="lowSpeedTractionLossMult" class="svelte-43396h">Low Speed Traction Loss:</label> <input id="lowSpeedTractionLossMult" type="number" step="0.1" min="0.5" max="3" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Suspension</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="suspensionForce" class="svelte-43396h">Suspension Force:</label> <input id="suspensionForce" type="number" step="0.1" min="0.5" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionCompDamp" class="svelte-43396h">Suspension Compression Damping:</label> <input id="suspensionCompDamp" type="number" step="0.1" min="0.5" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionReboundDamp" class="svelte-43396h">Suspension Rebound Damping:</label> <input id="suspensionReboundDamp" type="number" step="0.1" min="0.5" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionUpperLimit" class="svelte-43396h">Suspension Upper Limit:</label> <input id="suspensionUpperLimit" type="number" step="0.01" min="0.05" max="0.3" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionLowerLimit" class="svelte-43396h">Suspension Lower Limit:</label> <input id="suspensionLowerLimit" type="number" step="0.01" min="-0.3" max="-0.05" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionRaise" class="svelte-43396h">Suspension Raise:</label> <input id="suspensionRaise" type="number" step="0.01" min="-0.1" max="0.1" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Advanced Properties</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="camberStiffnesss" class="svelte-43396h">Camber Stiffness:</label> <input id="camberStiffnesss" type="number" step="0.1" min="-5" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionBiasFront" class="svelte-43396h">Traction Bias Front:</label> <input id="tractionBiasFront" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionBiasRear" class="svelte-43396h">Traction Bias Rear:</label> <input id="tractionBiasRear" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="tractionLossMult" class="svelte-43396h">Traction Loss Multiplier:</label> <input id="tractionLossMult" type="number" step="0.1" min="0.5" max="3" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionBiasFront" class="svelte-43396h">Suspension Bias Front:</label> <input id="suspensionBiasFront" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="suspensionBiasRear" class="svelte-43396h">Suspension Bias Rear:</label> <input id="suspensionBiasRear" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Damage & Collision</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="collisionDamageMult" class="svelte-43396h">Collision Damage Multiplier:</label> <input id="collisionDamageMult" type="number" step="0.1" min="0" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="weaponDamageMult" class="svelte-43396h">Weapon Damage Multiplier:</label> <input id="weaponDamageMult" type="number" step="0.1" min="0" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="deformationDamageMult" class="svelte-43396h">Deformation Damage Multiplier:</label> <input id="deformationDamageMult" type="number" step="0.1" min="0" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="engineDamageMult" class="svelte-43396h">Engine Damage Multiplier:</label> <input id="engineDamageMult" type="number" step="0.1" min="0" max="5" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="petrolTankVolume" class="svelte-43396h">Petrol Tank Volume:</label> <input id="petrolTankVolume" type="number" step="1" min="20" max="200" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="oilVolume" class="svelte-43396h">Oil Volume:</label> <input id="oilVolume" type="number" step="0.1" min="1" max="20" class="svelte-43396h"></div></div></div> <div class="control-section svelte-43396h"><h4 class="svelte-43396h">Anti-Roll Bar & Roll Center</h4> <div class="handling-grid svelte-43396h"><div class="handling-item svelte-43396h"><label for="antiRollBarForce" class="svelte-43396h">Anti-Roll Bar Force:</label> <input id="antiRollBarForce" type="number" step="0.1" min="0" max="10" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="antiRollBarBiasFront" class="svelte-43396h">Anti-Roll Bar Bias Front:</label> <input id="antiRollBarBiasFront" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="antiRollBarBiasRear" class="svelte-43396h">Anti-Roll Bar Bias Rear:</label> <input id="antiRollBarBiasRear" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="rollCentreHeightFront" class="svelte-43396h">Roll Center Height Front:</label> <input id="rollCentreHeightFront" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="rollCentreHeightRear" class="svelte-43396h">Roll Center Height Rear:</label> <input id="rollCentreHeightRear" type="number" step="0.01" min="0" max="1" class="svelte-43396h"></div> <div class="handling-item svelte-43396h"><label for="monetaryValue" class="svelte-43396h">Monetary Value:</label> <input id="monetaryValue" type="number" step="100" min="1000" max="10000000" class="svelte-43396h"></div></div></div>',1),cY=B('<div class="no-vehicle svelte-43396h"><i class="fas fa-car" style="font-size: 3rem; color: #64748b; margin-bottom: 1rem;"></i> <p class="svelte-43396h">No vehicle detected. Enter a vehicle to view and edit its properties.</p></div>'),dY=B('<div><div class="page-header svelte-43396h"><button class="btn-back svelte-43396h"><i class="fas fa-arrow-left"></i> </button> <h2 class="svelte-43396h"> </h2></div> <div class="page-content svelte-43396h"><!></div></div>');function hY(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(!1),o=ae(Gt({handle:null,modelName:"",plate:"",engineHealth:1e3,bodyHealth:1e3,petrolTankHealth:1e3,dirtLevel:0,primaryColor:{r:0,g:0,b:0},secondaryColor:{r:0,g:0,b:0},class:"",maxSpeed:0,acceleration:0,handling:{mass:0,initialDragCoeff:0,downforceModifier:0,centreOfMassOffset:{x:0,y:0,z:0},inertiaMultiplier:{x:0,y:0,z:0},driveInertia:0,clutchChangeRateScaleUpShift:0,clutchChangeRateScaleDownShift:0,initialDriveForce:0,driveMaxFlatVel:0,initialDriveMaxFlatVel:0,brakeForce:0,brakeBiasFront:0,handBrakeForce:0,steeringLock:0,tractionCurveMax:0,tractionCurveMin:0,tractionCurveLateral:0,tractionSpringDeltaMax:0,lowSpeedTractionLossMult:0,camberStiffnesss:0,tractionBiasFront:0,tractionLossMult:0,suspensionForce:0,suspensionCompDamp:0,suspensionReboundDamp:0,suspensionUpperLimit:0,suspensionLowerLimit:0,suspensionRaise:0,suspensionBiasFront:0,antiRollBarForce:0,antiRollBarBiasFront:0,rollCentreHeightFront:0,rollCentreHeightRear:0,percentSubmerged:0,percentSubmergedRatio:0,brakeBiasRear:0,steeringLockRatio:0,tractionCurveMaxRatio:0,tractionCurveMinRatio:0,tractionCurveLateralRatio:0,tractionSpringDeltaMaxRatio:0,tractionBiasRear:0,suspensionBiasRear:0,antiRollBarBiasRear:0,collisionDamageMult:0,weaponDamageMult:0,deformationDamageMult:0,engineDamageMult:0,petrolTankVolume:0,oilVolume:0,seatOffsetDistX:0,seatOffsetDistY:0,seatOffsetDistZ:0,monetaryValue:0}}));function l(){Ve("isUserInVehicle").then(({status:N,data:z})=>{N==="ok"?(M(r,z.inVehicle||!1,!0),u(r)&&d()):(M(r,!1),ze("Failed to check vehicle status","error"))})}pn(()=>{l()});function d(){Ve("getVehicleData").then(({status:N,data:z})=>{N==="ok"&&z?M(o,z,!0):ze("Failed to get vehicle data","error")})}function h(N,z,H=null){Ve("updateVehicleProperty",{property:N,value:z,section:H}).then(({status:re,data:V})=>{re!=="ok"&&ze(`Failed to update ${N}`,"error")})}var m=dY();let v;var b=p(m),y=p(b);y.__click=[uZ,e];var x=g(p(y)),k=g(y,2),C=p(k),A=g(b,2),T=p(A);{var I=N=>{var z=lY(),H=yt(z),j=p(H),re=p(j),V=p(re),q=g(re,2),le=p(q);le.__click=d;var ee=g(p(le)),W=g(le,2);W.__click=[pZ,r,o,d];var ne=g(p(W)),ye=g(W,2);ye.__click=[mZ,r,o,d];var ie=g(ye,2);ie.__click=[fZ,r,o,d];var Z=g(H,2),$=g(p(Z),2),X=p($),Y=g(p(X),2),te=p(Y),K=g(p(te),2),F=p(K),R=g(te,2),J=g(p(R),2),U=p(J),ce=g(R,2),fe=g(p(ce),2),ve=p(fe),Me=g(X,2),Se=g(p(Me),2),Pe=p(Se),Be=g(p(Pe),2),ue=p(Be),oe=g(ue,2),me=p(oe),Le=g(Pe,2),Oe=g(p(Le),2),_e=p(Oe),be=g(_e,2),Te=p(be),pe=g(Le,2),de=g(p(pe),2),ge=p(de),xe=g(ge,2),we=p(xe),Re=g(Z,2),qe=g(p(Re),2),Ge=p(qe),tt=g(p(Ge),2);tt.__change=[vZ,h,o];var Ye=g(Ge,2),Je=g(p(Ye),2);Je.__change=[gZ,h,o];var Ue=g(Ye,2),at=g(p(Ue),2);at.__change=[_Z,h,o];var Ee=g(Ue,2),He=g(p(Ee),2);He.__change=[bZ,h,o];var Ke=g(Ee,2),it=g(p(Ke),2);it.__change=[yZ,h,o];var pt=g(Ke,2),Tt=g(p(pt),2);Tt.__change=[xZ,h,o];var mt=g(Re,2),zt=g(p(mt),2),oi=p(zt),Ai=g(p(oi),2);Ai.__change=[wZ,h,o];var Kt=g(oi,2),Wt=g(p(Kt),2);Wt.__change=[kZ,h,o];var Rt=g(Kt,2),di=g(p(Rt),2);di.__change=[SZ,h,o];var Ci=g(Rt,2),Ti=g(p(Ci),2);Ti.__change=[CZ,h,o];var Qe=g(Ci,2),Ce=g(p(Qe),2);Ce.__change=[MZ,h,o];var Ae=g(Qe,2),xt=g(p(Ae),2);xt.__change=[PZ,h,o];var _t=g(mt,2),bt=g(p(_t),2),Pt=p(bt),Ht=g(p(Pt),2);Ht.__change=[AZ,h,o];var Nt=g(Pt,2),rt=g(p(Nt),2);rt.__change=[TZ,h,o];var dt=g(Nt,2),Qt=g(p(dt),2);Qt.__change=[LZ,h,o];var mi=g(dt,2),Ii=g(p(mi),2);Ii.__change=[DZ,h,o];var Ji=g(_t,2),bn=g(p(Ji),2),Ri=p(bn),Fe=g(p(Ri),2);Fe.__change=[EZ,h,o];var et=g(Ri,2),nt=g(p(et),2);nt.__change=[IZ,h,o];var lt=g(et,2),wt=g(p(lt),2);wt.__change=[OZ,h,o];var Xt=g(lt,2),Ut=g(p(Xt),2);Ut.__change=[BZ,h,o];var ut=g(Xt,2),Bt=g(p(ut),2);Bt.__change=[RZ,h,o];var jt=g(ut,2),Ft=g(p(jt),2);Ft.__change=[zZ,h,o];var ct=g(Ji,2),vt=g(p(ct),2),qt=p(vt),ot=g(p(qt),2);ot.__change=[NZ,h,o];var Lt=g(qt,2),Dt=g(p(Lt),2);Dt.__change=[FZ,h,o];var $e=g(Lt,2),kt=g(p($e),2);kt.__change=[HZ,h,o];var si=g($e,2),li=g(p(si),2);li.__change=[jZ,h,o];var ei=g(si,2),Li=g(p(ei),2);Li.__change=[$Z,h,o];var wi=g(ei,2),Et=g(p(wi),2);Et.__change=[VZ,h,o];var ft=g(ct,2),ai=g(p(ft),2),ci=p(ai),bi=g(p(ci),2);bi.__change=[WZ,h,o];var yi=g(ci,2),ti=g(p(yi),2);ti.__change=[qZ,h,o];var Zi=g(yi,2),nn=g(p(Zi),2);nn.__change=[UZ,h,o];var cn=g(Zi,2),dn=g(p(cn),2);dn.__change=[GZ,h,o];var Cn=g(cn,2),Qi=g(p(Cn),2);Qi.__change=[ZZ,h,o];var sn=g(Cn,2),En=g(p(sn),2);En.__change=[YZ,h,o];var ps=g(ft,2),$t=g(p(ps),2),hn=p($t),vi=g(p(hn),2);vi.__change=[KZ,h,o];var Ss=g(hn,2),ms=g(p(Ss),2);ms.__change=[XZ,h,o];var Cs=g(Ss,2),Ms=g(p(Cs),2);Ms.__change=[JZ,h,o];var Ps=g(Cs,2),wa=g(p(Ps),2);wa.__change=[QZ,h,o];var As=g(Ps,2),an=g(p(As),2);an.__change=[eY,h,o];var Ts=g(As,2),ka=g(p(Ts),2);ka.__change=[tY,h,o];var Qa=g(ps,2),ho=g(p(Qa),2),ns=p(ho),Gn=g(p(ns),2);Gn.__change=[iY,h,o];var Js=g(ns,2),gi=g(p(Js),2);gi.__change=[nY,h,o];var It=g(Js,2),$n=g(p(It),2);$n.__change=[sY,h,o];var mn=g(It,2),ss=g(p(mn),2);ss.__change=[aY,h,o];var Sa=g(mn,2),Mr=g(p(Sa),2);Mr.__change=[rY,h,o];var Ca=g(Sa,2),Pr=g(p(Ca),2);Pr.__change=[oY,h,o],se((Ze,uo,fo,er,Vn,Vi,Ls)=>{S(V,Ze),S(ee,` ${uo??""}`),Ot(W,"title",fo),S(ne,` ${er??""}`),S(F,u(o).modelName),S(U,u(o).plate),S(ve,u(o).class),es(ue,`width: ${u(o).engineHealth/1e3*100}%`),S(me,Vn),es(_e,`width: ${u(o).bodyHealth/1e3*100}%`),S(Te,Vi),es(ge,`width: ${u(o).petrolTankHealth/1e3*100}%`),S(we,Ls)},[()=>a()("pages.addons.vehicleeditor.vehiclecontrols"),()=>a()("pages.addons.vehicleeditor.buttons.refresh"),()=>a()("pages.addons.vehicleeditor.buttons.repairvehicle"),()=>a()("pages.addons.vehicleeditor.buttons.repair"),()=>u(o).engineHealth.toFixed(1),()=>u(o).bodyHealth.toFixed(1),()=>u(o).petrolTankHealth.toFixed(1)]),st(tt,()=>u(o).handling.mass,Ze=>u(o).handling.mass=Ze),st(Je,()=>u(o).handling.initialDragCoeff,Ze=>u(o).handling.initialDragCoeff=Ze),st(at,()=>u(o).handling.downforceModifier,Ze=>u(o).handling.downforceModifier=Ze),st(He,()=>u(o).handling.centreOfMassOffset,Ze=>u(o).handling.centreOfMassOffset=Ze),st(it,()=>u(o).handling.inertiaMultiplier,Ze=>u(o).handling.inertiaMultiplier=Ze),st(Tt,()=>u(o).handling.percentSubmerged,Ze=>u(o).handling.percentSubmerged=Ze),st(Ai,()=>u(o).handling.initialDriveForce,Ze=>u(o).handling.initialDriveForce=Ze),st(Wt,()=>u(o).handling.driveMaxFlatVel,Ze=>u(o).handling.driveMaxFlatVel=Ze),st(di,()=>u(o).handling.driveInertia,Ze=>u(o).handling.driveInertia=Ze),st(Ti,()=>u(o).handling.clutchChangeRateScaleUpShift,Ze=>u(o).handling.clutchChangeRateScaleUpShift=Ze),st(Ce,()=>u(o).handling.clutchChangeRateScaleDownShift,Ze=>u(o).handling.clutchChangeRateScaleDownShift=Ze),st(xt,()=>u(o).handling.initialDriveMaxFlatVel,Ze=>u(o).handling.initialDriveMaxFlatVel=Ze),st(Ht,()=>u(o).handling.brakeForce,Ze=>u(o).handling.brakeForce=Ze),st(rt,()=>u(o).handling.brakeBiasFront,Ze=>u(o).handling.brakeBiasFront=Ze),st(Qt,()=>u(o).handling.brakeBiasRear,Ze=>u(o).handling.brakeBiasRear=Ze),st(Ii,()=>u(o).handling.handBrakeForce,Ze=>u(o).handling.handBrakeForce=Ze),st(Fe,()=>u(o).handling.steeringLock,Ze=>u(o).handling.steeringLock=Ze),st(nt,()=>u(o).handling.tractionCurveMax,Ze=>u(o).handling.tractionCurveMax=Ze),st(wt,()=>u(o).handling.tractionCurveMin,Ze=>u(o).handling.tractionCurveMin=Ze),st(Ut,()=>u(o).handling.tractionCurveLateral,Ze=>u(o).handling.tractionCurveLateral=Ze),st(Bt,()=>u(o).handling.tractionSpringDeltaMax,Ze=>u(o).handling.tractionSpringDeltaMax=Ze),st(Ft,()=>u(o).handling.lowSpeedTractionLossMult,Ze=>u(o).handling.lowSpeedTractionLossMult=Ze),st(ot,()=>u(o).handling.suspensionForce,Ze=>u(o).handling.suspensionForce=Ze),st(Dt,()=>u(o).handling.suspensionCompDamp,Ze=>u(o).handling.suspensionCompDamp=Ze),st(kt,()=>u(o).handling.suspensionReboundDamp,Ze=>u(o).handling.suspensionReboundDamp=Ze),st(li,()=>u(o).handling.suspensionUpperLimit,Ze=>u(o).handling.suspensionUpperLimit=Ze),st(Li,()=>u(o).handling.suspensionLowerLimit,Ze=>u(o).handling.suspensionLowerLimit=Ze),st(Et,()=>u(o).handling.suspensionRaise,Ze=>u(o).handling.suspensionRaise=Ze),st(bi,()=>u(o).handling.camberStiffnesss,Ze=>u(o).handling.camberStiffnesss=Ze),st(ti,()=>u(o).handling.tractionBiasFront,Ze=>u(o).handling.tractionBiasFront=Ze),st(nn,()=>u(o).handling.tractionBiasRear,Ze=>u(o).handling.tractionBiasRear=Ze),st(dn,()=>u(o).handling.tractionLossMult,Ze=>u(o).handling.tractionLossMult=Ze),st(Qi,()=>u(o).handling.suspensionBiasFront,Ze=>u(o).handling.suspensionBiasFront=Ze),st(En,()=>u(o).handling.suspensionBiasRear,Ze=>u(o).handling.suspensionBiasRear=Ze),st(vi,()=>u(o).handling.collisionDamageMult,Ze=>u(o).handling.collisionDamageMult=Ze),st(ms,()=>u(o).handling.weaponDamageMult,Ze=>u(o).handling.weaponDamageMult=Ze),st(Ms,()=>u(o).handling.deformationDamageMult,Ze=>u(o).handling.deformationDamageMult=Ze),st(wa,()=>u(o).handling.engineDamageMult,Ze=>u(o).handling.engineDamageMult=Ze),st(an,()=>u(o).handling.petrolTankVolume,Ze=>u(o).handling.petrolTankVolume=Ze),st(ka,()=>u(o).handling.oilVolume,Ze=>u(o).handling.oilVolume=Ze),st(Gn,()=>u(o).handling.antiRollBarForce,Ze=>u(o).handling.antiRollBarForce=Ze),st(gi,()=>u(o).handling.antiRollBarBiasFront,Ze=>u(o).handling.antiRollBarBiasFront=Ze),st($n,()=>u(o).handling.antiRollBarBiasRear,Ze=>u(o).handling.antiRollBarBiasRear=Ze),st(ss,()=>u(o).handling.rollCentreHeightFront,Ze=>u(o).handling.rollCentreHeightFront=Ze),st(Mr,()=>u(o).handling.rollCentreHeightRear,Ze=>u(o).handling.rollCentreHeightRear=Ze),st(Pr,()=>u(o).handling.monetaryValue,Ze=>u(o).handling.monetaryValue=Ze),E(N,z)},D=N=>{var z=cY();E(N,z)};Q(T,N=>{u(r)?N(I):N(D,!1)})}se((N,z,H)=>{v=G(m,1,"vehicle-editor-page svelte-43396h",null,v,N),S(x,` ${z??""}`),S(C,H)},[()=>({light:!s().darkMode}),()=>a()("pages.addons.buttons.backtoaddons"),()=>a()("pages.addons.vehicleeditor.title")]),E(i,m),Yt(),n()}hi(["click","change"]);function uY(i,e,t,n){ri("sounds/click.mp3"),u(e)&&t(),n.setCurrentPage("addons")}function fY(i,e){Ve("saveVehicleCustomization").then(({status:t,data:n})=>{t==="ok"?(ze("Vehicle customization saved","success"),ri("sounds/action.mp3"),M(e,!1)):ze("Failed to save customization","error")})}var pY=(i,e)=>M(e,"cosmetic"),mY=(i,e)=>M(e,"performance"),vY=(i,e)=>M(e,"colors"),gY=B('<button class="btn btn-success svelte-beps7g"><i class="fas fa-check"></i> </button> <button class="btn btn-warning svelte-beps7g"><i class="fas fa-undo"></i> </button>',1),_Y=(i,e)=>M(e,!0),bY=B('<button class="btn btn-primary svelte-beps7g"><i class="fas fa-eye"></i> </button>'),yY=(i,e,t)=>e(parseInt(t()),-1),xY=B("<button></button>"),wY=B('<div class="mod-category svelte-beps7g"><h5 class="svelte-beps7g"> </h5> <div class="mod-options svelte-beps7g"><button>Stock</button> <!></div></div>'),kY=B('<div class="mod-grid svelte-beps7g"></div>'),SY=(i,e,t)=>e(parseInt(t()),-1),CY=B("<button></button>"),MY=B('<div class="mod-category svelte-beps7g"><h5 class="svelte-beps7g"> </h5> <div class="mod-options svelte-beps7g"><button>Stock</button> <!></div></div>'),PY=(i,e,t)=>e(-1,u(t).mods.turbo?1:0),AY=(i,e,t)=>e(-2,u(t).mods.xenonHeadlights?1:0),TY=B('<div class="mod-grid svelte-beps7g"><!> <div class="mod-category svelte-beps7g"><h5 class="svelte-beps7g">Turbo</h5> <div class="toggle-option svelte-beps7g"><label class="toggle svelte-beps7g"><input type="checkbox" class="svelte-beps7g"> <span class="toggle-slider svelte-beps7g"></span></label></div></div> <div class="mod-category svelte-beps7g"><h5 class="svelte-beps7g">Xenon Headlights</h5> <div class="toggle-option svelte-beps7g"><label class="toggle svelte-beps7g"><input type="checkbox" class="svelte-beps7g"> <span class="toggle-slider svelte-beps7g"></span></label></div></div></div>'),LY=(i,e,t)=>{const n=e(i.target.value);u(t).colors.primary=n},DY=(i,e,t)=>{const n=e(i.target.value);u(t).colors.secondary=n},EY=B('<div class="color-grid svelte-beps7g"><div class="color-section svelte-beps7g"><h5 class="svelte-beps7g">Primary Color</h5> <input type="color" class="svelte-beps7g"></div> <div class="color-section svelte-beps7g"><h5 class="svelte-beps7g">Secondary Color</h5> <input type="color" class="svelte-beps7g"></div></div>'),IY=B('<div class="vehicle-info svelte-beps7g"><h4 class="svelte-beps7g"> </h4> <span class="plate svelte-beps7g"> </span></div> <div class="tab-navigation svelte-beps7g"><button><i class="fas fa-palette"></i> </button> <button><i class="fas fa-tachometer-alt"></i> </button> <button><i class="fas fa-fill-drip"></i> </button></div> <div class="action-buttons svelte-beps7g"><button class="btn btn-info svelte-beps7g"><i class="fas fa-refresh"></i> </button> <!></div> <div class="tab-content"><!></div>',1),OY=B('<div class="no-vehicle svelte-beps7g"><i class="fas fa-car" style="font-size: 3rem; color: #64748b; margin-bottom: 1rem;"></i> <p class="svelte-beps7g">No vehicle detected. Enter a vehicle to customize it.</p></div>'),BY=B('<div><div class="page-header svelte-beps7g"><button class="btn-back svelte-beps7g"><i class="fas fa-arrow-left"></i> </button> <h2 class="svelte-beps7g"> </h2></div> <div class="page-content svelte-beps7g"><!></div></div>');function RY(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(xi,"$_",t);let r=ae(!1),o=ae("cosmetic"),l=ae(!1),d=ae(Gt({handle:null,modelName:"",plate:"",mods:{spoiler:-1,frontBumper:-1,rearBumper:-1,sideSkirt:-1,exhaust:-1,frame:-1,grille:-1,hood:-1,fender:-1,rightFender:-1,roof:-1,engine:-1,brakes:-1,transmission:-1,horns:-1,suspension:-1,armor:-1,turbo:!1,xenonHeadlights:!1,frontWheels:-1,backWheels:-1,plateHolder:-1,vanityPlates:-1,trimA:-1,trimB:-1,trunkItems:-1,speakers:-1,plaques:-1,shifterLeavers:-1,steeringWheels:-1,seats:-1,speedometer:-1,doorSpeakers:-1,carEmblem:-1,frontLeftWindow:-1,frontRightWindow:-1,rearLeftWindow:-1,rearRightWindow:-1,rearWindow:-1,livery:-1,windowTint:-1},colors:{primary:{r:0,g:0,b:0},secondary:{r:0,g:0,b:0},pearlescent:0,wheel:0,interior:0,dashboard:0,neonEnabled:[!1,!1,!1,!1],neonColor:{r:0,g:0,b:0},tyreSmokeColor:{r:255,g:255,b:255}},extras:{}})),h=ae(Gt({0:{name:"Spoilers",max:0},1:{name:"Front Bumper",max:0},2:{name:"Rear Bumper",max:0},3:{name:"Side Skirt",max:0},4:{name:"Exhaust",max:0},5:{name:"Frame",max:0},6:{name:"Grille",max:0},7:{name:"Hood",max:0},8:{name:"Fender",max:0},9:{name:"Right Fender",max:0},10:{name:"Roof",max:0},11:{name:"Engine",max:0},12:{name:"Brakes",max:0},13:{name:"Transmission",max:0},14:{name:"Horns",max:0},15:{name:"Suspension",max:0},16:{name:"Armor",max:0},23:{name:"Front Wheels",max:0},24:{name:"Back Wheels",max:0}}));function m(){Ve("checkCarCustomizerVehicle").then(({status:W,data:ne})=>{W==="ok"?(M(r,ne.inVehicle||!1,!0),u(r)&&v()):(M(r,!1),ze("Failed to check vehicle status","error"))})}pn(()=>{m()});function v(){Ve("getVehicleCustomizationData").then(({status:W,data:ne})=>{W==="ok"&&ne?(M(d,ne,!0),b()):ze("Failed to get vehicle customization data","error")})}function b(){Ve("getVehicleModLimits").then(({status:W,data:ne})=>{W==="ok"&&ne&&M(h,ne,!0)})}function y(W){switch(W){case 0:return u(d).mods.spoiler;case 1:return u(d).mods.frontBumper;case 2:return u(d).mods.rearBumper;case 3:return u(d).mods.sideSkirt;case 4:return u(d).mods.exhaust;case 5:return u(d).mods.frame;case 6:return u(d).mods.grille;case 7:return u(d).mods.hood;case 8:return u(d).mods.fender;case 9:return u(d).mods.rightFender;case 10:return u(d).mods.roof;case 11:return u(d).mods.engine;case 12:return u(d).mods.brakes;case 13:return u(d).mods.transmission;case 14:return u(d).mods.horns;case 15:return u(d).mods.suspension;case 16:return u(d).mods.armor;case 23:return u(d).mods.frontWheels;case 24:return u(d).mods.backWheels;default:return-1}}function x(W,ne){Ve("applyVehicleMod",{category:W,modIndex:ne,customTires:!1}).then(({status:ie,data:Z})=>{ie==="ok"?(ri("sounds/action.mp3"),k(W,ne)):ze("Failed to apply modification","error")})}function k(W,ne){switch(W){case 0:u(d).mods.spoiler=ne;break;case 1:u(d).mods.frontBumper=ne;break;case 2:u(d).mods.rearBumper=ne;break;case 3:u(d).mods.sideSkirt=ne;break;case 4:u(d).mods.exhaust=ne;break;case 5:u(d).mods.frame=ne;break;case 6:u(d).mods.grille=ne;break;case 7:u(d).mods.hood=ne;break;case 8:u(d).mods.fender=ne;break;case 9:u(d).mods.rightFender=ne;break;case 10:u(d).mods.roof=ne;break;case 11:u(d).mods.engine=ne;break;case 12:u(d).mods.brakes=ne;break;case 13:u(d).mods.transmission=ne;break;case 14:u(d).mods.horns=ne;break;case 15:u(d).mods.suspension=ne;break;case 16:u(d).mods.armor=ne;break;case 23:u(d).mods.frontWheels=ne;break;case 24:u(d).mods.backWheels=ne;break}}function C(){Ve("resetVehicleToOriginal").then(({status:W,data:ne})=>{W==="ok"?(ze("Vehicle reset to original","info"),M(l,!1)):ze("Failed to reset vehicle","error")})}function A(W){return`#${((1<<24)+(W.r<<16)+(W.g<<8)+W.b).toString(16).slice(1)}`}function T(W){const ne=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(W);return ne?{r:parseInt(ne[1],16),g:parseInt(ne[2],16),b:parseInt(ne[3],16)}:{r:0,g:0,b:0}}var I=BY();let D;var N=p(I),z=p(N);z.__click=[uY,l,C,e];var H=g(p(z)),j=g(z,2),re=p(j),V=g(N,2),q=p(V);{var le=W=>{var ne=IY(),ye=yt(ne),ie=p(ye),Z=p(ie),$=g(ie,2),X=p($),Y=g(ye,2),te=p(Y);let K;te.__click=[pY,o];var F=g(p(te)),R=g(te,2);let J;R.__click=[mY,o];var U=g(p(R)),ce=g(R,2);let fe;ce.__click=[vY,o];var ve=g(p(ce)),Me=g(Y,2),Se=p(Me);Se.__click=v;var Pe=g(p(Se)),Be=g(Se,2);{var ue=be=>{var Te=gY(),pe=yt(Te);pe.__click=[fY,l];var de=g(p(pe)),ge=g(pe,2);ge.__click=C;var xe=g(p(ge));se((we,Re)=>{S(de,` ${we??""}`),S(xe,` ${Re??""}`)},[()=>a()("pages.addons.carcustomizer.buttons.savechanges"),()=>a()("pages.addons.carcustomizer.buttons.reset")]),E(be,Te)},oe=be=>{var Te=bY();Te.__click=[_Y,l];var pe=g(p(Te));se(de=>S(pe,` ${de??""}`),[()=>a()("pages.addons.carcustomizer.buttons.previewmode")]),E(be,Te)};Q(Be,be=>{u(l)?be(ue):be(oe,!1)})}var me=g(Me,2),Le=p(me);{var Oe=be=>{var Te=kY();Vt(Te,21,()=>Object.entries(u(h)),Si,(pe,de)=>{let ge=()=>u(de)[0],xe=()=>u(de)[1];var we=Bi(),Re=yt(we);{var qe=Ge=>{var tt=wY(),Ye=p(tt),Je=p(Ye),Ue=g(Ye,2),at=p(Ue);let Ee;at.__click=[yY,x,ge];var He=g(at,2);Vt(He,17,()=>Array(xe().max+1),Si,(Ke,it,pt,Tt)=>{var mt=xY();let zt;mt.__click=()=>x(parseInt(ge()),pt),mt.textContent=pt+1,se(oi=>zt=G(mt,1,"mod-btn svelte-beps7g",null,zt,oi),[()=>({active:y(parseInt(ge()))===pt})]),E(Ke,mt)}),se(Ke=>{S(Je,xe().name),Ee=G(at,1,"mod-btn svelte-beps7g",null,Ee,Ke)},[()=>({active:y(parseInt(ge()))===-1})]),E(Ge,tt)};Q(Re,Ge=>{(parseInt(ge())<=10||parseInt(ge())===23||parseInt(ge())===24)&&Ge(qe)})}E(pe,we)}),E(be,Te)},_e=(be,Te)=>{{var pe=ge=>{var xe=TY(),we=p(xe);Vt(we,17,()=>Object.entries(u(h)),Si,(Ee,He)=>{let Ke=()=>u(He)[0],it=()=>u(He)[1];var pt=Bi(),Tt=yt(pt);{var mt=zt=>{var oi=MY(),Ai=p(oi),Kt=p(Ai),Wt=g(Ai,2),Rt=p(Wt);let di;Rt.__click=[SY,x,Ke];var Ci=g(Rt,2);Vt(Ci,17,()=>Array(it().max+1),Si,(Ti,Qe,Ce,Ae)=>{var xt=CY();let _t;xt.__click=()=>x(parseInt(Ke()),Ce),xt.textContent=`Level ${Ce+1}`,se(bt=>_t=G(xt,1,"mod-btn svelte-beps7g",null,_t,bt),[()=>({active:y(parseInt(Ke()))===Ce})]),E(Ti,xt)}),se(Ti=>{S(Kt,it().name),di=G(Rt,1,"mod-btn svelte-beps7g",null,di,Ti)},[()=>({active:y(parseInt(Ke()))===-1})]),E(zt,oi)};Q(Tt,zt=>{parseInt(Ke())>=11&&parseInt(Ke())<=16&&zt(mt)})}E(Ee,pt)});var Re=g(we,2),qe=g(p(Re),2),Ge=p(qe),tt=p(Ge);tt.__change=[PY,x,d];var Ye=g(Re,2),Je=g(p(Ye),2),Ue=p(Je),at=p(Ue);at.__change=[AY,x,d],ub(tt,()=>u(d).mods.turbo,Ee=>u(d).mods.turbo=Ee),ub(at,()=>u(d).mods.xenonHeadlights,Ee=>u(d).mods.xenonHeadlights=Ee),E(ge,xe)},de=(ge,xe)=>{{var we=Re=>{var qe=EY(),Ge=p(qe),tt=g(p(Ge),2);tt.__change=[LY,T,d];var Ye=g(Ge,2),Je=g(p(Ye),2);Je.__change=[DY,T,d],se((Ue,at)=>{Eu(tt,Ue),Eu(Je,at)},[()=>A(u(d).colors.primary),()=>A(u(d).colors.secondary)]),E(Re,qe)};Q(ge,Re=>{u(o)==="colors"&&Re(we)},xe)}};Q(be,ge=>{u(o)==="performance"?ge(pe):ge(de,!1)},Te)}};Q(Le,be=>{u(o)==="cosmetic"?be(Oe):be(_e,!1)})}se((be,Te,pe,de,ge,xe,we)=>{S(Z,u(d).modelName),S(X,u(d).plate),K=G(te,1,"tab-btn svelte-beps7g",null,K,be),S(F,` ${Te??""}`),J=G(R,1,"tab-btn svelte-beps7g",null,J,pe),S(U,` ${de??""}`),fe=G(ce,1,"tab-btn svelte-beps7g",null,fe,ge),S(ve,` ${xe??""}`),S(Pe,` ${we??""}`)},[()=>({active:u(o)==="cosmetic"}),()=>a()("pages.addons.carcustomizer.tabs.cosmetic"),()=>({active:u(o)==="performance"}),()=>a()("pages.addons.carcustomizer.tabs.performance"),()=>({active:u(o)==="colors"}),()=>a()("pages.addons.carcustomizer.tabs.colors"),()=>a()("pages.addons.carcustomizer.buttons.refresh")]),E(W,ne)},ee=W=>{var ne=OY();E(W,ne)};Q(q,W=>{u(r)?W(le):W(ee,!1)})}se((W,ne,ye)=>{D=G(I,1,"car-customizer-page svelte-beps7g",null,D,W),S(H,` ${ne??""}`),S(re,ye)},[()=>({light:!s().darkMode}),()=>a()("pages.addons.buttons.backtoaddons"),()=>a()("pages.addons.carcustomizer.title")]),E(i,I),Yt(),n()}hi(["click","change"]);var zY=B('<div class="countdown-circle svelte-137mw9t"><svg class="countdown-svg svelte-137mw9t" width="40" height="40"><circle cx="20" cy="20" r="18" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="2" class="svelte-137mw9t"></circle><circle cx="20" cy="20" r="18" fill="none" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-dasharray="113" class="countdown-progress svelte-137mw9t"></circle></svg> <span class="countdown-number svelte-137mw9t"> </span></div>'),NY=B('<div class="spacebar-icon svelte-137mw9t"><div class="key-visual svelte-137mw9t">SPACE</div></div>'),FY=B('<div class="holding-text svelte-137mw9t"><div class="status svelte-137mw9t">DISMISSING WARNING...</div> <div class="countdown-text svelte-137mw9t"> </div></div>'),HY=B('<div class="default-text svelte-137mw9t"><div class="action svelte-137mw9t">HOLD SPACEBAR</div> <div class="duration svelte-137mw9t">for 5 seconds to acknowledge</div></div>'),jY=B('<div><div class="warning-background svelte-137mw9t"><div class="warning-pattern svelte-137mw9t"></div> <div class="warning-glow svelte-137mw9t"></div></div> <div class="warning-container svelte-137mw9t"><div><div class="warning-icon svelte-137mw9t"><svg width="80" height="80" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-137mw9t"><path d="M12 2L21.09 21H2.91L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round" class="svelte-137mw9t"></path><path d="M12 9V13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-137mw9t"></path><path d="M12 17H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-137mw9t"></path></svg></div> <div class="warning-title svelte-137mw9t"><span class="title-main svelte-137mw9t">WARNING</span></div> <div class="warning-divider svelte-137mw9t"></div> <div class="warning-content svelte-137mw9t"><div class="warning-label svelte-137mw9t">REASON:</div> <div class="warning-reason svelte-137mw9t"> </div></div> <div class="warning-instruction svelte-137mw9t"><div class="instruction-icon svelte-137mw9t"><!></div> <div class="instruction-text svelte-137mw9t"><!></div></div></div></div></div>');function $Y(i,e){Zt(e,!0);let t=ae(!1),n=ae(5),s=null,a=ae(!1),r=ae(!0);function o(re){re.code==="Space"&&!u(t)&&(M(t,!0),M(r,!1),s=setInterval(()=>{M(n,u(n)-1),u(n)<=0&&(clearInterval(s),Ve("warningClosed"),e.onclose())},1e3))}function l(re){re.code==="Space"&&u(t)&&(M(t,!1),M(r,!0),clearInterval(s),M(n,5))}pn(()=>(setTimeout(()=>M(a,!0),100),window.addEventListener("keydown",o),window.addEventListener("keyup",l),()=>{window.removeEventListener("keydown",o),window.removeEventListener("keyup",l)}));var d=jY();let h;var m=g(p(d),2),v=p(m);let b;var y=g(p(v),6),x=g(p(y),2),k=p(x),C=g(y,2),A=p(C),T=p(A);{var I=re=>{var V=zY(),q=p(V),le=g(p(q)),ee=g(q,2),W=p(ee);se(()=>{Ot(le,"stroke-dashoffset",113-113*(5-u(n))/5),S(W,u(n))}),E(re,V)},D=re=>{var V=NY();E(re,V)};Q(T,re=>{u(t)?re(I):re(D,!1)})}var N=g(A,2),z=p(N);{var H=re=>{var V=FY(),q=g(p(V),2),le=p(q);se(()=>S(le,`${u(n)??""} second${u(n)!==1?"s":""} remaining`)),E(re,V)},j=re=>{var V=HY();E(re,V)};Q(z,re=>{u(t)?re(H):re(j,!1)})}se((re,V)=>{h=G(d,1,"warning-overlay svelte-137mw9t",null,h,re),b=G(v,1,"warning-box svelte-137mw9t",null,b,V),S(k,e.reason)},[()=>({mounted:u(a)}),()=>({holding:u(t),pulse:u(r)})]),E(i,d),Yt()}function VY(i,e){Zt(e,!0);let t=ae(!1),n=ae("");la("showWarningScreen",l=>{M(n,l.reason,!0),M(t,!0)});function s(){M(t,!1),M(n,"")}var a=Bi(),r=yt(a);{var o=l=>{$Y(l,{get reason(){return u(n)},onclose:s})};Q(r,l=>{u(t)&&l(o)})}E(i,a),Yt()}async function WY(i,e,t,n,s,a){if(!u(e).trim()){M(t,n()("pages.tebex.configuration.errors.secretkeyrequired"),!0);return}M(s,!0),M(t,"");try{const r=await Ve("updateTebexConfig",u(e));r.status==="ok"&&r.data?r.data.data.success?(ze(n()("notifications.tebex.configsaved")||"Tebex configuration saved successfully","success"),await a()):M(t,r.data.data.message||n()("pages.tebex.configuration.errors.savefailed"),!0):M(t,n()("pages.tebex.configuration.errors.savefailed"),!0)}catch{M(t,n()("pages.tebex.configuration.errors.networkerror"),!0)}finally{M(s,!1)}}var qY=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),UY=B('<div class="alert alert-danger svelte-5f6ayq" role="alert"><i class="fas fa-exclamation-triangle me-2"></i> </div>'),GY=B('<div class="spinner-border spinner-border-sm me-2" role="status"><span class="visually-hidden"> </span></div> ',1),ZY=B('<i class="fas fa-save me-2"></i> ',1),YY=B('<div class="unconfigured-state svelte-5f6ayq"><div><div class="text-center mb-4"><i class="fas fa-store-alt fa-3x text-primary mb-3"></i> <h3 class="svelte-5f6ayq"> </h3> <p class="text-muted"> </p></div> <div class="config-form svelte-5f6ayq"><div class="mb-3"><label class="form-label svelte-5f6ayq"> </label> <input type="password"> <div class="form-text svelte-5f6ayq"> </div></div> <!> <div class="d-flex gap-2"><button type="button" class="btn btn-primary flex-fill"><!></button></div></div> <div class="config-help mt-4 svelte-5f6ayq"><h6 class="svelte-5f6ayq"><i class="fas fa-question-circle me-2"></i> </h6> <ol class="small text-muted svelte-5f6ayq"><li><a href="https://www.tebex.io/control-panel" target="_blank" class="svelte-5f6ayq"> </a></li> <li> </li> <li> </li> <li> </li></ol></div></div></div>'),KY=B('<div class="store-info-section mb-4"><h4> </h4> <div><div class="info-item svelte-5f6ayq"><i class="fas fa-store svelte-5f6ayq"></i> <div><div class="info-label svelte-5f6ayq"> </div> <div class="info-value svelte-5f6ayq"> </div></div></div> <div class="info-item svelte-5f6ayq"><i class="fas fa-globe svelte-5f6ayq"></i> <div><div class="info-label svelte-5f6ayq"> </div> <div class="info-value svelte-5f6ayq"> </div></div></div> <div class="info-item svelte-5f6ayq"><i class="fas fa-server svelte-5f6ayq"></i> <div><div class="info-label svelte-5f6ayq"> </div> <div class="info-value svelte-5f6ayq"> </div></div></div></div></div>'),XY=(i,e)=>M(e,!0),JY=B('<div><i class="fas fa-box svelte-5f6ayq"></i> <div class="package-info"><div class="package-name svelte-5f6ayq"> </div> <div class="package-sales svelte-5f6ayq"> </div></div></div>'),QY=B('<div class="text-muted"><i class="fas fa-info-circle me-2"></i> No package data available</div>'),eK=(i,e)=>e("id"),tK=(i,e)=>e("date"),iK=(i,e)=>e("amount"),nK=(i,e)=>e("status"),sK=(i,e)=>e("email"),aK=B('<tr class="svelte-5f6ayq"><td class="svelte-5f6ayq"> </td><td class="svelte-5f6ayq"> </td><td class="text-end svelte-5f6ayq"> </td><td class="svelte-5f6ayq"><span> </span></td><td class="text-truncate svelte-5f6ayq" style="max-width: 150px;"> </td><td class="text-truncate svelte-5f6ayq" style="max-width: 200px;"><!></td></tr>'),rK=B('<div class="metrics-section mb-4"><div class="payments-header mb-3 svelte-5f6ayq"><h4 class="mb-2 svelte-5f6ayq"> </h4> <div class="payments-note svelte-5f6ayq"><i class="fas fa-info-circle text-warning me-2"></i> <span class="text-muted small">Data is from the last 100 payments due to Tebex API limitations. <button type="button" class="btn btn-link p-0 text-decoration-none">Learn more <i class="fas fa-info-circle"></i></button></span></div></div> <div class="metrics-grid svelte-5f6ayq"><div><i class="fas fa-credit-card metric-icon svelte-5f6ayq"></i> <div class="metric-content svelte-5f6ayq"><div class="metric-value svelte-5f6ayq"> </div> <div class="metric-label svelte-5f6ayq"> </div></div></div> <div><i class="fas fa-money-bill-wave metric-icon svelte-5f6ayq"></i> <div class="metric-content svelte-5f6ayq"><div class="metric-value svelte-5f6ayq"> </div> <div class="metric-label svelte-5f6ayq"> </div></div></div> <div><i class="fas fa-check-circle metric-icon svelte-5f6ayq"></i> <div class="metric-content svelte-5f6ayq"><div class="metric-value svelte-5f6ayq"> </div> <div class="metric-label svelte-5f6ayq"> </div></div></div> <div><i class="fas fa-undo metric-icon svelte-5f6ayq"></i> <div class="metric-content svelte-5f6ayq"><div class="metric-value svelte-5f6ayq"> </div> <div class="metric-label svelte-5f6ayq"> </div></div></div></div></div> <div class="packages-section mb-4"><h4> </h4> <div class="packages-grid svelte-5f6ayq"><!></div></div> <div class="payments-section flex-grow svelte-5f6ayq"><h4> </h4> <div><div class="table-wrapper svelte-5f6ayq"><table class="table svelte-5f6ayq"><thead><tr class="svelte-5f6ayq"><th class="sortable svelte-5f6ayq"> <i></i></th><th class="sortable svelte-5f6ayq"> <i></i></th><th class="text-end sortable svelte-5f6ayq"> <i></i></th><th class="sortable svelte-5f6ayq"> <i></i></th><th class="sortable svelte-5f6ayq"> <i></i></th><th class="svelte-5f6ayq"> </th></tr></thead><tbody class="svelte-5f6ayq"></tbody></table></div></div></div>',1),oK=B('<div class="view svelte-5f6ayq"><h2 class="card-title text-center mb-4"> </h2> <!> <!></div>'),lK=(i,e)=>M(e,!1),cK=(i,e)=>M(e,!1),dK=B(`<div class="overlay-backdrop svelte-5f6ayq"><div><div class="modal-header svelte-5f6ayq"><h5 class="modal-title svelte-5f6ayq"><i class="fas fa-exclamation-triangle text-warning me-2"></i> Tebex API Limitation</h5> <button type="button" class="modal-close-btn svelte-5f6ayq"><i class="fas fa-times"></i></button></div> <div class="modal-body svelte-5f6ayq"><p class="mb-3"><strong>We are currently limited to displaying the last 100 payments</strong> due to an issue with Tebex's API pagination system.</p> <h6 class="text-warning mb-2"><i class="fas fa-bug me-1"></i> Technical Details</h6> <ul class="mb-3"><li>Tebex's paginated API endpoint (<code class="svelte-5f6ayq">/payments?paged=X</code>) is not working correctly</li> <li>It returns the same page of data repeatedly instead of different pages</li> <li>This prevents us from accessing historical payment data beyond the most recent 100 transactions</li></ul> <h6 class="text-info mb-2"><i class="fas fa-wrench me-1"></i> What This Means</h6> <ul class="mb-3"><li>Payment statistics and metrics are calculated from the last 100 payments only</li> <li>Date range filtering and historical analysis are not available</li> <li>The data shown is still accurate, but limited in scope</li></ul> <div class="alert alert-info mb-0 svelte-5f6ayq"><i class="fas fa-clock me-2"></i> <strong>This limitation will be resolved</strong> once Tebex fixes their paginated API endpoint. 
                    We will automatically support full payment history and date ranges when their API is working properly.</div></div> <div class="modal-footer svelte-5f6ayq"><button type="button" class="btn btn-secondary">Close</button> <a href="https://docs.tebex.io/plugin/endpoints/payments" target="_blank" class="btn btn-outline-primary"><i class="fas fa-external-link-alt me-1"></i> Tebex API Docs</a></div></div></div>`),hK=B('<div class="page-container svelte-5f6ayq"><!></div> <!>',1);function uK(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(null),o=ae(null),l=ae(!0),d=ae(!1),h=ae(!1),m=ae(""),v=ae(!1),b=ae(""),y=ae("date"),x=ae("desc");function k(){return!u(r)||!u(r).recentPayments||!Array.isArray(u(r).recentPayments)?[]:[...u(r).recentPayments].sort((ee,W)=>{const ne=u(x)==="asc"?1:-1;return u(y)==="date"?(new Date(ee.date).getTime()-new Date(W.date).getTime())*ne:u(y)==="amount"?(parseFloat(ee.amount)-parseFloat(W.amount))*ne:u(y)==="status"||u(y)==="email"?ee[u(y)].localeCompare(W[u(y)])*ne:0})}pn(()=>{C()});async function C(){var ye;M(l,!0);const ee=await Ve("isTebexConfigured");if(ee.status==="ok"&&((ye=ee.data)==null?void 0:ye.data)!==void 0&&M(d,!!ee.data.data,!0),!u(d)){M(l,!1);return}const[W,ne]=await Promise.all([Ve("getTebexStoreInfo"),Ve("getTebexPaymentStats")]);if(W.status==="ok"){const ie=W.data;ie&&ie.data?M(o,ie.data,!0):M(o,ie,!0)}else ze(s()("notifications.tebex.failedtoloadstoreinfo"),"error");if(ne.status==="ok"){const ie=ne.data;ie&&ie.data?M(r,ie.data,!0):M(r,ie,!0)}else ze(s()("notifications.tebex.failedtoloadstats"),"error");M(l,!1)}function A(ee,W){const ne=typeof ee=="string"?parseFloat(ee):ee,ye=(W==null?void 0:W.symbol)||"$";return ne==null||isNaN(ne)?`${ye}0.00`:`${ye}${ne.toFixed(2)}`}function T(ee){return new Date(ee).toLocaleDateString()}function I(ee){u(y)===ee?M(x,u(x)==="asc"?"desc":"asc",!0):(M(y,ee,!0),M(x,"desc"))}function D(ee){return u(y)!==ee?"fa-sort":u(x)==="asc"?"fa-sort-up":"fa-sort-down"}function N(ee){switch(ee.toLowerCase()){case"complete":return"text-success";case"refund":return"text-warning";case"chargeback":return"text-danger";default:return"text-muted"}}var z=hK(),H=yt(z),j=p(H);{var re=ee=>{var W=qY(),ne=p(W),ye=p(ne),ie=p(ye);se(Z=>S(ie,Z),[()=>s()("pages.tebex.loading")]),E(ee,W)},V=(ee,W)=>{{var ne=ie=>{var Z=YY(),$=p(Z);let X;var Y=p($),te=g(p(Y),2),K=p(te),F=g(te,2),R=p(F),J=g(Y,2),U=p(J),ce=p(U),fe=p(ce),ve=g(ce,2);let Me;var Se=g(ve,2),Pe=p(Se),Be=g(U,2);{var ue=Ue=>{var at=UY(),Ee=g(p(at));se(()=>S(Ee,` ${u(b)??""}`)),E(Ue,at)};Q(Be,Ue=>{u(b)&&Ue(ue)})}var oe=g(Be,2),me=p(oe);me.__click=[WY,m,b,s,v,C];var Le=p(me);{var Oe=Ue=>{var at=GY(),Ee=yt(at),He=p(Ee),Ke=p(He),it=g(Ee);se((pt,Tt)=>{S(Ke,pt),S(it,` ${Tt??""}`)},[()=>s()("pages.tebex.configuration.saving"),()=>s()("pages.tebex.configuration.saving")]),E(Ue,at)},_e=Ue=>{var at=ZY(),Ee=g(yt(at));se(He=>S(Ee,` ${He??""}`),[()=>s()("pages.tebex.configuration.savebutton")]),E(Ue,at)};Q(Le,Ue=>{u(v)?Ue(Oe):Ue(_e,!1)})}var be=g(J,2),Te=p(be),pe=g(p(Te),1,!0),de=g(Te,2),ge=p(de),xe=p(ge),we=p(xe),Re=g(ge,2),qe=p(Re),Ge=g(Re,2),tt=p(Ge),Ye=g(Ge,2),Je=p(Ye);se((Ue,at,Ee,He,Ke,it,pt,Tt,mt,zt,oi,Ai,Kt)=>{X=G($,1,"config-box svelte-5f6ayq",null,X,Ue),S(K,at),S(R,Ee),S(fe,He),Me=G(ve,1,"form-control dark-input svelte-5f6ayq",null,Me,Ke),Ot(ve,"placeholder",it),ve.disabled=u(v),S(Pe,pt),me.disabled=Tt,S(pe,mt),S(we,zt),S(qe,oi),S(tt,Ai),S(Je,Kt)},[()=>({light:!a().darkMode}),()=>s()("pages.tebex.configuration.title"),()=>s()("pages.tebex.configuration.description"),()=>s()("pages.tebex.configuration.secretkeylabel"),()=>({light:!a().darkMode}),()=>s()("pages.tebex.configuration.secretkeyplaceholder"),()=>s()("pages.tebex.configuration.securitynote"),()=>u(v)||!u(m).trim(),()=>s()("pages.tebex.configuration.helpheader"),()=>s()("pages.tebex.configuration.helpsteps.step1"),()=>s()("pages.tebex.configuration.helpsteps.step2"),()=>s()("pages.tebex.configuration.helpsteps.step3"),()=>s()("pages.tebex.configuration.helpsteps.step4")]),st(ve,()=>u(m),Ue=>M(m,Ue)),E(ie,Z)},ye=ie=>{var Z=oK(),$=p(Z),X=p($),Y=g($,2);{var te=R=>{var J=KY(),U=p(J),ce=p(U),fe=g(U,2);let ve;var Me=p(fe),Se=g(p(Me),2),Pe=p(Se),Be=p(Pe),ue=g(Pe,2),oe=p(ue),me=g(Me,2),Le=g(p(me),2),Oe=p(Le),_e=p(Oe),be=g(Oe,2),Te=p(be),pe=g(me,2),de=g(p(pe),2),ge=p(de),xe=p(ge),we=g(ge,2),Re=p(we);se((qe,Ge,tt,Ye,Je)=>{var Ue,at,Ee;S(ce,qe),ve=G(fe,1,"store-info-card svelte-5f6ayq",null,ve,Ge),S(Be,tt),S(oe,((Ue=u(o).account)==null?void 0:Ue.name)||"N/A"),S(_e,Ye),S(Te,((at=u(o).account)==null?void 0:at.domain)||"N/A"),S(xe,Je),S(Re,((Ee=u(o).server)==null?void 0:Ee.name)||"N/A")},[()=>s()("pages.tebex.storeinfo"),()=>({light:!a().darkMode}),()=>s()("pages.tebex.storename"),()=>s()("pages.tebex.domain"),()=>s()("pages.tebex.servername")]),E(R,J)};Q(Y,R=>{u(o)&&R(te)})}var K=g(Y,2);{var F=R=>{var J=rK(),U=yt(J),ce=p(U),fe=p(ce),ve=p(fe),Me=g(fe,2),Se=g(p(Me),2),Pe=g(p(Se));Pe.__click=[XY,h];var Be=g(ce,2),ue=p(Be);let oe;var me=g(p(ue),2),Le=p(me),Oe=p(Le),_e=g(Le,2),be=p(_e),Te=g(ue,2);let pe;var de=g(p(Te),2),ge=p(de),xe=p(ge),we=g(ge,2),Re=p(we),qe=g(Te,2);let Ge;var tt=g(p(qe),2),Ye=p(tt),Je=p(Ye),Ue=g(Ye,2),at=p(Ue),Ee=g(qe,2);let He;var Ke=g(p(Ee),2),it=p(Ke),pt=p(it),Tt=g(it,2),mt=p(Tt),zt=g(U,2),oi=p(zt),Ai=p(oi),Kt=g(oi,2),Wt=p(Kt);{var Rt=Bt=>{var jt=Bi(),Ft=yt(jt);Vt(Ft,17,()=>u(r).topPackages.slice(0,5),Si,(ct,vt)=>{var qt=JY();let ot;var Lt=g(p(qt),2),Dt=p(Lt),$e=p(Dt),kt=g(Dt,2),si=p(kt);se((li,ei)=>{ot=G(qt,1,"package-card svelte-5f6ayq",null,ot,li),S($e,u(vt).name),S(si,`${u(vt).sales??""} ${ei??""}`)},[()=>({light:!a().darkMode}),()=>s()("pages.tebex.sales")]),E(ct,qt)}),E(Bt,jt)},di=Bt=>{var jt=QY();E(Bt,jt)};Q(Wt,Bt=>{u(r).topPackages&&Array.isArray(u(r).topPackages)&&u(r).topPackages.length>0?Bt(Rt):Bt(di,!1)})}var Ci=g(zt,2),Ti=p(Ci),Qe=p(Ti),Ce=g(Ti,2);let Ae;var xt=p(Ce),_t=p(xt),bt=p(_t),Pt=p(bt),Ht=p(Pt);Ht.__click=[eK,I];var Nt=p(Ht),rt=g(Nt),dt=g(Ht);dt.__click=[tK,I];var Qt=p(dt),mi=g(Qt),Ii=g(dt);Ii.__click=[iK,I];var Ji=p(Ii),bn=g(Ji),Ri=g(Ii);Ri.__click=[nK,I];var Fe=p(Ri),et=g(Fe),nt=g(Ri);nt.__click=[sK,I];var lt=p(nt),wt=g(lt),Xt=g(nt),Ut=p(Xt),ut=g(bt);Vt(ut,21,k,Si,(Bt,jt)=>{var Ft=aK(),ct=p(Ft),vt=p(ct),qt=g(ct),ot=p(qt),Lt=g(qt),Dt=p(Lt),$e=g(Lt),kt=p($e),si=p(kt),li=g($e),ei=p(li),Li=g(li),wi=p(Li);{var Et=ai=>{var ci=Al();se(bi=>S(ci,bi),[()=>u(jt).packages.map(bi=>bi.name).join(", ")]),E(ai,ci)},ft=ai=>{var ci=Al("N/A");E(ai,ci)};Q(wi,ai=>{u(jt).packages&&u(jt).packages.length>0?ai(Et):ai(ft,!1)})}se((ai,ci,bi)=>{S(vt,`#${u(jt).id??""}`),S(ot,ai),S(Dt,ci),G(kt,1,bi,"svelte-5f6ayq"),S(si,u(jt).status),S(ei,u(jt).email)},[()=>T(u(jt).date),()=>A(u(jt).amount,u(jt).currency),()=>N(u(jt).status)]),E(Bt,Ft)}),se((Bt,jt,Ft,ct,vt,qt,ot,Lt,Dt,$e,kt,si,li,ei,Li,wi,Et,ft,ai,ci,bi,yi,ti,Zi)=>{var nn,cn,dn,Cn,Qi;S(ve,Bt),oe=G(ue,1,"metric-card svelte-5f6ayq",null,oe,jt),S(Oe,((nn=u(r))==null?void 0:nn.totalPayments)??0),S(be,Ft),pe=G(Te,1,"metric-card svelte-5f6ayq",null,pe,ct),S(xe,vt),S(Re,qt),Ge=G(qe,1,"metric-card svelte-5f6ayq",null,Ge,ot),S(Je,((dn=(cn=u(r))==null?void 0:cn.paymentsByStatus)==null?void 0:dn.complete)??0),S(at,Lt),He=G(Ee,1,"metric-card svelte-5f6ayq",null,He,Dt),S(pt,((Qi=(Cn=u(r))==null?void 0:Cn.paymentsByStatus)==null?void 0:Qi.refund)??0),S(mt,$e),S(Ai,kt),S(Qe,si),Ae=G(Ce,1,"payments-container svelte-5f6ayq",null,Ae,li),S(Nt,`${ei??""} `),G(rt,1,`fas ${Li??""} ms-2`,"svelte-5f6ayq"),S(Qt,`${wi??""} `),G(mi,1,`fas ${Et??""} ms-2`,"svelte-5f6ayq"),S(Ji,`${ft??""} `),G(bn,1,`fas ${ai??""} ms-2`,"svelte-5f6ayq"),S(Fe,`${ci??""} `),G(et,1,`fas ${bi??""} ms-2`,"svelte-5f6ayq"),S(lt,`${yi??""} `),G(wt,1,`fas ${ti??""} ms-2`,"svelte-5f6ayq"),S(Ut,Zi)},[()=>s()("pages.tebex.paymentmetrics"),()=>({light:!a().darkMode}),()=>s()("pages.tebex.totalpayments"),()=>({light:!a().darkMode}),()=>{var Bt;return A(((Bt=u(r))==null?void 0:Bt.totalRevenue)??0)},()=>s()("pages.tebex.totalrevenue"),()=>({light:!a().darkMode}),()=>s()("pages.tebex.completepayments"),()=>({light:!a().darkMode}),()=>s()("pages.tebex.refunds"),()=>s()("pages.tebex.toppackages"),()=>s()("pages.tebex.recentpayments"),()=>({light:!a().darkMode}),()=>s()("pages.tebex.paymentid"),()=>D("id"),()=>s()("pages.tebex.date"),()=>D("date"),()=>s()("pages.tebex.amount"),()=>D("amount"),()=>s()("pages.tebex.status"),()=>D("status"),()=>s()("pages.tebex.customer"),()=>D("email"),()=>s()("pages.tebex.packages")]),E(R,J)};Q(K,R=>{u(r)&&R(F)})}se(R=>S(X,R),[()=>s()("pages.tebex.title")]),E(ie,Z)};Q(ee,ie=>{u(d)?ie(ye,!1):ie(ne)},W)}};Q(j,ee=>{u(l)?ee(re):ee(V,!1)})}var q=g(H,2);{var le=ee=>{var W=dK(),ne=p(W);let ye;var ie=p(ne),Z=g(p(ie),2);Z.__click=[lK,h];var $=g(ie,4),X=p($);X.__click=[cK,h],se(Y=>ye=G(ne,1,"modal-box svelte-5f6ayq",null,ye,Y),[()=>({light:!a().darkMode})]),gt(3,ne,()=>Ki,()=>({duration:200,start:.9})),gt(3,W,()=>Fi,()=>({duration:200})),E(ee,W)};Q(q,ee=>{u(h)&&ee(le)})}E(i,z),Yt(),n()}hi(["click"]);var fK=B('<div class="d-flex justify-content-center align-items-center" style="height: 100%;"><div class="spinner-border text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),pK=(i,e)=>M(e,""),mK=B('<button class="btn btn-danger clear-btn" type="button" aria-label="Clear search"><i class="fas fa-times"></i></button>'),vK=B('<div class="resource-overlay svelte-1un5oe"><div class="spinner-border text-light" role="status"></div></div>'),gK=B('<div class="meta-description svelte-1un5oe"> </div>'),_K=B('<div class="tag svelte-1un5oe"><i class="fas fa-user svelte-1un5oe"></i> </div>'),bK=B('<div class="tag svelte-1un5oe"><i class="fas fa-code-branch svelte-1un5oe"></i> </div>'),yK=(i,e,t)=>e(u(t)),xK=(i,e,t)=>e(u(t)),wK=B('<button class="btn btn-sm btn-warning svelte-1un5oe"><i class="fas fa-sync-alt me-1 svelte-1un5oe"></i> </button> <button class="btn btn-sm btn-danger svelte-1un5oe"><i class="fas fa-stop me-1 svelte-1un5oe"></i> </button>',1),kK=(i,e,t)=>e(u(t)),SK=B('<button class="btn btn-sm btn-success svelte-1un5oe"><i class="fas fa-play me-1 svelte-1un5oe"></i> </button>'),CK=B('<div><!> <div class="d-flex justify-content-between align-items-center mb-3"><div class="resource-title svelte-1un5oe"><i class="fas fa-cube me-2 svelte-1un5oe"></i> <strong class="svelte-1un5oe"> </strong></div> <span><i class="fas fa-circle me-1 svelte-1un5oe"></i> </span></div> <div class="meta-container svelte-1un5oe"><!> <div class="meta-tags svelte-1un5oe"><!> <!></div></div> <div class="action-buttons svelte-1un5oe"><!></div></div>'),MK=B('<div class="loading-more svelte-1un5oe"><div class="spinner-border spinner-border-sm text-primary" role="status"><span class="visually-hidden"> </span></div></div>'),PK=B('<div class="view svelte-1un5oe"><h2 class="card-title text-center"> </h2> <div class="d-flex justify-content-between align-items-center mt-4 mb-1"><h4 class="mb-0"> </h4> <small class="text-muted"> </small></div> <div><span class="input-group-text svelte-1un5oe"><i class="fas fa-search"></i></span> <input type="text" class="form-control svelte-1un5oe"> <!></div> <div class="resource-grid svelte-1un5oe"><!> <!></div></div>'),AK=B("<div><!></div>");function TK(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(xi,"$_",t),a=()=>Xe(Jt,"$appStore",t);let r=ae(Gt([])),o=ae(!0),l=ae(""),d=Gt(new Set),h=qi(()=>u(r).filter(V=>{var q,le;return V.name.toLowerCase().includes(u(l).toLowerCase())||((q=V.author)==null?void 0:q.toLowerCase().includes(u(l).toLowerCase()))||((le=V.description)==null?void 0:le.toLowerCase().includes(u(l).toLowerCase()))}).sort((V,q)=>V.status==="started"&&q.status!=="started"?-1:V.status!=="started"&&q.status==="started"?1:V.name.localeCompare(q.name)));const m=20;let v=ae(1),b=ae(!1),y=qi(()=>u(h).slice(0,u(v)*m));function x(V){const q=V.target;q.scrollHeight-q.scrollTop-q.clientHeight<100&&!u(b)&&u(y).length<u(h).length&&k()}async function k(){M(b,!0),await new Promise(V=>setTimeout(V,200)),Yr(v),M(b,!1)}pn(()=>{C()});async function C(){M(o,!0);const{status:V,data:q}=await Ve("getAllResources");V==="ok"?M(r,q,!0):ze(s()("notifications.resources.failedtoloadresources"),"error"),M(o,!1)}async function A(V){const{status:q,data:le}=await Ve("startResource",{resource:V.name});q==="ok"?(ze(s()("notifications.resources.startedresource",{values:{resource:V.name}}),"success"),ri("sounds/action.mp3"),await D(V)):ze(s()("notifications.resources.failedtostartresource",{values:{resource:V.name}}),"error")}async function T(V){const{status:q,data:le}=await Ve("stopResource",{resource:V.name});q==="ok"?(ze(s()("notifications.resources.stoppedresource",{values:{resource:V.name}}),"success"),ri("sounds/action.mp3"),await D(V)):ze(s()("notifications.resources.failedtostopresource",{values:{resource:V.name}}),"error")}async function I(V){const{status:q,data:le}=await Ve("restartResource",{resource:V.name});q==="ok"?(ze(s()("notifications.resources.restartedresource",{values:{resource:V.name}}),"success"),ri("sounds/action.mp3"),await D(V)):ze(s()("notifications.resources.failedtorestartresource",{values:{resource:V.name}}),"error")}async function D(V){const{status:q,data:le}=await Ve("refreshResource",{resource:V.name});if(q==="ok"){const ee=u(r).findIndex(W=>W.name===V.name);ee!==-1&&(u(r)[ee]=le)}else ze(s()("notifications.resources.failedtorefreshresource",{values:{resource:V.name}}),"error")}var N=AK();let z;var H=p(N);{var j=V=>{var q=fK(),le=p(q),ee=p(le),W=p(ee);se(ne=>S(W,ne),[()=>s()("pages.resources.loading")]),E(V,q)},re=V=>{var q=PK(),le=p(q),ee=p(le),W=g(le,2),ne=p(W),ye=p(ne),ie=g(ne,2),Z=p(ie),$=g(W,2);let X;var Y=g(p($),2),te=g(Y,2);{var K=ce=>{var fe=mK();fe.__click=[pK,l],E(ce,fe)};Q(te,ce=>{u(l)&&ce(K)})}var F=g($,2),R=p(F);Vt(R,17,()=>u(y),ce=>ce.name,(ce,fe)=>{var ve=CK();let Me;var Se=p(ve);{var Pe=Ye=>{var Je=vK();E(Ye,Je)};Q(Se,Ye=>{d.has(u(fe).name)&&Ye(Pe)})}var Be=g(Se,2),ue=p(Be),oe=g(p(ue),2),me=p(oe),Le=g(ue,2),Oe=g(p(Le)),_e=g(Be,2),be=p(_e);{var Te=Ye=>{var Je=gK(),Ue=p(Je);se(()=>{Ot(Je,"title",u(fe).description),S(Ue,u(fe).description)}),E(Ye,Je)};Q(be,Ye=>{u(fe).description&&Ye(Te)})}var pe=g(be,2),de=p(pe);{var ge=Ye=>{var Je=_K(),Ue=g(p(Je));se(()=>S(Ue,` ${u(fe).author??""}`)),E(Ye,Je)};Q(de,Ye=>{u(fe).author&&Ye(ge)})}var xe=g(de,2);{var we=Ye=>{var Je=bK(),Ue=g(p(Je));se(()=>S(Ue,` ${u(fe).version??""}`)),E(Ye,Je)};Q(xe,Ye=>{u(fe).version&&Ye(we)})}var Re=g(_e,2),qe=p(Re);{var Ge=Ye=>{var Je=wK(),Ue=yt(Je);Ue.__click=[yK,I,fe];var at=g(p(Ue)),Ee=g(Ue,2);Ee.__click=[xK,T,fe];var He=g(p(Ee));se((Ke,it)=>{S(at,` ${Ke??""}`),S(He,` ${it??""}`)},[()=>s()("pages.resources.restart"),()=>s()("pages.resources.stop")]),E(Ye,Je)},tt=Ye=>{var Je=SK();Je.__click=[kK,A,fe];var Ue=g(p(Je));se(at=>S(Ue,` ${at??""}`),[()=>s()("pages.resources.start")]),E(Ye,Je)};Q(qe,Ye=>{u(fe).status==="started"?Ye(Ge):Ye(tt,!1)})}se(Ye=>{Me=G(ve,1,`resource-card ${u(fe).status??""} position-relative`,"svelte-1un5oe",Me,Ye),S(me,u(fe).name),G(Le,1,`status-badge ${u(fe).status??""}`,"svelte-1un5oe"),S(Oe,` ${u(fe).status??""}`)},[()=>({light:!a().darkMode})]),E(ce,ve)});var J=g(R,2);{var U=ce=>{var fe=MK(),ve=p(fe),Me=p(ve),Se=p(Me);se(Pe=>S(Se,Pe),[()=>s()("pages.resources.loadingmore")]),E(ce,fe)};Q(J,ce=>{u(b)&&ce(U)})}se((ce,fe,ve,Me,Se)=>{S(ee,ce),S(ye,fe),S(Z,ve),X=G($,1,"input-group position-relative mb-3 svelte-1un5oe",null,X,Me),Ot(Y,"placeholder",Se)},[()=>s()("pages.resources.title"),()=>s()("pages.resources.resourcelist"),()=>s()("pages.resources.totals",{values:{count:u(r).filter(ce=>ce.status==="started").length,count2:u(r).filter(ce=>ce.status==="stopped").length}}),()=>({light:!a().darkMode}),()=>s()("pages.resources.searchresources")]),st(Y,()=>u(l),ce=>M(l,ce)),Mi("scroll",F,x),E(V,q)};Q(H,V=>{u(o)?V(j):V(re,!1)})}se(V=>z=G(N,1,"page-container svelte-1un5oe",null,z,V),[()=>({light:!a().darkMode})]),E(i,N),Yt(),n()}hi(["click"]);async function LK(i,e,t,n,s){if(!u(e).trim())return;M(t,!0);let{status:a,data:r}=await Ve("playerSubmitReport",{text:u(e).trim()});a==="ok"?(M(e,""),M(n,!0),await Ro(),setTimeout(()=>{M(n,!1),M(t,!1),s.onClose()},1500)):(M(t,!1),console.error("Failed to submit report:",r))}var DK=B('<div class="check-container svelte-1i6i890"><i class="fas fa-check-circle svelte-1i6i890"></i> <span class="success-text svelte-1i6i890">Report Submitted!</span> <span class="sub-message svelte-1i6i890">Please wait for a response from staff.</span></div>'),EK=B(`<h3 class="svelte-1i6i890">Submit a Report</h3> <textarea class="form-control svelte-1i6i890" placeholder="Describe the issue you're having..."></textarea> <div class="button-row svelte-1i6i890"><button class="btn btn-secondary cancel-btn svelte-1i6i890">Cancel</button> <button class="btn btn-primary submit-btn svelte-1i6i890"> </button></div>`,1),IK=B('<div class="player-report-overlay svelte-1i6i890"><div class="report-card svelte-1i6i890"><!></div></div>');function OK(i,e){Zt(e,!0);let t=ae(""),n=ae(!1),s=ae(!1);var a=IK(),r=p(a),o=p(r);{var l=h=>{var m=DK();gt(1,m,()=>Ki,()=>({duration:200})),E(h,m)},d=h=>{var m=EK(),v=g(yt(m),2);Ot(v,"rows",6),Ot(v,"maxlength",500);var b=g(v,2),y=p(b);y.__click=function(...C){var A;(A=e.onClose)==null||A.apply(this,C)};var x=g(y,2);x.__click=[LK,t,n,s,e];var k=p(x);se(C=>{v.disabled=u(n),y.disabled=u(n),x.disabled=C,S(k,u(n)?"Submitting...":"Submit Report")},[()=>u(n)||!u(t).trim()]),st(v,()=>u(t),C=>M(t,C)),E(h,m)};Q(o,h=>{u(s)?h(l):h(d,!1)})}gt(1,r,()=>Fi,()=>({duration:200})),gt(3,a,()=>Fi),E(i,a),Yt()}hi(["click"]);function BK(i,e){Zt(e,!0);let t=ae(!1);la("setPlayerSubmitReportVisible",o=>{M(t,o.visible,!0)});const n=o=>{o.key==="Escape"&&o.preventDefault()};window.addEventListener("keydown",n),Td(()=>{window.removeEventListener("keydown",n)});var s=Bi(),a=yt(s);{var r=o=>{OK(o,{onClose:()=>{M(t,!1),Ve("closePlayerSubmitReport")}})};Q(a,o=>{u(t)&&o(r)})}E(i,s),Yt()}function RK(i,e,t,n,s){u(e)!=="floating"&&(M(t,!0),document.addEventListener("mousemove",n),document.addEventListener("mouseup",s),i.preventDefault())}function zK(i,e,t,n,s,a,r){u(e)==="floating"&&(M(t,!0),M(n,{...u(s)},!0),document.addEventListener("mousemove",a),document.addEventListener("mouseup",r),i.preventDefault())}function NK(i){i.stopPropagation(),Iu(!1)}function FK(i){i.stopPropagation()}var HK=B('<div class="d-flex justify-content-center"><div class="spinner-border text-primary m-4" role="status"><span class="visually-hidden">Loading...</span></div></div>'),jK=B('<div role="separator" aria-orientation="vertical"></div>'),$K=B('<div class="floating-titlebar svelte-1op35yf" role="button" tabindex="0" aria-label="Drag panel"><div class="drag-region svelte-1op35yf"></div> <div class="title svelte-1op35yf">919ADMIN PRO</div> <div class="spacer svelte-1op35yf"></div> <button class="floating-close-button svelte-1op35yf" aria-label="Close panel"><span class="close-x svelte-1op35yf">×</span></button></div>'),VK=B('<!> <div><!> <div class="card-body app-card-body svelte-1op35yf"><!></div></div>',1),WK=B('<div class="floating-resize-handle svelte-1op35yf" role="separator" aria-orientation="vertical"></div>'),qK=B('<div class="floating-ghost svelte-1op35yf"></div>'),UK=B("<div><!> <!> <!></div>"),GK=B("<main><!> <!> <!> <!></main> <!> <!> <!>",1);function ZK(i,e){Zt(e,!0);const[t,n]=pi(),s=()=>Xe(Jt,"$appStore",t),a=()=>Xe(kg,"$routeStore",t),r=()=>Xe(Od,"$debugStore",t);let o=ae(!1),l=ae("dashboard"),d=ae(Gt(localStorage.getItem("appWidth")||"35vw")),h=ae(Gt(s().panelFormFactor)),m=ae(Gt(s().floatingBounds||{x:20,y:20,width:Math.min(window.innerWidth*.35,700),height:Math.min(window.innerHeight*.85,900)}));Mf(Jt,Hn(s).showActionTypeLabels=localStorage.getItem("showActionTypeLabels")==="true"||!1,Hn(s)),fn(()=>{M(l,a().page,!0)}),pn(()=>{const F=localStorage.getItem("appWidth");F?document.documentElement.style.setProperty("--app-width",F):document.documentElement.style.setProperty("--app-width",u(d));const R=localStorage.getItem("selectedFont")||"Poppins";document.documentElement.style.setProperty("--app-font-family",R);const J=localStorage.getItem("textSize")||"default",ce={default:"100%",smaller:"92%",smallest:"85%"}[J]||"100%";if(document.documentElement.style.setProperty("--app-font-size-root",ce),Fx(),!Ld()){l3(),ro("Running in test mode");const fe=document.documentElement;fe.style.backgroundImage="url('/bg.jpg')",fe.style.backgroundSize="cover",fe.style.backgroundRepeat="no-repeat",fe.style.backgroundPosition="center",fe.style.height="100%",Pf([{name:"SeniorAdmin",description:"This groups has access to senior admin features.",permissions:["page:AdminChat","page:PlayerList","page:Reports","page:Map","page:Addons","page:Tebex"]},{name:"Admin",description:"This groups has access to admin features.",permissions:["page:AdminChat","page:PlayerList","page:Reports","page:Map"]},{name:"Moderator",description:"This groups has access to moderator features.",permissions:["page:AdminChat","page:PlayerList","page:Reports","page:Map"]}]),Rx("SuperAdmin"),zx("license:345893ae9942959df31acd349200000a3"),Iu(!0)}return setTimeout(()=>{M(o,!1)},2e3),la("showNotification",fe=>{ze(fe.message,fe.type)})});let v=ae(!1),b=ae(!1),y=ae(!1),x=ae(null),k=0,C=0,A=null,T=0;const I=16;function D(F){if(!u(v))return;const R=Date.now();if(R-T<I)return;T=R;let J;u(h)==="left"?J=F.clientX:J=window.innerWidth-F.clientX;const U=600,ce=window.innerWidth*.6,ve=`${Math.min(Math.max(J,U),ce)}px`;document.documentElement.style.setProperty("--app-width",ve),M(d,ve),A&&clearTimeout(A),A=setTimeout(()=>{localStorage.setItem("appWidth",ve)},100)}function N(){M(v,!1),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",N),A&&clearTimeout(A),localStorage.setItem("appWidth",u(d)),document.documentElement.style.setProperty("--app-width",u(d))}function z(F){u(h)==="floating"&&(M(y,!0),M(x,{...u(m)},!0),k=F.clientX-u(m).x,C=F.clientY-u(m).y,document.addEventListener("mousemove",H),document.addEventListener("mouseup",j),F.preventDefault())}function H(F){if(!u(y)||!u(x))return;F.preventDefault();const R=16,J=window.innerWidth-u(x).width-R,U=window.innerHeight-u(x).height-R,ce=Math.min(Math.max(F.clientX-k,R),Math.max(J,R)),fe=Math.min(Math.max(F.clientY-C,R),Math.max(U,R));M(x,{...u(x),x:ce,y:fe},!0)}function j(){u(y)&&(M(y,!1),document.removeEventListener("mousemove",H),document.removeEventListener("mouseup",j),u(x)&&(M(m,{...u(x)},!0),ph(u(m))),M(x,null))}function re(F){if(!u(b)||!u(x))return;F.preventDefault();const R=16,J=Math.min(window.innerWidth-u(x).x-R,window.innerWidth*.9),U=Math.min(window.innerHeight-u(x).y-R,window.innerHeight*.95),ce=560,fe=420,ve=Math.min(Math.max(F.clientX-u(x).x,ce),J),Me=Math.min(Math.max(F.clientY-u(x).y,fe),U);M(x,{...u(x),width:ve,height:Me},!0)}function V(){u(b)&&(M(b,!1),document.removeEventListener("mousemove",re),document.removeEventListener("mouseup",V),u(x)&&(M(m,{...u(x)},!0),ph(u(m))),M(x,null))}fn(()=>{if(M(h,s().panelFormFactor,!0),s().floatingBounds){const F=q(s().floatingBounds);le(F,s().floatingBounds)||ph(F),M(m,F,!0)}});function q(F){const J=Math.max(window.innerWidth-F.width-16,16),U=Math.max(window.innerHeight-F.height-16,16),ce=Math.min(Math.max(F.x,16),J),fe=Math.min(Math.max(F.y,16),U),ve=Math.min(window.innerWidth-ce-16,window.innerWidth*.95),Me=Math.min(window.innerHeight-fe-16,window.innerHeight*.95),Se=560,Pe=420,Be=Math.min(Math.max(F.width,Se),ve),ue=Math.min(Math.max(F.height,Pe),Me);return{x:ce,y:fe,width:Be,height:ue}}function le(F,R){return F.x===R.x&&F.y===R.y&&F.width===R.width&&F.height===R.height}window.addEventListener("resize",()=>{const F=q(u(m));le(F,u(m))||(M(m,F,!0),ph(F))}),fn(()=>{const F=document.documentElement;u(h)==="left"?(F.style.setProperty("--debug-left","auto"),F.style.setProperty("--debug-right","20px")):(F.style.setProperty("--debug-left","20px"),F.style.setProperty("--debug-right","auto"))});var ee=GK(),W=yt(ee);let ne;var ye=p(W);KT(ye,{});var ie=g(ye,2);GP(ie,{children:(F,R)=>{var J=UK();let U,ce;var fe=p(J);{var ve=oe=>{var me=HK();E(oe,me)},Me=oe=>{var me=VK(),Le=yt(me);{var Oe=Re=>{var qe=jK();let Ge;qe.__mousedown=[RK,h,v,D,N],se(tt=>Ge=G(qe,1,`resize-handle ${u(v)?"active":""}`,"svelte-1op35yf",Ge,tt),[()=>({left:u(h)==="right",right:u(h)==="left"})]),E(Re,qe)},_e=Re=>{var qe=$K();qe.__mousedown=z;var Ge=g(p(qe),6);Ge.__mousedown=[FK],Ge.__click=[NK],E(Re,qe)};Q(Le,Re=>{u(h)!=="floating"?Re(Oe):Re(_e,!1)})}var be=g(Le,2);let Te;var pe=p(be);iL(pe,{get currentPage(){return u(l)},setCurrentPage:Re=>{fa(Re)}});var de=g(pe,2),ge=p(de);{var xe=Re=>{SL(Re,{})},we=(Re,qe)=>{{var Ge=Ye=>{_I(Ye,{})},tt=(Ye,Je)=>{{var Ue=Ee=>{var He=Bi(),Ke=yt(He);{var it=Tt=>{uE(Tt,{})},pt=Tt=>{IL(Tt,{})};Q(Ke,Tt=>{var mt;(mt=a().params)!=null&&mt.playerId?Tt(it):Tt(pt,!1)})}E(Ee,He)},at=(Ee,He)=>{{var Ke=pt=>{q5(pt,{})},it=(pt,Tt)=>{{var mt=oi=>{aI(oi,{})},zt=(oi,Ai)=>{{var Kt=Rt=>{TK(Rt,{})},Wt=(Rt,di)=>{{var Ci=Qe=>{TI(Qe,{})},Ti=(Qe,Ce)=>{{var Ae=_t=>{iO(_t,{})},xt=(_t,bt)=>{{var Pt=Nt=>{T5(Nt,{get currentPage(){return u(l)},setCurrentPage:rt=>fa(rt)})},Ht=(Nt,rt)=>{{var dt=mi=>{TO(mi,{setCurrentPage:Ii=>fa(Ii)})},Qt=(mi,Ii)=>{{var Ji=Ri=>{JO(Ri,{setCurrentPage:Fe=>fa(Fe)})},bn=(Ri,Fe)=>{{var et=lt=>{dB(lt,{})},nt=(lt,wt)=>{{var Xt=ut=>{BB(ut,{setCurrentPage:Bt=>fa(Bt)})},Ut=(ut,Bt)=>{{var jt=ct=>{ZH(ct,{})},Ft=(ct,vt)=>{{var qt=Lt=>{r5(Lt,{setCurrentPage:Dt=>fa(Dt)})},ot=(Lt,Dt)=>{{var $e=si=>{hZ(si,{setCurrentPage:li=>fa(li)})},kt=(si,li)=>{{var ei=wi=>{hY(wi,{setCurrentPage:Et=>fa(Et)})},Li=(wi,Et)=>{{var ft=ci=>{RY(ci,{setCurrentPage:bi=>fa(bi)})},ai=(ci,bi)=>{{var yi=ti=>{uK(ti,{})};Q(ci,ti=>{u(l)==="tebex"&&ti(yi)},bi)}};Q(wi,ci=>{u(l)==="carcustomizer"?ci(ft):ci(ai,!1)},Et)}};Q(si,wi=>{u(l)==="vehicleeditor"?wi(ei):wi(Li,!1)},li)}};Q(Lt,si=>{u(l)==="addons"?si($e):si(kt,!1)},Dt)}};Q(ct,Lt=>{u(l)==="punishmentlist"?Lt(qt):Lt(ot,!1)},vt)}};Q(ut,ct=>{u(l)==="analytics"?ct(jt):ct(Ft,!1)},Bt)}};Q(lt,ut=>{u(l)==="placer"?ut(Xt):ut(Ut,!1)},wt)}};Q(Ri,lt=>{u(l)==="characters"?lt(et):lt(nt,!1)},Fe)}};Q(mi,Ri=>{u(l)==="permissiongroups"?Ri(Ji):Ri(bn,!1)},Ii)}};Q(Nt,mi=>{u(l)==="adminusers"?mi(dt):mi(Qt,!1)},rt)}};Q(_t,Nt=>{u(l)==="settings"?Nt(Pt):Nt(Ht,!1)},bt)}};Q(Qe,_t=>{u(l)==="reports"?_t(Ae):_t(xt,!1)},Ce)}};Q(Rt,Qe=>{u(l)==="map"?Qe(Ci):Qe(Ti,!1)},di)}};Q(oi,Rt=>{u(l)==="resources"?Rt(Kt):Rt(Wt,!1)},Ai)}};Q(pt,oi=>{u(l)==="vehicles"?oi(mt):oi(zt,!1)},Tt)}};Q(Ee,pt=>{u(l)==="items"?pt(Ke):pt(it,!1)},He)}};Q(Ye,Ee=>{u(l)==="players"?Ee(Ue):Ee(at,!1)},Je)}};Q(Re,Ye=>{u(l)==="adminchat"?Ye(Ge):Ye(tt,!1)},qe)}};Q(ge,Re=>{u(l)==="dashboard"?Re(xe):Re(we,!1)})}se(Re=>Te=G(be,1,"app-container svelte-1op35yf",null,Te,Re),[()=>({hidden:u(h)==="floating"&&(u(y)||u(b))})]),E(oe,me)};Q(fe,oe=>{u(o)?oe(ve):oe(Me,!1)})}var Se=g(fe,2);{var Pe=oe=>{var me=WK();me.__mousedown=[zK,h,b,x,m,re,V],E(oe,me)};Q(Se,oe=>{u(h)==="floating"&&oe(Pe)})}var Be=g(Se,2);{var ue=oe=>{var me=qK();se(()=>es(me,`left:${u(x).x??""}px; top:${u(x).y??""}px; width:${u(x).width??""}px; height:${u(x).height??""}px;`)),E(oe,me)};Q(Be,oe=>{u(h)==="floating"&&(u(y)||u(b))&&u(x)&&oe(ue)})}se(oe=>{U=G(J,1,`app-card ${s().darkMode?"":"app-card-light"} ${u(v)?"resizing":""}`,"svelte-1op35yf",U,oe),Ot(J,"data-bs-theme",s().darkMode?"dark":"light"),ce=es(J,"",ce,{opacity:s().seeThroughMode?.8:1,left:u(h)==="floating"?`${u(m).x}px`:null,top:u(h)==="floating"?`${u(m).y}px`:null,width:u(h)==="floating"?`${u(m).width}px`:null,height:u(h)==="floating"?`${u(m).height}px`:null})},[()=>({"left-docked":u(h)==="left","right-docked":u(h)==="right",floating:u(h)==="floating"})]),E(F,J)},$$slots:{default:!0}});var Z=g(ie,2);r3(Z,{});var $=g(Z,2);BK($,{});var X=g(W,2);lI(X);var Y=g(X,2);VY(Y,{});var te=g(Y,2);{var K=F=>{w3(F,{})};Q(te,F=>{r().enabled&&F(K)})}se(F=>{ne=G(W,1,"container",null,ne,F),Ot(W,"data-bs-theme",s().darkMode?"dark":"light")},[()=>({light:!s().darkMode})]),E(i,ee),Yt(),n()}hi(["mousedown","click"]);async function YK(){try{const i=await Ve("getLocales");i.status==="ok"&&i.data&&Object.entries(i.data).forEach(([t,n])=>{rw(t,n)});const e=gg(Jt).currentLanguage;Ab({fallbackLocale:"en",initialLocale:e||hT()}),await IP()}catch(i){console.error("Failed to initialize translations:",i),Ab({fallbackLocale:"en",initialLocale:"en"})}}async function KK(){return await YK(),iP(ZK,{target:document.getElementById("app")})}KK();

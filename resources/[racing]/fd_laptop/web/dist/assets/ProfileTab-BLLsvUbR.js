import{a4 as q,ap as De,i as k,aq as g,M as b,a5 as jt,ar as he,af as et,as as nr,at as ir,ai as D,au as lr,ak as tt,C as ur,H as sr,E as ar,a3 as or,a6 as cr,a7 as fr,j as dr,c as rt,o as de,a as B,k as nt,u as ie,n as Fe,p as xe,a2 as it,L as lt}from"./index-D8HCwQPV.js";import{s as ut}from"./index-CDp2KP61.js";import{s as vr}from"./index-Bfx_E94B.js";import{s as st}from"./index-DqDoKNvg.js";import"./index-DYfg_i5Y.js";import"./index-CG8GTDOY.js";import"./index-DwKRJ0iz.js";/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */function $(e){return typeof e=="function"}function Et(e){return e==null}const X=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function qe(e){return Number(e)>=0}function pr(e){return typeof e=="object"&&e!==null}function mr(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function at(e){if(!pr(e)||mr(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function se(e,t){return Object.keys(t).forEach(r=>{if(at(t[r])&&at(e[r])){e[r]||(e[r]={}),se(e[r],t[r]);return}e[r]=t[r]}),e}function ve(e){const t=e.split(".");if(!t.length)return"";let r=String(t[0]);for(let n=1;n<t.length;n++){if(qe(t[n])){r+=`[${t[n]}]`;continue}r+=`.${t[n]}`}return r}const yr={};function hr(e){return yr[e]}function ot(e,t,r){typeof r.value=="object"&&(r.value=_(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function _(e){if(typeof e!="object")return e;var t=0,r,n,u,s=Object.prototype.toString.call(e);if(s==="[object Object]"?u=Object.create(e.__proto__||null):s==="[object Array]"?u=Array(e.length):s==="[object Set]"?(u=new Set,e.forEach(function(p){u.add(_(p))})):s==="[object Map]"?(u=new Map,e.forEach(function(p,c){u.set(_(c),_(p))})):s==="[object Date]"?u=new Date(+e):s==="[object RegExp]"?u=new RegExp(e.source,e.flags):s==="[object DataView]"?u=new e.constructor(_(e.buffer)):s==="[object ArrayBuffer]"?u=e.slice(0):s.slice(-6)==="Array]"&&(u=new e.constructor(e)),u){for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)ot(u,n[t],Object.getOwnPropertyDescriptor(e,n[t]));for(t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++)Object.hasOwnProperty.call(u,r=n[t])&&u[r]===e[r]||ot(u,r,Object.getOwnPropertyDescriptor(e,r))}return u||e}const gr=Symbol("vee-validate-form"),br=Symbol("vee-validate-form-context"),_r=typeof window<"u";function Or(e){return $(e)&&!!e.__locatorRef}function K(e){return!!e&&$(e.parse)&&e.__type==="VVTypedSchema"}function St(e){return!!e&&$(e.validate)}function jr(e){return e==="checkbox"||e==="radio"}function Er(e){return X(e)||Array.isArray(e)}function Sr(e){return Array.isArray(e)?e.length===0:X(e)&&Object.keys(e).length===0}function ae(e){return/^\[.+\]$/i.test(e)}function Pr(e){return Pt(e)&&e.multiple}function Pt(e){return e.tagName==="SELECT"}function Vr(e){return Vt(e)&&e.target&&"submit"in e.target}function Vt(e){return e?!!(typeof Event<"u"&&$(Event)&&e instanceof Event||e&&e.srcElement):!1}function ue(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,u;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!ue(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;for(n of e.entries())if(!ue(n[1],t.get(n[0])))return!1;return!0}if(ft(e)&&ft(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(e=ct(e),t=ct(t),u=Object.keys(e),r=u.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[n]))return!1;for(n=r;n--!==0;){var s=u[n];if(!ue(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ct(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}function ft(e){return _r?e instanceof File:!1}function be(e){return ae(e)?e.replace(/\[|\]/gi,""):e}function W(e,t,r){return e?ae(t)?e[be(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((u,s)=>Er(u)&&s in u?u[s]:r,e):r}function L(e,t,r){if(ae(t)){e[be(t)]=r;return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let u=e;for(let s=0;s<n.length;s++){if(s===n.length-1){u[n[s]]=r;return}(!(n[s]in u)||Et(u[n[s]]))&&(u[n[s]]=qe(n[s+1])?[]:{}),u=u[n[s]]}}function Ne(e,t){if(Array.isArray(e)&&qe(t)){e.splice(Number(t),1);return}X(e)&&delete e[t]}function dt(e,t){if(ae(t)){delete e[be(t)];return}const r=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let s=0;s<r.length;s++){if(s===r.length-1){Ne(n,r[s]);break}if(!(r[s]in n)||Et(n[r[s]]))break;n=n[r[s]]}const u=r.map((s,p)=>W(e,r.slice(0,p).join(".")));for(let s=u.length-1;s>=0;s--)if(Sr(u[s])){if(s===0){Ne(e,r[0]);continue}Ne(u[s-1],r[s-1])}}function R(e){return Object.keys(e)}function vt(e,t=0){let r=null,n=[];return function(...u){return r&&clearTimeout(r),r=setTimeout(()=>{const s=e(...u);n.forEach(p=>p(s)),n=[]},t),new Promise(s=>n.push(s))}}function wr(e,t){let r;return async function(...u){const s=e(...u);r=s;const p=await s;return s!==r?p:(r=void 0,t(p,u))}}function pt(e){return Array.isArray(e)?e:e?[e]:[]}function pe(e,t){const r={};for(const n in e)t.includes(n)||(r[n]=e[n]);return r}function Ar(e){let t=null,r=[];return function(...n){const u=D(()=>{if(t!==u)return;const s=e(...n);r.forEach(p=>p(s)),r=[],t=null});return t=u,new Promise(s=>r.push(s))}}function Be(e){if(wt(e))return e._value}function wt(e){return"_value"in e}function kr(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function mt(e){if(!Vt(e))return e;const t=e.target;if(jr(t.type)&&wt(t))return Be(t);if(t.type==="file"&&t.files){const r=Array.from(t.files);return t.multiple?r:r[0]}if(Pr(t))return Array.from(t.options).filter(r=>r.selected&&!r.disabled).map(Be);if(Pt(t)){const r=Array.from(t.options).find(n=>n.selected);return r?Be(r):t.value}return kr(t)}function Cr(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?X(e)&&e._$$isNormalized?e:X(e)?Object.keys(e).reduce((r,n)=>{const u=Ir(e[n]);return e[n]!==!1&&(r[n]=yt(u)),r},t):typeof e!="string"?t:e.split("|").reduce((r,n)=>{const u=Tr(n);return u.name&&(r[u.name]=yt(u.params)),r},t):t}function Ir(e){return e===!0?[]:Array.isArray(e)||X(e)?e:[e]}function yt(e){const t=r=>typeof r=="string"&&r[0]==="@"?Fr(r.slice(1)):r;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((r,n)=>(r[n]=t(e[n]),r),{})}const Tr=e=>{let t=[];const r=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:r,params:t}};function Fr(e){const t=r=>{var n;return(n=W(r,e))!==null&&n!==void 0?n:r[e]};return t.__locatorRef=e,t}const xr={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let Nr=Object.assign({},xr);const le=()=>Nr;async function Br(e,t,r={}){const n=r==null?void 0:r.bails,u={name:(r==null?void 0:r.name)||"{field}",rules:t,label:r==null?void 0:r.label,bails:n??!0,formData:(r==null?void 0:r.values)||{}},s=await Rr(u,e);return Object.assign(Object.assign({},s),{valid:!s.errors.length})}async function Rr(e,t){const r=e.rules;if(K(r)||St(r))return Mr(t,Object.assign(Object.assign({},e),{rules:r}));if($(r)||Array.isArray(r)){const c={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},d=Array.isArray(r)?r:[r],f=d.length,v=[];for(let P=0;P<f;P++){const S=d[P],j=await S(t,c);if(!(typeof j!="string"&&!Array.isArray(j)&&j)){if(Array.isArray(j))v.push(...j);else{const x=typeof j=="string"?j:kt(c);v.push(x)}if(e.bails)return{errors:v}}}return{errors:v}}const n=Object.assign(Object.assign({},e),{rules:Cr(r)}),u=[],s=Object.keys(n.rules),p=s.length;for(let c=0;c<p;c++){const d=s[c],f=await Dr(n,t,{name:d,params:n.rules[d]});if(f.error&&(u.push(f.error),e.bails))return{errors:u}}return{errors:u}}function $r(e){return!!e&&e.name==="ValidationError"}function At(e){return{__type:"VVTypedSchema",async parse(r,n){var u;try{return{output:await e.validate(r,{abortEarly:!1,context:(n==null?void 0:n.formData)||{}}),errors:[]}}catch(s){if(!$r(s))throw s;if(!(!((u=s.inner)===null||u===void 0)&&u.length)&&s.errors.length)return{errors:[{path:s.path,errors:s.errors}]};const p=s.inner.reduce((c,d)=>{const f=d.path||"";return c[f]||(c[f]={errors:[],path:f}),c[f].errors.push(...d.errors),c},{});return{errors:Object.values(p)}}}}}async function Mr(e,t){const n=await(K(t.rules)?t.rules:At(t.rules)).parse(e,{formData:t.formData}),u=[];for(const s of n.errors)s.errors.length&&u.push(...s.errors);return{value:n.value,errors:u}}async function Dr(e,t,r){const n=hr(r.name);if(!n)throw new Error(`No such validator '${r.name}' exists.`);const u=Ur(r.params,e.formData),s={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},r),{params:u})},p=await n(t,u,s);return typeof p=="string"?{error:p}:{error:p?void 0:kt(s)}}function kt(e){const t=le().generateMessage;return t?t(e):"Field is invalid"}function Ur(e,t){const r=n=>Or(n)?n(t):n;return Array.isArray(e)?e.map(r):Object.keys(e).reduce((n,u)=>(n[u]=r(e[u]),n),{})}async function zr(e,t){const n=await(K(e)?e:At(e)).parse(_(t),{formData:_(t)}),u={},s={};for(const p of n.errors){const c=p.errors,d=(p.path||"").replace(/\["(\d+)"\]/g,(f,v)=>`[${v}]`);u[d]={valid:!c.length,errors:c},c.length&&(s[d]=c[0])}return{valid:!n.errors.length,results:u,errors:s,values:n.value,source:"schema"}}async function Lr(e,t,r){const u=R(e).map(async f=>{var v,P,S;const j=(v=r==null?void 0:r.names)===null||v===void 0?void 0:v[f],F=await Br(W(t,f),e[f],{name:(j==null?void 0:j.name)||f,label:j==null?void 0:j.label,values:t,bails:(S=(P=r==null?void 0:r.bailsMap)===null||P===void 0?void 0:P[f])!==null&&S!==void 0?S:!0});return Object.assign(Object.assign({},F),{path:f})});let s=!0;const p=await Promise.all(u),c={},d={};for(const f of p)c[f.path]={valid:f.valid,errors:f.errors},f.valid||(s=!1,d[f.path]=f.errors[0]);return{valid:s,results:c,errors:d,source:"schema"}}let qr=0;const me=["bails","fieldsCount","id","multiple","type","validate"];function Ct(e){const t=(e==null?void 0:e.initialValues)||{},r=Object.assign({},g(t)),n=b(e==null?void 0:e.validationSchema);return n&&K(n)&&$(n.cast)?_(n.cast(r)||{}):_(r)}function Wr(e){var t;const r=qr++,n=(e==null?void 0:e.name)||"Form";let u=0;const s=q(!1),p=q(!1),c=q(0),d=[],f=De(Ct(e)),v=q([]),P=q({}),S=q({}),j=Ar(()=>{S.value=v.value.reduce((l,i)=>(l[ve(g(i.path))]=i,l),{})});function F(l,i){const a=I(l);if(!a){typeof l=="string"&&(P.value[ve(l)]=pt(i));return}if(typeof l=="string"){const o=ve(l);P.value[o]&&delete P.value[o]}a.errors=pt(i),a.valid=!a.errors.length}function x(l){R(l).forEach(i=>{F(i,l[i])})}e!=null&&e.initialErrors&&x(e.initialErrors);const C=k(()=>{const l=v.value.reduce((i,a)=>(a.errors.length&&(i[g(a.path)]=a.errors),i),{});return Object.assign(Object.assign({},P.value),l)}),Y=k(()=>R(C.value).reduce((l,i)=>{const a=C.value[i];return a!=null&&a.length&&(l[i]=a[0]),l},{})),G=k(()=>v.value.reduce((l,i)=>(l[g(i.path)]={name:g(i.path)||"",label:i.label||""},l),{})),$t=k(()=>v.value.reduce((l,i)=>{var a;return l[g(i.path)]=(a=i.bails)!==null&&a!==void 0?a:!0,l},{})),Ge=Object.assign({},(e==null?void 0:e.initialErrors)||{}),Mt=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:Z,originalInitialValues:ee,setInitialValues:Dt}=Hr(v,f,e),Ut=Gr(v,f,ee,Y),He=k(()=>v.value.reduce((l,i)=>{const a=W(f,g(i.path));return L(l,g(i.path),a),l},{})),M=e==null?void 0:e.validationSchema;function oe(l,i){var a,o;const y=k(()=>W(Z.value,g(l))),h=S.value[g(l)],m=(i==null?void 0:i.type)==="checkbox"||(i==null?void 0:i.type)==="radio";if(h&&m){h.multiple=!0;const N=u++;return Array.isArray(h.id)?h.id.push(N):h.id=[h.id,N],h.fieldsCount++,h.__flags.pendingUnmount[N]=!1,h}const E=k(()=>W(f,g(l))),V=g(l),w=re.findIndex(N=>N===V);w!==-1&&re.splice(w,1);const O=k(()=>{var N,ne,ke,Ce;const Ie=g(M);if(K(Ie))return(ne=(N=Ie.describe)===null||N===void 0?void 0:N.call(Ie,g(l)).required)!==null&&ne!==void 0?ne:!1;const Te=g(i==null?void 0:i.schema);return K(Te)&&(Ce=(ke=Te.describe)===null||ke===void 0?void 0:ke.call(Te).required)!==null&&Ce!==void 0?Ce:!1}),A=u++,T=De({id:A,path:l,touched:!1,pending:!1,valid:!0,validated:!!(!((a=Ge[V])===null||a===void 0)&&a.length),required:O,initialValue:y,errors:lr([]),bails:(o=i==null?void 0:i.bails)!==null&&o!==void 0?o:!1,label:i==null?void 0:i.label,type:(i==null?void 0:i.type)||"default",value:E,multiple:!1,__flags:{pendingUnmount:{[A]:!1},pendingReset:!1},fieldsCount:1,validate:i==null?void 0:i.validate,dirty:k(()=>!ue(b(E),b(y)))});return v.value.push(T),S.value[V]=T,j(),Y.value[V]&&!Ge[V]&&D(()=>{J(V,{mode:"silent"})}),he(l)&&et(l,N=>{j();const ne=_(E.value);S.value[N]=T,D(()=>{L(f,N,ne)})}),T}const zt=vt(Xe,5),Lt=vt(Xe,5),Ke=wr(async l=>await(l==="silent"?zt():Lt()),(l,[i])=>{const a=R(U.errorBag.value),y=[...new Set([...R(l.results),...v.value.map(h=>h.path),...a])].sort().reduce((h,m)=>{var E;const V=m,w=I(V)||qt(V),O=((E=l.results[V])===null||E===void 0?void 0:E.errors)||[],A=g(w==null?void 0:w.path)||V,T=Kr({errors:O,valid:!O.length},h.results[A]);return h.results[A]=T,T.valid||(h.errors[A]=T.errors[0]),w&&P.value[A]&&delete P.value[A],w?(w.valid=T.valid,i==="silent"||i==="validated-only"&&!w.validated||F(w,T.errors),h):(F(A,O),h)},{valid:l.valid,results:{},errors:{},source:l.source});return l.values&&(y.values=l.values,y.source=l.source),R(y.results).forEach(h=>{var m;const E=I(h);E&&i!=="silent"&&(i==="validated-only"&&!E.validated||F(E,(m=y.results[h])===null||m===void 0?void 0:m.errors))}),y});function te(l){v.value.forEach(l)}function I(l){const i=typeof l=="string"?ve(l):l;return typeof i=="string"?S.value[i]:i}function qt(l){return v.value.filter(a=>l.startsWith(g(a.path))).reduce((a,o)=>a?o.path.length>a.path.length?o:a:o,void 0)}let re=[],ce;function Wt(l){return re.push(l),ce||(ce=D(()=>{[...re].sort().reverse().forEach(a=>{dt(f,a)}),re=[],ce=null})),ce}function Ye(l){return function(a,o){return function(h){return h instanceof Event&&(h.preventDefault(),h.stopPropagation()),te(m=>m.touched=!0),s.value=!0,c.value++,Q().then(m=>{const E=_(f);if(m.valid&&typeof a=="function"){const V=_(He.value);let w=l?V:E;return m.values&&(w=m.source==="schema"?m.values:Object.assign({},w,m.values)),a(w,{evt:h,controlledValues:V,setErrors:x,setFieldError:F,setTouched:Pe,setFieldTouched:fe,setValues:Ee,setFieldValue:H,resetForm:Ve,resetField:Je})}!m.valid&&typeof o=="function"&&o({values:E,evt:h,errors:m.errors,results:m.results})}).then(m=>(s.value=!1,m),m=>{throw s.value=!1,m})}}}const je=Ye(!1);je.withControlled=Ye(!0);function Gt(l,i){const a=v.value.findIndex(y=>y.path===l&&(Array.isArray(y.id)?y.id.includes(i):y.id===i)),o=v.value[a];if(!(a===-1||!o)){if(D(()=>{J(l,{mode:"silent",warn:!1})}),o.multiple&&o.fieldsCount&&o.fieldsCount--,Array.isArray(o.id)){const y=o.id.indexOf(i);y>=0&&o.id.splice(y,1),delete o.__flags.pendingUnmount[i]}(!o.multiple||o.fieldsCount<=0)&&(v.value.splice(a,1),Qe(l),j(),delete S.value[l])}}function Ht(l){R(S.value).forEach(i=>{i.startsWith(l)&&delete S.value[i]}),v.value=v.value.filter(i=>!i.path.startsWith(l)),D(()=>{j()})}const U={name:n,formId:r,values:f,controlledValues:He,errorBag:C,errors:Y,schema:M,submitCount:c,meta:Ut,isSubmitting:s,isValidating:p,fieldArrays:d,keepValuesOnUnmount:Mt,validateSchema:b(M)?Ke:void 0,validate:Q,setFieldError:F,validateField:J,setFieldValue:H,setValues:Ee,setErrors:x,setFieldTouched:fe,setTouched:Pe,resetForm:Ve,resetField:Je,handleSubmit:je,useFieldModel:er,defineInputBinds:tr,defineComponentBinds:rr,defineField:Ae,stageInitialValue:Xt,unsetInitialValue:Qe,setFieldInitialValue:we,createPathState:oe,getPathState:I,unsetPathValue:Wt,removePathState:Gt,initialValues:Z,getAllPathStates:()=>v.value,destroyPath:Ht,isFieldTouched:Yt,isFieldDirty:Jt,isFieldValid:Qt};function H(l,i,a=!0){const o=_(i),y=typeof l=="string"?l:l.path;I(y)||oe(y),L(f,y,o),a&&J(y)}function Kt(l,i=!0){R(f).forEach(a=>{delete f[a]}),R(l).forEach(a=>{H(a,l[a],!1)}),i&&Q()}function Ee(l,i=!0){se(f,l),d.forEach(a=>a&&a.reset()),i&&Q()}function Se(l,i){const a=I(g(l))||oe(l);return k({get(){return a.value},set(o){var y;const h=g(l);H(h,o,(y=g(i))!==null&&y!==void 0?y:!1)}})}function fe(l,i){const a=I(l);a&&(a.touched=i)}function Yt(l){const i=I(l);return i?i.touched:v.value.filter(a=>a.path.startsWith(l)).some(a=>a.touched)}function Jt(l){const i=I(l);return i?i.dirty:v.value.filter(a=>a.path.startsWith(l)).some(a=>a.dirty)}function Qt(l){const i=I(l);return i?i.valid:v.value.filter(a=>a.path.startsWith(l)).every(a=>a.valid)}function Pe(l){if(typeof l=="boolean"){te(i=>{i.touched=l});return}R(l).forEach(i=>{fe(i,!!l[i])})}function Je(l,i){var a;const o=i&&"value"in i?i.value:W(Z.value,l),y=I(l);y&&(y.__flags.pendingReset=!0),we(l,_(o),!0),H(l,o,!1),fe(l,(a=i==null?void 0:i.touched)!==null&&a!==void 0?a:!1),F(l,(i==null?void 0:i.errors)||[]),D(()=>{y&&(y.__flags.pendingReset=!1)})}function Ve(l,i){let a=_(l!=null&&l.values?l.values:ee.value);a=i!=null&&i.force?a:se(ee.value,a),a=K(M)&&$(M.cast)?M.cast(a):a,Dt(a,{force:i==null?void 0:i.force}),te(o=>{var y;o.__flags.pendingReset=!0,o.validated=!1,o.touched=((y=l==null?void 0:l.touched)===null||y===void 0?void 0:y[g(o.path)])||!1,H(g(o.path),W(a,g(o.path)),!1),F(g(o.path),void 0)}),i!=null&&i.force?Kt(a,!1):Ee(a,!1),x((l==null?void 0:l.errors)||{}),c.value=(l==null?void 0:l.submitCount)||0,D(()=>{Q({mode:"silent"}),te(o=>{o.__flags.pendingReset=!1})})}async function Q(l){const i=(l==null?void 0:l.mode)||"force";if(i==="force"&&te(m=>m.validated=!0),U.validateSchema)return U.validateSchema(i);p.value=!0;const a=await Promise.all(v.value.map(m=>m.validate?m.validate(l).then(E=>({key:g(m.path),valid:E.valid,errors:E.errors,value:E.value})):Promise.resolve({key:g(m.path),valid:!0,errors:[],value:void 0})));p.value=!1;const o={},y={},h={};for(const m of a)o[m.key]={valid:m.valid,errors:m.errors},m.value&&L(h,m.key,m.value),m.errors.length&&(y[m.key]=m.errors[0]);return{valid:a.every(m=>m.valid),results:o,errors:y,values:h,source:"fields"}}async function J(l,i){var a;const o=I(l);if(o&&(i==null?void 0:i.mode)!=="silent"&&(o.validated=!0),M){const{results:y}=await Ke((i==null?void 0:i.mode)||"validated-only");return y[l]||{errors:[],valid:!0}}return o!=null&&o.validate?o.validate(i):(!o&&(a=i==null?void 0:i.warn),Promise.resolve({errors:[],valid:!0}))}function Qe(l){dt(Z.value,l)}function Xt(l,i,a=!1){we(l,i),L(f,l,i),a&&!(e!=null&&e.initialValues)&&L(ee.value,l,_(i))}function we(l,i,a=!1){L(Z.value,l,_(i)),a&&L(ee.value,l,_(i))}async function Xe(){const l=b(M);if(!l)return{valid:!0,results:{},errors:{},source:"none"};p.value=!0;const i=St(l)||K(l)?await zr(l,f):await Lr(l,f,{names:G.value,bailsMap:$t.value});return p.value=!1,i}const Zt=je((l,{evt:i})=>{Vr(i)&&i.target.submit()});jt(()=>{if(e!=null&&e.initialErrors&&x(e.initialErrors),e!=null&&e.initialTouched&&Pe(e.initialTouched),e!=null&&e.validateOnMount){Q();return}U.validateSchema&&U.validateSchema("silent")}),he(M)&&et(M,()=>{var l;(l=U.validateSchema)===null||l===void 0||l.call(U,"validated-only")}),tt(gr,U);function Ae(l,i){const a=$(i)||i==null?void 0:i.label,o=I(g(l))||oe(l,{label:a}),y=()=>$(i)?i(pe(o,me)):i||{};function h(){var O;o.touched=!0,((O=y().validateOnBlur)!==null&&O!==void 0?O:le().validateOnBlur)&&J(g(o.path))}function m(){var O;((O=y().validateOnInput)!==null&&O!==void 0?O:le().validateOnInput)&&D(()=>{J(g(o.path))})}function E(){var O;((O=y().validateOnChange)!==null&&O!==void 0?O:le().validateOnChange)&&D(()=>{J(g(o.path))})}const V=k(()=>{const O={onChange:E,onInput:m,onBlur:h};return $(i)?Object.assign(Object.assign({},O),i(pe(o,me)).props||{}):i!=null&&i.props?Object.assign(Object.assign({},O),i.props(pe(o,me))):O});return[Se(l,()=>{var O,A,T;return(T=(O=y().validateOnModelUpdate)!==null&&O!==void 0?O:(A=le())===null||A===void 0?void 0:A.validateOnModelUpdate)!==null&&T!==void 0?T:!0}),V]}function er(l){return Array.isArray(l)?l.map(i=>Se(i,!0)):Se(l)}function tr(l,i){const[a,o]=Ae(l,i);function y(){o.value.onBlur()}function h(E){const V=mt(E);H(g(l),V,!1),o.value.onInput()}function m(E){const V=mt(E);H(g(l),V,!1),o.value.onChange()}return k(()=>Object.assign(Object.assign({},o.value),{onBlur:y,onInput:h,onChange:m,value:a.value}))}function rr(l,i){const[a,o]=Ae(l,i),y=I(g(l));function h(m){a.value=m}return k(()=>{const m=$(i)?i(pe(y,me)):i||{};return Object.assign({[m.model||"modelValue"]:a.value,[`onUpdate:${m.model||"modelValue"}`]:h},o.value)})}const Ze=Object.assign(Object.assign({},U),{values:nr(f),handleReset:()=>Ve(),submitForm:Zt});return tt(br,Ze),Ze}function Gr(e,t,r,n){const u={touched:"some",pending:"some",valid:"every"},s=k(()=>!ue(t,b(r)));function p(){const d=e.value;return R(u).reduce((f,v)=>{const P=u[v];return f[v]=d[P](S=>S[v]),f},{})}const c=De(p());return ir(()=>{const d=p();c.touched=d.touched,c.valid=d.valid,c.pending=d.pending}),k(()=>Object.assign(Object.assign({initialValues:b(r)},c),{valid:c.valid&&!R(n.value).length,dirty:s.value}))}function Hr(e,t,r){const n=Ct(r),u=q(n),s=q(_(n));function p(c,d){d!=null&&d.force?(u.value=_(c),s.value=_(c)):(u.value=se(_(u.value)||{},_(c)),s.value=se(_(s.value)||{},_(c))),d!=null&&d.updateFields&&e.value.forEach(f=>{if(f.touched)return;const P=W(u.value,g(f.path));L(t,g(f.path),_(P))})}return{initialValues:u,originalInitialValues:s,setInitialValues:p}}function Kr(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}var z;function We(e){return{lang:(e==null?void 0:e.lang)??(z==null?void 0:z.lang),message:e==null?void 0:e.message,abortEarly:(e==null?void 0:e.abortEarly)??(z==null?void 0:z.abortEarly),abortPipeEarly:(e==null?void 0:e.abortPipeEarly)??(z==null?void 0:z.abortPipeEarly)}}var Re;function Yr(e){return Re==null?void 0:Re.get(e)}var $e;function Jr(e){return $e==null?void 0:$e.get(e)}var Me;function Qr(e,t){var r;return(r=Me==null?void 0:Me.get(e))==null?void 0:r.get(t)}function Xr(e){var r,n;const t=typeof e;return t==="string"?`"${e}"`:t==="number"||t==="bigint"||t==="boolean"?`${e}`:t==="object"||t==="function"?(e&&((n=(r=Object.getPrototypeOf(e))==null?void 0:r.constructor)==null?void 0:n.name))??"null":t}function _e(e,t,r,n,u){const s=u&&"input"in u?u.input:r.value,p=(u==null?void 0:u.expected)??e.expects??null,c=(u==null?void 0:u.received)??Xr(s),d={kind:e.kind,type:e.type,input:s,expected:p,received:c,message:`Invalid ${t}: ${p?`Expected ${p} but r`:"R"}eceived ${c}`,requirement:e.requirement,path:u==null?void 0:u.path,issues:u==null?void 0:u.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},f=e.kind==="schema",v=(u==null?void 0:u.message)??e.message??Qr(e.reference,d.lang)??(f?Jr(d.lang):null)??n.message??Yr(d.lang);v&&(d.message=typeof v=="function"?v(d):v),f&&(r.typed=!1),r.issues?r.issues.push(d):r.issues=[d]}function Oe(e){return{version:1,vendor:"valibot",validate(t){return e["~run"]({value:t},We())}}}function Zr(e){if(e.path){let t="";for(const r of e.path)if(typeof r.key=="string"||typeof r.key=="number")t?t+=`.${r.key}`:t+=r.key;else return null;return t}return null}function Ue(e){return{kind:"validation",type:"non_empty",reference:Ue,async:!1,expects:"!0",message:e,"~run"(t,r){return t.typed&&t.value.length===0&&_e(this,"length",t,r,{received:"0"}),t}}}function It(e){return{kind:"validation",type:"url",reference:It,async:!1,expects:null,requirement(t){try{return new URL(t),!0}catch{return!1}},message:e,"~run"(t,r){return t.typed&&!this.requirement(t.value)&&_e(this,"URL",t,r),t}}}function Tt(e,t,r){return typeof e.default=="function"?e.default(t,r):e.default}function Ft(e,t){return{kind:"schema",type:"object",reference:Ft,expects:"Object",async:!1,entries:e,message:t,get"~standard"(){return Oe(this)},"~run"(r,n){var s;const u=r.value;if(u&&typeof u=="object"){r.typed=!0,r.value={};for(const p in this.entries){const c=u[p],d=this.entries[p]["~run"]({value:c},n);if(d.issues){const f={type:"object",origin:"value",input:u,key:p,value:c};for(const v of d.issues)v.path?v.path.unshift(f):v.path=[f],(s=r.issues)==null||s.push(v);if(r.issues||(r.issues=d.issues),n.abortEarly){r.typed=!1;break}}d.typed||(r.typed=!1),(d.value!==void 0||p in u)&&(r.value[p]=d.value)}}else _e(this,"type",r,n);return r}}}function xt(e,t){return{kind:"schema",type:"optional",reference:xt,expects:`(${e.expects} | undefined)`,async:!1,wrapped:e,default:t,get"~standard"(){return Oe(this)},"~run"(r,n){return r.value===void 0&&(this.default!==void 0&&(r.value=Tt(this,r,n)),r.value===void 0)?(r.typed=!0,r):this.wrapped["~run"](r,n)}}}function ze(e){return{kind:"schema",type:"string",reference:ze,expects:"string",async:!1,message:e,get"~standard"(){return Oe(this)},"~run"(t,r){return typeof t.value=="string"?t.typed=!0:_e(this,"type",t,r),t}}}function ht(...e){return{...e[0],pipe:e,get"~standard"(){return Oe(this)},"~run"(t,r){for(const n of e)if(n.kind!=="metadata"){if(t.issues&&(n.kind==="schema"||n.kind==="transformation")){t.typed=!1;break}(!t.issues||!r.abortEarly&&!r.abortPipeEarly)&&(t=n["~run"](t,r))}return t}}}function en(e,t,r){const n=e["~run"]({value:t},We(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}async function tn(e,t,r){const n=await e["~run"]({value:t},We(r));return{typed:n.typed,success:!n.issues,output:n.value,issues:n.issues}}/**
  * vee-validate v4.15.1
  * (c) 2025 Abdelrahman Awad
  * @license MIT
  */const ge=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function Nt(e){return Number(e)>=0}function rn(e){return typeof e=="object"&&e!==null}function nn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function gt(e){if(!rn(e)||nn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Bt(e,t){return Object.keys(t).forEach(r=>{if(gt(t[r])&&gt(e[r])){e[r]||(e[r]={}),Bt(e[r],t[r]);return}e[r]=t[r]}),e}function ln(e){const t=e.split(".");if(!t.length)return"";let r=String(t[0]);for(let n=1;n<t.length;n++){if(Nt(t[n])){r+=`[${t[n]}]`;continue}r+=`.${t[n]}`}return r}function un(e,t){return{__type:"VVTypedSchema",async parse(n){const u=await tn(e,n,t);if(u.success)return{value:u.output,errors:[]};const s={};return Rt(u.issues,s),{errors:Object.values(s)}},cast(n){if(e.async)return n;const u=en(e,n,t);if(u.success)return u.output;const s=Tt(xt(e));return ge(s)&&ge(n)?Bt(s,n):n},describe(n){try{if(!n)return{required:!bt(e),exists:!0};const u=Le(n,e);return u?{required:!bt(u),exists:!0}:{required:!1,exists:!1}}catch{return{required:!1,exists:!1}}}}}function Rt(e,t){e.forEach(r=>{const n=ln(Zr(r)||"");r.issues&&(Rt(r.issues.flatMap(u=>u.issues||[]),t),!n)||(t[n]||(t[n]={errors:[],path:n}),t[n].errors.push(r.message))})}function Le(e,t){var r,n,u,s;if(_t(t))return(r=t.options.map(d=>Le(e,d)).find(Boolean))!==null&&r!==void 0?r:null;if(Ot(t))return(n=t.options.map(d=>Le(e,d)).find(Boolean))!==null&&n!==void 0?n:null;if(!ye(t))return null;if(ae(e))return t.entries[be(e)];const p=(e||"").split(/\.|\[(\d+)\]/).filter(Boolean);let c=t;for(let d=0;d<=p.length;d++){const f=p[d];if(!f||!c)return c;if(_t(c)&&(c=(u=c.options.find(v=>ye(v)&&v.entries[f]))!==null&&u!==void 0?u:c),Ot(c)&&(c=(s=c.options.find(v=>ye(v)&&v.entries[f]))!==null&&s!==void 0?s:c),ye(c)){c=c.entries[f]||null;continue}Nt(f)&&sn(c)&&(c=c.item)}return null}function bt(e){return e.type==="optional"}function sn(e){return ge(e)&&"item"in e}function ye(e){return ge(e)&&"entries"in e}function _t(e){return e.type==="intersect"}function Ot(e){return e.type==="variant"}const an={class:"flex flex-1 flex-col items-center justify-center gap-5"},on={class:"flex flex-col items-center justify-between gap-3"},cn={class:"flex w-full flex-col items-center justify-between gap-10 rounded-lg bg-gray-300 p-4 dark:bg-gray-800"},fn={class:"flex w-full flex-col gap-3"},dn={class:"flex w-full flex-col gap-1"},vn={class:"flex items-center justify-between"},pn={for:"nickname"},mn=["textContent"],yn={class:"flex w-full flex-col gap-1"},hn={for:"profileUrl"},gn=["textContent"],wn=ur({__name:"ProfileTab",props:{metadata:{},changeWindowTitle:{type:Function}},setup(e){const t=sr(),r=ar(),n=or(),u=e,s=fr("settings"),p=q(!1),{errors:c,defineField:d,handleSubmit:f,setFieldError:v,resetForm:P}=Wr({validationSchema:un(Ft({nickname:ht(ze(n.t("settings_profile_nickname_a_string")),Ue(n.t("settings_profile_nickname_not_empty"))),profilePicture:ht(ze(n.t("settings_profile_profile_picture_a_string")),Ue(n.t("settings_profile_profile_picture_not_empty")),It(n.t("settings_profile_profile_picture_valid_url")))})),initialValues:{nickname:r.username,profilePicture:r.profilePicture}}),[S]=d("nickname"),[j]=d("profilePicture"),F=f(async x=>{if(r.username===x.nickname&&r.profilePicture===x.profilePicture)return;p.value=!0;const{data:C}=await cr("updateUserSettings",{method:"POST",body:JSON.stringify({nickname:x.nickname,profile_picture:x.profilePicture})},void 0,{success:!0,error:void 0}),{success:Y,error:G}=C.value;if(p.value=!1,!Y){v("nickname",G);return}t.show({summary:n.t("settings_profile_updated_title"),detail:n.t("settings_profile_updated_description")}),s.emit("updated")});return jt(()=>{u.changeWindowTitle(n.t("settings_profile_title"))}),(x,C)=>{const Y=dr("tooltip");return de(),rt("div",an,[B("div",on,[b(r).profilePicture?(de(),nt(b(ut),{key:1,image:b(r).profilePicture,size:"xlarge"},null,8,["image"])):(de(),nt(b(ut),{key:0,icon:"pi pi-user",size:"xlarge",class:"border"})),B("span",null,ie(b(r).username),1)]),B("div",cn,[B("div",fn,[B("div",dn,[B("div",vn,[B("label",pn,ie(b(n).t("settings_profile_nickname_field_label")),1),xe((de(),rt("a",{href:"#",onClick:C[0]||(C[0]=it(G=>b(P)(),["prevent"]))},C[3]||(C[3]=[B("i",{class:"pi pi-refresh text-xs"},null,-1)]))),[[Y,"Reset",void 0,{top:!0}]])]),Fe(b(st),{id:"nickname",fluid:"","aria-describedby":"nickname-help",placeholder:b(n).t("settings_profile_nickname_field_placeholder"),modelValue:b(S),"onUpdate:modelValue":C[1]||(C[1]=G=>he(S)?S.value=G:null),invalid:!!b(c).nickname},null,8,["placeholder","modelValue","invalid"]),xe(B("small",{class:"text-red-200",textContent:ie(b(c).nickname)},null,8,mn),[[lt,b(c).nickname]])]),B("div",yn,[B("label",hn,ie(b(n).t("settings_profile_profile_picture_field_label")),1),Fe(b(st),{id:"profilePicture",fluid:"","aria-describedby":"profile-picture-url",placeholder:b(n).t("settings_profile_profile_picture_field_placeholder"),modelValue:b(j),"onUpdate:modelValue":C[2]||(C[2]=G=>he(j)?j.value=G:null),invalid:!!b(c).profilePicture},null,8,["placeholder","modelValue","invalid"]),xe(B("small",{class:"text-red-200",textContent:ie(b(c).profilePicture)},null,8,gn),[[lt,b(c).profilePicture]])])]),Fe(b(vr),{onClick:it(b(F),["prevent"]),label:b(n).t("settings_profile_save_button"),fluid:"",loading:p.value,disabled:p.value||b(r).username===b(S)&&b(r).profilePicture===b(j)},null,8,["onClick","label","loading","disabled"])])])}}});export{wn as default};

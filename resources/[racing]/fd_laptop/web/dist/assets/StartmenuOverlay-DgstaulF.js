import{C as L,a4 as x,G as P,E as S,I,a3 as N,J as V,i as Y,aY as F,c as a,l as H,o as n,a as t,k as y,M as l,a2 as u,n as R,F as h,z as w,u as C}from"./index-D8HCwQPV.js";import{i as T}from"./url.utils-BHk-itt_.js";import{s as X}from"./index-D159Cmw9.js";import{s as _}from"./index-CDp2KP61.js";import"./index-CXuff9l5.js";import"./index-DYfg_i5Y.js";import"./index-CY9VzOE2.js";import"./index-CG8GTDOY.js";const j={class:"flex flex-col justify-between px-2 py-4"},q={class:"flex flex-col gap-2 hover:cursor-pointer"},z={class:"flex min-w-56 bg-gray-200/50 px-2 py-4 dark:bg-gray-900/50"},G={class:"flex w-full flex-col gap-3 overflow-y-auto scrollbar-thin scrollbar-track-rounded-[100px] scrollbar-thumb-rounded-[100px] scrollbar-corner-rounded-[100px] dark:scrollbar-track-gray-500/80 dark:scrollbar-thumb-gray-400/80"},J={class:"flex flex-col"},U={class:"mb-2 ml-5 text-xs"},K=["onClick","onContextmenu"],Q=["src","alt"],W={key:1,class:"pi pi-question w-4 text-xs"},Z={class:"text-sm"},ie=L({__name:"StartmenuOverlay",props:{isOpen:{type:Boolean,default:!1},parent:{type:HTMLDivElement}},emits:["close"],setup(d,{emit:M}){const m=d,b=x(),i=M,c=P(),k=S(),B=I(),$=N(),v=x(),g=V("contextMenu"),D=Y(()=>[{label:$.t("create_shortcut_label"),command:()=>{c.addDesktopIcon(v.value),i("close")}}]),O=(s,e)=>{if(s.stopPropagation(),s.preventDefault(),!m.parent||!g.value||!c.apps.find(p=>p.id===e))return;const o=m.parent.getBoundingClientRect(),r={pageX:s.pageX-o.left,pageY:s.pageY-o.top,stopPropagation:()=>{},preventDefault:()=>{}};v.value=e,g.value.show(r)},A=s=>{c.open(s.id),i("close")},E=()=>{i("close"),B.close(!0)};F(b,()=>{i("close")},{ignore:["#start-menu-button"]});const f=s=>{i("close"),c.open("settings",{tab:s||void 0})};return(s,e)=>d.isOpen?(n(),a("div",{key:0,ref_key:"overlay",ref:b,class:"absolute bottom-16 left-0 flex h-96 overflow-hidden rounded-lg bg-gray-100/50 backdrop-blur-xl dark:bg-gray-800/50"},[t("div",j,[l(k).profilePicture?(n(),y(l(_),{key:1,image:l(k).profilePicture,onClick:e[1]||(e[1]=u(o=>f("profile"),["prevent"])),class:"hover:cursor-pointer"},null,8,["image"])):(n(),y(l(_),{key:0,icon:"pi pi-user",onClick:e[0]||(e[0]=u(o=>f("profile"),["prevent"])),class:"hover:cursor-pointer"})),t("div",q,[t("div",{onClick:e[2]||(e[2]=u(o=>f(),["prevent"])),class:"group relative rounded hover:bg-white/50 focus:outline-none active:bg-white/75 dark:hover:bg-black/25 dark:active:bg-black/50"},e[5]||(e[5]=[t("span",{class:"block p-2 transition duration-75 ease-linear active:scale-90"},[t("i",{class:"pi pi-cog"})],-1)])),t("div",{onClick:e[3]||(e[3]=u(o=>E(),["prevent"])),class:"group relative rounded hover:bg-white/50 focus:outline-none active:bg-white/75 dark:hover:bg-black/25 dark:active:bg-black/50"},e[6]||(e[6]=[t("span",{class:"block p-2 duration-75 active:scale-90"},[t("i",{class:"pi pi-sign-out"})],-1)]))])]),t("div",z,[t("div",G,[(n(!0),a(h,null,w(l(c).userApps,o=>(n(),a("div",J,[t("span",U,C(o.letter),1),(n(!0),a(h,null,w(o.data,r=>(n(),a("button",{type:"button",onClick:p=>A(r),onContextmenu:p=>O(p,r.id),class:"group relative flex items-center gap-2 rounded px-4 py-1 hover:bg-white/50 focus:outline-none active:bg-white/75 dark:hover:bg-black/25 dark:active:bg-black/50"},[r.icon?(n(),a("img",{key:0,class:"w-4",src:l(T)(r.icon),alt:r.name},null,8,Q)):(n(),a("i",W)),t("span",Z,C(r.name),1)],40,K))),256))]))),256))]),R(l(X),{ref_key:"contextMenu",ref:g,model:D.value,"append-to":d.parent,onBeforeHide:e[4]||(e[4]=o=>v.value=void 0)},null,8,["model","append-to"])])],512)):H("",!0)}});export{ie as default};
